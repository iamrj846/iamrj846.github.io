
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <title>How Do I Deploy a Kubernetes Cluster on Google Cloud GKE?</title>
            <meta name="description" content="Learn how to deploy a Kubernetes cluster on Google Cloud GKE with our step-by-step guide. Simplify your cloud journey today!">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Do I Deploy a Kubernetes Cluster on Google Cloud GKE?</h1>
                        </header>

                        <div class="blog-post-body">
                            <h1 id="deploying-a-kubernetes-cluster-on-google-cloud-gke">Deploying a
Kubernetes Cluster on Google Cloud GKE</h1>
<p>Deploying a Kubernetes cluster on Google Cloud GKE gives us a strong
platform for managing our container apps. GKE makes it easier to deploy,
manage, and grow these apps. It does many hard tasks automatically. This
lets us focus more on building our apps instead of handling the
infrastructure.</p>
<p>In this article, we will look at the important steps to deploy a
Kubernetes cluster on Google Cloud GKE. We will talk about what we need
before using GKE, how to set up Google Cloud SDK, the steps to create a
GKE cluster, how to set up networking, how to deploy our first app, how
to manage and grow our cluster, and best ways to secure our GKE
deployment. We will also share some common real-life uses for GKE. Here
are the topics we will cover:</p>
<ul>
<li>How to Effectively Deploy a Kubernetes Cluster on Google Cloud
GKE?</li>
<li>What Prerequisites Do I Need for GKE Deployment?</li>
<li>How Do I Set Up Google Cloud SDK for GKE?</li>
<li>What Are the Steps to Create a GKE Cluster?</li>
<li>How Do I Configure Networking for My GKE Cluster?</li>
<li>How Can I Deploy My First Application on GKE?</li>
<li>What Are Common Use Cases for GKE in Real Life?</li>
<li>How Do I Manage and Scale My GKE Cluster?</li>
<li>What Are Best Practices for Securing My GKE Deployment?</li>
<li>Frequently Asked Questions</li>
</ul>
<p>For more info about Kubernetes, we can read about <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">what
Kubernetes is and how it helps with container management</a> or <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">the
main parts of a Kubernetes cluster</a>. This can help us as we start our
GKE deployment journey.</p>
<h2 id="what-prerequisites-do-we-need-for-gke-deployment">What
Prerequisites Do We Need for GKE Deployment?</h2>
<p>To deploy a Kubernetes cluster on Google Cloud GKE (Google Kubernetes
Engine), we need to meet some important requirements:</p>
<ol type="1">
<li><strong>Google Cloud Account</strong>:
<ul>
<li>We must create a Google Cloud account if we do not have one. We can
visit <a href="https://cloud.google.com/">Google Cloud</a> to do
this.</li>
</ul></li>
<li><strong>Billing Enabled</strong>:
<ul>
<li>We should set up billing on our Google Cloud project. We can find
this in the Google Cloud Console under the “Billing” area.</li>
</ul></li>
<li><strong>Google Cloud SDK</strong>:
<ul>
<li>We need to install the Google Cloud SDK. This helps us interact with
GKE. We can follow the steps in the <a
href="https://cloud.google.com/sdk/docs/install">Google Cloud SDK
documentation</a> for installation.</li>
</ul></li>
<li><strong>gcloud Command-Line Tool</strong>:
<ul>
<li>We must have the <code>gcloud</code> command-line tool installed.
This tool comes with the Google Cloud SDK.</li>
</ul></li>
<li><strong>IAM Permissions</strong>:
<ul>
<li>We need some IAM roles for our user account:
<ul>
<li><code>Kubernetes Engine Admin</code></li>
<li><code>Service Account User</code></li>
<li><code>Viewer</code></li>
</ul></li>
</ul></li>
<li><strong>API Access</strong>:
<ul>
<li>We have to enable the Kubernetes Engine API for our project. We can
do this in the Google Cloud Console under “APIs &amp; Services”.</li>
</ul></li>
<li><strong>Current Project Setting</strong>:
<ul>
<li><p>We should set the Google Cloud project we want in our terminal.
We can use this command:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> config set project PROJECT_ID</span></code></pre></div>
<p>We replace <code>PROJECT_ID</code> with our real project ID.</p></li>
</ul></li>
<li><strong>Install kubectl</strong>:
<ul>
<li><p>We need to install <code>kubectl</code>, the command-line tool
for Kubernetes. We can do this with the command:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> components install kubectl</span></code></pre></div></li>
</ul></li>
<li><strong>Network Configuration</strong>:
<ul>
<li>We should learn about the networking needs like VPC, firewall rules,
and subnets.</li>
</ul></li>
</ol>
<p>When we meet these requirements, we will be ready to deploy and
manage our Kubernetes cluster on Google Cloud GKE. For more information
on Kubernetes management, we can check articles like <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">What
is Kubernetes and How Does it Simplify Container Management?</a>.</p>
<h2 id="how-do-we-set-up-google-cloud-sdk-for-gke">How Do We Set Up
Google Cloud SDK for GKE?</h2>
<p>To set up Google Cloud SDK for deploying a Kubernetes cluster on
Google Cloud GKE, we can follow these steps:</p>
<ol type="1">
<li><p><strong>Install Google Cloud SDK</strong>:</p>
<ul>
<li>We need to download the SDK from the <a
href="https://cloud.google.com/sdk/docs/install">Google Cloud SDK
installation page</a>.</li>
<li>Then, we follow the installation instructions for our operating
system.</li>
</ul></li>
<li><p><strong>Initialize the SDK</strong>: We open our terminal and run
this command to initialize the SDK:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> init</span></code></pre></div>
<p>This command will ask us to log in with our Google account and set
our project.</p></li>
<li><p><strong>Install Kubernetes Command-Line Tool (kubectl)</strong>:
We must make sure that <code>kubectl</code> is installed with the Google
Cloud SDK. We can install or update it with:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> components install kubectl</span></code></pre></div></li>
<li><p><strong>Configure Our Project</strong>: We need to set the active
project where we want to create our GKE cluster:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> config set project <span class="pp">[</span><span class="ss">PROJECT_ID</span><span class="pp">]</span></span></code></pre></div>
<p>We replace <code>[PROJECT_ID]</code> with our actual Google Cloud
project ID.</p></li>
<li><p><strong>Authenticate to Our Google Cloud Account</strong>: If we
have not logged in yet, we run:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> auth login</span></code></pre></div>
<p>This will open a browser for us to log in to our Google
account.</p></li>
<li><p><strong>Set Up Application Default Credentials</strong>: This
step allows our applications to log in with Google Cloud services:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> auth application-default login</span></code></pre></div></li>
<li><p><strong>Verify Our Setup</strong>: To make sure everything is set
up correctly, we can check the installed version of
<code>kubectl</code>:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> version <span class="at">--client</span></span></code></pre></div></li>
</ol>
<p>Now, our Google Cloud SDK is set up for GKE. We can create and manage
our Kubernetes clusters. If we need more information about the key parts
of a Kubernetes cluster, we can check this <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">article</a>.</p>
<h2 id="what-are-the-steps-to-create-a-gke-cluster">What Are the Steps
to Create a GKE Cluster?</h2>
<p>To create a Google Kubernetes Engine (GKE) cluster, we can follow
these easy steps:</p>
<ol type="1">
<li><p><strong>Enable the Google Kubernetes Engine API</strong>:<br />
First, we open the Cloud Console. Then, we enable the GKE API for our
project.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> services enable container.googleapis.com</span></code></pre></div></li>
<li><p><strong>Set Your Project</strong>:<br />
Next, we set the Google Cloud project where we want to create the GKE
cluster.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> config set project PROJECT_ID</span></code></pre></div></li>
<li><p><strong>Choose a Region or Zone</strong>:<br />
Now, we pick a region or zone for our GKE cluster. For example, if we
want to use <code>us-central1-a</code>, we can do this:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> config set compute/zone us-central1-a</span></code></pre></div></li>
<li><p><strong>Create the GKE Cluster</strong>:<br />
We can create the GKE cluster with this command. Just replace
<code>CLUSTER_NAME</code> and <code>NODE_COUNT</code> with what we
want.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> container clusters create CLUSTER_NAME <span class="at">--num-nodes</span><span class="op">=</span>NODE_COUNT</span></code></pre></div>
<p>For example, we can write:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> container clusters create my-cluster <span class="at">--num-nodes</span><span class="op">=</span>3</span></code></pre></div></li>
<li><p><strong>Get Authentication Credentials</strong>:<br />
After we create the cluster, we need to set up <code>kubectl</code> to
use the credentials for our new cluster.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> container clusters get-credentials CLUSTER_NAME</span></code></pre></div></li>
<li><p><strong>Verify the Cluster</strong>:<br />
Finally, we check the status of our cluster to make sure it is
running.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get nodes</span></code></pre></div></li>
</ol>
<p>This command will show the nodes in our GKE cluster. It helps us
confirm that everything is working well. For more details on Kubernetes
and its parts, we can look at <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">what
are the key components of a Kubernetes cluster</a>.</p>
<h2 id="how-do-we-configure-networking-for-our-gke-cluster">How Do We
Configure Networking for Our GKE Cluster?</h2>
<p>Configuring networking for our Google Kubernetes Engine (GKE) cluster
is very important. It helps our applications communicate with each other
and connect to the outside world. Here are the main parts and steps we
need to follow:</p>
<h3 id="vpc-configuration">VPC Configuration</h3>
<ol type="1">
<li><p><strong>Create a Virtual Private Cloud (VPC)</strong> if we do
not have one:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> compute networks create my-vpc <span class="at">--subnet-mode</span><span class="op">=</span>custom</span></code></pre></div></li>
<li><p><strong>Create a subnet</strong> inside our VPC:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> compute networks subnets create my-subnet <span class="dt">\</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--network</span><span class="op">=</span>my-vpc <span class="dt">\</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--region</span><span class="op">=</span>us-central1 <span class="dt">\</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--range</span><span class="op">=</span>10.0.0.0/24</span></code></pre></div></li>
</ol>
<h3 id="cluster-networking">Cluster Networking</h3>
<p>When we create our GKE cluster, we need to tell it about the VPC and
the subnet:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> container clusters create my-cluster <span class="dt">\</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--network</span><span class="op">=</span>my-vpc <span class="dt">\</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--subnetwork</span><span class="op">=</span>my-subnet <span class="dt">\</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--region</span><span class="op">=</span>us-central1</span></code></pre></div>
<h3 id="firewall-rules">Firewall Rules</h3>
<p>To let traffic reach our application, we must set up firewall
rules:</p>
<ol type="1">
<li><p><strong>Allow internal traffic</strong> between nodes:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> compute firewall-rules create allow-internal <span class="dt">\</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--network</span><span class="op">=</span>my-vpc <span class="dt">\</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--allow</span><span class="op">=</span>tcp,udp,icmp <span class="dt">\</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--source-ranges</span><span class="op">=</span>10.0.0.0/24</span></code></pre></div></li>
<li><p><strong>Allow external traffic</strong> to a certain port (like
HTTP on port 80):</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> compute firewall-rules create allow-http <span class="dt">\</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--network</span><span class="op">=</span>my-vpc <span class="dt">\</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--allow</span><span class="op">=</span>tcp:80 <span class="dt">\</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--source-ranges</span><span class="op">=</span>0.0.0.0/0</span></code></pre></div></li>
</ol>
<h3 id="load-balancing">Load Balancing</h3>
<p>To show our GKE applications, we can use a LoadBalancer service:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-service</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> LoadBalancer</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">targetPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">8080</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span></code></pre></div>
<p>Now we can deploy the service:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> my-service.yaml</span></code></pre></div>
<h3 id="ingress-configuration">Ingress Configuration</h3>
<p>For better traffic control, we set up an Ingress resource:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> networking.k8s.io/v1</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Ingress</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-ingress</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">rules</span><span class="kw">:</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">host</span><span class="kw">:</span><span class="at"> my-app.example.com</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">http</span><span class="kw">:</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">paths</span><span class="kw">:</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="kw">-</span><span class="at"> </span><span class="fu">path</span><span class="kw">:</span><span class="at"> /</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">pathType</span><span class="kw">:</span><span class="at"> Prefix</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">backend</span><span class="kw">:</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">service</span><span class="kw">:</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="at">                </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-service</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="at">                </span><span class="fu">port</span><span class="kw">:</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="at">                  </span><span class="fu">number</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div>
<p>Deploy the Ingress with:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> my-ingress.yaml</span></code></pre></div>
<h3 id="additional-networking-features">Additional Networking
Features</h3>
<ul>
<li><p><strong>Private Clusters:</strong> For better security, we can
make private GKE clusters. In this case, nodes do not get public IP
addresses.</p></li>
<li><p><strong>Network Policies:</strong> We can define rules to manage
traffic between pods. This helps us with security.</p></li>
<li><p><strong>Cloud DNS:</strong> We can use Cloud DNS to manage domain
names and send traffic to our applications.</p></li>
</ul>
<p>For more information on Kubernetes and its networking parts, we can
check out <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">What
Are the Key Components of a Kubernetes Cluster?</a>.</p>
<h2 id="how-can-we-deploy-our-first-application-on-gke">How Can We
Deploy Our First Application on GKE?</h2>
<p>To deploy our first application on Google Kubernetes Engine (GKE), we
can follow these steps.</p>
<ol type="1">
<li><p><strong>Create a Docker Image</strong>: First, we need to package
our application. Here is a simple Dockerfile for a Node.js
application:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> node:14</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">WORKDIR</span> /usr/src/app</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> package*.json ./</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">npm</span> install</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> . .</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="kw">EXPOSE</span> 8080</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;node&quot;</span>, <span class="st">&quot;app.js&quot;</span>]</span></code></pre></div>
<p>Next, we build the Docker image:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> gcr.io/YOUR_PROJECT_ID/my-app:v1 .</span></code></pre></div></li>
<li><p><strong>Push the Docker Image to Google Container
Registry</strong>:</p>
<p>We need to log in to Google Cloud:</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> auth configure-docker</span></code></pre></div>
<p>Now, we can push the image:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> push gcr.io/YOUR_PROJECT_ID/my-app:v1</span></code></pre></div></li>
<li><p><strong>Create a Deployment</strong>: We use <code>kubectl</code>
to make a deployment that uses our container image:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create deployment my-app <span class="at">--image</span><span class="op">=</span>gcr.io/YOUR_PROJECT_ID/my-app:v1</span></code></pre></div></li>
<li><p><strong>Expose the Deployment</strong>: To make our application
available, we expose it as a service:</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> expose deployment my-app <span class="at">--type</span><span class="op">=</span>LoadBalancer <span class="at">--port</span> 8080</span></code></pre></div></li>
<li><p><strong>Get the External IP</strong>: After a little while, we
can find the external IP address of our service:</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get services</span></code></pre></div>
<p>We should look for the external IP address under the
<code>EXTERNAL-IP</code> column.</p></li>
<li><p><strong>Access Your Application</strong>: Now, we can open a web
browser and go to <code>http://&lt;EXTERNAL-IP&gt;:8080</code> to see
our application running.</p></li>
</ol>
<p>For more details about Kubernetes applications and how to manage
them, we can check <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">“What
is Kubernetes and How Does It Simplify Container Management?”</a>.</p>
<h2 id="what-are-common-use-cases-for-gke-in-real-life">What Are Common
Use Cases for GKE in Real Life?</h2>
<p>Google Kubernetes Engine (GKE) is a strong platform for deploying and
managing container apps. Here are some common ways we can use GKE in
real life:</p>
<ol type="1">
<li><strong>Microservices Architecture</strong>:
<ul>
<li>GKE is great for deploying microservices. It helps teams to build,
launch, and grow each service on its own.</li>
<li>Example: A retail app with different services for managing
inventory, user login, and handling orders.</li>
</ul></li>
<li><strong>Continuous Integration/Continuous Deployment
(CI/CD)</strong>:
<ul>
<li><p>GKE works well with CI/CD tools. It helps us to test and launch
apps automatically.</p></li>
<li><p>Example Configuration:</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> ci-cd-pipeline</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> jenkins</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> jenkins/jenkins:lts</span></span></code></pre></div></li>
</ul></li>
<li><strong>Machine Learning Workloads</strong>:
<ul>
<li>GKE can handle complex machine learning tasks. We can use GPUs to
train models.</li>
<li>Example: Running TensorFlow Serving on GKE for real-time model
predictions.</li>
</ul></li>
<li><strong>Web Applications</strong>:
<ul>
<li><p>We can scale web apps based on traffic. This ensures they are
always available and reliable.</p></li>
<li><p>Example: A web app that automatically changes pods based on CPU
use.</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> autoscaling/v1</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> HorizontalPodAutoscaler</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> web-app-hpa</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">scaleTargetRef</span><span class="kw">:</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> web-app</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">minReplicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">maxReplicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">10</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">targetCPUUtilizationPercentage</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div></li>
</ul></li>
<li><strong>Big Data Processing</strong>:
<ul>
<li>We can use GKE to run big data tools like Apache Spark or
Hadoop.</li>
<li>Example: Setting up a Spark cluster on GKE to do data processing
tasks.</li>
</ul></li>
<li><strong>Hybrid Cloud Deployments</strong>:
<ul>
<li>GKE supports hybrid cloud setups. It helps us connect on-premises
and cloud environments easily.</li>
<li>Example: Using Anthos to manage Kubernetes clusters both on-premises
and on GKE.</li>
</ul></li>
<li><strong>API Management</strong>:
<ul>
<li><p>GKE can host and manage APIs. We can use tools like Istio for
managing traffic, security, and monitoring.</p></li>
<li><p>Example Configuration:</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> networking.istio.io/v1alpha3</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> VirtualService</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> api-service</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">hosts</span><span class="kw">:</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> api.example.com</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">http</span><span class="kw">:</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">route</span><span class="kw">:</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">destination</span><span class="kw">:</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">host</span><span class="kw">:</span><span class="at"> api-service</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">port</span><span class="kw">:</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">number</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div></li>
</ul></li>
<li><strong>Development and Testing Environments</strong>:
<ul>
<li>We can quickly create development and testing environments. This
helps developers test their apps like in real production.</li>
<li>Example: Using GKE to make separate namespaces for different
development teams.</li>
</ul></li>
</ol>
<p>These use cases show how flexible and powerful GKE can be for many
application needs. It helps us work better and scale easily. For more
insights on Kubernetes and its deployment strategies, check out <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">this
article on Kubernetes</a>.</p>
<h2 id="how-do-we-manage-and-scale-our-gke-cluster">How Do We Manage and
Scale Our GKE Cluster?</h2>
<p>Managing and scaling a Google Kubernetes Engine (GKE) cluster is
important. It helps our applications run well and adapt to changes. Here
is how we can manage and scale our GKE cluster effectively:</p>
<h3 id="monitoring-and-logging">Monitoring and Logging</h3>
<p>We can use Google Cloud’s built-in monitoring and logging services.
This helps us track the performance and health of our cluster. We should
enable Stackdriver Monitoring and Logging. This way, we can see metrics
and logs.</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> services enable monitoring.googleapis.com logging.googleapis.com</span></code></pre></div>
<h3 id="autoscaling">Autoscaling</h3>
<p>GKE lets us use cluster autoscaling and horizontal pod autoscaling.
To enable cluster autoscaling, we can use this command when we create
the cluster. This helps GKE change the number of nodes
automatically.</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> container clusters create my-cluster <span class="dt">\</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">--enable-autoscaling</span> <span class="at">--min-nodes</span><span class="op">=</span>1 <span class="at">--max-nodes</span><span class="op">=</span>5</span></code></pre></div>
<p>For horizontal pod autoscaling, we can create an HPA (Horizontal Pod
Autoscaler) for our deployments:</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> autoscale deployment my-deployment <span class="at">--cpu-percent</span><span class="op">=</span>50 <span class="at">--min</span><span class="op">=</span>1 <span class="at">--max</span><span class="op">=</span>10</span></code></pre></div>
<h3 id="upgrading-our-cluster">Upgrading Our Cluster</h3>
<p>We should upgrade our GKE cluster regularly. This helps us use new
features and get security updates. We can check for upgrades with this
command:</p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> container clusters list</span></code></pre></div>
<p>To upgrade a specific cluster, we use:</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> container clusters upgrade my-cluster</span></code></pre></div>
<h3 id="managing-resources">Managing Resources</h3>
<p>We need to define resource requests and limits in our pod
specifications. This helps us use resources better:</p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-deployment</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-container</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-image</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;64Mi&quot;</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;250m&quot;</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">limits</span><span class="kw">:</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;128Mi&quot;</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;500m&quot;</span></span></code></pre></div>
<h3 id="using-labels-and-annotations">Using Labels and Annotations</h3>
<p>We can use labels and annotations to organize our resources in the
GKE cluster. This helps us select and filter resources easily.</p>
<div class="sourceCode" id="cb41"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> label pods my-pod app=my-app</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> annotate pods my-pod description=<span class="st">&quot;This is my pod&quot;</span></span></code></pre></div>
<h3 id="node-management">Node Management</h3>
<p>We can manage node pools for different workloads in our cluster. To
create a new node pool, we use this command:</p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> container node-pools create my-node-pool <span class="at">--cluster</span><span class="op">=</span>my-cluster <span class="at">--num-nodes</span><span class="op">=</span>3</span></code></pre></div>
<h3 id="scaling-deployments">Scaling Deployments</h3>
<p>To scale our deployments manually, we can use this command to change
the number of replicas:</p>
<div class="sourceCode" id="cb43"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> scale deployment my-deployment <span class="at">--replicas</span><span class="op">=</span>5</span></code></pre></div>
<h3 id="cleanup-unused-resources">Cleanup Unused Resources</h3>
<p>We should check and clean up unused resources from time to time. This
includes unused nodes, deployments, and services. We can list all
resources with:</p>
<div class="sourceCode" id="cb44"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get all <span class="at">--all-namespaces</span></span></code></pre></div>
<p>To remove unnecessary deployments, we can use:</p>
<div class="sourceCode" id="cb45"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> delete deployment my-deployment</span></code></pre></div>
<p>For more insights on managing Kubernetes, we can check <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">what
are the key components of a Kubernetes cluster</a>.</p>
<h2 id="what-are-best-practices-for-securing-my-gke-deployment">What Are
Best Practices for Securing My GKE Deployment?</h2>
<p>To keep our Google Kubernetes Engine (GKE) deployment safe, we can
follow some best practices.</p>
<ol type="1">
<li><p><strong>Use IAM Roles and Permissions</strong>:<br />
We should assign Google Cloud IAM roles to users and service accounts.
We do this based on the principle of least privilege.<br />
Here is how we can assign a role:</p>
<div class="sourceCode" id="cb46"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gcloud</span> projects add-iam-policy-binding PROJECT_ID <span class="dt">\</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>--member=<span class="st">&#39;user:USER_EMAIL&#39;</span> <span class="dt">\</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>--role=<span class="st">&#39;roles/container.admin&#39;</span></span></code></pre></div></li>
<li><p><strong>Enable Google Cloud Armor</strong>:<br />
We can use Google Cloud Armor for DDoS protection. It also helps us
manage access to our applications.</p></li>
<li><p><strong>Network Policies</strong>:<br />
Let’s implement Kubernetes network policies. They control traffic flow
between pods.<br />
Here is an example of a basic network policy:</p>
<div class="sourceCode" id="cb47"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> networking.k8s.io/v1</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> NetworkPolicy</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> allow-frontend</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">podSelector</span><span class="kw">:</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">role</span><span class="kw">:</span><span class="at"> frontend</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ingress</span><span class="kw">:</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">from</span><span class="kw">:</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">podSelector</span><span class="kw">:</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">role</span><span class="kw">:</span><span class="at"> backend</span></span></code></pre></div></li>
<li><p><strong>Use Private GKE Clusters</strong>:<br />
We should deploy our GKE clusters as private. This restricts access to
the control plane.</p></li>
<li><p><strong>Enable Binary Authorization</strong>:<br />
We can use Binary Authorization. This makes sure we only deploy trusted
images.</p></li>
<li><p><strong>Regularly Update Images</strong>:<br />
Let’s keep our container images up to date. This helps us avoid
vulnerabilities. We can use tools like Container Analysis API.</p></li>
<li><p><strong>Enable Audit Logging</strong>:<br />
We should activate audit logging. It helps us track access and changes
in our GKE cluster.</p></li>
<li><p><strong>Limit Resources and Quotas</strong>:<br />
We need to set resource limits and quotas. This prevents abuse and
controls resource consumption.<br />
Here is how we can set limits in a deployment:</p>
<div class="sourceCode" id="cb48"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">limits</span><span class="kw">:</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;256Mi&quot;</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;500m&quot;</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;128Mi&quot;</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;250m&quot;</span></span></code></pre></div></li>
<li><p><strong>Use Secrets Management</strong>:<br />
We can use Kubernetes Secrets. They help us store sensitive data
securely.<br />
Here is how to create a secret:</p>
<div class="sourceCode" id="cb49"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create secret generic my-secret <span class="at">--from-literal</span><span class="op">=</span>password=my-password</span></code></pre></div></li>
<li><p><strong>Monitor and Log</strong>:<br />
We should implement monitoring and logging solutions. Tools like Google
Cloud Operations Suite help us gain insights and find problems.</p></li>
<li><p><strong>Scan for Vulnerabilities</strong>:<br />
We need to regularly scan our container images. This finds known
vulnerabilities. We can use tools like Container Threat
Detection.</p></li>
<li><p><strong>Use Service Accounts</strong>:<br />
We should create dedicated service accounts for our applications. We
should not use the default service account.</p></li>
</ol>
<p>By using these best practices, we can make our GKE deployment safer.
We protect our applications from possible threats. For more details on
Kubernetes security practices, we can check this article on <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">What
Are the Key Components of a Kubernetes Cluster</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-is-google-kubernetes-engine-gke">1. What is Google
Kubernetes Engine (GKE)?</h3>
<p>Google Kubernetes Engine (GKE) is a service that helps us use
Kubernetes easily. It makes it simple to deploy, manage, and scale our
container apps on Google Cloud. With GKE, we can focus on building our
apps. Google takes care of the infrastructure. This means we get high
availability and automatic scaling. If we want to learn more about
Kubernetes, we can check out <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">What
is Kubernetes and How Does It Simplify Container Management?</a>.</p>
<h3 id="how-do-i-monitor-my-gke-cluster">2. How do I monitor my GKE
cluster?</h3>
<p>Monitoring our GKE cluster is very important. It helps us keep
performance and reliability. Google Cloud gives us tools like Cloud
Monitoring and Cloud Logging. We can turn these tools on to track
metrics, set alerts, and see logs from our Kubernetes setup. If we want
to know more about Kubernetes parts, we can read <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">Key
Components of a Kubernetes Cluster</a>.</p>
<h3 id="can-i-use-kubernetes-without-gke">3. Can I use Kubernetes
without GKE?</h3>
<p>Yes, we can set up Kubernetes clusters without using Google
Kubernetes Engine (GKE). We can install Kubernetes on our own systems
using tools like kubeadm or Minikube for local work. For help with local
Kubernetes setup, we can look at <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-install-minikube-for-local-kubernetes-development.html">How
Do I Install Minikube for Local Kubernetes Development?</a>.</p>
<h3 id="what-are-the-networking-requirements-for-gke">4. What are the
networking requirements for GKE?</h3>
<p>When we set up a GKE cluster, we need to think about networking. This
means we have to create a Virtual Private Cloud (VPC) network and set up
subnets for our pods. GKE can use both VPC-native and routes-based
networking. Good networking helps our apps talk to each other well. For
more information on networking in Kubernetes, we can read <a
href="https://bestonlinetutorial.com/kubernetes/why-should-i-use-kubernetes-for-my-applications.html">Why
Should I Use Kubernetes for My Applications?</a>.</p>
<h3 id="how-do-i-migrate-applications-to-gke">5. How do I migrate
applications to GKE?</h3>
<p>To move our apps to Google Kubernetes Engine, we need to containerize
them. Then we can deploy them to our GKE cluster. We might need to
change some settings and dependencies to match the Kubernetes
environment. Using tools like Helm can make this easier. For a look at
how Kubernetes is different from other tools, see <a
href="https://bestonlinetutorial.com/kubernetes/how-does-kubernetes-differ-from-docker-swarm.html">How
Does Kubernetes Differ from Docker Swarm?</a>.</p>
<p>These frequently asked questions give us quick ideas about deploying
and managing a Kubernetes cluster on Google Cloud’s GKE. This helps us
start well in the cloud-native world.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            