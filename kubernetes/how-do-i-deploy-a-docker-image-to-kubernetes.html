
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TFCQEJR7TD');
</script>
            <title>How Do I Deploy a Docker Image to Kubernetes?</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Common CSS & Icons -->
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
<link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
<link rel="stylesheet" href="/assets/css/post.css">
            <meta name="description" content="Learn how to deploy a Docker image to Kubernetes with our step-by-step guide. Simplify your container orchestration today!">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Do I Deploy a Docker Image to Kubernetes?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Deploying a Docker image to Kubernetes means making your app, which
is in a Docker container, available in a Kubernetes cluster. This lets
us use Kubernetes to manage our container apps. It helps us with
scaling, reliability, and easy management of our Docker apps.</p>
<p>In this article, we talk about the important steps and things to
think about when deploying a Docker image to Kubernetes. We will look at
what we need before we start, how to create a Docker image, how to set
up a Kubernetes deployment, how to push the Docker image to a container
registry, how to configure Kubernetes to use our image, how to expose
our app, and how to monitor our deployment. We will also see some
real-life examples and answer common questions about deploying to
Kubernetes.</p>
<ul>
<li>How Can I Deploy a Docker Image to Kubernetes?</li>
<li>What Prerequisites Do I Need for Kubernetes Deployment?</li>
<li>How Do I Create a Docker Image for My Application?</li>
<li>What is a Kubernetes Deployment and How Do I Create One?</li>
<li>How Do I Push a Docker Image to a Container Registry?</li>
<li>How Can I Configure Kubernetes to Use My Docker Image?</li>
<li>What Are the Steps to Expose My Application on Kubernetes?</li>
<li>What Are Real Life Use Cases for Deploying Docker Images to
Kubernetes?</li>
<li>How Do I Monitor and Manage My Deployment in Kubernetes?</li>
<li>Frequently Asked Questions</li>
</ul>
<p>For more reading on Kubernetes and its features, we can check these
articles: <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">What
is Kubernetes and How Does it Simplify Container Management?</a> and <a
href="https://bestonlinetutorial.com/kubernetes/why-should-i-use-kubernetes-for-my-applications.html">Why
Should I Use Kubernetes for My Applications?</a>.</p>
<h2 id="what-prerequisites-do-we-need-for-kubernetes-deployment">What
Prerequisites Do We Need for Kubernetes Deployment?</h2>
<p>To deploy a Docker image to Kubernetes, we need to have some things
ready first. Here are the prerequisites we should ensure:</p>
<ol type="1">
<li><p><strong>Kubernetes Cluster</strong>:<br />
We must have a Kubernetes cluster that is running. We can set this up on
different platforms. This includes local development tools like
Minikube, cloud services like GKE, EKS, or AKS, or even on our own
servers. If we want to set it up locally, we can follow <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-install-minikube-for-local-kubernetes-development.html">this
guide on how to install Minikube</a>.</p></li>
<li><p><strong>kubectl Command-line Tool</strong>:<br />
We need to install <code>kubectl</code>. This is the tool we use to talk
to our Kubernetes cluster. It is important that it is set up to connect
with our cluster.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install kubectl on macOS</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install kubectl</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Install kubectl on Ubuntu</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> snap install kubectl <span class="at">--classic</span></span></code></pre></div></li>
<li><p><strong>Docker Installed</strong>:<br />
We also need Docker on our local machine. This helps us build and manage
our Docker images. We can download it from <a
href="https://www.docker.com/get-started">Dockerâ€™s official
website</a>.</p></li>
<li><p><strong>Docker Registry Account</strong>:<br />
We should create an account on a container registry. This can be Docker
Hub, Google Container Registry, or AWS ECR. We need to log in to our
registry from the command line:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> login</span></code></pre></div></li>
<li><p><strong>YAML Configuration Files</strong>:<br />
We must prepare our Kubernetes deployment YAML files. These files tell
how our application will be deployed and how services will work. A
simple deployment config can look like this:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-docker-image:latest</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div></li>
<li><p><strong>Network Configuration</strong>:<br />
We need to check that our Kubernetes cluster can reach the internet.
This is important for pulling images. Also, we need to set up network
rules if needed.</p></li>
<li><p><strong>Resource Management</strong>:<br />
We should know and set the resource requests and limits for our
containers. This will help keep our cluster running well and
stable.</p></li>
</ol>
<p>By making sure we have these prerequisites, we can make it easier to
deploy our Docker image to Kubernetes. For more information on
Kubernetes parts and setups, we can look at <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">this
article on key components of a Kubernetes cluster</a>.</p>
<h2 id="how-do-i-create-a-docker-image-for-my-application">How Do I
Create a Docker Image for My Application?</h2>
<p>To create a Docker image for our application, we can follow these
steps:</p>
<ol type="1">
<li><p><strong>Create a Dockerfile</strong>: This file tells how to
build our Docker image.</p>
<p>Here is a simple <code>Dockerfile</code> for a Node.js app:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the official Node.js image as a base</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> node:14</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the working directory</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WORKDIR</span> /usr/src/app</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy package.json and package-lock.json</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> package*.json ./</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Install dependencies</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">npm</span> install</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy the application code</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> . .</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Expose the application port (if needed)</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="kw">EXPOSE</span> 3000</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Command to run the application</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;node&quot;</span>, <span class="st">&quot;app.js&quot;</span>]</span></code></pre></div></li>
<li><p><strong>Build the Docker Image</strong>: After we have our
<code>Dockerfile</code>, we go to the folder with it and run:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> my-application:1.0 .</span></code></pre></div>
<p>Change <code>my-application</code> to your image name and
<code>1.0</code> to your version tag.</p></li>
<li><p><strong>Verify the Image</strong>: After building, we can check
if the image is created by listing all Docker images:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> images</span></code></pre></div></li>
<li><p><strong>Run the Docker Container</strong>: To test the image, we
can run a container from it:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-p</span> 3000:3000 my-application:1.0</span></code></pre></div>
<p>This will connect the containerâ€™s port 3000 to our hostâ€™s port
3000.</p></li>
<li><p><strong>Optimize the Dockerfile</strong>: We can think about
using multi-stage builds for bigger applications. This can make the
image smaller and improve security.</p></li>
</ol>
<p>For more info on Docker and Kubernetes, we can read about <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-deploy-a-node-js-application-on-kubernetes.html">how
to deploy a Node.js application on Kubernetes</a>.</p>
<h2 id="what-is-a-kubernetes-deployment-and-how-do-we-create-one">What
is a Kubernetes Deployment and How Do We Create One?</h2>
<p>A Kubernetes Deployment helps us manage how we deploy applications on
a Kubernetes cluster. It lets us set the desired state of our
application. Then, it automatically takes care of how our application
runs.</p>
<h3 id="key-features-of-a-deployment">Key Features of a Deployment:</h3>
<ul>
<li><strong>Declarative Updates</strong>: We can define what we want our
application to look like in a Deployment YAML file.</li>
<li><strong>Rolling Updates</strong>: Deployments let us update our apps
without much downtime.</li>
<li><strong>Scaling</strong>: We can easily change the number of
application replicas up or down.</li>
<li><strong>Rollback</strong>: If something goes wrong during an update,
we can go back to an earlier version.</li>
</ul>
<h3 id="creating-a-deployment">Creating a Deployment</h3>
<p>To create a Deployment, we need to write a YAML file. This file tells
us the details of the Deployment. This includes the container image, how
many replicas we want, and the Pod template. Here is an example YAML
file for a simple Deployment:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-deployment</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-container</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-docker-image:latest</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div>
<h3 id="steps-to-create-a-deployment">Steps to Create a Deployment</h3>
<ol type="1">
<li><p><strong>Create the YAML File</strong>: We save the above content
in a file called <code>deployment.yaml</code>.</p></li>
<li><p><strong>Apply the Deployment</strong>: We use the
<code>kubectl</code> command to apply our deployment to the Kubernetes
cluster.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> deployment.yaml</span></code></pre></div></li>
<li><p><strong>Check the Deployment Status</strong>: We can check if our
Deployment is running well.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get deployments</span></code></pre></div></li>
<li><p><strong>Inspect Pods</strong>: To see the Pods created by our
Deployment, we run:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get pods</span></code></pre></div></li>
<li><p><strong>Update the Deployment</strong>: If we want to change the
Deployment (for example, the image), we edit the
<code>deployment.yaml</code> and apply it again with
<code>kubectl apply -f deployment.yaml</code>.</p></li>
<li><p><strong>Rollback</strong>: If we need, we can go back to the last
version of our Deployment:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> rollout undo deployment/my-app-deployment</span></code></pre></div></li>
</ol>
<p>For more details about managing Deployments, we can check the article
on <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-deployments-and-how-do-i-use-them.html">Kubernetes
Deployments</a>.</p>
<h2 id="how-do-i-push-a-docker-image-to-a-container-registry">How Do I
Push a Docker Image to a Container Registry?</h2>
<p>To push a Docker image to a container registry, we can follow these
steps.</p>
<ol type="1">
<li><p><strong>Tag your Docker Image</strong>: First, we need to tag our
image with the URL of the registry. The format for tagging is
<code>registry-url/repository-name:tag</code>. For example:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> tag my-app:latest myregistry.com/my-app:latest</span></code></pre></div></li>
<li><p><strong>Log in to the Container Registry</strong>: Next, we use
the Docker CLI to log in to our container registry. The system will ask
for our username and password.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> login myregistry.com</span></code></pre></div></li>
<li><p><strong>Push the Docker Image</strong>: After logging in, we can
push our tagged image to the registry using the command
<code>docker push</code>:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> push myregistry.com/my-app:latest</span></code></pre></div></li>
<li><p><strong>Verify the Push</strong>: We should check if our image
was pushed successfully. We can list the images in our registry:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> search myregistry.com/my-app</span></code></pre></div></li>
</ol>
<p>Make sure we have the right permissions and access to the registry.
Also ensure our Docker daemon is running. For more details on managing
Docker images and container registries, we can look at <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">this
article on Docker image management</a>.</p>
<h2 id="how-can-we-configure-kubernetes-to-use-our-docker-image">How Can
We Configure Kubernetes to Use Our Docker Image?</h2>
<p>To configure Kubernetes to use our Docker image, we need to create a
Kubernetes Deployment that points to our Docker image. Here are the
steps we can follow:</p>
<ol type="1">
<li><p><strong>Make Sure Our Docker Image is Available</strong>: First,
we should check that our Docker image is uploaded to a container
registry. This can be Docker Hub, Google Container Registry, or AWS
ECR.</p></li>
<li><p><strong>Create a Deployment YAML File</strong>: Next, we create a
YAML file that defines our Kubernetes Deployment. Here is an example
configuration:</p></li>
</ol>
<div class="sourceCode" id="cb17"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-container</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> &lt;your-docker-repo&gt;/&lt;your-image&gt;:&lt;tag&gt;</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div>
<p>We need to replace
<code>&lt;your-docker-repo&gt;/&lt;your-image&gt;:&lt;tag&gt;</code>
with the actual path to our Docker image.</p>
<ol start="3" type="1">
<li><strong>Deploy the Application</strong>: We can use
<code>kubectl</code> to create the deployment in our Kubernetes
cluster:</li>
</ol>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> deployment.yaml</span></code></pre></div>
<ol start="4" type="1">
<li><strong>Check Deployment Status</strong>: Now, we check if the
deployment was successful and if the pods are running:</li>
</ol>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get deployments</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get pods</span></code></pre></div>
<ol start="5" type="1">
<li><strong>Access Our Application</strong>: If we want to expose our
application, we should create a service to make it accessible:</li>
</ol>
<div class="sourceCode" id="cb20"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-service</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> LoadBalancer</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">targetPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span></code></pre></div>
<p>We can deploy the service using:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> service.yaml</span></code></pre></div>
<p>Now, our Kubernetes setup is ready to use our Docker image. We can
also manage and scale our deployment as we need. For more information on
Kubernetes deployments, we can check <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-deployments-and-how-do-i-use-them.html">What
Are Kubernetes Deployments and How Do I Use Them?</a>.</p>
<h2 id="what-are-the-steps-to-expose-my-application-on-kubernetes">What
Are the Steps to Expose My Application on Kubernetes?</h2>
<p>To expose our application on Kubernetes, we usually use a Kubernetes
Service. Here are the simple steps to create a Service and expose our
application.</p>
<ol type="1">
<li><p><strong>Define the Service</strong>:<br />
We need to create a YAML file. We can name it <code>service.yaml</code>.
This file will describe the Service. Here is an example of a ClusterIP
Service:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-service</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">protocol</span><span class="kw">:</span><span class="at"> TCP</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">targetPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">8080</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> ClusterIP</span></span></code></pre></div></li>
<li><p><strong>Apply the Service Configuration</strong>:<br />
We use <code>kubectl</code> to apply the configuration. We run this
command:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> service.yaml</span></code></pre></div></li>
<li><p><strong>Expose the Deployment</strong>:<br />
If we want to expose a Deployment directly, we can use the
<code>kubectl expose</code> command. Here is how we do it:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> expose deployment my-app <span class="at">--type</span><span class="op">=</span>LoadBalancer <span class="at">--port</span><span class="op">=</span>80 <span class="at">--target-port</span><span class="op">=</span>8080</span></code></pre></div></li>
<li><p><strong>Check the Service</strong>:<br />
We need to check if our Service is running. We can do this with:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get services</span></code></pre></div></li>
<li><p><strong>Accessing the Application</strong>:</p>
<ul>
<li>If we use a <code>LoadBalancer</code> Service, we access the
application through the external IP that is assigned to the
Service.<br />
</li>
<li>For <code>NodePort</code>, we can access our application using any
nodeâ€™s IP address on the port we specified.</li>
</ul></li>
<li><p><strong>Using Ingress</strong> (Optional):<br />
If we want more advanced routing, we can use an Ingress resource. Here
is a simple example of Ingress:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> networking.k8s.io/v1</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Ingress</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-ingress</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">rules</span><span class="kw">:</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">host</span><span class="kw">:</span><span class="at"> my-app.example.com</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">http</span><span class="kw">:</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">paths</span><span class="kw">:</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="kw">-</span><span class="at"> </span><span class="fu">path</span><span class="kw">:</span><span class="at"> /</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">pathType</span><span class="kw">:</span><span class="at"> Prefix</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">backend</span><span class="kw">:</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">service</span><span class="kw">:</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="at">                </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-service</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="at">                </span><span class="fu">port</span><span class="kw">:</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="at">                  </span><span class="fu">number</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div>
<p>Then, we apply it with:</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> ingress.yaml</span></code></pre></div></li>
<li><p><strong>Configure DNS</strong>:<br />
If we use Ingress, we must make sure that our DNS points to the Ingress
controllerâ€™s external IP.</p></li>
</ol>
<p>By following these steps, we can expose our application running on
Kubernetes. We can use either a Service or Ingress depending on what we
need. For more detailed instructions on deploying applications on
Kubernetes, we can check out <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-deploy-a-simple-web-application-on-kubernetes.html">how
to deploy a simple web application on Kubernetes</a>.</p>
<h2
id="what-are-real-life-use-cases-for-deploying-docker-images-to-kubernetes">What
Are Real Life Use Cases for Deploying Docker Images to Kubernetes?</h2>
<p>We often use Docker images with Kubernetes to manage applications
better and work at a bigger scale. Here are some real-life examples:</p>
<ol type="1">
<li><p><strong>Microservices Architecture</strong>:<br />
We see many companies use microservices for easier scaling and
maintenance. By deploying Docker images for each microservice to
Kubernetes, we can scale and manage them separately. For example, an
online store can have separate services for user login, product listing,
and order handling.</p></li>
<li><p><strong>Continuous Integration/Continuous Deployment
(CI/CD)</strong>:<br />
Kubernetes helps with CI/CD pipelines by making the deployment of Docker
images automatic using tools like Jenkins or GitHub Actions. When we
create a new image, it can go directly to a Kubernetes cluster. This
makes releasing new versions and rolling back easier.</p>
<p>Example CI/CD integration:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> batch/v1</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Job</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> ci-cd-deployment</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> deploy-app</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp:${GITHUB_SHA}</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">command</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&quot;kubectl&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;apply&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;-f&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;deployment.yaml&quot;</span><span class="kw">]</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">restartPolicy</span><span class="kw">:</span><span class="at"> Never</span></span></code></pre></div></li>
<li><p><strong>Hybrid Cloud Deployments</strong>:<br />
Companies can use Kubernetes to run Docker images on both local servers
and in the cloud. This helps in creating hybrid cloud applications. For
example, a bank might run sensitive data on local servers but use the
cloud for data analysis.</p></li>
<li><p><strong>Machine Learning and Data Science</strong>:<br />
Data scientists can put machine learning models as Docker images on
Kubernetes. This allows us to have scalable services for making
inferences. We can update models without any downtime by rolling out new
images easily.</p></li>
<li><p><strong>Multitenancy</strong>:<br />
Kubernetes lets us deploy Docker images in a multitenant setup. This
means different teams can run their apps in separate namespaces. This is
helpful for big companies where many projects need to work together
without problems.</p></li>
<li><p><strong>Disaster Recovery</strong>:<br />
Organizations use Kubernetes to deploy Docker images in different
locations. This helps to keep apps available during outages or
disasters. We can also set up automatic backup and restore to get
applications back quickly.</p></li>
<li><p><strong>Serverless Applications</strong>:<br />
By using Kubernetes with tools like Knative, we can deploy serverless
applications as Docker images. This allows our apps to scale
automatically based on how much demand there is.</p></li>
<li><p><strong>API Gateway Services</strong>:<br />
We can deploy Docker images of API gateways like Istio on Kubernetes.
This helps us manage traffic between services, enforce security rules,
and monitor microservices.</p></li>
<li><p><strong>Real-time Data Processing</strong>:<br />
Companies can deploy Docker images of applications that process
streaming data, like Apache Kafka, on Kubernetes. This lets us scale
dynamically based on the amount of data and processing we need.</p></li>
<li><p><strong>Edge Computing</strong>:<br />
Kubernetes can manage Docker images that run at edge locations. This
helps organizations process data closer to where it comes from. It
lowers latency and makes bandwidth use better.</p></li>
</ol>
<p>For more details about deploying applications on Kubernetes, we can
check this guide on <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-deploy-microservices-on-kubernetes.html">deploying
microservices on Kubernetes</a>.</p>
<h2 id="how-do-we-monitor-and-manage-our-deployment-in-kubernetes">How
Do We Monitor and Manage Our Deployment in Kubernetes?</h2>
<p>Monitoring and managing a deployment in Kubernetes need some tools
and practices. We want to make sure our application runs well. Here are
the main parts and steps we can follow:</p>
<h3 id="monitoring-tools">Monitoring Tools</h3>
<ol type="1">
<li><strong>Prometheus</strong>: This is a free tool for monitoring and
alerts. It works well with Kubernetes.
<ul>
<li><p>We can install Prometheus using Helm:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> install prometheus prometheus-community/prometheus</span></code></pre></div></li>
</ul></li>
<li><strong>Grafana</strong>: This tool helps us create dashboards. It
works with Prometheus.
<ul>
<li><p>We can install Grafana using Helm:</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> install grafana grafana/grafana</span></code></pre></div></li>
</ul></li>
<li><strong>Kube-state-metrics</strong>: This tool gives us metrics
about Kubernetes objects.
<ul>
<li><p>We can deploy kube-state-metrics like this:</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> https://raw.githubusercontent.com/kubernetes/kube-state-metrics/master/examples/standard/deployment.yaml</span></code></pre></div></li>
</ul></li>
</ol>
<h3 id="metrics-collection">Metrics Collection</h3>
<ul>
<li><p>We can use the <strong>kubectl top</strong> command to check
resource use.</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> top pods</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> top nodes</span></code></pre></div></li>
</ul>
<h3 id="logging">Logging</h3>
<ol type="1">
<li><strong>Fluentd</strong>: This tool collects logs from Kubernetes.
It can send logs to many places.
<ul>
<li><p>We can deploy Fluentd like this:</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> https://raw.githubusercontent.com/fluent/fluentd-kubernetes-daemonset/master/kubernetes-fluentd-ds.yaml</span></code></pre></div></li>
</ul></li>
<li><strong>ELK Stack</strong> (Elasticsearch, Logstash, Kibana): This
is a strong solution for managing logs.
<ul>
<li>We need to set up Elasticsearch and Kibana for storing and showing
logs.</li>
</ul></li>
</ol>
<h3 id="health-checks">Health Checks</h3>
<ul>
<li><p>We should define <strong>liveness</strong> and <strong>readiness
probes</strong> in our deployment YAML. This helps us manage our
application state automatically.</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">livenessProbe</span><span class="kw">:</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">httpGet</span><span class="kw">:</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> /health</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">8080</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">initialDelaySeconds</span><span class="kw">:</span><span class="at"> </span><span class="dv">30</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">periodSeconds</span><span class="kw">:</span><span class="at"> </span><span class="dv">10</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="fu">readinessProbe</span><span class="kw">:</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">httpGet</span><span class="kw">:</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> /ready</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">8080</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">initialDelaySeconds</span><span class="kw">:</span><span class="at"> </span><span class="dv">5</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">periodSeconds</span><span class="kw">:</span><span class="at"> </span><span class="dv">5</span></span></code></pre></div></li>
</ul>
<h3 id="scaling-and-management">Scaling and Management</h3>
<ul>
<li><p>We can use the <strong>Horizontal Pod Autoscaler</strong>. This
helps with scaling pods based on resource use.</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> autoscale deployment my-deployment <span class="at">--cpu-percent</span><span class="op">=</span>50 <span class="at">--min</span><span class="op">=</span>1 <span class="at">--max</span><span class="op">=</span>10</span></code></pre></div></li>
<li><p>We can check the status of our deployments like this:</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get deployments</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> describe deployment my-deployment</span></code></pre></div></li>
</ul>
<h3 id="alerts-and-notifications">Alerts and Notifications</h3>
<ul>
<li><p>We can set up alerts in Prometheus. This helps us know about
problems. Here is an example alert for high CPU use:</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">alert</span><span class="kw">:</span><span class="at"> HighCpuUsage</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">expr</span><span class="kw">:</span><span class="at"> sum(rate(container_cpu_usage_seconds_total{job=&quot;kubelet&quot;}[5m])) by (instance) &gt; 0.8</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">for</span><span class="kw">:</span><span class="at"> 5m</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">severity</span><span class="kw">:</span><span class="at"> warning</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="fu">annotations</span><span class="kw">:</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">summary</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;High CPU Usage detected&quot;</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">description</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;CPU usage is above 80% for more than 5 minutes.&quot;</span></span></code></pre></div></li>
</ul>
<p>If we want to read more about monitoring Kubernetes or deploying
applications, we can check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-monitor-my-kubernetes-cluster.html">how
to monitor your Kubernetes cluster</a> or learn about <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-the-lifecycle-of-a-kubernetes-pod.html">managing
applications using Kubernetes</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="how-do-we-deploy-a-docker-image-to-kubernetes">1. How do we
deploy a Docker image to Kubernetes?</h3>
<p>To deploy a Docker image to Kubernetes, we need to first make sure
our Docker image is built and tagged right. We use Kubernetes manifests,
which are YAML files, to set up our Deployment. This includes the image
name, how many replicas we want, and the ports we will use. After that,
we apply the manifest by running the command
<code>kubectl apply -f &lt;filename&gt;.yaml</code>. If you want to
learn more, you can read our article on <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-deploy-a-simple-web-application-on-kubernetes.html">how
to deploy a simple web application on Kubernetes</a>.</p>
<h3 id="what-is-a-kubernetes-deployment">2. What is a Kubernetes
Deployment?</h3>
<p>A Kubernetes Deployment is a resource that helps us manage
applications that do not keep state. It lets us say what we want for our
application. This includes how many replicas we need and which Docker
image to use. Kubernetes works to make sure our actual state matches
what we want. It automatically takes care of scaling and updates. To
know more about this, check our article on <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-deployments-and-how-do-i-use-them.html">what
are Kubernetes deployments and how do I use them</a>.</p>
<h3 id="how-do-we-push-a-docker-image-to-a-container-registry">3. How do
we push a Docker image to a container registry?</h3>
<p>To push a Docker image to a container registry, we first log in to
our registry account using this command:
<code>docker login &lt;registry-url&gt;</code>. Then, we tag our image
with the correct name and version using
<code>docker tag &lt;image-name&gt;:&lt;tag&gt; &lt;registry-url&gt;/&lt;image-name&gt;:&lt;tag&gt;</code>.
Finally, we push the image by running
<code>docker push &lt;registry-url&gt;/&lt;image-name&gt;:&lt;tag&gt;</code>.
For more details, look at our article on <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-create-a-docker-image-for-my-application.html">how
to create a docker image for my application</a>.</p>
<h3 id="how-can-we-expose-our-application-on-kubernetes">4. How can we
expose our application on Kubernetes?</h3>
<p>To expose our application on Kubernetes, we create a Service
resource. This defines how we can access our application. We can choose
the type of Service we need, like ClusterIP, NodePort, or LoadBalancer.
Use the command
<code>kubectl expose deployment &lt;deployment-name&gt; --type=&lt;service-type&gt; --port=&lt;port-number&gt;</code>
to create the Service. For more information, check our article on <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-services-and-how-do-they-expose-applications.html">what
are Kubernetes services and how do they expose applications</a>.</p>
<h3 id="how-do-we-monitor-our-deployment-in-kubernetes">5. How do we
monitor our deployment in Kubernetes?</h3>
<p>We can monitor our deployment in Kubernetes using tools like
Prometheus and Grafana. These tools help us collect and show metrics. We
can also use <code>kubectl</code> commands to see the status of our Pods
and Deployments. Itâ€™s good to think about using logging solutions like
ELK Stack to get more insights. If you want to learn more about
monitoring, read our article on <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-monitor-my-kubernetes-cluster.html">how
do I monitor my Kubernetes cluster</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            