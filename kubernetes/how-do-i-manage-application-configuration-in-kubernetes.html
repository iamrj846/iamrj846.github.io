
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <title>How Do I Manage Application Configuration in Kubernetes?</title>
            <meta name="description" content="Discover essential strategies for managing application configuration in Kubernetes effectively. Master config maps, secrets, and best practices!">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Do I Manage Application Configuration in Kubernetes?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Managing application config in Kubernetes is very important for
making sure our apps run well and without problems. Kubernetes gives us
many tools to keep and handle config data. For example, we can use
ConfigMaps and Secrets. These tools help us separate the config from the
app code. This makes it easier to make changes and manage different
settings.</p>
<p>In this article, we will look at good ways to manage application
config in Kubernetes. We will talk about what ConfigMaps do. We will
also see how to use Secrets for sensitive data. We will learn how to
change config for different environments. We will go over best ways to
manage config files. We will also discuss using Helm for managing app
config. Plus, we will share real-life examples and talk about how to
watch and change app configs easily.</p>
<ul>
<li>How Can I Effectively Manage Application Config in Kubernetes?</li>
<li>What Are Kubernetes ConfigMaps and How Do They Work?</li>
<li>How to Use Secrets for Sensitive Data in Kubernetes?</li>
<li>How Do I Change Config in Different Environments?</li>
<li>What Are the Best Ways to Manage Config Files?</li>
<li>How to Use Helm for App Config Management?</li>
<li>Can You Give Real Life Examples for App Config in Kubernetes?</li>
<li>How to Watch and Change App Config Easily?</li>
<li>Frequently Asked Questions</li>
</ul>
<p>If you want to learn more about Kubernetes, you might like these
articles: <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">What
is Kubernetes and How Does It Simplify Container Management?</a> and <a
href="https://bestonlinetutorial.com/kubernetes/why-should-i-use-kubernetes-for-my-applications.html">Why
Should I Use Kubernetes for My Applications?</a>.</p>
<h2 id="what-are-kubernetes-configmaps-and-how-do-they-work">What Are
Kubernetes ConfigMaps and How Do They Work?</h2>
<p>Kubernetes ConfigMaps are important in Kubernetes for managing
application settings. They help us separate configuration from image
content. This makes our containerized applications easier to move
around. ConfigMaps let us store configuration data in key-value pairs.
Applications running in Pods can use this data.</p>
<h3 id="creating-a-configmap">Creating a ConfigMap</h3>
<p>We can create a ConfigMap from literal values, files, or directories.
Here is an example of making a ConfigMap from key-value pairs:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create configmap my-config <span class="at">--from-literal</span><span class="op">=</span>key1=value1 <span class="at">--from-literal</span><span class="op">=</span>key2=value2</span></code></pre></div>
<p>We can also create a ConfigMap from a file:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create configmap my-config <span class="at">--from-file</span><span class="op">=</span>path/to/config.file</span></code></pre></div>
<h3 id="accessing-configmaps-in-pods">Accessing ConfigMaps in Pods</h3>
<p>We can access ConfigMaps in Pods in two ways. We can use them as
environment variables or mount them as files in a volume.</p>
<p><strong>Using Environment Variables:</strong></p>
<p>To use a ConfigMap as environment variables, we can reference it in
our Pod or Deployment YAML:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-pod</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-container</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-image</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> MY_ENV_VAR</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">configMapKeyRef</span><span class="kw">:</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-config</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">key</span><span class="kw">:</span><span class="at"> key1</span></span></code></pre></div>
<p><strong>Mounting as Files:</strong></p>
<p>We can also mount the ConfigMap as a volume:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-pod</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-container</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-image</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumeMounts</span><span class="kw">:</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> config-volume</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">mountPath</span><span class="kw">:</span><span class="at"> /etc/config</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> config-volume</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">configMap</span><span class="kw">:</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-config</span></span></code></pre></div>
<h3 id="updating-configmaps">Updating ConfigMaps</h3>
<p>We can update ConfigMaps without restarting the Pods that use them.
We can change a ConfigMap with this command:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> edit configmap my-config</span></code></pre></div>
<p>The changes can show in the Pods if they are set up to watch for
changes. This is good for updating configurations on the fly.</p>
<h3 id="limitations-of-configmaps">Limitations of ConfigMaps</h3>
<ul>
<li>ConfigMaps can only store string data. Binary data needs to be
encoded.</li>
<li>They have a limit of 1MB in size.</li>
<li>ConfigMaps do not give strong security. We should store sensitive
data in Secrets.</li>
</ul>
<p>For more detailed information, we can check the <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-configmaps-and-how-do-i-use-them.html">Kubernetes
ConfigMaps documentation</a>.</p>
<h2 id="how-to-use-secrets-for-sensitive-data-in-kubernetes">How to Use
Secrets for Sensitive Data in Kubernetes?</h2>
<p>Kubernetes Secrets help us manage sensitive information. This can
include passwords, OAuth tokens, SSH keys, and other private data.
Secrets are different from ConfigMaps because they hold sensitive
information and are stored in Base64 format. Let’s learn how to create
and use Secrets in Kubernetes.</p>
<h3 id="creating-a-secret">Creating a Secret</h3>
<p>We can create a Secret using a YAML file or the command line.</p>
<p><strong>Using a YAML File:</strong></p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Secret</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-secret</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> Opaque</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">username</span><span class="kw">:</span><span class="at"> dXNlcm5hbWU=</span><span class="co"> # this is the base64 value of &#39;username&#39;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">password</span><span class="kw">:</span><span class="at"> cGFzc3dvcmQ=</span><span class="co"> # this is the base64 value of &#39;password&#39;</span></span></code></pre></div>
<p>To create the Secret, we apply the YAML file:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> secret.yaml</span></code></pre></div>
<p><strong>Using Command Line:</strong></p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create secret generic my-secret <span class="at">--from-literal</span><span class="op">=</span>username=myusername <span class="at">--from-literal</span><span class="op">=</span>password=mypassword</span></code></pre></div>
<h3 id="accessing-secrets-in-pods">Accessing Secrets in Pods</h3>
<p>We can access Secrets in our Pods as environment variables or as
files in a volume.</p>
<p><strong>Using Environment Variables:</strong></p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> secret-example</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-container</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp:latest</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> DB_USERNAME</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">secretKeyRef</span><span class="kw">:</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-secret</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">key</span><span class="kw">:</span><span class="at"> username</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> DB_PASSWORD</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">secretKeyRef</span><span class="kw">:</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-secret</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">key</span><span class="kw">:</span><span class="at"> password</span></span></code></pre></div>
<p><strong>Using Volume:</strong></p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> volume-secret-example</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-container</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp:latest</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">volumeMounts</span><span class="kw">:</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> secret-volume</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">mountPath</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;/etc/secret&quot;</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> secret-volume</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">secret</span><span class="kw">:</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">secretName</span><span class="kw">:</span><span class="at"> my-secret</span></span></code></pre></div>
<h3 id="viewing-secrets">Viewing Secrets</h3>
<p>To see the details of a Secret, we use this command:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get secret my-secret <span class="at">-o</span> yaml</span></code></pre></div>
<h3 id="best-practices">Best Practices</h3>
<ul>
<li><strong>Limit access</strong>: Use RBAC to limit who can see or
change Secrets.</li>
<li><strong>Encrypt Secrets at rest</strong>: Turn on encryption for
Secrets in etcd.</li>
<li><strong>Avoid hardcoding</strong>: Do not put sensitive data in your
code. Use Secrets instead.</li>
<li><strong>Use tools for management</strong>: Think about using tools
like HashiCorp Vault or Sealed Secrets to handle sensitive data more
safely.</li>
</ul>
<p>For more details about managing sensitive data in Kubernetes, we can
check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-secrets-in-kubernetes-securely.html">how
do I manage secrets in Kubernetes securely</a>.</p>
<h2 id="how-do-we-override-configuration-in-different-environments">How
Do We Override Configuration in Different Environments?</h2>
<p>Managing application configuration in Kubernetes is important. We can
adjust it for each environment like development, testing, and
production. Here are the main ways we can override configuration
easily:</p>
<ol type="1">
<li><p><strong>Using Environment Variables</strong>: We can set
environment variables in our Pod or Deployment spec. This helps us
change configurations without changing our code.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-container</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-image</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> MY_CONFIG</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">value</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;production_value&quot;</span><span class="co">  # Change this value based on the environment</span></span></code></pre></div></li>
<li><p><strong>ConfigMaps</strong>: We can use ConfigMaps to store
non-sensitive configuration data. It is good to create separate
ConfigMaps for each environment. Then, we can reference them in our
Pods.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-config</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">MY_SETTING</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;value_for_environment&quot;</span><span class="co">  # Set different values for each environment</span></span></code></pre></div>
<p>We can reference the ConfigMap in our Deployment like this:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> MY_SETTING</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">configMapKeyRef</span><span class="kw">:</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-config</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">key</span><span class="kw">:</span><span class="at"> MY_SETTING</span></span></code></pre></div></li>
<li><p><strong>Helm Values Files</strong>: If we use Helm for
deployment, we can create different values files for each environment.
For example, <code>values-dev.yaml</code> and
<code>values-prod.yaml</code> have environment-specific settings.</p>
<p>The command to deploy using a specific values file looks like
this:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> install my-release my-chart <span class="at">-f</span> values-prod.yaml</span></code></pre></div></li>
<li><p><strong>Kustomize</strong>: Kustomize helps us create overlays
for different environments. We define a base configuration first. Then,
we make an overlay for each environment to change the needed
settings.</p>
<p>Here is an example of a directory structure:</p>
<pre><code>base/
  deployment.yaml
  configmap.yaml
overlays/
  dev/
    kustomization.yaml
  prod/
    kustomization.yaml</code></pre>
<p>In <code>overlays/dev/kustomization.yaml</code>, we can write:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> ../../base</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">patchesStrategicMerge</span><span class="kw">:</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> deployment-patch.yaml</span></span></code></pre></div></li>
<li><p><strong>Secrets</strong>: For sensitive configuration data like
API keys, we should use Kubernetes Secrets. We create a Secret for each
environment and reference them in our Pods when needed.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Secret</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-secret</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> Opaque</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">MY_SECRET_KEY</span><span class="kw">:</span><span class="at"> base64_encoded_value</span><span class="co">  # Change this per environment</span></span></code></pre></div>
<p>We can reference it in our Deployment like this:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> MY_SECRET_KEY</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">secretKeyRef</span><span class="kw">:</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-secret</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">key</span><span class="kw">:</span><span class="at"> MY_SECRET_KEY</span></span></code></pre></div></li>
<li><p><strong>Command-line Arguments</strong>: We can pass
configuration parameters as command-line arguments when we start our
application. This can be changed for each environment in our Deployment
manifest.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">args</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&quot;--config=/etc/config/my-config.yaml&quot;</span><span class="kw">]</span></span></code></pre></div></li>
</ol>
<p>By using these methods, we can manage and override application
configuration in different environments in our Kubernetes setup. For
more insights into Kubernetes ConfigMaps and Secrets, we can check <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-configmaps-and-how-do-i-use-them.html">this
article on ConfigMaps</a> and <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-secrets-in-kubernetes-securely.html">this
guide on managing Secrets</a>.</p>
<h2
id="what-are-the-best-practices-for-managing-configuration-files">What
Are the Best Practices for Managing Configuration Files?</h2>
<p>Managing application setup in Kubernetes is important. We need to
follow some best practices to keep things consistent, safe, and easy to
maintain. Here are some key practices we should think about:</p>
<ol type="1">
<li><strong>Use ConfigMaps for Non-Sensitive Data</strong>:
<ul>
<li><p>We can store non-sensitive setup data in Kubernetes ConfigMaps.
This helps us keep the setup separate from the application
code.</p></li>
<li><p>To create a ConfigMap, we can use this command:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create configmap my-config <span class="at">--from-file</span><span class="op">=</span>./config.properties</span></code></pre></div></li>
</ul></li>
<li><strong>Utilize Secrets for Sensitive Data</strong>:
<ul>
<li><p>For sensitive information like passwords or API keys, we should
use Kubernetes Secrets. This keeps our sensitive data safe.</p></li>
<li><p>We can create a secret like this:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create secret generic my-secret <span class="at">--from-literal</span><span class="op">=</span>password=<span class="st">&#39;mypassword&#39;</span></span></code></pre></div></li>
</ul></li>
<li><strong>Version Control Configuration</strong>:
<ul>
<li>We should store our configuration files in a version control system
like Git. This helps us track changes over time.</li>
</ul></li>
<li><strong>Environment-Specific Configurations</strong>:
<ul>
<li>It is good to use different ConfigMaps and Secrets for different
environments. We can avoid misconfigurations this way. We can use tools
like Helm or Kustomize to help with this.</li>
</ul></li>
<li><strong>Template Configuration Files</strong>:
<ul>
<li>We can use templating tools with our deployment methods like Helm.
This helps us create dynamic configuration files that we can customize
for each deployment.</li>
</ul></li>
<li><strong>Keep Configurations DRY (Don’t Repeat Yourself)</strong>:
<ul>
<li>We should avoid repeating ourselves in configuration files. Using
references or shared ConfigMaps and Secrets can help us keep things
DRY.</li>
</ul></li>
<li><strong>Documentation and Comments</strong>:
<ul>
<li>We must document our configuration files. Adding comments helps
explain complex setups. This makes it easier for others to
understand.</li>
</ul></li>
<li><strong>Monitor Configurations</strong>:
<ul>
<li>We should set up monitoring to see when configurations change. We
can use tools like Prometheus or custom scripts to alert us on
unauthorized changes.</li>
</ul></li>
<li><strong>Automate Configuration Updates</strong>:
<ul>
<li>We can use automation tools like CI/CD pipelines. This helps us
manage and apply configuration changes in a systematic way.</li>
</ul></li>
<li><strong>Backup Configuration Data</strong>:
<ul>
<li>We need to regularly back up our ConfigMaps and Secrets. This helps
us restore configurations if we accidentally delete or corrupt them. We
can use tools like Velero for backup and recovery.</li>
</ul></li>
</ol>
<p>By following these best practices for managing configuration files in
Kubernetes, we can make our application deployment process stronger,
safer, and easier to maintain. For more information on managing
sensitive data, check out <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-secrets-in-kubernetes-securely.html">how
to manage secrets in Kubernetes securely</a>.</p>
<h2 id="how-to-use-helm-for-application-configuration-management">How to
Use Helm for Application Configuration Management?</h2>
<p>Helm is a useful tool for managing Kubernetes applications. It uses
charts to package all the resources and settings we need. With Helm, we
can manage application configurations in Kubernetes more easily.</p>
<h3 id="installing-helm">Installing Helm</h3>
<p>First, we need to install Helm on our local machine. For most
systems, we can use these commands:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For macOS</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install helm</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># For Windows (using Chocolatey)</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="ex">choco</span> install kubernetes-helm</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># For Linux, download the binary</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 <span class="kw">|</span> <span class="fu">bash</span></span></code></pre></div>
<h3 id="creating-a-helm-chart">Creating a Helm Chart</h3>
<p>To create a new Helm chart, we use this command:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> create my-chart</span></code></pre></div>
<p>This command makes a folder structure for our chart. It includes
templates and a <code>values.yaml</code> file for settings.</p>
<h3 id="configuring-values">Configuring Values</h3>
<p>The <code>values.yaml</code> file lets us set default values for our
application. Here is an example:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">replicaCount</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span><span class="kw">:</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">repository</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">tag</span><span class="kw">:</span><span class="at"> latest</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pullPolicy</span><span class="kw">:</span><span class="at"> IfNotPresent</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="fu">service</span><span class="kw">:</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> ClusterIP</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="fu">resources</span><span class="kw">:</span><span class="at"> </span><span class="kw">{}</span></span></code></pre></div>
<p>We can change these values during installation. We do this with the
<code>--set</code> flag or by using a custom YAML file.</p>
<h3 id="installing-a-chart">Installing a Chart</h3>
<p>To install a Helm chart with our settings, we use this command:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> install my-release my-chart</span></code></pre></div>
<p>We can also customize our installation with the <code>-f</code>
option for a custom <code>values.yaml</code> file:</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> install my-release my-chart <span class="at">-f</span> custom-values.yaml</span></code></pre></div>
<h3 id="updating-a-release">Updating a Release</h3>
<p>To update an existing release with new settings, we use:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> upgrade my-release my-chart <span class="at">-f</span> custom-values.yaml</span></code></pre></div>
<h3 id="managing-releases">Managing Releases</h3>
<p>To see all installed Helm releases, we use:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> list</span></code></pre></div>
<p>If we want to uninstall a release, we can run:</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> uninstall my-release</span></code></pre></div>
<h3 id="best-practices-with-helm">Best Practices with Helm</h3>
<ul>
<li><strong>Version Control:</strong> We should store our Helm charts in
a version control system. This helps with tracking and working
together.</li>
<li><strong>Use Values Files:</strong> It is good to keep separate
<code>values.yaml</code> files for different environments like staging
and production.</li>
<li><strong>Chart Repositories:</strong> We can use Helm chart
repositories to share and reuse charts among teams.</li>
</ul>
<p>For more information about Helm and its best practices, we can check
this link <a
href="https://bestonlinetutorial.com/kubernetes/what-is-helm-and-how-does-it-help-with-kubernetes-deployments.html">what
is Helm and how does it help with Kubernetes deployments</a>.</p>
<h2
id="can-you-provide-real-life-use-cases-for-application-configuration-in-kubernetes">Can
You Provide Real Life Use Cases for Application Configuration in
Kubernetes?</h2>
<p>Managing application configuration in Kubernetes is very important
for deploying applications that can grow and be maintained easily. Here
are some real-life use cases that show how we can use Kubernetes
configuration management well:</p>
<ol type="1">
<li><p><strong>Microservices Architecture</strong>:<br />
In a microservices setup, different services need different
configurations. We can use <strong>ConfigMaps</strong> so each service
can get its needed configuration while it runs. This way we do not have
to change the container image. For example, a payment service might need
different API keys than a user service.</p>
<p>Example:</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> payment-service-config</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">API_KEY</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;payment_api_key&quot;</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">TIMEOUT</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;30s&quot;</span></span></code></pre></div></li>
<li><p><strong>Environment-Specific Configurations</strong>:<br />
By using <strong>ConfigMaps</strong> and <strong>Secrets</strong>, we
can set up applications differently in different environments like
development, staging, and production without changing the application
code. This helps us to update and test in separate spaces easily.</p>
<p>Example to use ConfigMap based on environment:</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp-container</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp:latest</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> CONFIG</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">configMapKeyRef</span><span class="kw">:</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp-config</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">key</span><span class="kw">:</span><span class="at"> environment</span></span></code></pre></div></li>
<li><p><strong>Storing Sensitive Information</strong>:<br />
Kubernetes <strong>Secrets</strong> are great for keeping sensitive info
like passwords, OAuth tokens, and private keys safe. This way, we do not
hardcode sensitive data in the application code or config files.</p>
<p>Example of creating a Secret:</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Secret</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> db-secret</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> Opaque</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">username</span><span class="kw">:</span><span class="at"> c29tZXVzZXI=</span><span class="co">  # base64 encoded</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">password</span><span class="kw">:</span><span class="at"> c29tZXBhc3M=</span><span class="co">  # base64 encoded</span></span></code></pre></div></li>
<li><p><strong>Dynamic Configuration Updates</strong>:<br />
Kubernetes lets us update configurations on the go using
<strong>ConfigMaps</strong>. For example, a logging service can change
log levels based on the current environment by updating the ConfigMap
without needing to redeploy the application.</p>
<p>Example:</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="at">kubectl create configmap logging-config --from-literal=logLevel=debug</span></span></code></pre></div></li>
<li><p><strong>Feature Toggles</strong>:<br />
We can manage feature flags with ConfigMaps. This allows teams to turn
features on or off without deploying new code. It is helpful for testing
new features or rolling them out slowly.</p>
<p>Example:</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> feature-flags</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">new-feature</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;enabled&quot;</span></span></code></pre></div></li>
<li><p><strong>Multi-Cluster Management</strong>:<br />
In companies with many Kubernetes clusters, we can manage application
configurations from one place. We can store configurations in a Git
repository and sync them across clusters using tools like ArgoCD or
Flux. This helps keep deployments consistent.</p>
<p>Example of GitOps with Helm:</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> helm.cattle.io/v1</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> HelmChart</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">chart</span><span class="kw">:</span><span class="at"> myapp-chart</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">targetNamespace</span><span class="kw">:</span><span class="at"> default</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="fu">  valuesContent</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    replicaCount: 3</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    image:</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>      repository: myapp</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>      tag: latest</span></code></pre></div></li>
<li><p><strong>Blue-Green Deployments</strong>:<br />
With Kubernetes configurations, we can do blue-green deployments by
keeping two separate configurations for the old and new application
versions. This helps us to quickly go back if we face any issues.</p>
<p>Example configuration switch:</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="at">kubectl apply -f blue-app-config.yaml</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="at">kubectl apply -f green-app-config.yaml</span></span></code></pre></div></li>
</ol>
<p>These use cases show how flexible Kubernetes is in managing
application configurations. It helps make the deployment process better
and makes sure that applications can adapt to different needs and
environments. For more details about Kubernetes configurations, we can
look at <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-configmaps-and-how-do-i-use-them.html">Kubernetes
ConfigMaps</a> and <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-secrets-in-kubernetes-securely.html">Secrets
Management</a>.</p>
<h2
id="how-to-monitor-and-update-application-configuration-dynamically">How
to Monitor and Update Application Configuration Dynamically?</h2>
<p>In Kubernetes, we can monitor and update application configuration in
a dynamic way. We have several strategies and tools for this. The main
parts we use are ConfigMaps, Secrets, and tools like KubeWatcher or
other configuration management tools.</p>
<ol type="1">
<li><strong>Using ConfigMaps and Secrets</strong>:
<ul>
<li><p>We can update ConfigMaps and Secrets without needing to redeploy
our applications. When we update a ConfigMap or Secret, Kubernetes can
automatically send these changes to the pods that use them. This depends
on how we set it up.</p></li>
<li><p>Here is an example of how to update a ConfigMap:</p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create configmap app-config <span class="at">--from-file</span><span class="op">=</span>config.properties <span class="at">--dry-run</span><span class="op">=</span>client <span class="at">-o</span> yaml <span class="kw">|</span> <span class="ex">kubectl</span> apply <span class="at">-f</span> <span class="at">-</span></span></code></pre></div></li>
</ul></li>
<li><strong>Environment Variable Injection</strong>:
<ul>
<li><p>Our applications can read from environment variables. We set
these using ConfigMaps or Secrets. When we update these, we can program
the application to reload the configuration automatically.</p></li>
<li><p>Here is an example of a deployment YAML:</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp:latest</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> APP_CONFIG</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="at">                </span><span class="fu">configMapKeyRef</span><span class="kw">:</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="at">                  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-config</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="at">                  </span><span class="fu">key</span><span class="kw">:</span><span class="at"> config.properties</span></span></code></pre></div></li>
</ul></li>
<li><strong>Using KubeWatcher</strong>:
<ul>
<li>KubeWatcher helps us watch for changes in ConfigMaps and Secrets. It
can trigger updates in the application. We can add custom logic in our
application that listens for these changes.</li>
</ul></li>
<li><strong>External Configuration Management</strong>:
<ul>
<li>We can use tools like Consul or Spring Cloud Config. These tools
help us manage configuration outside of Kubernetes. We can set our
applications to check these external sources for updates.</li>
</ul></li>
<li><strong>Implementing a Reload Mechanism</strong>:
<ul>
<li><p>Our applications should have a way to reload configurations when
they see changes. We can do this using file watchers, HTTP endpoints, or
even custom signal handling.</p></li>
<li><p>Here is an example code in a Node.js application to reload the
configuration:</p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> fs <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> configPath <span class="op">=</span> <span class="st">&#39;/etc/config/config.properties&#39;</span><span class="op">;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>fs<span class="op">.</span><span class="fu">watchFile</span>(configPath<span class="op">,</span> (curr<span class="op">,</span> prev) <span class="kw">=&gt;</span> {</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`</span><span class="sc">${</span>configPath<span class="sc">}</span><span class="vs"> file changed`</span>)<span class="op">;</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">loadConfig</span>()<span class="op">;</span> <span class="co">// Function to load the new configuration</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div></li>
</ul></li>
</ol>
<p>By using these strategies, we can monitor and update application
configurations in a dynamic way in Kubernetes. This helps our
applications respond well to configuration changes without any
downtime.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3
id="what-is-the-role-of-configmaps-in-kubernetes-application-configuration-management">1.
What is the role of ConfigMaps in Kubernetes application configuration
management?</h3>
<p>ConfigMaps in Kubernetes are very important. They help us manage
application configuration data separately from the application code.
This way, we can keep configuration files separate from image content.
It makes it easier to manage different environments. When we use
ConfigMaps, we can update configuration settings without having to
redeploy our application. This gives us more flexibility and helps us
reduce downtime.</p>
<h3 id="how-do-kubernetes-secrets-help-in-managing-sensitive-data">2.
How do Kubernetes Secrets help in managing sensitive data?</h3>
<p>Kubernetes Secrets give us a safe way to manage sensitive data. This
includes things like passwords, OAuth tokens, and SSH keys in our
Kubernetes cluster. By using Secrets, we can keep this important
information out of our application code and environment variables. This
improves our security and helps us follow rules, while still allowing
our applications to access sensitive data safely.</p>
<h3
id="can-i-customize-application-configuration-for-different-environments-in-kubernetes">3.
Can I customize application configuration for different environments in
Kubernetes?</h3>
<p>Yes, we can customize application configuration for different
environments in Kubernetes. We can do this in a few ways. One way is to
create separate ConfigMaps and Secrets for each environment. For
example, we can have different ConfigMaps for development, staging, and
production. Then we can reference them in our deployment manifests. This
lets us keep different configurations while using the same application
code.</p>
<h3
id="what-are-the-best-practices-for-managing-kubernetes-configuration-files">4.
What are the best practices for managing Kubernetes configuration
files?</h3>
<p>To manage Kubernetes configuration files well, we should follow some
best practices. First, we use version control for our YAML files.
Second, we should use ConfigMaps and Secrets for managing
configurations. Also, tools like Helm can help us with templating. It is
important to document our configurations. We can use labels and
annotations to help us organize and track our resources better.</p>
<h3
id="how-can-i-dynamically-update-application-configuration-in-kubernetes">5.
How can I dynamically update application configuration in
Kubernetes?</h3>
<p>We can dynamically update application configuration in Kubernetes
with ConfigMaps and Secrets. When we make changes to a ConfigMap or
Secret, we can start a rolling update of our pods to apply the new
configuration. Also, we can use tools like Helm to manage releases and
updates better. This makes sure our application configuration is always
up to date.</p>
<p>For more information on Kubernetes application configuration
management, we might find these articles helpful: <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-configmaps-and-how-do-i-use-them.html">What
Are Kubernetes ConfigMaps and How Do I Use Them?</a> and <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-secrets-in-kubernetes-securely.html">How
Do I Manage Secrets in Kubernetes Securely?</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            