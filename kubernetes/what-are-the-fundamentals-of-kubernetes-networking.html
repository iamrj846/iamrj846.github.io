
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <title>What are the Fundamentals of Kubernetes Networking?</title>
            <meta name="description" content="Discover the fundamentals of Kubernetes networking, including services, pods, and network policies for efficient cluster communication.">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">What are the Fundamentals of Kubernetes Networking?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Kubernetes networking is about the basic ideas and setups that help
communication inside a Kubernetes cluster. It is very important for
managing how different parts of the Kubernetes system talk to each
other. This way, Pods can send messages to each other. Also, outside
clients can reach the apps running in the cluster. Knowing about
Kubernetes networking is key for us if we want to deploy and manage apps
well in a cloud-native setup.</p>
<p>In this article, we will look at the main parts and ideas of
Kubernetes networking. We will see how pod networking works. We will
talk about services and how they help with networking. We will also
learn how to set up network policies. We will discuss ingress
controllers, load balancer services, and how to solve networking
problems. We will share best practices to make Kubernetes networking
better. Plus, we will show real-life examples that show why good
networking is important for Kubernetes.</p>
<ul>
<li>What Are the Core Concepts of Kubernetes Networking?</li>
<li>How Does Pod Networking Work in Kubernetes?</li>
<li>What Are Services and How Do They Help Networking?</li>
<li>How to Set Up Network Policies in Kubernetes?</li>
<li>What Is the Role of Ingress Controllers in Kubernetes
Networking?</li>
<li>How to Show Your Applications with LoadBalancer Services?</li>
<li>What Are Real-Life Examples for Kubernetes Networking?</li>
<li>How to Solve Networking Problems in Kubernetes?</li>
<li>What Are the Best Practices for Kubernetes Networking?</li>
<li>Frequently Asked Questions</li>
</ul>
<p>If we want to learn more about Kubernetes, we can check these
articles: <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">What
is Kubernetes and How Does it Simplify Container Management?</a>, <a
href="https://bestonlinetutorial.com/kubernetes/how-does-kubernetes-networking-work.html">How
Does Kubernetes Networking Work?</a>, and <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-services-and-how-do-they-expose-applications.html">What
Are Kubernetes Services and How Do They Expose Applications?</a>.</p>
<h2 id="how-does-pod-networking-work-in-kubernetes">How Does Pod
Networking Work in Kubernetes?</h2>
<p>In Kubernetes, pod networking is very important for smooth
communication between pods. Each pod gets its own IP address. This
allows direct communication without using NAT. We have a flat network
structure where all pods can talk to each other, no matter where they
run.</p>
<h3 id="key-concepts-of-pod-networking">Key Concepts of Pod
Networking</h3>
<ul>
<li><strong>Pod IP</strong>: Each pod gets a unique IP address that all
other pods in the cluster can reach.</li>
<li><strong>Flat Network Model</strong>: Pods talk to each other
directly. This makes the network faster and easier to set up.</li>
<li><strong>Container-to-Container Communication</strong>: Inside a
single pod, containers can talk through <code>localhost</code>, since
they share the same network.</li>
</ul>
<h3 id="network-plugins">Network Plugins</h3>
<p>Kubernetes works with different network plugins (CNI - Container
Network Interface) for pod networking. Some common CNIs are:</p>
<ul>
<li><strong>Flannel</strong>: A basic network fabric that gives an
overlay network.</li>
<li><strong>Calico</strong>: Provides network connection and also
enforces network policies.</li>
<li><strong>Weave Net</strong>: Uses a mesh network to let containers
communicate across different hosts.</li>
</ul>
<h3 id="example-of-pod-networking">Example of Pod Networking</h3>
<p>When we create a pod in Kubernetes, it gets an IP address that other
pods can use. Here is a simple YAML configuration to create a pod:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-pod</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-container</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span></code></pre></div>
<p>After we deploy this pod, we can find its IP address using:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get pod my-pod <span class="at">-o</span> jsonpath=<span class="st">&#39;{.status.podIP}&#39;</span></span></code></pre></div>
<h3 id="communication-between-pods">Communication Between Pods</h3>
<p>To show how pods communicate, let’s look at two pods:
<code>pod-a</code> and <code>pod-b</code>. If <code>pod-a</code> wants
to send an HTTP request to <code>pod-b</code>, it can use this
command:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> http://<span class="op">&lt;</span>pod-b-ip<span class="op">&gt;</span>:<span class="op">&lt;</span>port<span class="op">&gt;</span></span></code></pre></div>
<p>Here, <code>&lt;pod-b-ip&gt;</code> is the IP we get from the
<code>kubectl get pod</code> command.</p>
<h3 id="dns-resolution">DNS Resolution</h3>
<p>Kubernetes has built-in DNS for service discovery. This helps pods to
communicate using DNS names instead of IP addresses. For example, if
<code>pod-b</code> is in a service called <code>my-service</code>,
<code>pod-a</code> can reach it like this:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> http://my-service</span></code></pre></div>
<p>The service will automatically resolve to the right pod IPs.</p>
<h3 id="network-policies">Network Policies</h3>
<p>To keep pod communication safe, Kubernetes lets us use network
policies. These policies say what traffic can go to and from pods. For
example, we can limit traffic to a pod based on labels, namespaces, or
IP ranges by using a NetworkPolicy resource.</p>
<h3 id="example-network-policy">Example Network Policy</h3>
<p>Here is a simple NetworkPolicy example that allows traffic only from
pods with the label <code>role: frontend</code>:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> networking.k8s.io/v1</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> NetworkPolicy</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> allow-frontend</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">podSelector</span><span class="kw">:</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ingress</span><span class="kw">:</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">from</span><span class="kw">:</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">podSelector</span><span class="kw">:</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">role</span><span class="kw">:</span><span class="at"> frontend</span></span></code></pre></div>
<p>This policy makes sure that only pods with the label
<code>role: frontend</code> can reach pods with the label
<code>app: my-app</code>.</p>
<p>For more details about Kubernetes networking concepts, we can check
<a
href="https://bestonlinetutorial.com/kubernetes/how-does-kubernetes-networking-work.html">how
does Kubernetes networking work</a>.</p>
<h2 id="what-are-services-and-how-do-they-facilitate-networking">What
Are Services and How Do They Facilitate Networking?</h2>
<p>In Kubernetes, we think of a Service as a way to group Pods and set
rules on how to reach them. This helps us have stable networking and
balance loads. Services help with networking in these ways:</p>
<ul>
<li><p><strong>Stable Endpoint</strong>: Pods do not last forever. They
can be made and removed often. A Service gives a stable IP address and
DNS name for users. This lets communication keep going smoothly even
when the Pods change.</p></li>
<li><p><strong>Load Balancing</strong>: Services balance the traffic
going to the Pods. This is important for sharing workloads evenly and
making things more reliable.</p></li>
<li><p><strong>Service Types</strong>: Kubernetes has different types of
Services:</p>
<ul>
<li><strong>ClusterIP</strong>: This type shows the Service on a
cluster-internal IP. It means only people inside the cluster can reach
the Service.</li>
<li><strong>NodePort</strong>: This type shows the Service on each
Node’s IP at a fixed port. This way, outside traffic can reach the
Service.</li>
<li><strong>LoadBalancer</strong>: Cloud providers create this type. It
makes an external load balancer that sends traffic to the Service.</li>
<li><strong>ExternalName</strong>: This type links the Service to an
external name, like a DNS name.</li>
</ul></li>
</ul>
<h3 id="example-of-a-kubernetes-service">Example of a Kubernetes
Service</h3>
<p>Here is a simple example of a ClusterIP Service in YAML:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-service</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">protocol</span><span class="kw">:</span><span class="at"> TCP</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">targetPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">8080</span></span></code></pre></div>
<p>In this example, the Service called <code>my-service</code> selects
Pods with the label <code>app: my-app</code> and shows port 80. It sends
traffic to port 8080 on the selected Pods.</p>
<h3 id="accessing-services">Accessing Services</h3>
<p>We can reach Kubernetes Services by their DNS names. They follow this
pattern:
<code>&lt;service-name&gt;.&lt;namespace&gt;.svc.cluster.local</code>.
For instance, if the Service above is in the default namespace, we can
access it using <code>my-service.default.svc.cluster.local</code>.</p>
<h3 id="service-discovery">Service Discovery</h3>
<p>Kubernetes has built-in ways to find Services. Pods can talk to
Services using their DNS names or IP addresses. This allows us to find
services without putting fixed IP addresses in our application code.</p>
<p>For more details on Kubernetes services, we can look at <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-services-and-how-do-they-expose-applications.html">What
Are Kubernetes Services and How Do They Expose Applications?</a>.</p>
<h2 id="how-to-implement-network-policies-in-kubernetes">How to
Implement Network Policies in Kubernetes?</h2>
<p>Network Policies in Kubernetes are very important. They help us
control how traffic moves between Pods. They tell us how groups of Pods
can talk to each other and to other network points. Here are the steps
to implement Network Policies in Kubernetes:</p>
<ol type="1">
<li><p><strong>Understand Network Policies</strong>: Network Policies
use selectors. They target Pods and show which incoming and outgoing
traffic is allowed. By default, all traffic is blocked unless we make a
policy.</p></li>
<li><p><strong>Label Your Pods</strong>: We need to add labels to the
Pods we want to control with Network Policies. For example:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-container</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-image</span></span></code></pre></div></li>
<li><p><strong>Create a Network Policy</strong>: We define a Network
Policy in a YAML file. This file should show the rules for incoming
and/or outgoing traffic. Here is an example. It allows traffic only from
Pods with the label <code>role: frontend</code> to Pods with the label
<code>app: my-app</code>:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> networking.k8s.io/v1</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> NetworkPolicy</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> allow-frontend</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">namespace</span><span class="kw">:</span><span class="at"> default</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">podSelector</span><span class="kw">:</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ingress</span><span class="kw">:</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">from</span><span class="kw">:</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">podSelector</span><span class="kw">:</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">role</span><span class="kw">:</span><span class="at"> frontend</span></span></code></pre></div></li>
<li><p><strong>Apply the Network Policy</strong>: We use
<code>kubectl</code> to apply the Network Policy. We can do this with
this command:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> allow-frontend.yaml</span></code></pre></div></li>
<li><p><strong>Verify the Network Policy</strong>: We check if the
Network Policy is applied correctly. We can use this command:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get networkpolicies</span></code></pre></div></li>
<li><p><strong>Testing the Policy</strong>: We need to run Pods with the
correct labels. Then, we check if they can communicate as we set in the
Network Policy. We can use <code>kubectl exec</code> to test the
connection between Pods.</p></li>
<li><p><strong>Using Multiple Policies</strong>: We can create many
Network Policies for different Pods. They will work together. If any
policy allows traffic, then it is okay.</p></li>
<li><p><strong>Important Considerations</strong>:</p>
<ul>
<li>Make sure your cluster network provider works with Network Policies
(like Calico or Cilium).</li>
<li>We should monitor and test our policies. This helps us not block
important traffic by mistake.</li>
</ul></li>
</ol>
<p>For more information about Network Policies, we can check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-secure-network-communication-with-network-policies.html">this
article</a>.</p>
<h2
id="what-is-the-role-of-ingress-controllers-in-kubernetes-networking">What
Is the Role of Ingress Controllers in Kubernetes Networking?</h2>
<p>Ingress controllers are important parts in Kubernetes networking.
They help manage how outside users access services inside a cluster.
They allow HTTP and HTTPS routing to services based on rules. They also
help with managing traffic that comes into the cluster.</p>
<h3 id="key-functions-of-ingress-controllers">Key Functions of Ingress
Controllers:</h3>
<ul>
<li><strong>Routing Traffic</strong>: They direct outside requests to
the right services based on hostnames and paths.</li>
<li><strong>TLS Termination</strong>: They handle SSL/TLS termination.
This lets users connect securely to applications.</li>
<li><strong>Load Balancing</strong>: They spread incoming traffic across
many service instances.</li>
<li><strong>Path-based Routing</strong>: They route requests to
different services based on URL paths.</li>
</ul>
<h3 id="example-configuration">Example Configuration:</h3>
<p>Here is an example of how to set up an Ingress resource:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> networking.k8s.io/v1</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Ingress</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-ingress</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">annotations</span><span class="kw">:</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">nginx.ingress.kubernetes.io/rewrite-target</span><span class="kw">:</span><span class="at"> /</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">rules</span><span class="kw">:</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">host</span><span class="kw">:</span><span class="at"> example.com</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">http</span><span class="kw">:</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">paths</span><span class="kw">:</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">path</span><span class="kw">:</span><span class="at"> /service1</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">pathType</span><span class="kw">:</span><span class="at"> Prefix</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">backend</span><span class="kw">:</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">service</span><span class="kw">:</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">name</span><span class="kw">:</span><span class="at"> service1</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">port</span><span class="kw">:</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">number</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">path</span><span class="kw">:</span><span class="at"> /service2</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">pathType</span><span class="kw">:</span><span class="at"> Prefix</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">backend</span><span class="kw">:</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">service</span><span class="kw">:</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">name</span><span class="kw">:</span><span class="at"> service2</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">port</span><span class="kw">:</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">number</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div>
<h3 id="common-ingress-controllers">Common Ingress Controllers:</h3>
<ul>
<li><strong>NGINX Ingress Controller</strong>: Many people use it
because it has many features and is easy to configure.</li>
<li><strong>Traefik</strong>: It is known for its simplicity and can
find services automatically.</li>
<li><strong>HAProxy Ingress</strong>: It offers advanced options for
load balancing.</li>
</ul>
<h3 id="installation-of-nginx-ingress-controller">Installation of NGINX
Ingress Controller:</h3>
<p>To install the NGINX Ingress Controller, we can use this command:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/cloud/deploy.yaml</span></code></pre></div>
<h3 id="additional-considerations">Additional Considerations:</h3>
<ul>
<li><strong>Ingress Resources</strong>: They define the rules and setups
for routing outside traffic to inside services.</li>
<li><strong>Custom Annotations</strong>: We can use them to change
behavior, like showing error pages or limiting requests.</li>
</ul>
<p>For more information on setting up Ingress and its features, please
check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-configure-ingress-for-external-access-to-my-applications.html">how
to configure ingress for external access to applications</a>.</p>
<h2 id="how-to-expose-your-applications-with-loadbalancer-services">How
to Expose Your Applications with LoadBalancer Services?</h2>
<p>In Kubernetes, we use LoadBalancer services to show our applications
to the internet. When we create a LoadBalancer service, Kubernetes talks
with the cloud provider’s API. It sets up a load balancer that sends
external traffic to our application.</p>
<h3 id="creating-a-loadbalancer-service">Creating a LoadBalancer
Service</h3>
<p>To create a LoadBalancer service, we need to write it in a YAML file.
Here is an example of how to set up a LoadBalancer service for a
deployment called <code>my-app</code>:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-service</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> LoadBalancer</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">targetPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">8080</span></span></code></pre></div>
<h3 id="explanation-of-the-configuration">Explanation of the
Configuration</h3>
<ul>
<li><strong>apiVersion</strong>: This tells the API version.</li>
<li><strong>kind</strong>: This shows the type of resource. Here, it is
a Service.</li>
<li><strong>metadata</strong>: This has the name of the service.</li>
<li><strong>spec</strong>: This shows the service details.
<ul>
<li><strong>type</strong>: We set this to <code>LoadBalancer</code>. It
makes an external load balancer.</li>
<li><strong>selector</strong>: This matches the pods that this service
will send traffic to.</li>
<li><strong>ports</strong>: This defines the service port and the target
port on the pod.</li>
</ul></li>
</ul>
<h3 id="deploying-the-service">Deploying the Service</h3>
<p>To apply this setup, we save it to a file called
<code>loadbalancer-service.yaml</code>. Then we run this command:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> loadbalancer-service.yaml</span></code></pre></div>
<h3 id="accessing-the-loadbalancer">Accessing the LoadBalancer</h3>
<p>After we make the LoadBalancer service, we can check its status
with:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get services</span></code></pre></div>
<p>This command will show us the external IP address for our
LoadBalancer service. It might take some time for the IP to be
ready.</p>
<h3 id="important-considerations">Important Considerations</h3>
<ul>
<li><strong>Cloud Provider</strong>: LoadBalancer services need a cloud
provider that can set up external load balancers. Examples are AWS, GCP,
and Azure.</li>
<li><strong>Cost</strong>: Using LoadBalancer services might cost extra
from our cloud provider.</li>
<li><strong>Health Checks</strong>: We need to make sure our application
answers health checks. This helps the load balancer send traffic
correctly.</li>
</ul>
<p>For more info on Kubernetes services, we can check <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-services-and-how-do-they-expose-applications.html">what
are Kubernetes services and how do they expose applications</a>.</p>
<h2 id="what-are-real-life-use-cases-for-kubernetes-networking">What Are
Real-Life Use Cases for Kubernetes Networking?</h2>
<p>Kubernetes networking is very important for helping different parts
of a Kubernetes cluster talk to each other. Here are some real-life
examples showing how we use Kubernetes networking:</p>
<ol type="1">
<li><strong>Microservices Architecture</strong>:
<ul>
<li>In a microservices setup, different services need to talk to each
other. Kubernetes services help with this. They give stable IPs and DNS
names for each service. For instance, a payment service can call an
inventory service using its name.</li>
</ul>
<div class="sourceCode" id="cb16"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> payment-service</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> payment</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">protocol</span><span class="kw">:</span><span class="at"> TCP</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">targetPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">8080</span></span></code></pre></div></li>
<li><strong>Load Balancing</strong>:
<ul>
<li>Kubernetes can show services to the outside using LoadBalancer
services. It spreads incoming traffic across many pod copies. This helps
keep applications available and able to grow.</li>
</ul>
<div class="sourceCode" id="cb17"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> LoadBalancer</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">targetPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">8080</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span></code></pre></div></li>
<li><strong>Multi-Cloud Deployments</strong>:
<ul>
<li>Kubernetes networking helps with hybrid cloud and multi-cloud plans.
It lets applications run across different cloud environments. We can use
network policies to manage and secure traffic in these places.</li>
</ul></li>
<li><strong>Service Mesh Integration</strong>:
<ul>
<li>Service meshes like Istio or Linkerd work with Kubernetes
networking. They give advanced features like traffic control, security,
and monitoring for microservices. They make communication better by
adding a layer to manage how services talk to each other.</li>
</ul></li>
<li><strong>CI/CD Pipelines</strong>:
<ul>
<li>In CI/CD workflows, Kubernetes networking helps connect testing
environments smoothly. We can create services for testing quickly and
then remove them after. This makes testing faster.</li>
</ul></li>
<li><strong>Network Policies for Security</strong>:
<ul>
<li>Kubernetes lets us set network policies to control how pods talk to
each other. In a multi-tenant setup, this is very important for
security. For example, allowing traffic only from certain namespaces can
reduce risks.</li>
</ul>
<div class="sourceCode" id="cb18"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> networking.k8s.io/v1</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> NetworkPolicy</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> allow-apps</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">podSelector</span><span class="kw">:</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">role</span><span class="kw">:</span><span class="at"> db</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ingress</span><span class="kw">:</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">from</span><span class="kw">:</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">podSelector</span><span class="kw">:</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">role</span><span class="kw">:</span><span class="at"> frontend</span></span></code></pre></div></li>
<li><strong>Ingress Controllers for External Access</strong>:
<ul>
<li>Ingress controllers handle how the outside world accesses services
in a cluster. They allow for HTTP and HTTPS routing. This is important
for exposing web applications while keeping a single entry point.</li>
</ul>
<div class="sourceCode" id="cb19"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> networking.k8s.io/v1</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Ingress</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-ingress</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">rules</span><span class="kw">:</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">host</span><span class="kw">:</span><span class="at"> myapp.example.com</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">http</span><span class="kw">:</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">paths</span><span class="kw">:</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="kw">-</span><span class="at"> </span><span class="fu">path</span><span class="kw">:</span><span class="at"> /</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">pathType</span><span class="kw">:</span><span class="at"> Prefix</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">backend</span><span class="kw">:</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">service</span><span class="kw">:</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="at">                </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-service</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="at">                </span><span class="fu">port</span><span class="kw">:</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="at">                  </span><span class="fu">number</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div></li>
<li><strong>Monitoring and Troubleshooting</strong>:
<ul>
<li>Kubernetes networking lets us monitor network traffic and see
performance data using tools like Prometheus and Grafana. This helps us
find and fix network problems by showing us what happens in the
network.</li>
</ul></li>
</ol>
<p>These examples show how useful and important Kubernetes networking is
for running, managing, and growing modern applications. For more details
on Kubernetes networking, we can check out <a
href="https://bestonlinetutorial.com/kubernetes/how-does-kubernetes-networking-work.html">how
does Kubernetes networking work</a>.</p>
<h2 id="how-to-troubleshoot-networking-issues-in-kubernetes">How to
Troubleshoot Networking Issues in Kubernetes?</h2>
<p>Troubleshooting networking issues in Kubernetes can be tricky. There
are many parts to deal with. Here are some simple steps and tools we can
use to find and fix common networking problems.</p>
<ol type="1">
<li><strong>Check Pod Connectivity</strong>:
<ul>
<li><p>We can use <code>kubectl exec</code> to go inside a pod and ping
another pod:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> exec <span class="at">-it</span> <span class="op">&lt;</span>pod-name<span class="op">&gt;</span> -- ping <span class="op">&lt;</span>target-pod-ip<span class="op">&gt;</span></span></code></pre></div></li>
</ul></li>
<li><strong>Inspect Network Policies</strong>:
<ul>
<li><p>Let’s look at network policies. These can stop traffic between
pods:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get networkpolicies <span class="at">--all-namespaces</span></span></code></pre></div></li>
</ul></li>
<li><strong>Examine Service Configuration</strong>:
<ul>
<li><p>We need to check that services are set up properly:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> describe service <span class="op">&lt;</span>service-name<span class="op">&gt;</span></span></code></pre></div></li>
<li><p>We should also make sure the service type fits what we need
(ClusterIP, NodePort, LoadBalancer).</p></li>
</ul></li>
<li><strong>Check DNS Resolution</strong>:
<ul>
<li><p>We can test DNS resolution inside the cluster:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> exec <span class="at">-it</span> <span class="op">&lt;</span>pod-name<span class="op">&gt;</span> -- nslookup <span class="op">&lt;</span>service-name<span class="op">&gt;</span></span></code></pre></div></li>
</ul></li>
<li><strong>View Logs</strong>:
<ul>
<li><p>It is good to check logs for kube-dns or CoreDNS pods for any DNS
problems:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> logs <span class="op">&lt;</span>dns-pod-name<span class="op">&gt;</span> -n kube-system</span></code></pre></div></li>
</ul></li>
<li><strong>Use Network Troubleshooting Tools</strong>:
<ul>
<li><p>We can use tools like <code>kubectl-troubleshoot</code> to help
us do checks:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> troubleshoot pod <span class="op">&lt;</span>pod-name<span class="op">&gt;</span></span></code></pre></div></li>
</ul></li>
<li><strong>Monitor Network Traffic</strong>:
<ul>
<li>We can install tools like <code>tcpdump</code> or
<code>wireshark</code> on the nodes to see how packets flow.</li>
</ul></li>
<li><strong>Check Node Network Configuration</strong>:
<ul>
<li>We should make sure the node network interface is set up correctly
to let pods talk to each other.</li>
</ul></li>
<li><strong>Inspect CNI Plugin</strong>:
<ul>
<li>If we use a certain CNI plugin like Flannel or Calico, we need to
check its logs and guide for any known problems.</li>
</ul></li>
<li><strong>Kubernetes Events</strong>:
<ul>
<li><p>Let’s look at events related to networking:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get events <span class="at">--all-namespaces</span></span></code></pre></div></li>
</ul></li>
</ol>
<p>Using these steps and commands can help us troubleshoot networking
issues in Kubernetes. If we want to learn more about Kubernetes
networking, we can check the article on <a
href="https://bestonlinetutorial.com/kubernetes/how-does-kubernetes-networking-work.html">how
does Kubernetes networking work</a>.</p>
<h2 id="what-are-the-best-practices-for-kubernetes-networking">What Are
the Best Practices for Kubernetes Networking?</h2>
<p>Kubernetes networking is very important for good communication
between different parts in a cluster. We can follow some best practices
to make it better.</p>
<ol type="1">
<li><p><strong>Use Network Policies</strong>: We should use network
policies to control how traffic moves between pods. This helps keep
things safe by allowing only the communication that we need.</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> networking.k8s.io/v1</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> NetworkPolicy</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-network-policy</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">namespace</span><span class="kw">:</span><span class="at"> default</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">podSelector</span><span class="kw">:</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">role</span><span class="kw">:</span><span class="at"> frontend</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">policyTypes</span><span class="kw">:</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> Ingress</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ingress</span><span class="kw">:</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">from</span><span class="kw">:</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">podSelector</span><span class="kw">:</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">role</span><span class="kw">:</span><span class="at"> backend</span></span></code></pre></div></li>
<li><p><strong>Choose the Right CNI Plugin</strong>: We need to pick a
Container Network Interface (CNI) plugin that works for us. Some popular
ones are Calico, Flannel, and Weave Net. Each one has its own features
and performance.</p></li>
<li><p><strong>Leverage Services for Load Balancing</strong>: We can use
Kubernetes Services to show our applications. Services give us stable IP
addresses and help balance the load for pod access.</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-service</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">protocol</span><span class="kw">:</span><span class="at"> TCP</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">targetPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">8080</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> ClusterIP</span></span></code></pre></div></li>
<li><p><strong>Utilize Ingress Controllers</strong>: We should use
Ingress resources to control external access to services. This will help
us with routing and SSL termination.</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> networking.k8s.io/v1</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Ingress</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-ingress</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">rules</span><span class="kw">:</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">host</span><span class="kw">:</span><span class="at"> myapp.example.com</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">http</span><span class="kw">:</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">paths</span><span class="kw">:</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">path</span><span class="kw">:</span><span class="at"> /</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">pathType</span><span class="kw">:</span><span class="at"> Prefix</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">backend</span><span class="kw">:</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">service</span><span class="kw">:</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-service</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">port</span><span class="kw">:</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">number</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div></li>
<li><p><strong>Monitor Network Performance</strong>: We can use tools
like Prometheus and Grafana to check network performance. This helps us
find problems or slow points.</p></li>
<li><p><strong>Enable DNS for Service Discovery</strong>: Kubernetes
gives us DNS for services automatically. We must make sure our
applications use service names for communication inside to use this
feature.</p></li>
<li><p><strong>Optimize Resource Requests and Limits</strong>: We should
set good resource requests and limits for our pods. This helps us avoid
issues with resources and makes networking better.</p></li>
<li><p><strong>Implement Health Checks</strong>: We can use liveness and
readiness probes to check how healthy our applications are. This makes
sure traffic goes only to healthy pods.</p></li>
<li><p><strong>Segment Network Traffic</strong>: We can use namespaces
and labels to organize our resources. This makes things less complicated
and improves security.</p></li>
<li><p><strong>Regularly Review Security Practices</strong>: We must
keep looking at our network policies and settings. We can check guides
like <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-security-best-practices.html">Kubernetes
Security Best Practices</a> for the latest security tips.</p></li>
</ol>
<p>If we follow these best practices for Kubernetes networking, we can
make our environments better in performance, security, and
reliability.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-is-the-purpose-of-kubernetes-networking">1. What is the
purpose of Kubernetes networking?</h3>
<p>Kubernetes networking is very important. It helps different parts of
a Kubernetes cluster talk to each other. Pods can communicate with each
other, with services, and with outside resources. When we understand the
basics of Kubernetes networking, we can design better systems and fix
connection problems easily.</p>
<h3 id="how-does-kubernetes-handle-service-discovery">2. How does
Kubernetes handle service discovery?</h3>
<p>Kubernetes uses services to find each other. Each service gets a
stable IP address and a DNS name. This helps pods to find and talk to
each other using these names. This system makes it easier to connect
different parts of an application. It makes Kubernetes networking work
better and be easier to manage.</p>
<h3 id="what-are-the-different-types-of-services-in-kubernetes">3. What
are the different types of services in Kubernetes?</h3>
<p>Kubernetes has different types of services. These are ClusterIP,
NodePort, LoadBalancer, and ExternalName. ClusterIP is the default one.
It gives internal access only. NodePort opens the service on each node’s
IP at a fixed port. LoadBalancer sets up an external load balancer.
ExternalName connects a service to a DNS name. Knowing these types is
important for good Kubernetes networking.</p>
<h3 id="how-can-i-secure-my-kubernetes-networking">4. How can I secure
my Kubernetes networking?</h3>
<p>To secure Kubernetes networking, we need to use network policies.
These policies control how traffic moves between pods. We can create
rules that say which pods can talk to each other. This makes our system
safer. Also, using tools like Istio can help us manage and secure the
communication between services. This way, our Kubernetes applications
are not just working but also safe.</p>
<h3
id="what-are-common-networking-issues-in-kubernetes-and-how-can-i-troubleshoot-them">5.
What are common networking issues in Kubernetes and how can I
troubleshoot them?</h3>
<p>Some common networking problems in Kubernetes are connection issues
between pods, DNS not working, and services that are not set up right.
To fix these problems, we can use tools like <code>kubectl exec</code>
to check pod logs, look at network policies, and check service settings.
For more help, you can read our article on <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-troubleshoot-networking-issues-in-kubernetes.html">how
to troubleshoot networking issues in Kubernetes</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            