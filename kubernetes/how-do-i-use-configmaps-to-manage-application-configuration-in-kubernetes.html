
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TFCQEJR7TD');
</script>
            <title>How Do I Use ConfigMaps to Manage Application Configuration in Kubernetes?</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Common CSS & Icons -->
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
<link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
<link rel="stylesheet" href="/assets/css/post.css">
            <meta name="description" content="Discover how to effectively use ConfigMaps in Kubernetes for streamlined application configuration management. Read more!">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Do I Use ConfigMaps to Manage Application Configuration in Kubernetes?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>ConfigMaps are important objects in Kubernetes. They help us store
and manage configuration data that is not sensitive. By doing this, we
can keep it separate from our application code. This makes our
applications more flexible and easier to maintain. With ConfigMaps, we
can set configuration settings using key-value pairs. Applications in
Kubernetes clusters can easily access this data. Keeping the
configuration separate from the application code is very important. It
allows us to deploy applications in different environments without
changing the code.</p>
<p>In this article, we will see how to use ConfigMaps to manage
application configuration in Kubernetes. We will talk about many topics.
We will explain what ConfigMaps are and their benefits. We will show how
to create and update ConfigMaps. We will also explain how to integrate
them into Pods and share best practices for using them. We will also
talk about managing sensitive data with ConfigMaps and give some common
use cases. The following headers will help us in our discussion:</p>
<ul>
<li>How Can I Use ConfigMaps for Managing Application Configuration in
Kubernetes?</li>
<li>What are ConfigMaps and Why Use Them?</li>
<li>How to Create a ConfigMap in Kubernetes?</li>
<li>How to Use ConfigMaps in Pods?</li>
<li>How to Update a ConfigMap Dynamically?</li>
<li>How to Access ConfigMap Data in Your Application?</li>
<li>What are Common Use Cases for ConfigMaps?</li>
<li>Best Practices for Using ConfigMaps in Kubernetes?</li>
<li>How to Manage Sensitive Data with ConfigMaps?</li>
<li>Frequently Asked Questions</li>
</ul>
<p>This guide will help us understand how to use ConfigMaps for better
application configuration management in Kubernetes. It will make our
deployment processes easier. For more reading on Kubernetes, we can
check articles like <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">What
is Kubernetes and How Does It Simplify Container Management?</a> and <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-use-kubernetes-secrets-to-store-database-credentials.html">How
Do I Use Kubernetes Secrets to Store Database Credentials?</a>.</p>
<h2 id="what-are-configmaps-and-why-use-them">What are ConfigMaps and
Why Use Them?</h2>
<p>ConfigMaps in Kubernetes help us manage app configuration data in a
simple key-value format. They let us separate configuration from image
content. This helps keep our containerized apps portable. Here are the
main reasons to use ConfigMaps:</p>
<ul>
<li><p><strong>Decoupling Configuration</strong>: ConfigMaps let us
separate configuration from app code. This makes it easier to manage and
change configurations without impacting the appâ€™s lifecycle.</p></li>
<li><p><strong>Dynamic Configuration</strong>: We can update the
configuration without rebuilding the app image. This supports faster
development and operations.</p></li>
<li><p><strong>Centralized Management</strong>: ConfigMaps give us a
single way to manage configuration data. We can share this data among
different pods and services.</p></li>
<li><p><strong>Environment-Specific Configurations</strong>: We can
create different ConfigMaps for different environments like development,
staging, and production. We do not need to change the app code.</p></li>
</ul>
<h3 id="example-of-a-configmap">Example of a ConfigMap</h3>
<p>Here is an example of how to define a ConfigMap in YAML:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-config</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">DATABASE_URL</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;mysql://user:password@hostname:port/dbname&quot;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">LOG_LEVEL</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;debug&quot;</span></span></code></pre></div>
<p>To create this ConfigMap in Kubernetes, we can use this command:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> my-config.yaml</span></code></pre></div>
<p>Using ConfigMaps helps us make our applications more flexible and
easier to maintain in Kubernetes. For more information on managing app
configuration in Kubernetes, check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-application-configuration-in-kubernetes.html">this
article</a>.</p>
<h2 id="how-to-create-a-configmap-in-kubernetes">How to Create a
ConfigMap in Kubernetes?</h2>
<p>To create a ConfigMap in Kubernetes, we can use the
<code>kubectl create configmap</code> command or we can define it in a
YAML file. ConfigMaps help us store configuration data in key-value
pairs. This data stays separate from our application code.</p>
<h3 id="method-1-using-kubectl-command">Method 1: Using
<code>kubectl</code> Command</h3>
<p>We can create a ConfigMap directly from literals or files. Here are
the commands for both ways.</p>
<h4 id="from-literal-values">From Literal Values</h4>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create configmap my-config <span class="at">--from-literal</span><span class="op">=</span>key1=value1 <span class="at">--from-literal</span><span class="op">=</span>key2=value2</span></code></pre></div>
<h4 id="from-a-file">From a File</h4>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create configmap my-config <span class="at">--from-file</span><span class="op">=</span>path/to/config.properties</span></code></pre></div>
<h3 id="method-2-using-a-yaml-manifest">Method 2: Using a YAML
Manifest</h3>
<p>We can also define a ConfigMap in a YAML file. Here is an
example:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-config</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">key1</span><span class="kw">:</span><span class="at"> value1</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">key2</span><span class="kw">:</span><span class="at"> value2</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">  config.properties</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    property1=value1</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    property2=value2</span></code></pre></div>
<p>To create the ConfigMap from the YAML file, we use this command:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> configmap.yaml</span></code></pre></div>
<h3 id="verify-the-configmap">Verify the ConfigMap</h3>
<p>We can check if the ConfigMap is created by running:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get configmaps</span></code></pre></div>
<p>This command will list all ConfigMaps in the current namespace. We
can describe a specific ConfigMap to see more details:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> describe configmap my-config</span></code></pre></div>
<p>By following these steps, we can easily create and manage ConfigMaps
in Kubernetes. This helps us handle our applicationâ€™s configuration
better. For more information on managing application configuration in
Kubernetes, we can check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-application-configuration-in-kubernetes.html">this
guide</a>.</p>
<h2 id="how-to-use-configmaps-in-pods">How to Use ConfigMaps in
Pods?</h2>
<p>ConfigMaps in Kubernetes help us put configuration data into our
Pods. This way, we can keep configuration files separate from image
content. It is easier to manage and change configurations without
needing to rebuild the application images.</p>
<h3 id="injecting-configmaps-into-pods">Injecting ConfigMaps into
Pods</h3>
<p>We can use a ConfigMap in a Pod in two main ways: as environment
variables or as configuration files mounted in volumes.</p>
<h3 id="using-configmaps-as-environment-variables">1. Using ConfigMaps
as Environment Variables</h3>
<p>We can reference a ConfigMap in the Pod specification to set
environment variables. Here is a simple YAML example:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-config</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">APP_MODE</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;production&quot;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">APP_LOG_LEVEL</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;info&quot;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-container</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-app-image:latest</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> APP_MODE</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">configMapKeyRef</span><span class="kw">:</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-config</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">key</span><span class="kw">:</span><span class="at"> APP_MODE</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> APP_LOG_LEVEL</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">configMapKeyRef</span><span class="kw">:</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-config</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">key</span><span class="kw">:</span><span class="at"> APP_LOG_LEVEL</span></span></code></pre></div>
<h3 id="mounting-configmaps-as-volumes">2. Mounting ConfigMaps as
Volumes</h3>
<p>We can also mount a ConfigMap as a file inside our Pod. Here is how
we can do this:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-config</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="fu">  config.properties</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    APP_MODE=production</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    APP_LOG_LEVEL=info</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-container</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-app-image:latest</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">volumeMounts</span><span class="kw">:</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> config-volume</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">mountPath</span><span class="kw">:</span><span class="at"> /etc/config</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> config-volume</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">configMap</span><span class="kw">:</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-config</span></span></code></pre></div>
<p>In this example, we mount the ConfigMap <code>app-config</code> as a
volume at <code>/etc/config</code>. The application can read the
configuration from <code>config.properties</code>.</p>
<h3 id="accessing-configmaps-in-your-application">3. Accessing
ConfigMaps in Your Application</h3>
<p>The application running inside the Pod can access the configuration
values through environment variables or by reading files from the
mounted volume. For example, to get the value of <code>APP_MODE</code>
from environment variables in a Python application:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>app_mode <span class="op">=</span> os.getenv(<span class="st">&#39;APP_MODE&#39;</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&#39;Application mode: </span><span class="sc">{</span>app_mode<span class="sc">}</span><span class="ss">&#39;</span>)</span></code></pre></div>
<p>Using ConfigMaps well in our Pods helps us manage application
configurations easily. We can avoid putting configuration values
directly in our application code. For more information about managing
application configuration in Kubernetes, we can check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-application-configuration-in-kubernetes.html">this
article</a>.</p>
<h2 id="how-to-update-a-configmap-dynamically">How to Update a ConfigMap
Dynamically?</h2>
<p>We can update a ConfigMap in Kubernetes using the
<code>kubectl</code> command-line tool. This lets us apply changes to
running applications without restarting the pods. There are several ways
to do this, like updating the ConfigMap directly or using a file.</p>
<h3 id="update-configmap-using-kubectl">Update ConfigMap Using
kubectl</h3>
<p>We can update a ConfigMap by using the <code>kubectl apply</code>
command with the new configuration. If we have a ConfigMap defined in a
YAML file, we can change the file and then apply it. For example:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-config</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">key1</span><span class="kw">:</span><span class="at"> new-value1</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">key2</span><span class="kw">:</span><span class="at"> value2</span></span></code></pre></div>
<p>To apply the changes, we run:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> configmap.yaml</span></code></pre></div>
<h3 id="update-configmap-using-kubectl-edit">Update ConfigMap Using
kubectl edit</h3>
<p>We can also edit the ConfigMap directly in our terminal. We use this
command:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> edit configmap example-config</span></code></pre></div>
<p>This opens the ConfigMap in a text editor. We can make changes here.
Then we save and exit to apply the updates.</p>
<h3 id="update-configmap-using-kubectl-patch">Update ConfigMap Using
kubectl patch</h3>
<p>Another way is to use the <code>kubectl patch</code> command. This
lets us update specific fields in the ConfigMap without editing
everything:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> patch configmap example-config <span class="at">-p</span> <span class="st">&#39;{&quot;data&quot;:{&quot;key1&quot;:&quot;updated-value&quot;}}&#39;</span></span></code></pre></div>
<h3 id="triggering-pod-restart">Triggering Pod Restart</h3>
<p>When we change a ConfigMap, the existing pods do not automatically
update. To make the changes work, we can restart the pods manually or
use an annotation in the deployment spec to force a restart. For
example:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">annotations</span><span class="kw">:</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">kubernetes.io/change-cause</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Updated ConfigMap example-config&quot;</span></span></code></pre></div>
<h3 id="verify-the-update">Verify the Update</h3>
<p>To check if the ConfigMap has been updated, we can describe the
ConfigMap:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> describe configmap example-config</span></code></pre></div>
<p>This command shows the current data in the ConfigMap. It helps us
confirm that the update was successful.</p>
<p>Using these ways, we can dynamically update ConfigMaps in Kubernetes.
This ensures our applications have the latest configuration settings
without any downtime. For more details on managing application
configuration, we can refer to <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-application-configuration-in-kubernetes.html">this
article</a>.</p>
<h2 id="how-to-access-configmap-data-in-your-application">How to Access
ConfigMap Data in Your Application?</h2>
<p>To get ConfigMap data in your application running in Kubernetes, we
can use environment variables or mount the ConfigMap as a volume in your
Pod. Below are the ways to do both.</p>
<h3 id="accessing-configmap-data-as-environment-variables">Accessing
ConfigMap Data as Environment Variables</h3>
<p>We can send ConfigMap data as environment variables to our
application. Here is an example of how we do this in our Pod
specification:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-pod</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-container</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">image</span><span class="kw">:</span><span class="at"> your-image</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> CONFIG_KEY_1</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">configMapKeyRef</span><span class="kw">:</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">name</span><span class="kw">:</span><span class="at"> your-configmap</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">key</span><span class="kw">:</span><span class="at"> key1</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> CONFIG_KEY_2</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">configMapKeyRef</span><span class="kw">:</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">name</span><span class="kw">:</span><span class="at"> your-configmap</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">key</span><span class="kw">:</span><span class="at"> key2</span></span></code></pre></div>
<p>In this example, <code>your-configmap</code> is the name of the
ConfigMap. The keys <code>key1</code> and <code>key2</code> get the
values from the ConfigMap.</p>
<h3 id="mounting-configmap-as-a-volume">Mounting ConfigMap as a
Volume</h3>
<p>Another way is to mount the ConfigMap as a volume. This lets our
application read the config files from the filesystem. Here is how we
set it up:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-pod</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-container</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">image</span><span class="kw">:</span><span class="at"> your-image</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">volumeMounts</span><span class="kw">:</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> config-volume</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">mountPath</span><span class="kw">:</span><span class="at"> /etc/config</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> config-volume</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">configMap</span><span class="kw">:</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">name</span><span class="kw">:</span><span class="at"> your-configmap</span></span></code></pre></div>
<p>In this setup, the ConfigMap data will show as files in the
<code>/etc/config</code> directory inside the container. Each key in the
ConfigMap becomes a file, and its value is the content of that file.</p>
<h3 id="accessing-configmap-data-in-your-application-code">Accessing
ConfigMap Data in Your Application Code</h3>
<p>After we set up one of the methods, we can access the ConfigMap data
in our application code:</p>
<ul>
<li><p><strong>For Environment Variables</strong>: Use a way specific to
the programming language to read environment variables. For example, in
Python:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>config_value <span class="op">=</span> os.getenv(<span class="st">&#39;CONFIG_KEY_1&#39;</span>)</span></code></pre></div></li>
<li><p><strong>For Mounted Volume</strong>: Read the config file
directly. For example, in Python:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;/etc/config/key1&#39;</span>, <span class="st">&#39;r&#39;</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    config_value <span class="op">=</span> <span class="bu">file</span>.read()</span></code></pre></div></li>
</ul>
<p>These methods help our application use the ConfigMap data well. They
allow us to manage configurations dynamically in Kubernetes. We can
learn more about <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-configmaps-and-how-do-i-use-them.html">Kubernetes
ConfigMaps</a> for better control of our application settings.</p>
<h2 id="what-are-common-use-cases-for-configmaps">What are Common Use
Cases for ConfigMaps?</h2>
<p>ConfigMaps are useful Kubernetes objects. We can use them to manage
configuration data for our applications. Here are some common ways to
use ConfigMaps:</p>
<ol type="1">
<li><p><strong>Application Configuration</strong>: We can store
non-sensitive configuration data. This includes application settings,
feature flags, or environment variables. We can update these settings
easily without changing the application code.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-config</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">DATABASE_URL</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;postgres://db-user:password@localhost:5432/mydb&quot;</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">LOG_LEVEL</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;info&quot;</span></span></code></pre></div></li>
<li><p><strong>Configuration Files</strong>: We can use ConfigMaps to
manage configuration files inside our pods. These can be YAML or JSON
files that our applications read when they run.</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> config-files</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">  config.yaml</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    logging:</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>      level: info</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    database:</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>      host: localhost</span></code></pre></div></li>
<li><p><strong>Command-Line Arguments</strong>: We can store
command-line arguments for our applications. This helps when we deploy
applications that need specific parameters.</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> command-args</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">args</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;--port=8080 --env=production&quot;</span></span></code></pre></div></li>
<li><p><strong>Environment Variables</strong>: We can inject
configuration into our pods as environment variables. This is useful for
12-factor applications that use environment variables for their
setup.</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-container</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-app-image</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> DATABASE_URL</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">configMapKeyRef</span><span class="kw">:</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-config</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">key</span><span class="kw">:</span><span class="at"> DATABASE_URL</span></span></code></pre></div></li>
<li><p><strong>Dynamic Configuration Updates</strong>: We can update
application settings without redeploying the application. By mounting a
ConfigMap as a volume, applications can change in real time.</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-container</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-app-image</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumeMounts</span><span class="kw">:</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> config-volume</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">mountPath</span><span class="kw">:</span><span class="at"> /etc/config</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> config-volume</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">configMap</span><span class="kw">:</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">name</span><span class="kw">:</span><span class="at"> config-files</span></span></code></pre></div></li>
<li><p><strong>Multi-Environment Configuration</strong>: We can use
different ConfigMaps for different environments like development,
testing, and production. This helps us switch configurations easily
without changing the code.</p></li>
<li><p><strong>Application Secrets</strong>: ConfigMaps are not for
sensitive data. But we can use them to set up applications that handle
secrets safely by integrating with other Kubernetes objects like
Secrets.</p></li>
</ol>
<p>For more information on how to manage application configurations in
Kubernetes, check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-application-configuration-in-kubernetes.html">this
article on managing application configuration in Kubernetes</a>.</p>
<h2 id="best-practices-for-using-configmaps-in-kubernetes">Best
Practices for Using ConfigMaps in Kubernetes</h2>
<p>When we work with ConfigMaps to manage app settings in Kubernetes,
following best practices can help us keep things organized, safe, and
efficient. Here are some best tips to think about:</p>
<ol type="1">
<li><p><strong>Use Descriptive Names</strong>: We should name our
ConfigMaps in a way that shows what they do and what is inside them.
This helps everyone on the team understand their purpose.</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-config</span></span></code></pre></div></li>
<li><p><strong>Keep ConfigMaps Small</strong>: We must avoid making big
ConfigMaps. If we have lots of settings, we can split them into smaller,
focused ConfigMaps.</p></li>
<li><p><strong>Version Control</strong>: It is good to keep our
ConfigMaps in version control with our application code. This way, we
can track changes and go back if we need to.</p></li>
<li><p><strong>Use Annotations</strong>: We can add annotations to
describe what the ConfigMap does, its version, and other useful
information. This helps us understand and manage our settings
better.</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">annotations</span><span class="kw">:</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">description</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Configuration for the application&quot;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;v1.0&quot;</span></span></code></pre></div></li>
<li><p><strong>Limit ConfigMap Size</strong>: The biggest size for a
ConfigMap is 1MB. We should keep our settings within this size to avoid
problems.</p></li>
<li><p><strong>Use Immutable ConfigMaps</strong>: If our config values
do not change, we can create immutable ConfigMaps. This helps with
performance and lowers the chance of mistakes.</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> immutable-config</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">annotations</span><span class="kw">:</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">kubernetes.io/immutable</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;true&quot;</span></span></code></pre></div></li>
<li><p><strong>Avoid Sensitive Data</strong>: We must not store
sensitive info like passwords or API keys in ConfigMaps. We should use
Kubernetes Secrets for that to keep data safe.</p></li>
<li><p><strong>Use Environment Variables Wisely</strong>: When we use
ConfigMaps in pods, we should inject them as environment variables only
when we really need them, not for every pod.</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> CONFIG_VALUE</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">configMapKeyRef</span><span class="kw">:</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-config</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">key</span><span class="kw">:</span><span class="at"> config-key</span></span></code></pre></div></li>
<li><p><strong>Monitor ConfigMap Changes</strong>: We should set up
monitoring to check changes to our ConfigMaps. This will help us fix
problems quickly in production.</p></li>
<li><p><strong>Test Configurations</strong>: We need to test our
application with different settings by using multiple ConfigMaps in
development and staging.</p></li>
</ol>
<p>By following these best practices for ConfigMaps in Kubernetes, we
can make sure our app settings are organized, safe, and easy to manage.
For more reading on how to manage app configurations with Kubernetes,
check out <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-application-configuration-in-kubernetes.html">this
resource</a>.</p>
<h2 id="how-to-manage-sensitive-data-with-configmaps">How to Manage
Sensitive Data with ConfigMaps?</h2>
<p>ConfigMaps in Kubernetes are for holding non-sensitive configuration
data. For sensitive data like passwords, tokens, or other private
settings, we should use a better resource called Secrets. But if we need
to manage sensitive data with ConfigMaps, we must limit access and
follow good security practices.</p>
<p>Here are some best practices for managing sensitive data with
ConfigMaps:</p>
<ul>
<li><p><strong>Use Annotations</strong>: We can mark the ConfigMap as
sensitive using annotations. This helps everyone know that we should
handle the data carefully.</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> sensitive-config</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">annotations</span><span class="kw">:</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">sensitivity</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;high&quot;</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">key1</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;value1&quot;</span></span></code></pre></div></li>
<li><p><strong>Limit Access</strong>: We should use Kubernetes
Role-Based Access Control (RBAC) to control who can see or change the
ConfigMap.</p></li>
<li><p><strong>Environment Variables</strong>: We can put sensitive data
from ConfigMaps into our app as environment variables. This way, we do
not show the data in the pod settings.</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp-pod</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp-container</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp-image</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> CONFIG_KEY1</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">valueFrom</span><span class="kw">:</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">configMapKeyRef</span><span class="kw">:</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">name</span><span class="kw">:</span><span class="at"> sensitive-config</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">key</span><span class="kw">:</span><span class="at"> key1</span></span></code></pre></div></li>
<li><p><strong>Encrypt ConfigMaps</strong>: We can think about
encrypting sensitive data before we store it in a ConfigMap. We can use
a special solution to encrypt and decrypt the values in our
app.</p></li>
<li><p><strong>Monitor and Audit</strong>: We should check and audit
access to ConfigMaps that have sensitive data regularly. This helps us
keep everything safe and follow the rules.</p></li>
</ul>
<p>If we want to handle sensitive information more securely, we can
check the <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-secrets-in-kubernetes-securely.html">how-do-i-manage-secrets-in-kubernetes-securely</a>
article. It gives us a good overview of managing secrets in
Kubernetes.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-are-the-limits-of-using-configmaps-in-kubernetes">1. What
are the limits of using ConfigMaps in Kubernetes?</h3>
<p>ConfigMaps in Kubernetes help us manage application settings. But
they have some limits. For example, ConfigMaps can only hold
non-sensitive data. They do not have encryption or access control. Also,
ConfigMaps can only be 1MB big. For sensitive info, we should use
Kubernetes Secrets instead. We can learn more about sensitive data
management with <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-secrets-in-kubernetes-securely.html">Kubernetes
Secrets</a>.</p>
<h3
id="can-i-use-configmaps-to-send-environment-variables-to-my-application">2.
Can I use ConfigMaps to send environment variables to my
application?</h3>
<p>Yes, we can use ConfigMaps to send environment variables to our
applications in Kubernetes. We define our ConfigMap and then include it
in our Pod setup under the <code>env</code> field. This way, we inject
the configuration data into our applicationâ€™s environment. It makes it
easy to manage settings in different environments. We can see how to
create and use ConfigMaps in <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-manage-application-configuration-in-kubernetes.html">Kubernetes</a>.</p>
<h3
id="how-do-i-make-sure-my-application-gets-the-latest-configuration-from-a-configmap">3.
How do I make sure my application gets the latest configuration from a
ConfigMap?</h3>
<p>To make sure our application gets the latest configuration from a
ConfigMap, we can use a volume mount for the ConfigMap in our Pod. When
we mount the ConfigMap as a volume, any updates to it will show up in
the mounted files. This lets our application read the latest
configurations. For more info on using ConfigMaps in Pods, we can check
this article on <a
href="https://bestonlinetutorial.com/kubernetes/how-to-use-configmaps-in-pods.html">how
to use ConfigMaps in Pods</a>.</p>
<h3 id="can-i-control-versions-of-configmaps-in-kubernetes">4. Can I
control versions of ConfigMaps in Kubernetes?</h3>
<p>Kubernetes does not support versioning of ConfigMaps by default. But
we can make a versioning plan by creating new ConfigMaps with different
names for each version. This way, we can go back to earlier versions by
using the old ConfigMap in our deployment setup. For best ways to use
ConfigMaps, we can look at our guide on <a
href="https://bestonlinetutorial.com/kubernetes/best-practices-for-using-configmaps-in-kubernetes.html">best
practices for using ConfigMaps in Kubernetes</a>.</p>
<h3 id="how-do-i-change-a-json-file-into-a-configmap-in-kubernetes">5.
How do I change a JSON file into a ConfigMap in Kubernetes?</h3>
<p>We can change a JSON file into a ConfigMap easily using the
<code>kubectl</code> command. We use this command to create a ConfigMap
from a JSON file:</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create configmap my-config <span class="at">--from-file</span><span class="op">=</span>path/to/config.json</span></code></pre></div>
<p>This command creates a ConfigMap called <code>my-config</code> which
has the data from the JSON file. For more on creating ConfigMaps, we can
visit <a
href="https://bestonlinetutorial.com/kubernetes/how-to-create-a-configmap-in-kubernetes.html">how
to create a ConfigMap in Kubernetes</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            