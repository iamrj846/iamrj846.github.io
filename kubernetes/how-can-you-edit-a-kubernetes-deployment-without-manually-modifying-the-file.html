
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How Can You Edit a Kubernetes Deployment Without Manually Modifying the File?</title>
            <meta name="description" content="Discover how to edit a Kubernetes deployment seamlessly without manual file changes. Simplify your workflow today!">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Can You Edit a Kubernetes Deployment Without Manually Modifying the File?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>To edit a Kubernetes deployment without changing the file by hand, we
can use different tools and commands from Kubernetes. One good way is to
use <code>kubectl edit</code>. This command lets us change the
deployment settings right in our terminal. This way, we do not need to
change files manually. Updates happen smoothly and fast.</p>
<p>In this article, we will look at different ways to change Kubernetes
deployments without touching the files directly. We will talk about how
to use <code>kubectl edit</code>. We will also see how to apply changes
with <code>kubectl apply</code>. We will learn about Kustomize for
managing settings. We will use Helm for managing releases. Finally, we
will look at JSON Patch for some specific updates. We will also answer
some common questions to help clear up any doubts.</p>
<ul>
<li>Using <code>kubectl edit</code> to Modify Kubernetes
Deployments</li>
<li>Applying Changes with <code>kubectl apply</code> for Kubernetes
Deployments</li>
<li>Utilizing Kustomize to Edit Kubernetes Deployments</li>
<li>Leveraging Helm to Manage Kubernetes Deployment Changes</li>
<li>How Can You Use JSON Patch for Kubernetes Deployment Edits?</li>
<li>Frequently Asked Questions</li>
</ul>
<h2 id="using-kubectl-edit-to-change-kubernetes-deployments">Using
kubectl edit to Change Kubernetes Deployments</h2>
<p>We can change a Kubernetes deployment without editing the YAML file
by using the <code>kubectl edit</code> command. This command opens the
deployment settings in our default text editor. We can then make changes
directly there.</p>
<h3 id="steps-to-use-kubectl-edit">Steps to Use kubectl edit</h3>
<ol type="1">
<li><p>First, we need to find the deployment we want to change. We can
list all deployments in a namespace with:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get deployments <span class="at">-n</span> <span class="op">&lt;</span>namespace<span class="op">&gt;</span></span></code></pre></div></li>
<li><p>Next, we run the <code>kubectl edit</code> command. We write the
resource type and name like this:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> edit deployment <span class="op">&lt;</span>deployment-name<span class="op">&gt;</span> -n <span class="op">&lt;</span>namespace<span class="op">&gt;</span></span></code></pre></div></li>
<li><p>Now, this command will open the deployment settings in our
default editor, which is usually <code>vi</code> or <code>nano</code>.
We can make the needed changes, like changing container images,
environment variables, or resource limits.</p></li>
<li><p>After we finish, we save and exit the editor. Kubernetes will
take care of applying the changes and updating the deployment.</p></li>
</ol>
<h3 id="example">Example</h3>
<p>Let’s say we want to change the image of a deployment called
<code>my-app</code> in the <code>default</code> namespace:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> edit deployment my-app</span></code></pre></div>
<p>In the editor, we find the <code>spec.template.spec.containers</code>
section and change the image like this:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-app:latest</span></span></code></pre></div>
<p>Once we save, Kubernetes will manage the rollout of the new
image.</p>
<p>Using <code>kubectl edit</code> gives us a simple and fast way to
change deployments on-the-fly. We do not need to download or upload
files. This makes it easy for real-time updates. For more information on
managing Kubernetes resources with <code>kubectl</code>, we can check
out <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubectl-and-how-do-i-use-it-to-manage-kubernetes.html">what
is kubectl and how do I use it to manage Kubernetes</a>.</p>
<h2
id="applying-changes-with-kubectl-apply-for-kubernetes-deployments">Applying
Changes with kubectl apply for Kubernetes Deployments</h2>
<p>We can apply changes to a Kubernetes Deployment without changing the
YAML file by using the <code>kubectl apply</code> command. This command
helps us manage Kubernetes objects in a clear way. We just need to
change our local config files and then apply those changes to the
cluster.</p>
<h3 id="basic-usage">Basic Usage</h3>
<ol type="1">
<li><p><strong>Edit the YAML File</strong>: First, we need to make the
changes we want in the YAML file that defines our Deployment.</p></li>
<li><p><strong>Apply Changes</strong>: Next, we can use this command to
apply the changes:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> deployment.yaml</span></code></pre></div>
<p>This command updates the existing Deployment with the new details in
<code>deployment.yaml</code>.</p></li>
</ol>
<h3 id="updating-specific-fields">Updating Specific Fields</h3>
<p>If we want to update certain fields without changing the whole YAML
file, we can use the <code>--set</code> flag with
<code>kubectl set</code>.</p>
<p>For example, if we want to change the image of a Deployment:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> set image deployment/my-deployment my-container=my-image:latest</span></code></pre></div>
<h3 id="viewing-changes">Viewing Changes</h3>
<p>We can check the applied changes by looking at the status of our
Deployment:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> rollout status deployment/my-deployment</span></code></pre></div>
<h3 id="rollback">Rollback</h3>
<p>If we have issues with the updated Deployment, we can go back to the
previous version by using:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> rollout undo deployment/my-deployment</span></code></pre></div>
<h3 id="using-patch">Using Patch</h3>
<p>For quick updates, we can use the <code>kubectl patch</code> command
to change specific fields:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> patch deployment my-deployment <span class="at">-p</span> <span class="st">&#39;{&quot;spec&quot;:{&quot;template&quot;:{&quot;spec&quot;:{&quot;containers&quot;:[{&quot;name&quot;:&quot;my-container&quot;,&quot;image&quot;:&quot;my-image:latest&quot;}]}}}}}&#39;</span></span></code></pre></div>
<p>This way, we can update certain properties without needing the whole
Deployment configuration.</p>
<p>By using <code>kubectl apply</code>, we can manage and apply changes
to our Kubernetes Deployments easily. This helps us avoid editing the
file directly and makes the deployment process smoother.</p>
<h2 id="using-kustomize-to-edit-kubernetes-deployments">Using Kustomize
to Edit Kubernetes Deployments</h2>
<p>Kustomize is a handy tool for managing Kubernetes resources in a
clear way. It helps us customize Kubernetes YAML files without changing
the original files directly. This is very helpful when we manage
different environments or need to apply updates to current
deployments.</p>
<h3 id="basic-usage-of-kustomize">Basic Usage of Kustomize</h3>
<ol type="1">
<li><p><strong>Create a Kustomization Directory</strong>: First, we need
to create a folder to keep our base YAML files and a
<code>kustomization.yaml</code> file.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> my-kustomization</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> my-kustomization</span></code></pre></div></li>
<li><p><strong>Define Your Base Resources</strong>: Next, we create YAML
files for our deployments and services. For example, we can create a
file called <code>deployment.yaml</code>:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-app:latest</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div></li>
<li><p><strong>Create a <code>kustomization.yaml</code> File</strong>:
This file will point to our base resources.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> deployment.yaml</span></span></code></pre></div></li>
<li><p><strong>Change Deployments with Overlays</strong>: We can create
overlays to change the base settings. For this, we make a new folder
called <code>overlays</code> and a new
<code>kustomization.yaml</code>:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> overlays</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> overlays</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> production</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> production</span></code></pre></div>
<p>Now we create an <code>overlays/kustomization.yaml</code>:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> ../../base/deployment.yaml</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">patchesStrategicMerge</span><span class="kw">:</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> patch.yaml</span></span></code></pre></div></li>
<li><p><strong>Define a Patch</strong>: We need to create a
<code>patch.yaml</code> file to change our deployment settings.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-app:v1.0</span></span></code></pre></div></li>
<li><p><strong>Build the Kustomization</strong>: We can use the
<code>kustomize build</code> command to make the final YAML.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kustomize</span> build overlays/production</span></code></pre></div></li>
</ol>
<h3 id="deploying-with-kustomize">Deploying with Kustomize</h3>
<p>To apply our changes directly to the Kubernetes cluster, we can use
this command:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kustomize</span> build overlays/production <span class="kw">|</span> <span class="ex">kubectl</span> apply <span class="at">-f</span> <span class="at">-</span></span></code></pre></div>
<p>This command will apply our new deployment without changing the
original YAML files.</p>
<h3 id="benefits-of-using-kustomize">Benefits of Using Kustomize</h3>
<ul>
<li><strong>Layered Setup</strong>: We can easily manage base and
overlay settings.</li>
<li><strong>No Manual Changes</strong>: We do not need to change
original files directly.</li>
<li><strong>Environment Management</strong>: It makes it easier to
deploy across different environments like development and
production.</li>
</ul>
<p>Using Kustomize helps us manage Kubernetes deployments better. It
gives us a more organized way to make changes. For more reading on
Kubernetes management and deployment, check out <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-deployments-and-how-do-i-use-them.html">What
are Kubernetes Deployments and How Do I Use Them?</a>.</p>
<h2
id="leveraging-helm-to-manage-kubernetes-deployment-changes">Leveraging
Helm to Manage Kubernetes Deployment Changes</h2>
<p>Helm is a great package manager for Kubernetes. It makes it easier to
deploy and manage applications. With Helm, we can handle Kubernetes
deployment changes without having to change the deployment files by
hand. Let us see how we can use Helm to manage our Kubernetes
deployments.</p>
<h3 id="installing-helm">Installing Helm</h3>
<p>To start, we need to install Helm. We can follow the official Helm
installation guide. But here is a quick command to install it using a
script:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 <span class="kw">|</span> <span class="fu">bash</span></span></code></pre></div>
<h3 id="creating-a-helm-chart">Creating a Helm Chart</h3>
<p>A Helm chart is a group of files that describe a related set of
Kubernetes resources. To create a new Helm chart, we use this
command:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> create mychart</span></code></pre></div>
<p>This command makes a new folder called <code>mychart</code> with the
usual chart structure.</p>
<h3 id="modifying-values-in-helm-charts">Modifying Values in Helm
Charts</h3>
<p>When we want to change our deployment, we can edit the
<code>values.yaml</code> file in our chart. This file has default
settings that we can change during deployment. For example, if we want
to change the image used in our deployment:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span><span class="kw">:</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">repository</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">tag</span><span class="kw">:</span><span class="at"> latest</span></span></code></pre></div>
<h3 id="upgrading-a-release">Upgrading a Release</h3>
<p>After we make the changes in our <code>values.yaml</code> or
templates, we can upgrade our release with this command:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> upgrade myrelease mychart</span></code></pre></div>
<p>We just need to change <code>myrelease</code> to the name of our Helm
release and <code>mychart</code> to the path of our chart.</p>
<h3 id="rollback-to-previous-versions">Rollback to Previous
Versions</h3>
<p>If we need to go back to a previous version of our deployment, Helm
makes this easy with the rollback command:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> rollback myrelease <span class="pp">[</span><span class="ss">revision</span><span class="pp">]</span></span></code></pre></div>
<p>We can find the revision number by running:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> history myrelease</span></code></pre></div>
<h3 id="using-helm-hooks">Using Helm Hooks</h3>
<p>Helm has hooks that let us do certain actions at specific times in
the release lifecycle. For example, if we want to run a script before
updating our deployment, we can set up a hook in our chart:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> batch/v1</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Job</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> pre-upgrade-job</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">annotations</span><span class="kw">:</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">&quot;helm.sh/hook&quot;</span><span class="kw">:</span><span class="at"> pre-upgrade</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="at">  ...</span></span></code></pre></div>
<h3 id="conclusion">Conclusion</h3>
<p>Helm is a useful tool for managing Kubernetes deployment changes. It
helps us automate the process and makes our work easier. By using Helm
charts, we can change deployments, manage settings, and go back to
previous changes without needing to edit Kubernetes resource files
directly. For more information on Kubernetes deployments, we can check
out <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-deployments-and-how-do-i-use-them.html">what
are Kubernetes deployments and how do I use them</a>.</p>
<h2 id="how-can-we-use-json-patch-for-kubernetes-deployment-edits">How
Can We Use JSON Patch for Kubernetes Deployment Edits?</h2>
<p>JSON Patch is a way to show a list of changes we want to make to a
JSON document. In Kubernetes, we can use JSON Patch to update a
Kubernetes Deployment. We don’t need to change the whole YAML or JSON
file. This is very helpful for small changes in a deployment’s
setup.</p>
<p>To use JSON Patch with Kubernetes, we can follow these steps:</p>
<ol type="1">
<li><p><strong>Create a JSON Patch File</strong>: This file tells what
changes we want to make. For example, if we want to change the image of
a container in a deployment, we can write:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">{</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;op&quot;</span><span class="fu">:</span> <span class="st">&quot;replace&quot;</span><span class="fu">,</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;path&quot;</span><span class="fu">:</span> <span class="st">&quot;/spec/template/spec/containers/0/image&quot;</span><span class="fu">,</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;nginx:latest&quot;</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="ot">]</span></span></code></pre></div></li>
<li><p><strong>Apply the JSON Patch using kubectl</strong>: We use the
<code>kubectl patch</code> command to make the changes in our
deployment. Here is how we can do it:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> patch deployment <span class="op">&lt;</span>deployment-name<span class="op">&gt;</span> --type=<span class="st">&#39;json&#39;</span> <span class="at">-p</span> <span class="st">&#39;[{&quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/spec/template/spec/containers/0/image&quot;, &quot;value&quot;: &quot;nginx:latest&quot;}]&#39;</span></span></code></pre></div>
<p>We replace <code>&lt;deployment-name&gt;</code> with the name of our
Kubernetes deployment.</p></li>
<li><p><strong>Verify the Changes</strong>: After we apply the patch, we
can check if the changes worked by running:</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get deployment <span class="op">&lt;</span>deployment-name<span class="op">&gt;</span> -o jsonpath=<span class="st">&#39;{.spec.template.spec.containers[*].image}&#39;</span></span></code></pre></div></li>
</ol>
<p>This way helps us to make small changes to our Kubernetes deployments
quickly. We do not need to edit the whole configuration file. This makes
managing our deployments easier. For more details on managing Kubernetes
deployments, we can check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-use-kubernetes-for-machine-learning.html">this
article</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-is-the-purpose-of-kubectl-edit-in-kubernetes">1. What is
the purpose of <code>kubectl edit</code> in Kubernetes?</h3>
<p>We use <code>kubectl edit</code> to change Kubernetes resources like
Deployments. We do not need to edit the YAML files directly. This
command opens the resource in our default editor. We can make changes
right away. After we save and exit, Kubernetes updates the resource with
the new settings. This makes it easier to manage Kubernetes
deployments.</p>
<h3
id="how-can-i-use-kubectl-apply-for-changing-kubernetes-deployments">2.
How can I use <code>kubectl apply</code> for changing Kubernetes
deployments?</h3>
<p>We can use <code>kubectl apply</code> to manage changes in Kubernetes
deployments. To apply changes from a YAML file, we run
<code>kubectl apply -f your-deployment.yaml</code>. This command updates
only the changes we put in the file. This is a safe and smart way to
update Kubernetes deployments.</p>
<h3
id="what-is-kustomize-and-how-does-it-help-in-kubernetes-deployments">3.
What is Kustomize and how does it help in Kubernetes deployments?</h3>
<p>Kustomize is a tool that works with <code>kubectl</code>. It helps us
customize Kubernetes resource settings without changing the original
YAML files. By making overlays, we can create different versions of our
deployment settings for various environments. This method makes it
easier to handle many Kubernetes deployments. It keeps everything clean
and organized.</p>
<h3 id="how-does-helm-facilitate-managing-kubernetes-deployments">4. How
does Helm facilitate managing Kubernetes deployments?</h3>
<p>Helm is a package manager for Kubernetes. It helps us define,
install, and upgrade applications in a Kubernetes cluster. With Helm
charts, we can manage our Kubernetes deployments easily. It helps us
share and reuse settings. This tool automates deployment tasks. It makes
sure our applications stay the same in different environments.</p>
<h3
id="what-is-a-json-patch-and-how-can-it-be-used-for-kubernetes-deployment-edits">5.
What is a JSON Patch and how can it be used for Kubernetes deployment
edits?</h3>
<p>JSON Patch is a way to show changes to a JSON document. For
Kubernetes deployments, we can use it to make small updates without
sending the whole resource definition. We can run
<code>kubectl patch deployment your-deployment --type=json -p='[{"op": "replace", "path": "/spec/containers/0/image", "value": "new-image:tag"}]'</code>.
This helps us update specific parts of our deployment. It makes our work
faster and more precise.</p>
<p>For more insights into Kubernetes and its functions, check out our
articles on <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">what
Kubernetes is and how it simplifies container management</a> and <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-perform-rolling-updates-in-kubernetes.html">how
to perform rolling updates in Kubernetes</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            