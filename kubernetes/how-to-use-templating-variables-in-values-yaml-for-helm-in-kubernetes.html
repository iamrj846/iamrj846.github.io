
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
            <meta property="og:title" content="How to Use Templating Variables in values.yaml for Helm in Kubernetes?" />
            <meta property="og:description" content="Learn to effectively use templating variables in values.yaml for Helm in Kubernetes to streamline your deployment process." />
            <meta property="og:url" content="https://www.bestonlinetutorial.com/kubernetes/how-to-use-templating-variables-in-values-yaml-for-helm-in-kubernetes.html" />
            <link rel="canonical" href="https://www.bestonlinetutorial.com/kubernetes/how-to-use-templating-variables-in-values-yaml-for-helm-in-kubernetes.html">
            <meta property="og:type" content="article" />
            <meta property="og:site_name" content=“BestOnlineTutorial” />
            <meta name="twitter:title" content="How to Use Templating Variables in values.yaml for Helm in Kubernetes?" />
            <meta name="twitter:description" content="Learn to effectively use templating variables in values.yaml for Helm in Kubernetes to streamline your deployment process." />
            <meta name="pinterest-rich-pin" content="true" />

            <script type="application/ld+json">
                {
                "@context": "https://schema.org",
                "@type": "WebSite",
                "name": "BestOnlineTutorial",
                "url": "https://www.bestonlinetutorial.com/"
                }
            </script>
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How to Use Templating Variables in values.yaml for Helm in Kubernetes?</title>
            <meta name="description" content="Learn to effectively use templating variables in values.yaml for Helm in Kubernetes to streamline your deployment process.">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How to Use Templating Variables in values.yaml for Helm in Kubernetes?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>To use templating variables in <code>values.yaml</code> for Helm in
Kubernetes, we need to define our variables clearly. Then we can
reference them in our Helm charts. This helps us change configurations
easily. It also makes our Kubernetes deployments more flexible and
easier to manage. By using templating variables, we can make the
deployment process smoother. We can also make sure our applications are
set up right with less manual work.</p>
<p>In this article, we will look into templating variables in
<code>values.yaml</code> for Helm in Kubernetes. We will talk about how
to define custom variables. We will also see how to use built-in
functions and apply conditional logic to improve our Helm charts. Plus,
we will learn how to reference other values properly. The following
topics will be discussed:</p>
<ul>
<li>Understanding Templating Variables in <code>values.yaml</code> for
Helm</li>
<li>How to Define Custom Variables in <code>values.yaml</code> for
Helm</li>
<li>Leveraging Built-in Functions in <code>values.yaml</code> for
Helm</li>
<li>Using Conditional Logic with Templating Variables in
<code>values.yaml</code> for Helm</li>
<li>How to Reference Other Values in <code>values.yaml</code> for
Helm</li>
<li>Frequently Asked Questions about Templating in Helm</li>
</ul>
<p>For more information on Kubernetes and its parts, you can check
articles like <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">What
is Kubernetes and How Does it Simplify Container Management?</a> and <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">What
are the Key Components of a Kubernetes Cluster?</a>.</p>
<h2
id="understanding-templating-variables-in-values.yaml-for-helm">Understanding
Templating Variables in values.yaml for Helm</h2>
<p>In Helm, <code>values.yaml</code> is the configuration file. It helps
us to customize our charts. Templating variables in this file allow us
to change settings based on user input or default values. We use the Go
template syntax to do this. This lets us evaluate different expressions
when we create Kubernetes manifests.</p>
<h3 id="basic-structure">Basic Structure</h3>
<p>A typical <code>values.yaml</code> looks like this:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">replicaCount</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span><span class="kw">:</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">repository</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">tag</span><span class="kw">:</span><span class="at"> latest</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">service</span><span class="kw">:</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> ClusterIP</span></span></code></pre></div>
<h3 id="accessing-values-in-templates">Accessing Values in
Templates</h3>
<p>To access values from <code>values.yaml</code>, we use
<code>{{ .Values }}</code> in our template files. For example:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Release.Name </span><span class="kw">}</span><span class="at">}-deployment</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.replicaCount </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.image.repository </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">image</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.image.repository </span><span class="kw">}</span><span class="at">}:{{ .Values.image.tag }}</span></span></code></pre></div>
<h3 id="default-values">Default Values</h3>
<p>We should define default values in <code>values.yaml</code>. This
helps our templates have backup options:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span><span class="kw">:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">repository</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">tag</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;1.0&quot;</span></span></code></pre></div>
<p>If a user does not give an image tag, we will use the default
“1.0”.</p>
<h3 id="user-defined-values">User-Defined Values</h3>
<p>Users can change values during installation or updates. They can use
the <code>--set</code> flag or provide a custom <code>values.yaml</code>
file:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> install my-release my-chart <span class="at">--set</span> image.tag=2.0</span></code></pre></div>
<p>This command will change the <code>image.tag</code> to “2.0”.</p>
<h3 id="nested-values">Nested Values</h3>
<p>We can create nested structures in <code>values.yaml</code> for more
detailed settings:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">database</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">host</span><span class="kw">:</span><span class="at"> localhost</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">5432</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">username</span><span class="kw">:</span><span class="at"> user</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">password</span><span class="kw">:</span><span class="at"> password</span></span></code></pre></div>
<p>To reference nested values in templates, we do it like this:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> DB_HOST</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">value</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.database.host </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> DB_PORT</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">value</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.database.port | quote </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div>
<h3 id="custom-functions">Custom Functions</h3>
<p>Helm has built-in functions to change values. For example, we can use
the <code>quote</code> function to put a string in double quotes:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> DB_HOST</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">value</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.database.host | quote </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div>
<h3 id="using-conditionals">Using Conditionals</h3>
<p>We can use conditionals to control what gets rendered based on
values:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span><span class="at">{- if .Values.service.enabled </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Release.Name </span><span class="kw">}</span><span class="at">}-service</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.service.type </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span><span class="at">{- end </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div>
<h3 id="loops">Loops</h3>
<p>We can loop through lists defined in <code>values.yaml</code>:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> http</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> https</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">443</span></span></code></pre></div>
<p>In our template, we write:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">{</span><span class="at">{- range .Values.ports </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .name </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .port </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">{</span><span class="at">{- end </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div>
<p>By using templating variables in <code>values.yaml</code>, we can
create flexible and reusable deployment settings in Helm. This helps us
manage Kubernetes applications better. Helm is a strong tool in the
Kubernetes world. For more details on Helm and its features, visit <a
href="https://bestonlinetutorial.com/kubernetes/what-is-helm-and-how-does-it-help-with-kubernetes-deployments.html">Best
Online Tutorial - What is Helm and How Does it Help with Kubernetes
Deployments?</a>.</p>
<h2 id="how-to-define-custom-variables-in-values.yaml-for-helm">How to
Define Custom Variables in values.yaml for Helm</h2>
<p>In Helm, the <code>values.yaml</code> file is very important for
defining custom variables. We use these variables in our templates. They
help us change how we deploy our applications without changing the
templates directly. Here is how to define and use them in a good
way.</p>
<h3 id="defining-custom-variables">Defining Custom Variables</h3>
<p>To define custom variables, we just add key-value pairs in our
<code>values.yaml</code> file. Here is an example:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># values.yaml</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">replicaCount</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span><span class="kw">:</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">repository</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">tag</span><span class="kw">:</span><span class="at"> latest</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">service</span><span class="kw">:</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> ClusterIP</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div>
<h3 id="accessing-custom-variables-in-templates">Accessing Custom
Variables in Templates</h3>
<p>In our Helm templates, we can access these variables using the
<code>{{ .Values }}</code> syntax. For example, to set the number of
replicas in a Deployment, we can do it like this:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># deployment.yaml</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Release.Name </span><span class="kw">}</span><span class="at">}-app</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.replicaCount </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Chart.Name </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">image</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.image.repository </span><span class="kw">}</span><span class="at">}:{{ .Values.image.tag }}</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.service.port </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div>
<h3 id="nested-variables">Nested Variables</h3>
<p>We can also create nested variables for better organization. For
example:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># values.yaml</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">database</span><span class="kw">:</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">host</span><span class="kw">:</span><span class="at"> db.example.com</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">5432</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">user</span><span class="kw">:</span><span class="at"> admin</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">password</span><span class="kw">:</span><span class="at"> secret</span></span></code></pre></div>
<p>We access them in our templates like this:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># configmap.yaml</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Release.Name </span><span class="kw">}</span><span class="at">}-config</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">DATABASE_HOST</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.database.host </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">DATABASE_PORT</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.database.port </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">DATABASE_USER</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.database.user </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">DATABASE_PASSWORD</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.database.password </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div>
<h3 id="overriding-values">Overriding Values</h3>
<p>When we deploy our Helm chart, we can override these values using the
<code>--set</code> flag or by giving a custom <code>values.yaml</code>
file:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> install my-release ./my-chart <span class="at">--set</span> replicaCount=5</span></code></pre></div>
<h3 id="best-practices">Best Practices</h3>
<ul>
<li>Use clear and easy variable names.</li>
<li>Group related variables under a common prefix to avoid problems with
names.</li>
<li>Write notes about your variables in the <code>values.yaml</code>
file for better understanding.</li>
</ul>
<p>By defining and managing custom variables well in our
<code>values.yaml</code>, we can make flexible and reusable Helm charts
that fit our application’s needs. For more on Helm chart setups, check
out <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-create-and-manage-helm-charts.html">this
article</a>.</p>
<h2
id="leveraging-built-in-functions-in-values.yaml-for-helm">Leveraging
Built-in Functions in values.yaml for Helm</h2>
<p>In Helm, we can use built-in functions. These functions help us
change data right in our <code>values.yaml</code> or templates. They are
important for dynamic configuration. They also make our Helm charts more
flexible. Here are some common built-in functions we use in
<code>values.yaml</code>:</p>
<ol type="1">
<li><p><strong><code>required</code></strong>: This function makes sure
we provide a value. If we do not, it shows an error.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">myValue</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ required </span><span class="st">&quot;A value is required!&quot;</span><span class="at"> .Values.someValue </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div></li>
<li><p><strong><code>default</code></strong>: This function gives a
default value if we do not set the specified value.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">myValue</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ default </span><span class="st">&quot;defaultValue&quot;</span><span class="at"> .Values.someValue </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div></li>
<li><p><strong><code>toYaml</code></strong>: This changes a given value
into YAML format.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">myYaml</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ toYaml .Values.myMap | nindent 2 </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div></li>
<li><p><strong><code>quote</code></strong>: This wraps a string in
quotes.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">myQuotedValue</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ quote .Values.someString </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div></li>
<li><p><strong><code>lookup</code></strong>: This gets a Kubernetes
resource by its kind, name, and namespace.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mySecret</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ (lookup </span><span class="st">&quot;v1&quot;</span><span class="at"> </span><span class="st">&quot;Secret&quot;</span><span class="at"> </span><span class="st">&quot;default&quot;</span><span class="at"> </span><span class="st">&quot;my-secret&quot;</span><span class="at">).data </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div></li>
<li><p><strong><code>trim</code></strong>: This removes spaces from the
start and end of a string.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">myTrimmedValue</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ trim </span><span class="st">&quot; &quot;</span><span class="at"> .Values.someString </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div></li>
<li><p><strong><code>join</code></strong>: This connects elements of a
slice into one string with a separator we choose.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">myJoinedString</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ join </span><span class="st">&quot;,&quot;</span><span class="at"> .Values.myStringArray </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div></li>
<li><p><strong><code>split</code></strong>: This breaks a string into a
slice using a delimiter.</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mySplitArray</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ split </span><span class="st">&quot;,&quot;</span><span class="at"> .Values.myString </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div></li>
<li><p><strong><code>hasKey</code></strong>: This checks if a map has a
certain key.</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">myKeyExists</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ if hasKey .Values.myMap </span><span class="st">&quot;key&quot;</span><span class="at"> </span><span class="kw">}</span><span class="at">}true{{ else }}false{{ end }}</span></span></code></pre></div></li>
<li><p><strong><code>upper</code> and <code>lower</code></strong>: This
changes strings to upper or lower case.
<code>yaml     myUpper: {{ upper .Values.someString }}     myLower: {{ lower .Values.someString }}</code></p></li>
</ol>
<p>We can combine these built-in functions to make more complex setups
in our <code>values.yaml</code>. For more details on Helm and what it
can do, we can look at this <a
href="https://bestonlinetutorial.com/kubernetes/what-is-helm-and-how-does-it-help-with-kubernetes-deployments.html">Helm
documentation</a>.</p>
<h2
id="using-conditional-logic-with-templating-variables-in-values.yaml-for-helm">Using
Conditional Logic with Templating Variables in values.yaml for Helm</h2>
<p>In Helm charts, we can use conditional logic in the
<code>values.yaml</code> file. This helps us control how resources are
deployed based on specific rules. It gives us flexible setups and helps
us manage resources better.</p>
<h3 id="syntax-for-conditional-logic">Syntax for Conditional Logic</h3>
<p>Helm uses the Go templating engine. It allows us to use
<code>if</code> statements, <code>else</code> statements, and
<code>with</code> statements. The basic way to write this looks
like:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span><span class="at">{- if .Values.someCondition </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Resource configuration when condition is true</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span><span class="at">{- else </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Resource configuration when condition is false</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span><span class="at">{- end </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div>
<h3 id="example-usage">Example Usage</h3>
<p>Let’s say we want to turn a feature on or off based on a value in
<code>values.yaml</code>. Here is how to do it:</p>
<p><strong>values.yaml</strong></p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">enableFeature</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
<p><strong>template.yaml</strong></p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-config</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="fu">  feature</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    {{- if .Values.enableFeature }}</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    Feature is enabled</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    {{- else }}</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    Feature is disabled</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    {{- end }}</span></code></pre></div>
<p>In this case, the <code>ConfigMap</code> will say “Feature is
enabled” or “Feature is disabled” depending on the value of
<code>enableFeature</code>.</p>
<h3 id="nested-conditions">Nested Conditions</h3>
<p>We can put conditions inside other conditions to make more complex
logic. For example:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span><span class="at">{- if .Values.enableFeature </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">{</span><span class="at">{- if .Values.someOtherCondition </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co">  # Configuration when both conditions are true</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">{</span><span class="at">{- else </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co">  # Configuration when only the first condition is true</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">{</span><span class="at">{- end </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span><span class="at">{- else </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co">  # Configuration when the feature is disabled</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span><span class="at">{- end </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div>
<h3 id="leveraging-default-values">Leveraging Default Values</h3>
<p>We can also set default values for conditions with the
<code>default</code> function. This helps to make sure a value is set if
it is not there in <code>values.yaml</code>.</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">featureEnabled</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.featureEnabled | default false </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div>
<h3 id="practical-scenario">Practical Scenario</h3>
<p>A real example could be changing resource limits based on an
environment variable:</p>
<p><strong>values.yaml</strong></p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">production</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code></pre></div>
<p><strong>resource-templates.yaml</strong></p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">limits</span><span class="kw">:</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{- if .Values.production </span><span class="kw">}</span><span class="at">}200m{{- else }}100m{{- end }}</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{- if .Values.production </span><span class="kw">}</span><span class="at">}512Mi{{- else }}256Mi{{- end }}</span></span></code></pre></div>
<p>This setup makes sure if the <code>production</code> flag is true,
the resource limits are higher.</p>
<h3 id="conclusion">Conclusion</h3>
<p>Using conditional logic in <code>values.yaml</code> in Helm charts is
a good way to manage configurations in an easy way. By using conditions,
we can create flexible and reusable Helm charts that work for many
deployment situations. For more details on Helm and what it can do,
check out <a
href="https://bestonlinetutorial.com/kubernetes/what-is-helm-and-how-does-it-help-with-kubernetes-deployments.html">this
detailed guide</a>.</p>
<h2 id="how-to-reference-other-values-in-values.yaml-for-helm">How to
Reference Other Values in values.yaml for Helm</h2>
<p>In Helm, we can reference other values in our
<code>values.yaml</code> file. This helps us make our charts flexible.
We use the <code>{{ .Values }}</code> object to get these values in our
templates.</p>
<h3 id="basic-reference">Basic Reference</h3>
<p>To reference a value from <code>values.yaml</code>, we use this
syntax:</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span><span class="at">{ .Values.variableName </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div>
<p>For example, if we have this in our <code>values.yaml</code>:</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">replicaCount</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span><span class="kw">:</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">repository</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">tag</span><span class="kw">:</span><span class="at"> latest</span></span></code></pre></div>
<p>We can reference <code>replicaCount</code> in our deployment template
like this:</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.replicaCount </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div>
<h3 id="nested-values-1">Nested Values</h3>
<p>If our values are nested, we can access them with dot notation. For
example, to reference the <code>tag</code> of the <code>image</code>, we
write:</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.image.repository </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">image</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ .Values.image.repository </span><span class="kw">}</span><span class="at">}:{{ .Values.image.tag }}</span></span></code></pre></div>
<h3 id="default-values-1">Default Values</h3>
<p>We can also set default values using the <code>default</code>
function. This is helpful when a value may not be set. For example:</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ default 1 .Values.replicaCount </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div>
<p>This sets the <code>replicas</code> to 1 if <code>replicaCount</code>
is not defined.</p>
<h3 id="combining-values">Combining Values</h3>
<p>We can combine different values together. For example, if we want to
create a full image name, we do it like this:</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">image</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;{{ .Values.image.repository }}:{{ .Values.image.tag }}&quot;</span></span></code></pre></div>
<h3 id="conditional-references">Conditional References</h3>
<p>We can use conditional logic to reference values based on certain
conditions. For example:</p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at">{ if .Values.isProduction </span><span class="kw">}</span><span class="at">}{{ .Values.prodReplicaCount }}{{ else }}{{ .Values.devReplicaCount }}{{ end }}</span></span></code></pre></div>
<h3 id="use-cases">Use Cases</h3>
<ul>
<li><strong>Environment-Specific Configurations:</strong> We can
reference different values based on the environment like development,
testing, or production.</li>
<li><strong>Versioning:</strong> We can manage image versions by
updating just one value in <code>values.yaml</code>.</li>
</ul>
<p>By referencing other values in <code>values.yaml</code>, we can make
our Helm charts easier to maintain and configure. They can adapt to
different deployment situations. For more details on working with Helm
and Kubernetes, check out <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-use-helm-to-manage-releases-of-my-applications-on-kubernetes.html">this
tutorial on managing Helm releases</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-are-templating-variables-in-helms-values.yaml">1. What are
templating variables in Helm’s <code>values.yaml</code>?</h3>
<p>Templating variables in Helm’s <code>values.yaml</code> help us to
set dynamic values. We can use these values in different parts of our
Helm charts. This makes it easier to change deployments based on what we
need. By using these variables, we can adjust our Kubernetes apps
without hardcoding values. This helps us to have smoother deployments
and changes.</p>
<h3 id="how-can-i-define-custom-variables-in-values.yaml-for-helm">2.
How can I define custom variables in <code>values.yaml</code> for
Helm?</h3>
<p>To define custom variables in <code>values.yaml</code>, we just
create key-value pairs in the right section. For example:</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">myVariable</span><span class="kw">:</span><span class="at"> myValue</span></span></code></pre></div>
<p>Then we can use this variable in our templates like this:
<code>{{ .Values.myVariable }}</code>. This way makes it easy to manage
configurations and gives us more flexibility in our Kubernetes
deployments with Helm.</p>
<h3
id="how-do-built-in-functions-work-with-templating-variables-in-helm">3.
How do built-in functions work with templating variables in Helm?</h3>
<p>Helm has built-in functions to change data in our
<code>values.yaml</code> file. We can use functions like
<code>upper</code>, <code>lower</code>, and <code>quote</code> to change
strings. For example, <code>{{ .Values.myVariable | upper }}</code> will
change the value of <code>myVariable</code> to uppercase. Using these
functions makes our Helm charts more powerful and flexible.</p>
<h3
id="can-i-use-conditional-logic-with-templating-variables-in-helm">4.
Can I use conditional logic with templating variables in Helm?</h3>
<p>Yes, we can use conditional logic in Helm with templating variables.
Helm uses the Go templating language. This lets us use things like
<code>if</code>, <code>else</code>, and <code>with</code>. For
example:</p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span><span class="at">{ if .Values.isProduction </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span><span class="at">{ else </span><span class="kw">}</span><span class="at">}</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span><span class="at">{ end </span><span class="kw">}</span><span class="at">}</span></span></code></pre></div>
<p>This feature helps us to make decisions in our Kubernetes
deployments. We can have different settings based on the
environment.</p>
<h3
id="how-do-i-reference-other-values-in-values.yaml-within-my-helm-templates">5.
How do I reference other values in <code>values.yaml</code> within my
Helm templates?</h3>
<p>Referencing other values in <code>values.yaml</code> is easy. We can
use dot notation for nested values. For example, if we have:</p>
<div class="sourceCode" id="cb41"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">database</span><span class="kw">:</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> mydb</span></span></code></pre></div>
<p>We can reference it in our templates like this:
<code>{{ .Values.database.name }}</code>. This ability is important for
creating complex Helm charts that need many configuration values for our
Kubernetes apps.</p>
<p>For more help on managing Kubernetes deployments, we can check this
article on <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-use-helm-to-deploy-a-complex-application-on-kubernetes.html">how
to use Helm to deploy a complex application on Kubernetes</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            