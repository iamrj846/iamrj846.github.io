
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TFCQEJR7TD');
</script>
            <title>What are Kubernetes Deployments and How Do I Use Them?</title>
            <meta name="description" content="Discover Kubernetes deployments: their purpose, benefits, and step-by-step guide on how to effectively use them.">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">What are Kubernetes Deployments and How Do I Use Them?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Kubernetes deployments are a great way to manage how we launch
applications in a Kubernetes environment. They let us clearly state what
we want our application to look like. Then Kubernetes takes care of
tricky things like scaling, updating, and going back to earlier versions
of applications when we need to. This is why Kubernetes deployments are
very important for keeping our applications strong and ready in cloud
environments.</p>
<p>In this article, we will look at what Kubernetes deployments are and
how we can use them well. We will talk about many topics. We will
discuss the benefits of using Kubernetes deployments instead of other
ways. We will learn how deployments work inside. We will also see the
main parts of a deployment. Then we will go through steps to create,
update, and roll back deployments. Plus, we will go over common
situations where we use Kubernetes deployments and how to check and
scale them well. Here is what we will talk about:</p>
<ul>
<li>What are Kubernetes Deployments and How Can We Use Them Well?</li>
<li>Why Should We Choose Kubernetes Deployments Instead of Other
Methods?</li>
<li>How Do Kubernetes Deployments Work Inside?</li>
<li>What are the Main Parts of a Kubernetes Deployment?</li>
<li>How to Create Our First Kubernetes Deployment with Code
Examples?</li>
<li>How to Update a Kubernetes Deployment Easily?</li>
<li>How to Roll Back a Kubernetes Deployment if There are Problems?</li>
<li>What are Common Situations for Kubernetes Deployments in Real
Life?</li>
<li>How to Check and Scale Kubernetes Deployments Well?</li>
<li>Frequently Asked Questions</li>
</ul>
<p>For more information about Kubernetes and its parts, we can check <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">what
is Kubernetes and how does it simplify container management</a>, or look
at <a
href="https://bestonlinetutorial.com/kubernetes/why-should-i-use-kubernetes-for-my-applications.html">why
we should use Kubernetes for our applications</a>.</p>
<h2 id="why-we-choose-kubernetes-deployments-over-other-methods">Why We
Choose Kubernetes Deployments Over Other Methods</h2>
<p>Kubernetes Deployments give us a strong and easy way to manage
applications in a containerized environment. Here are some reasons why
we like them more than other methods:</p>
<ul>
<li><p><strong>Declarative Configuration</strong>: With Deployments, we
can use a clear way to manage applications. We set the desired state of
our application. Then, Kubernetes keeps that state for us
automatically.</p></li>
<li><p><strong>Automated Rollouts and Rollbacks</strong>: Kubernetes
Deployments help us manage application updates easily. Kubernetes takes
care of rolling out new versions of our application. If there is a
problem, it can also roll back to the previous version.</p></li>
<li><p><strong>Scaling</strong>: Deployments let us scale applications
up or down based on how much is needed. We can change the number of
copies in a deployment with a simple command or a quick update.</p></li>
<li><p><strong>Self-Healing</strong>: Kubernetes replaces failed parts
of our application automatically. It also makes sure we have the right
number of copies, which helps our deployments be more reliable.</p></li>
<li><p><strong>Version Control</strong>: Every deployment makes a new
version of our application. This way, we can track changes and go back
to older versions if we need. It keeps a history of our application
settings.</p></li>
<li><p><strong>Integration with CI/CD</strong>: Kubernetes Deployments
work well with Continuous Integration and Continuous Deployment
pipelines. This helps us automate testing and deployment.</p></li>
<li><p><strong>Resource Management</strong>: We can set resource
requests and limits for CPU and memory. This helps us use resources
efficiently in our cluster.</p></li>
</ul>
<p>Here is a simple example of a Kubernetes Deployment
configuration:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-container</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-app-image:latest</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div>
<p>This YAML shows how to create a Deployment with three copies of a
container running an application. It shows the easy and powerful way of
using Kubernetes Deployments compared to other methods. For more
insights on Kubernetes and its features, visit <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">What
is Kubernetes and How Does it Simplify Container Management?</a>.</p>
<h2 id="how-do-kubernetes-deployments-work-under-the-hood">How Do
Kubernetes Deployments Work Under the Hood?</h2>
<p>Kubernetes Deployments give us a simple way to manage our
application’s state. When we create a Deployment, Kubernetes takes care
of the lifecycle of the app version we want. It makes sure the desired
state matches the current state. Let’s see how Kubernetes Deployments
work under the hood.</p>
<ol type="1">
<li><p><strong>Desired State</strong>: When we define a Deployment, we
set the desired state. This includes how many replicas we want, the
container image, and the configuration. We write this in the Deployment
YAML file.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-deployment</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> example</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> example</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-container</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> example-image:latest</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div></li>
<li><p><strong>Controller Loop</strong>: Kubernetes has a control loop.
It always checks the desired state from the Deployment and compares it
with the current state of the application. If there are differences, the
controller fixes them.</p></li>
<li><p><strong>ReplicaSet Management</strong>: When we create a
Deployment, it makes a ReplicaSet. The ReplicaSet keeps the right number
of replicas running all the time.</p></li>
<li><p><strong>Rolling Updates</strong>: Kubernetes Deployments help us
with rolling updates. This means we can update our app with little
downtime. When we update the Deployment, Kubernetes slowly replaces old
Pods with new ones based on the new settings.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="at">kubectl set image deployment/example-deployment example-container=new-image:latest</span></span></code></pre></div></li>
<li><p><strong>Health Checks</strong>: Kubernetes checks the health of
Pods using readiness and liveness probes. If a Pod has a problem,
Kubernetes will restart or replace it to keep the application
running.</p></li>
<li><p><strong>Rollback Capability</strong>: If we have problems during
updates, we can easily go back to a stable version of the
Deployment.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> rollout undo deployment/example-deployment</span></code></pre></div></li>
<li><p><strong>Scaling</strong>: We can change the number of replicas in
the Deployment definition to scale our app up or down easily.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> scale deployment/example-deployment <span class="at">--replicas</span><span class="op">=</span>5</span></code></pre></div></li>
</ol>
<p>Knowing how Kubernetes Deployments work is very important for
managing our app deployments and keeping them reliable. For more
information about Kubernetes, we can check out <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-pods-and-how-do-i-work-with-them.html">What
are Kubernetes Pods and How Do I Work with Them?</a> and <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">What
are the Key Components of a Kubernetes Cluster?</a>.</p>
<h2 id="what-are-the-key-components-of-a-kubernetes-deployment">What are
the Key Components of a Kubernetes Deployment?</h2>
<p>Kubernetes Deployments help us manage our applications in a clear
way. They make sure our app stays in the state we want. The important
parts of a Kubernetes Deployment are:</p>
<ol type="1">
<li><p><strong>Deployment Object</strong>: This is the main resource. It
tells us the desired state, like how many replicas we want, the
container image, and how to update the app. A Deployment makes sure the
right number of Pod replicas are running all the time.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-container</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-app-image:latest</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div></li>
<li><p><strong>ReplicaSet</strong>: This controls the Pods made by the
Deployment. It makes sure we have the right number of Pods running all
the time. If any Pod fails, it replaces it automatically.</p></li>
<li><p><strong>Pod Template</strong>: This lays out the metadata and
details for the Pods made by the Deployment. It includes the container
image, ports, and environment variables.</p></li>
<li><p><strong>Update Strategy</strong>: This shows how we do updates to
the app. Common ways are:</p>
<ul>
<li><strong>RollingUpdate</strong>: Slowly replaces Pods with new
ones.</li>
<li><strong>Recreate</strong>: Deletes all old Pods first, then creates
new ones.</li>
</ul></li>
<li><p><strong>Labels and Selectors</strong>: Labels are pairs of keys
and values we attach to objects. Selectors help us find the Pods that
the Deployment controls. They are very important to link the Deployment
with the right Pods.</p></li>
<li><p><strong>Status</strong>: The Deployment object has a status that
shows us the current state. It tells us the number of replicas,
available replicas, and any problems that might happen.</p></li>
</ol>
<p>By knowing these parts, we can create, manage, and scale our
applications with Kubernetes Deployments. For more details on Kubernetes
parts, check <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">What
are the Key Components of a Kubernetes Cluster?</a>.</p>
<h2
id="how-to-create-your-first-kubernetes-deployment-with-code-examples">How
to Create Your First Kubernetes Deployment with Code Examples?</h2>
<p>We can create a Kubernetes Deployment by defining how we want our
application to run in a YAML file. Then we apply this file using
<code>kubectl</code>. Here is a simple guide with code examples to help
us make our first Kubernetes Deployment.</p>
<ol type="1">
<li><strong>Define the Deployment YAML:</strong></li>
</ol>
<p>First, we need to create a file named
<code>my-deployment.yaml</code>. We will put the following content in
it. This example will deploy an NGINX application.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-nginx-deployment</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-nginx</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-nginx</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx:latest</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div>
<ol start="2" type="1">
<li><strong>Apply the Deployment:</strong></li>
</ol>
<p>Now we run this command to create the Deployment in our Kubernetes
cluster:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> my-deployment.yaml</span></code></pre></div>
<ol start="3" type="1">
<li><strong>Check the Deployment Status:</strong></li>
</ol>
<p>To see if our Deployment was created well, we can use:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get deployments</span></code></pre></div>
<ol start="4" type="1">
<li><strong>View Pods Created by the Deployment:</strong></li>
</ol>
<p>Next, let’s check the Pods that our Deployment made:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get pods</span></code></pre></div>
<ol start="5" type="1">
<li><strong>Access the Application:</strong></li>
</ol>
<p>We need to expose the Deployment by making a Service. Create another
file called <code>my-service.yaml</code>:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-nginx-service</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> LoadBalancer</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">targetPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-nginx</span></span></code></pre></div>
<p>Now we apply the Service configuration:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> my-service.yaml</span></code></pre></div>
<ol start="6" type="1">
<li><strong>Get Service Information:</strong></li>
</ol>
<p>To find the external IP of the Service, we run:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get services</span></code></pre></div>
<p>Now we can access our NGINX application using the external IP.</p>
<ol start="7" type="1">
<li><strong>Verify the Deployment:</strong></li>
</ol>
<p>If we want to see more details, we can describe our Deployment:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> describe deployment my-nginx-deployment</span></code></pre></div>
<p>This guide shows us how to create a basic Kubernetes Deployment with
code examples. For more information about Kubernetes parts, we can check
this <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">article
on key components of a Kubernetes cluster</a>.</p>
<h2 id="how-to-update-a-kubernetes-deployment-smoothly">How to Update a
Kubernetes Deployment Smoothly?</h2>
<p>We can update a Kubernetes Deployment easily. We can use different
strategies to keep downtime low. This way, the application stays
available. The most common way is to use the <code>kubectl</code>
command-line tool. This tool helps us change the Deployment’s
configuration. It also triggers a rolling update.</p>
<h3 id="steps-to-update-a-kubernetes-deployment">Steps to Update a
Kubernetes Deployment</h3>
<ol type="1">
<li><p><strong>Change the Deployment Manifest</strong>: We need to
update the image version or settings in the Deployment YAML file.</p>
<p>Example:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-app:2.0</span><span class="co">  # Updated image version</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div></li>
<li><p><strong>Apply the Changes</strong>: We can use
<code>kubectl apply</code> to apply the new settings.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> my-app-deployment.yaml</span></code></pre></div></li>
<li><p><strong>Check the Update</strong>: We should check the status of
the Deployment to make sure the update worked.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> rollout status deployment/my-app</span></code></pre></div></li>
<li><p><strong>Rollback if Needed</strong>: If there is a problem with
the new version, we can go back to the old version easily.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> rollout undo deployment/my-app</span></code></pre></div></li>
</ol>
<h3 id="rolling-update-strategy">Rolling Update Strategy</h3>
<p>Kubernetes uses rolling update strategy by default. This means:</p>
<ul>
<li>Pods get updated step by step. This way, some replicas are always
available.</li>
<li>We can control the speed of the rollout. We do this by using
settings like <code>maxSurge</code> and
<code>maxUnavailable</code>.</li>
</ul>
<p>Example of setting rolling update settings in your Deployment:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">strategy</span><span class="kw">:</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">type</span><span class="kw">:</span><span class="at"> RollingUpdate</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">rollingUpdate</span><span class="kw">:</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">maxSurge</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">maxUnavailable</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span></code></pre></div>
<h3 id="check-the-update">Check the Update</h3>
<p>After we apply the update, we should check if the new Pods are
working well.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get pods <span class="at">-l</span> app=my-app</span></code></pre></div>
<p>We can also describe the Deployment. This shows the rollout history
and details.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> describe deployment my-app</span></code></pre></div>
<p>This process helps us update our Kubernetes Deployment smoothly. It
keeps our application’s availability with minimal disruption. For more
details on managing Kubernetes resources, we can check articles about <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-pods-and-how-do-i-work-with-them.html">Kubernetes
Pods and their management</a>.</p>
<h2 id="how-to-roll-back-a-kubernetes-deployment-in-case-of-issues">How
to Roll Back a Kubernetes Deployment in Case of Issues?</h2>
<p>We can roll back a Kubernetes deployment if there are problems with
the current version. Kubernetes keeps a record of changes. This makes
rollbacks easy.</p>
<p>To roll back a deployment, we can use this command:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> rollout undo deployment <span class="op">&lt;</span>deployment-name<span class="op">&gt;</span></span></code></pre></div>
<p>For example, if our deployment is named <code>my-app</code>, we would
use:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> rollout undo deployment my-app</span></code></pre></div>
<p>We can also choose a specific version to roll back to by using:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> rollout undo deployment <span class="op">&lt;</span>deployment-name<span class="op">&gt;</span> --to-revision=<span class="op">&lt;</span>revision-number<span class="op">&gt;</span></span></code></pre></div>
<p>To see the list of previous versions for a deployment, we run:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> rollout history deployment <span class="op">&lt;</span>deployment-name<span class="op">&gt;</span></span></code></pre></div>
<p>This command shows all past versions. We can pick one to go back
to.</p>
<p>If we want to check the details of a certain version, we can use:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> rollout history deployment <span class="op">&lt;</span>deployment-name<span class="op">&gt;</span> --revision=<span class="op">&lt;</span>revision-number<span class="op">&gt;</span></span></code></pre></div>
<p>If we want to watch the status of the rollback, we run:</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> rollout status deployment <span class="op">&lt;</span>deployment-name<span class="op">&gt;</span></span></code></pre></div>
<p>This command helps us see if the rollback finished correctly.</p>
<p>For more info on managing Kubernetes Deployments, we can check <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-pods-and-how-do-i-work-with-them.html">this
tutorial on Kubernetes Pods</a>.</p>
<h2
id="what-are-common-use-cases-for-kubernetes-deployments-in-real-life">What
are Common Use Cases for Kubernetes Deployments in Real Life?</h2>
<p>We use Kubernetes deployments in many ways to manage applications
better. Here are some common use cases:</p>
<ol type="1">
<li><p><strong>Microservices Architecture</strong>: We can deploy
applications as a group of microservices. This lets us scale, update,
and manage them separately. Each microservice runs in its own container.
This makes updates and rollbacks easy.</p></li>
<li><p><strong>Continuous Integration/Continuous Deployment
(CI/CD)</strong>: We can use Kubernetes to automate our deployment
process in a CI/CD pipeline. Tools like Jenkins or GitLab CI help us
build, test, and deploy applications automatically.</p>
<p>Here is an example of a CI/CD pipeline step:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> batch/v1</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Job</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> ci-cd-job</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> build</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> docker:latest</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">command</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&quot;sh&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;-c&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;docker build -t myapp:latest .&quot;</span><span class="kw">]</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">restartPolicy</span><span class="kw">:</span><span class="at"> Never</span></span></code></pre></div></li>
<li><p><strong>High Availability</strong>: Kubernetes helps keep our
applications running all the time. It can heal itself and do automatic
rollouts. We can set deployments to keep a certain number of
replicas.</p></li>
<li><p><strong>A/B Testing</strong>: We can use Kubernetes to do A/B
testing. This means we can run different versions of an application. It
helps us test features in real life and get user feedback before we
fully launch.</p>
<p>Here is an example of an A/B testing deployment:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp-ab-test</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">version</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp:v1</span></span></code></pre></div></li>
<li><p><strong>Scaling Applications</strong>: We can scale applications
based on how much demand there is. Kubernetes makes it easy to
automatically scale deployments using the Horizontal Pod Autoscaler.</p>
<p>Here is an example of scaling based on CPU usage:</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> autoscaling/v1</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> HorizontalPodAutoscaler</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp-hpa</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">scaleTargetRef</span><span class="kw">:</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">minReplicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">maxReplicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">10</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">targetCPUUtilizationPercentage</span><span class="kw">:</span><span class="at"> </span><span class="dv">70</span></span></code></pre></div></li>
<li><p><strong>Batch Processing</strong>: We can also use Kubernetes
deployments for batch jobs that need processing. These jobs are easy to
schedule and manage with Kubernetes.</p></li>
<li><p><strong>Handling State in Applications</strong>: Stateful
applications can work with Kubernetes deployments and StatefulSets. This
helps us manage data that needs to stay the same, even after pods
restart.</p></li>
<li><p><strong>Multi-Cloud and Hybrid Deployments</strong>: Kubernetes
lets us deploy applications on different cloud providers or on our own
servers. This gives us flexibility and backup options.</p></li>
</ol>
<p>Kubernetes deployments give us a strong way to manage applications in
many places. They are important tools in modern software development.
For more about Kubernetes architecture, check out <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">What
are the Key Components of a Kubernetes Cluster?</a>.</p>
<h2 id="how-to-monitor-and-scale-kubernetes-deployments-effectively">How
to Monitor and Scale Kubernetes Deployments Effectively?</h2>
<p>Monitoring and scaling Kubernetes deployments is very important for
keeping our applications running well. Here are some easy ways and tools
to do this.</p>
<h3 id="monitoring-kubernetes-deployments">Monitoring Kubernetes
Deployments</h3>
<ol type="1">
<li><strong>Prometheus and Grafana</strong>:
<ul>
<li>We can use Prometheus to collect data and Grafana to show it
nicely.</li>
<li>We can set up Prometheus with this configuration:</li>
</ul>
<div class="sourceCode" id="cb31"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> prometheus</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> ClusterIP</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">9090</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> prometheus</span></span></code></pre></div>
<ul>
<li>For Grafana, we can use a similar service setup.</li>
</ul></li>
<li><strong>kubectl top</strong>:
<ul>
<li>We can check how much resources we use by running the
<code>kubectl top</code> command:</li>
</ul>
<div class="sourceCode" id="cb32"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> top pods</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> top nodes</span></code></pre></div></li>
<li><strong>Logging</strong>:
<ul>
<li>We should use central logging with tools like ELK Stack or Fluentd.
This helps us see logs from all pods and makes it easier to debug.</li>
</ul></li>
</ol>
<h3 id="scaling-kubernetes-deployments">Scaling Kubernetes
Deployments</h3>
<ol type="1">
<li><strong>Horizontal Pod Autoscaler (HPA)</strong>:
<ul>
<li>We can automatically increase or decrease the number of pods based
on CPU use:</li>
</ul>
<div class="sourceCode" id="cb33"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> autoscaling/v2beta2</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> HorizontalPodAutoscaler</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp-hpa</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">scaleTargetRef</span><span class="kw">:</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">minReplicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">maxReplicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">10</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">metrics</span><span class="kw">:</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">type</span><span class="kw">:</span><span class="at"> Resource</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">resource</span><span class="kw">:</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">name</span><span class="kw">:</span><span class="at"> cpu</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">target</span><span class="kw">:</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">type</span><span class="kw">:</span><span class="at"> AverageUtilization</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">averageUtilization</span><span class="kw">:</span><span class="at"> </span><span class="dv">50</span></span></code></pre></div></li>
<li><strong>Manual Scaling</strong>:
<ul>
<li>We can change the number of replicas by using
<code>kubectl scale</code>. Just run this command:</li>
</ul>
<div class="sourceCode" id="cb34"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> scale deployment myapp <span class="at">--replicas</span><span class="op">=</span>5</span></code></pre></div></li>
<li><strong>Cluster Autoscaler</strong>:
<ul>
<li>We can set up the Cluster Autoscaler. It will change the size of our
Kubernetes cluster automatically based on how many resources we
need.</li>
</ul></li>
</ol>
<h3 id="monitoring-and-scaling-best-practices">Monitoring and Scaling
Best Practices</h3>
<ul>
<li><p><strong>Set Resource Requests and Limits</strong>: We should
define the right CPU and memory requests and limits for our deployments.
This helps Kubernetes manage resources better.</p></li>
<li><p><strong>Regularly Review Metrics</strong>: We should look at the
metrics from Prometheus often. This helps us find problems and change
our scaling plans if needed.</p></li>
<li><p><strong>Use Alerts</strong>: We can set up alerts in Prometheus.
This will tell us if there are issues with resource usage or if
something might fail in our deployments.</p></li>
</ul>
<p>By using these monitoring and scaling methods, we can make sure our
Kubernetes deployments work well and react to changes. For more
information on Kubernetes parts, check <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">this
article</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-is-a-kubernetes-deployment">1. What is a Kubernetes
Deployment?</h3>
<p>A Kubernetes Deployment is an important tool in Kubernetes. It helps
us update our applications easily. We can say how we want our
application to be. For example, we can decide how many copies of it we
want. Then, Kubernetes takes care of the rest. This helps us manage and
grow our applications better in a Kubernetes cluster.</p>
<h3 id="how-do-i-update-a-kubernetes-deployment">2. How do I update a
Kubernetes Deployment?</h3>
<p>To update a Kubernetes Deployment, we can change the Deployment
details. Then, we use the <code>kubectl apply</code> command to apply
the changes. Kubernetes will then handle the update for us. It makes
sure the new version goes live without any downtime. For more steps, you
can check our guide on how to update a Kubernetes Deployment
smoothly.</p>
<h3 id="what-are-the-benefits-of-using-kubernetes-deployments">3. What
are the benefits of using Kubernetes Deployments?</h3>
<p>Kubernetes Deployments have many benefits. They can do automatic
rollouts and rollbacks. They also help us scale our applications and
manage different versions easily. By using deployments, we can keep our
applications in the state we want. This makes managing containers easier
and helps our applications work better in production.</p>
<h3 id="how-do-i-roll-back-a-kubernetes-deployment">4. How do I roll
back a Kubernetes Deployment?</h3>
<p>Rolling back a Kubernetes Deployment is easy. We can use the
<code>kubectl rollout undo</code> command with the name of the
deployment to go back to a previous version. This helps keep our
applications stable. If an update fails, we can quickly recover. This
makes Kubernetes Deployments a good choice for managing
applications.</p>
<h3 id="what-are-common-use-cases-for-kubernetes-deployments">5. What
are common use cases for Kubernetes Deployments?</h3>
<p>People often use Kubernetes Deployments for managing microservices,
continuous delivery, and automatic application updates. They can handle
many copies of an application and make sure it is always available. This
makes them great for production workloads. For more information on
Kubernetes and its uses, you can read our article on why we should use
Kubernetes for our applications.</p>
<p>By looking at these frequently asked questions, we can understand
Kubernetes Deployments better. We can learn how to use them in our
projects. For more details, we can explore related articles like what
are the main parts of a Kubernetes cluster and how to install Minikube
for local Kubernetes work.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            