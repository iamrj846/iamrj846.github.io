
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            
            <title>Expose port in minikube - kubernetes</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "BestOnlineTutorial",
      "url": "https://www.bestonlinetutorial.com/"
    }
    </script>

<!-- Common CSS & Icons -->
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
<link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
<link rel="stylesheet" href="/assets/css/post.css">
            <meta name="description" content="Learn how to expose ports in Minikube for Kubernetes applications with our step-by-step guide. Simplify your development!">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">Expose port in minikube - kubernetes</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>To expose a port in a Minikube Kubernetes cluster, we can create a
Kubernetes Service. This service will target the pods we want and set
the port we need to expose. We can do this using the
<code>kubectl expose</code> command. This command helps us create a
service type that fits our needs like NodePort or LoadBalancer. This
way, we can allow outside access to our application’s services.</p>
<p>In this article, we will look at different ways to expose ports in a
Minikube Kubernetes environment. We will talk about using the
<code>kubectl expose</code> command. We will also cover how to create
NodePort services, access services with Minikube Tunnel, use Ingress for
application exposure, set up LoadBalancer services, and answer common
questions. Here are the topics we will discuss:</p>
<ul>
<li>Expose Port in Minikube Kubernetes Cluster</li>
<li>Using kubectl expose to Open Ports in Minikube</li>
<li>Creating a NodePort Service in Minikube</li>
<li>Accessing Services via Minikube Tunnel</li>
<li>Using Ingress to Expose Applications in Minikube</li>
<li>Configuring LoadBalancer Services in Minikube</li>
<li>Frequently Asked Questions</li>
</ul>
<h2 id="using-kubectl-expose-to-open-ports-in-minikube">Using kubectl
expose to Open Ports in Minikube</h2>
<p>To expose a port in Minikube with <code>kubectl</code>, we can use
the <code>kubectl expose</code> command. This command creates a service
for our app. This service lets us show our app to the outside world.
Here are the steps to expose a deployment as a service.</p>
<h3 id="example-of-exposing-a-deployment">Example of Exposing a
Deployment</h3>
<ol type="1">
<li><p><strong>Create a Deployment</strong> (if we do not have one
yet):</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create deployment myapp <span class="at">--image</span><span class="op">=</span>myapp:latest</span></code></pre></div></li>
<li><p><strong>Expose the Deployment</strong>: To expose the deployment
on a certain port, we can run:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> expose deployment myapp <span class="at">--type</span><span class="op">=</span>NodePort <span class="at">--port</span><span class="op">=</span>8080</span></code></pre></div>
<ul>
<li><code>--type=NodePort</code>: This tells that the service will be
available outside.</li>
<li><code>--port=8080</code>: This sets the port that the service will
show.</li>
</ul></li>
<li><p><strong>Get the Service Information</strong>: To find the port
that Kubernetes gave, we run:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get services</span></code></pre></div>
<p>This command will show us the service details, and we can see the
external port assigned.</p></li>
</ol>
<h3 id="accessing-the-application">Accessing the Application</h3>
<p>After we expose the service, we can access our app using the Minikube
IP and the NodePort. To get the Minikube IP, we run:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">minikube</span> ip</span></code></pre></div>
<p>Then we can access our app using:</p>
<pre><code>http://&lt;minikube-ip&gt;:&lt;node-port&gt;</code></pre>
<p>This method helps developers to quickly expose apps running in
Minikube. It makes it easier to test and work with their services. For
more details on Kubernetes services, check <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-services-and-how-do-they-expose-applications.html">this
article</a>.</p>
<h2 id="creating-a-nodeport-service-in-minikube">Creating a NodePort
Service in Minikube</h2>
<p>We can expose a service in our Minikube Kubernetes cluster by using a
NodePort service. Here are the steps we should follow:</p>
<ol type="1">
<li><p><strong>Make sure Minikube is running:</strong></p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">minikube</span> start</span></code></pre></div></li>
<li><p><strong>Create a deployment:</strong> We can deploy a simple
Nginx app like this:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create deployment nginx <span class="at">--image</span><span class="op">=</span>nginx</span></code></pre></div></li>
<li><p><strong>Expose the deployment as a NodePort service:</strong> We
run this command to expose the Nginx deployment on a NodePort:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> expose deployment nginx <span class="at">--type</span><span class="op">=</span>NodePort <span class="at">--port</span><span class="op">=</span>80</span></code></pre></div></li>
<li><p><strong>Get the service details:</strong> We can get the service
information, like the assigned NodePort:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get services</span></code></pre></div>
<p>The output should look like this:</p>
<pre><code>NAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)        AGE
nginx        NodePort    10.96.0.1      &lt;none&gt;        80:XXXXX/TCP   1m</code></pre>
<p>We need to note the <code>XXXXX</code> in <code>80:XXXXX/TCP</code>.
This is the NodePort we will use to access the service.</p></li>
<li><p><strong>Access the service:</strong> To access the Nginx service
from our host machine, we use this command to get the Minikube IP:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">minikube</span> ip</span></code></pre></div>
<p>Then we access it using the Minikube IP and the NodePort:</p>
<pre><code>http://&lt;minikube-ip&gt;:&lt;NodePort&gt;</code></pre></li>
</ol>
<p>This way we can expose our applications running in Minikube with
NodePort services. For more details on managing services, we can look at
<a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-services-and-how-do-they-expose-applications.html">Kubernetes
Services</a>.</p>
<h2 id="accessing-services-via-minikube-tunnel">Accessing Services via
Minikube Tunnel</h2>
<p>We can access services running in a Minikube Kubernetes cluster by
using the <code>minikube tunnel</code> command. This command helps us
expose services of type <code>LoadBalancer</code> and
<code>NodePort</code> to our localhost. It gives us a way to reach
applications running inside our Minikube cluster from our local
machine.</p>
<h3 id="steps-to-access-services-via-minikube-tunnel">Steps to Access
Services via Minikube Tunnel</h3>
<ol type="1">
<li><p><strong>Start Minikube</strong>: We need to make sure Minikube is
running. If it is not running, we can start it with:
<code>bash     minikube start</code></p></li>
<li><p><strong>Create a Service</strong>: If we have not done it yet, we
should create a service of type <code>LoadBalancer</code> or
<code>NodePort</code>. For example, here is how we can create a simple
Node.js application and expose it:
<code>yaml     apiVersion: v1     kind: Service     metadata:       name: my-node-app     spec:       type: NodePort       ports:         - port: 8080           targetPort: 3000           nodePort: 30001       selector:         app: my-node-app</code></p></li>
<li><p><strong>Apply the Service Configuration</strong>:
<code>bash     kubectl apply -f my-node-app-service.yaml</code></p></li>
<li><p><strong>Run Minikube Tunnel</strong>: In a new terminal, we run
the following command to expose our service via a tunnel:
<code>bash     minikube tunnel</code> This command may need
administrative privileges. So, we might have to run it with
<code>sudo</code> on Unix-like systems.</p></li>
<li><p><strong>Access Your Application</strong>: After the tunnel is
running, we can access our application using the URL:</p>
<ul>
<li>For a <code>LoadBalancer</code> service, we can reach the service at
the IP address given by the tunnel.</li>
<li>For a <code>NodePort</code> service, we use:</li>
</ul>
<pre><code>http://localhost:&lt;NodePort&gt;</code></pre>
<p>For the example above, it will be:
<code>http://localhost:30001</code></p></li>
</ol>
<h3 id="additional-notes">Additional Notes</h3>
<ul>
<li>The <code>minikube tunnel</code> command will keep running until we
stop it. This lets traffic flow to our services.</li>
<li>This method is very useful for local development and testing. It
makes it easier to access services without needing to deploy to a cloud
provider.</li>
<li>We should check that our firewall settings allow access to the ports
used by our services.</li>
</ul>
<p>For more information on Kubernetes services, we can look at <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-services-and-how-do-they-expose-applications.html">what
are Kubernetes services and how do they expose applications</a>.</p>
<h2 id="using-ingress-to-expose-applications-in-minikube">Using Ingress
to Expose Applications in Minikube</h2>
<p>In Minikube, we can use Ingress to control how outside users access
our services. Ingress works as a door for HTTP and HTTPS traffic to our
applications in the Kubernetes cluster. Here are the steps to set up and
use Ingress in Minikube.</p>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li><p>First, we need to make sure Minikube is running:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">minikube</span> start</span></code></pre></div></li>
<li><p>Then, we enable the Ingress addon:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">minikube</span> addons enable ingress</span></code></pre></div></li>
</ul>
<h3 id="deploying-an-application">Deploying an Application</h3>
<p>Now, let’s deploy a sample application. We will use a simple Nginx
deployment as an example:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> nginx-deployment</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div>
<p>We apply the deployment with this command:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> nginx-deployment.yaml</span></code></pre></div>
<h3 id="creating-a-service">Creating a Service</h3>
<p>Next, we create a Service to expose our Nginx deployment:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> nginx-service</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">protocol</span><span class="kw">:</span><span class="at"> TCP</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">targetPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> ClusterIP</span></span></code></pre></div>
<p>Now we apply the service:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> nginx-service.yaml</span></code></pre></div>
<h3 id="configuring-ingress-resource">Configuring Ingress Resource</h3>
<p>Now, we will create an Ingress resource so we can route traffic to
the Nginx service:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> networking.k8s.io/v1</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Ingress</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> nginx-ingress</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">rules</span><span class="kw">:</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">host</span><span class="kw">:</span><span class="at"> nginx.local</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">http</span><span class="kw">:</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">paths</span><span class="kw">:</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">path</span><span class="kw">:</span><span class="at"> /</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">pathType</span><span class="kw">:</span><span class="at"> Prefix</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">backend</span><span class="kw">:</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">service</span><span class="kw">:</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">name</span><span class="kw">:</span><span class="at"> nginx-service</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">port</span><span class="kw">:</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">number</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div>
<p>We apply the ingress resource now:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> nginx-ingress.yaml</span></code></pre></div>
<h3 id="accessing-the-application-1">Accessing the Application</h3>
<p>To access our application, we need to change our
<code>/etc/hosts</code> file. This will link the hostname to the
Minikube IP. First, we get the Minikube IP:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">minikube</span> ip</span></code></pre></div>
<p>Then, we add this line to our <code>/etc/hosts</code> file (make sure
to replace <code>&lt;minikube-ip&gt;</code> with the IP we got):</p>
<pre><code>&lt;minikube-ip&gt; nginx.local</code></pre>
<p>Now, we can access our Nginx application at
<code>http://nginx.local</code>.</p>
<h3 id="summary">Summary</h3>
<p>Using Ingress in Minikube helps us manage how outside users access
our applications. We can set rules to send traffic to different services
based on hostnames and paths. This makes it a great tool for handling
HTTP traffic in Kubernetes.</p>
<p>For more details about Kubernetes services and how to expose
applications, check out <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-services-and-how-do-they-expose-applications.html">this
article</a>.</p>
<h2 id="configuring-loadbalancer-services-in-minikube">Configuring
LoadBalancer Services in Minikube</h2>
<p>Minikube gives us a simple way to set up a local Kubernetes cluster.
But it does not support LoadBalancer services like cloud providers do.
We can still make LoadBalancer work by using Minikube and the
<code>minikube tunnel</code> command. Here is how we can configure
LoadBalancer services in Minikube.</p>
<ol type="1">
<li><p><strong>Start Minikube:</strong></p>
<p>First, we need to make sure that Minikube is running. We can choose
the driver if we want:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">minikube</span> start <span class="at">--driver</span><span class="op">=</span>virtualbox</span></code></pre></div></li>
<li><p><strong>Deploy an Application:</strong></p>
<p>Next, we will create a deployment for our application. For example,
we can create a simple nginx deployment with this command:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create deployment nginx <span class="at">--image</span><span class="op">=</span>nginx</span></code></pre></div></li>
<li><p><strong>Expose the Deployment as a LoadBalancer
Service:</strong></p>
<p>Now, we expose the deployment as a LoadBalancer service using this
command:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> expose deployment nginx <span class="at">--type</span><span class="op">=</span>LoadBalancer <span class="at">--port</span><span class="op">=</span>80</span></code></pre></div></li>
<li><p><strong>Start Minikube Tunnel:</strong></p>
<p>To set up the LoadBalancer service, we need to run the Minikube
tunnel in a new terminal. This command makes a network route to our
service:</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">minikube</span> tunnel</span></code></pre></div>
<p>We need to have the right permissions. Sometimes we may need to use
sudo.</p></li>
<li><p><strong>Get the Service Information:</strong></p>
<p>After we expose the service, we can check the service details to see
the external IP:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get services</span></code></pre></div>
<p>We will see an external IP assigned to our LoadBalancer service after
a short time.</p></li>
<li><p><strong>Access the Application:</strong></p>
<p>We can access our application using the external IP we got. For
example, if the external IP is <code>192.168.99.100</code>, we can reach
Nginx by going to:</p>
<pre><code>http://192.168.99.100</code></pre></li>
</ol>
<p>This way works good for local development and testing of LoadBalancer
services in Minikube. For more details about Kubernetes services, we can
check <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-services-and-how-do-they-expose-applications.html">this
article</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="how-do-we-expose-a-port-in-minikube">1. How do we expose a port
in Minikube?</h3>
<p>To expose a port in Minikube, we can use the
<code>kubectl expose</code> command. This command creates a service that
connects the internal port of our application to an external port. For
example, we can run the command
<code>kubectl expose deployment &lt;your-deployment-name&gt; --type=NodePort --port=&lt;your-app-port&gt;</code>.
This makes our application available outside the Minikube Kubernetes
cluster.</p>
<h3
id="what-is-the-difference-between-nodeport-and-loadbalancer-in-minikube">2.
What is the difference between NodePort and LoadBalancer in
Minikube?</h3>
<p>In Minikube, a <strong>NodePort</strong> service shows our
application on a fixed port on each node’s IP address. This lets us
access the service from outside the cluster using
<code>http://&lt;minikube-ip&gt;:&lt;node-port&gt;</code>. On the other
hand, a <strong>LoadBalancer</strong> service is for cloud systems. It
creates an external load balancer. But this does not work in Minikube
because it runs locally. For testing, we usually use NodePort.</p>
<h3 id="how-can-we-use-minikube-tunnel-to-access-services">3. How can we
use Minikube tunnel to access services?</h3>
<p>Minikube tunnel is a command that makes a network tunnel to our
Minikube cluster. It helps us access services of type LoadBalancer and
NodePort. To use it, we just run <code>minikube tunnel</code> in our
terminal. This needs admin rights and will keep running until we stop
it. It lets us access services like they are in a cloud system.</p>
<h3 id="can-we-use-ingress-to-expose-applications-in-minikube">4. Can we
use Ingress to expose applications in Minikube?</h3>
<p>Yes, we can use Ingress to expose applications in our Minikube
Kubernetes cluster. Ingress helps us manage external access to services,
usually HTTP/S, by setting rules for routing traffic. To set this up, we
need to enable the Ingress add-on in Minikube. We can do this with
<code>minikube addons enable ingress</code>, and then we create an
Ingress resource that points to our application services.</p>
<h3 id="how-do-we-check-the-exposed-ports-for-services-in-minikube">5.
How do we check the exposed ports for services in Minikube?</h3>
<p>To check the exposed ports for services in our Minikube cluster, we
can run the command <code>kubectl get services</code>. This command
shows all services with their details. It includes the type of service,
cluster IP, external IP (if there is one), and the ports they expose.
This is very important to make sure our applications are available as we
expect.</p>
<p>For more insights on Kubernetes and Minikube, we can explore related
topics like <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-install-minikube-for-local-kubernetes-development.html">how
to install Minikube for local Kubernetes development</a> or <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-services-and-how-do-they-expose-applications.html">understanding
Kubernetes services</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            