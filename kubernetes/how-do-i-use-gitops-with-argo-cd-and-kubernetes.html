
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TFCQEJR7TD');
</script>
            <title>How Do I Use GitOps with Argo CD and Kubernetes?</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "BestOnlineTutorial",
      "url": "https://www.bestonlinetutorial.com/"
    }
    </script>

<!-- Common CSS & Icons -->
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
<link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
<link rel="stylesheet" href="/assets/css/post.css">
            <meta name="description" content="Learn how to implement GitOps with Argo CD and Kubernetes for streamlined deployment and management. Boost your DevOps skills today!">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Do I Use GitOps with Argo CD and Kubernetes?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>GitOps is a new way to deliver and deploy software. It uses Git
repositories as the main place for managing Kubernetes clusters and
applications. With GitOps, we can make the deployment process easier and
faster. This helps us keep the applications in the Kubernetes
environment in the state we want.</p>
<p>In this article, we will talk about the important steps to use GitOps
with Argo CD and Kubernetes. We will look at the main ideas of GitOps.
We will also see how to set up our Kubernetes cluster and how to install
and configure Argo CD with our Git repository. Besides that, we will
learn how to deploy applications. We will point out common GitOps
workflows, share real-world examples, discuss how to fix problems, and
answer questions we often get.</p>
<ul>
<li>How Can I Implement GitOps Using Argo CD and Kubernetes?</li>
<li>What is GitOps and Why Use It?</li>
<li>How to Set Up Your Kubernetes Cluster for Argo CD?</li>
<li>How Do I Install Argo CD in My Kubernetes Environment?</li>
<li>How to Configure Argo CD with Your Git Repository?</li>
<li>How Do I Deploy Applications Using Argo CD?</li>
<li>What Are Common GitOps Workflows with Argo CD?</li>
<li>What Are Real World Use Cases for GitOps with Argo CD?</li>
<li>How to Troubleshoot Common Issues in Argo CD?</li>
<li>Frequently Asked Questions</li>
</ul>
<p>If you want to learn more about Kubernetes, you can read articles
like <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">What
is Kubernetes and How Does it Simplify Container Management?</a> and <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-implement-gitops-with-kubernetes.html">How
Do I Implement GitOps with Kubernetes?</a>.</p>
<h2 id="what-is-gitops-and-why-use-it">What is GitOps and Why Use
It?</h2>
<p>GitOps is a new way to manage operations. It uses Git as the main
source of truth for handling infrastructure and application deployments.
In GitOps, we make all changes to infrastructure and applications
through Git pull requests. These changes then happen automatically in
the target environment, which is usually Kubernetes. This method helps
us work better together, see what is happening easily, and keep our
deployments consistent.</p>
<h3 id="benefits-of-gitops">Benefits of GitOps</h3>
<ol type="1">
<li><strong>Version Control</strong>: GitOps uses Git’s version control
features to track changes. This helps us rollback easily and keep
history.</li>
<li><strong>Automation</strong>: We automate deployments with Continuous
Deployment (CD) tools. This cuts down on manual work and lowers chances
for mistakes.</li>
<li><strong>Consistency</strong>: This approach makes sure the state in
Git matches what is deployed in the cluster. We can quickly find any
drift.</li>
<li><strong>Collaboration</strong>: Teams can work well together using
Git workflows. We can review each other’s work and discuss it through
pull requests.</li>
<li><strong>Security</strong>: We can audit changes and manage access
with Git permissions. This makes our work more secure.</li>
</ol>
<h3 id="key-concepts-of-gitops">Key Concepts of GitOps</h3>
<ul>
<li><strong>Declarative Configuration</strong>: We declare the states of
infrastructure and applications in Git repositories. We usually use YAML
or JSON formats.</li>
<li><strong>Automated Sync</strong>: Tools like Argo CD watch the Git
repository all the time. They automatically deploy changes to the
Kubernetes cluster when they see a change.</li>
<li><strong>Pull Request Workflow</strong>: Changes come through pull
requests. We review and merge them. This gives us controlled and
traceable updates.</li>
</ul>
<h3 id="why-use-gitops">Why Use GitOps?</h3>
<p>Using GitOps with tools like Argo CD and Kubernetes gives us many
benefits:</p>
<ul>
<li><strong>Faster Recovery</strong>: If something goes wrong, we can go
back to a stable state easily using Git.</li>
<li><strong>Reduced Complexity</strong>: It makes operations simpler by
managing infrastructure as code. We need fewer tools and processes.</li>
<li><strong>Enhanced Monitoring and Observability</strong>: We can
always see the state of the deployment in Git. This makes it easier to
monitor and check changes.</li>
</ul>
<p>In short, GitOps changes how we manage our Kubernetes applications.
It uses Git at the center of our work. This makes our processes
smoother, boosts security, and helps us collaborate better. For more
details on how to implement GitOps with Kubernetes, you can check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-implement-gitops-with-kubernetes.html">this
article</a>.</p>
<h2 id="how-to-set-up-your-kubernetes-cluster-for-argo-cd">How to Set Up
Your Kubernetes Cluster for Argo CD?</h2>
<p>To set up our Kubernetes cluster for Argo CD, we can follow these
steps:</p>
<ol type="1">
<li><p><strong>Choose a Kubernetes Environment</strong>: We can use a
local setup with Minikube. Or we can choose cloud providers like AWS
EKS, Google GKE, or Azure AKS. For local development, check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-install-minikube-for-local-kubernetes-development.html">How
do I install Minikube for local Kubernetes development?</a>.</p></li>
<li><p><strong>Create a Kubernetes Cluster</strong>: If we use a cloud
provider, we should follow the specific guide for creating a cluster.
For example, to set up on AWS, we can look at <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-set-up-a-kubernetes-cluster-on-aws-eks.html">How
do I set up a Kubernetes cluster on AWS EKS?</a>.</p></li>
<li><p><strong>Install the Kubernetes CLI (kubectl)</strong>: We need to
have <code>kubectl</code> installed to manage our Kubernetes cluster. We
can install it by following <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubectl-and-how-do-i-use-it-to-manage-kubernetes.html">this
guide</a>.</p></li>
<li><p><strong>Configure kubectl</strong>: We should set up
<code>kubectl</code> to connect to our Kubernetes cluster. If we use
Minikube, we can run:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">minikube</span> start</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> config use-context minikube</span></code></pre></div></li>
<li><p><strong>Verify Kubernetes Cluster</strong>: We can check the
status of our cluster to make sure it is running well:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get nodes</span></code></pre></div></li>
<li><p><strong>Install Required Tools</strong>: We have to make sure we
have <code>git</code> and <code>kubectl</code> installed in our
environment. We need these for Argo CD setup.</p></li>
<li><p><strong>Prepare Git Repository</strong>: We should create a Git
repository for our Kubernetes manifests. This repository will keep the
desired state of our applications and settings.</p></li>
<li><p><strong>Network Configuration</strong>: We need to check that our
cluster networking lets Argo CD talk with our Git repository and any
apps we will deploy.</p></li>
<li><p><strong>Install Ingress Controller (Optional)</strong>: If we
want to expose Argo CD’s web UI outside, we may want to install an
Ingress controller. We can find instructions in <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-configure-ingress-for-external-access-to-my-applications.html">How
do I configure Ingress for external access to my
applications?</a>.</p></li>
</ol>
<p>After we finish these steps, our Kubernetes cluster will be ready for
Argo CD installation and setup.</p>
<h2 id="how-do-we-install-argo-cd-in-our-kubernetes-environment">How Do
We Install Argo CD in Our Kubernetes Environment?</h2>
<p>To install Argo CD in our Kubernetes environment, we can follow these
simple steps.</p>
<ol type="1">
<li><p><strong>Install Argo CD</strong>:<br />
First, we use the <code>kubectl</code> command to create a namespace for
Argo CD. Then, we install it with the official manifest.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> create namespace argocd</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-n</span> argocd <span class="at">-f</span> https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml</span></code></pre></div></li>
<li><p><strong>Access the Argo CD API Server</strong>:<br />
The Argo CD API server is not exposed by default. We can access it using
port forwarding:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> port-forward svc/argocd-server <span class="at">-n</span> argocd 8080:443</span></code></pre></div>
<p>Now, we can access the Argo CD UI at
<code>http://localhost:8080</code>.</p></li>
<li><p><strong>Get the Initial Admin Password</strong>:<br />
The initial password for the Argo CD admin user is in a Kubernetes
secret. We can get it with:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get secret argocd-initial-admin-secret <span class="at">-n</span> argocd <span class="at">-o</span> jsonpath=<span class="st">&quot;{.data.password}&quot;</span> <span class="kw">|</span> <span class="fu">base64</span> <span class="at">-d</span></span></code></pre></div></li>
<li><p><strong>Login to Argo CD</strong>:<br />
We use the username <code>admin</code> and the password we got in the
last step to log in:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">argocd</span> login localhost:8080 <span class="at">--username</span> admin <span class="at">--password</span> <span class="op">&lt;</span>password<span class="op">&gt;</span></span></code></pre></div></li>
<li><p><strong>Change the Admin Password</strong> (optional):<br />
We should change the default admin password after the first login:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">argocd</span> account update-password</span></code></pre></div></li>
<li><p><strong>Install the Argo CD CLI</strong> (optional):<br />
For easier management, we can install the Argo CD Command Line Interface
(CLI). We can download the latest version from the <a
href="https://github.com/argoproj/argo-cd/releases">Argo CD releases
page</a>.</p>
<p>For example, to install on MacOS:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install argocd</span></code></pre></div></li>
<li><p><strong>Verify the Installation</strong>:<br />
We can check the status of Argo CD components:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get pods <span class="at">-n</span> argocd</span></code></pre></div>
<p>We need to make sure all pods are in the <code>Running</code>
state.</p></li>
</ol>
<p>This process helps us set up Argo CD in our Kubernetes environment.
It lets us manage our applications using GitOps practices. For more
details on using GitOps with Argo CD and Kubernetes, we can check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-implement-gitops-with-kubernetes.html">this
article</a>.</p>
<h2 id="how-to-configure-argo-cd-with-your-git-repository">How to
Configure Argo CD with Your Git Repository?</h2>
<p>To configure Argo CD with your Git repository, we can follow these
steps:</p>
<ol type="1">
<li><p><strong>Access the Argo CD UI</strong>: First, we need to open
our web browser and go to the Argo CD UI. The default URL is usually
<code>http://&lt;ARGO_CD_SERVER_IP&gt;:&lt;ARGO_CD_SERVER_PORT&gt;</code>.
We log in with the admin credentials.</p></li>
<li><p><strong>Add a Git Repository</strong>:</p>
<ul>
<li>We click on the <strong>Settings</strong> icon on the left
sidebar.</li>
<li>Next, we select <strong>Repositories</strong> from the dropdown
menu.</li>
<li>Then, we click on the <strong>Connect Repo</strong> button.</li>
</ul></li>
<li><p><strong>Fill in Repository Details</strong>:</p>
<ul>
<li><strong>Repository URL</strong>: We enter the Git repository URL
(for example, <code>https://github.com/username/repo.git</code>).</li>
<li><strong>Type</strong>: We choose the type of repository (like
Git).</li>
<li><strong>Username</strong>: If our repository is private, we provide
the username.</li>
<li><strong>Password/Token</strong>: We enter the password or a personal
access token if needed.</li>
<li><strong>SSH Key</strong>: If we want to use SSH, we put the SSH key
in the right section.</li>
</ul></li>
<li><p><strong>Set Up the Repository</strong>:</p>
<ul>
<li>In the <strong>Path</strong> field, we specify the path to our
Kubernetes manifests in the repository (like
<code>manifests/</code>).</li>
<li>We pick the <strong>Branch</strong> from which we want to deploy
(for example, <code>main</code>).</li>
</ul></li>
<li><p><strong>Save Configuration</strong>: We click the
<strong>Save</strong> button to add the repository.</p></li>
<li><p><strong>Verify Connection</strong>: After saving, we check if the
connection is successful in the Repositories list. We should see the new
repository with a green checkmark that shows a successful
connection.</p></li>
<li><p><strong>Sync Applications</strong>: To sync applications from
this repository, we create a new application in Argo CD that points to
this Git repository by setting the repository in the application
settings.</p></li>
</ol>
<h3 id="example-of-a-git-repository-url-configuration-in-yaml">Example
of a Git Repository URL Configuration in YAML:</h3>
<div class="sourceCode" id="cb10"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> argocd-repo</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">repository</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;https://github.com/username/repo.git&quot;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">username</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;your-username&quot;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">password</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;your-password&quot;</span></span></code></pre></div>
<p>By following these steps, we can configure Argo CD with our Git
repository. This enables GitOps workflows for our Kubernetes
applications. For more details on GitOps with Kubernetes, we can check
<a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-implement-gitops-with-kubernetes.html">this
article</a>.</p>
<h2 id="how-do-i-deploy-applications-using-argo-cd">How Do I Deploy
Applications Using Argo CD?</h2>
<p>To deploy applications with Argo CD, we can follow these easy
steps:</p>
<ol type="1">
<li><p><strong>Configure Your Git Repository</strong>: We need to make
sure our application manifests, which are Kubernetes YAML files, are in
a Git repository. Argo CD will watch this repository for
changes.</p></li>
<li><p><strong>Create an Application in Argo CD</strong>: We can use the
Argo CD CLI or the web UI to make a new application. Here is how we can
do it with the CLI:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">argocd</span> app create my-app <span class="dt">\</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--repo</span> <span class="op">&lt;</span>REPO_URL<span class="op">&gt;</span> <span class="dt">\</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--path</span> <span class="op">&lt;</span>PATH_TO_MANIFESTS<span class="op">&gt;</span> <span class="dt">\</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--dest-server</span> https://kubernetes.default.svc <span class="dt">\</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--dest-namespace</span> <span class="op">&lt;</span>TARGET_NAMESPACE<span class="op">&gt;</span></span></code></pre></div>
<p>We need to change <code>&lt;REPO_URL&gt;</code>,
<code>&lt;PATH_TO_MANIFESTS&gt;</code>, and
<code>&lt;TARGET_NAMESPACE&gt;</code> to our repository URL, the path to
our application manifests, and the namespace for our
application.</p></li>
<li><p><strong>Sync the Application</strong>: After we create the
application, we must sync it to deploy. We can do this with the CLI or
the web UI. If we use the CLI, we run:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">argocd</span> app sync my-app</span></code></pre></div></li>
<li><p><strong>Check Application Status</strong>: We can check the
status of our application with:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">argocd</span> app get my-app</span></code></pre></div></li>
<li><p><strong>Automatic Syncing (Optional)</strong>: We can set up Argo
CD to sync automatically. This is done by adding <code>syncPolicy</code>
in our application manifest. For example:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> argoproj.io/v1alpha1</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Application</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="at">  ...</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">syncPolicy</span><span class="kw">:</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">automated</span><span class="kw">:</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">prune</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">selfHeal</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div></li>
<li><p><strong>Monitor Your Deployment</strong>: We can use the Argo CD
dashboard to keep an eye on our application. The dashboard lets us see
logs and current status directly.</p></li>
<li><p><strong>Rollback (if needed)</strong>: If we face problems, we
can go back to an earlier version of our application with this
command:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">argocd</span> app rollback my-app <span class="op">&lt;</span>REVISION<span class="op">&gt;</span></span></code></pre></div>
<p>We just need to replace <code>&lt;REVISION&gt;</code> with the number
of the version we want.</p></li>
</ol>
<p>Argo CD gives us a strong way to manage Kubernetes applications with
GitOps methods. This helps our deployments be steady and easy to manage.
For more details on GitOps practices, check out <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-implement-gitops-with-kubernetes.html">this
article on implementing GitOps with Kubernetes</a>.</p>
<h2 id="what-are-common-gitops-workflows-with-argo-cd">What Are Common
GitOps Workflows with Argo CD?</h2>
<p>GitOps workflows with Argo CD helps us to deploy and manage
applications on Kubernetes. We use Git as our single source of truth.
Below are some common GitOps workflows we can use with Argo CD:</p>
<h3 id="continuous-deployment">1. <strong>Continuous
Deployment</strong></h3>
<ul>
<li><strong>Push Changes to Git</strong>: We push our code changes to a
Git repository.</li>
<li><strong>Automated Sync</strong>: Argo CD automatically syncs the
apps defined in the Git repository with the Kubernetes cluster.</li>
<li><strong>Monitoring and Rollback</strong>: If there are errors, Argo
CD lets us easily rollback to the last stable state.</li>
</ul>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sync application with Argo CD</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="ex">argocd</span> app sync <span class="op">&lt;</span>app-name<span class="op">&gt;</span></span></code></pre></div>
<h3 id="pull-requests-for-changes">2. <strong>Pull Requests for
Changes</strong></h3>
<ul>
<li><strong>Create a Pull Request</strong>: We make changes to
application configurations or manifests in a separate branch.</li>
<li><strong>Review and Merge</strong>: We review and merge the pull
request into the main branch.</li>
<li><strong>Argo CD Sync</strong>: Argo CD sees the changes and applies
them to the Kubernetes cluster.</li>
</ul>
<h3 id="environment-promotion">3. <strong>Environment
Promotion</strong></h3>
<ul>
<li><strong>Branching Strategy</strong>: We use separate branches for
different environments like <code>dev</code>, <code>staging</code>, and
<code>production</code>.</li>
<li><strong>Merge for Promotion</strong>: We merge code from
<code>dev</code> to <code>staging</code> or <code>production</code>
branches to promote to higher environments.</li>
<li><strong>Automatic Deployment</strong>: Argo CD automatically deploys
changes to the right environment based on the branch.</li>
</ul>
<h3 id="application-rollbacks">4. <strong>Application
Rollbacks</strong></h3>
<ul>
<li><strong>Version Control</strong>: We track each deployment in
Git.</li>
<li><strong>Rollback Command</strong>: We can run a rollback command
through Argo CD to go back to a previous version.</li>
</ul>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rollback to a previous version</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="ex">argocd</span> app rollback <span class="op">&lt;</span>app-name<span class="op">&gt;</span> <span class="op">&lt;</span>revision<span class="op">&gt;</span></span></code></pre></div>
<h3 id="drift-detection-and-alerting">5. <strong>Drift Detection and
Alerting</strong></h3>
<ul>
<li><strong>Drift Detection</strong>: Argo CD checks the cluster state
against the desired state in Git.</li>
<li><strong>Alerts</strong>: We set up notifications via Slack, email,
or others for any detected drift. This lets us investigate and fix
issues quickly.</li>
</ul>
<h3 id="gitops-for-cicd-pipelines">6. <strong>GitOps for CI/CD
Pipelines</strong></h3>
<ul>
<li><strong>Integrate with CI Tools</strong>: We use CI tools like
Jenkins or GitHub Actions to build and push Docker images.</li>
<li><strong>Update Manifests in Git</strong>: After pushing the image,
the CI/CD pipeline updates the deployment manifests in Git.</li>
<li><strong>Automatic Sync by Argo CD</strong>: Argo CD picks up the
changes in Git and applies them automatically.</li>
</ul>
<h3 id="multi-cluster-management">7. <strong>Multi-Cluster
Management</strong></h3>
<ul>
<li><strong>Centralized Git Repository</strong>: We can manage multiple
clusters from one Git repository.</li>
<li><strong>Cluster-Specific Configurations</strong>: We use Helm or
Kustomize for configurations that are specific to each cluster.</li>
<li><strong>Argo CD Application Sets</strong>: We define application
sets for common workflows across different clusters.</li>
</ul>
<div class="sourceCode" id="cb18"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example ApplicationSet for multi-cluster</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> argoproj.io/v1alpha1</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ApplicationSet</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-appset</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">generators</span><span class="kw">:</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">git</span><span class="kw">:</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">repoURL</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;https://github.com/example/repo.git&#39;</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">revision</span><span class="kw">:</span><span class="at"> main</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">files</span><span class="kw">:</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="kw">-</span><span class="at"> </span><span class="fu">path</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;*.yaml&#39;</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> example</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">project</span><span class="kw">:</span><span class="at"> default</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">source</span><span class="kw">:</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">repoURL</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;https://github.com/example/repo.git&#39;</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">targetRevision</span><span class="kw">:</span><span class="at"> HEAD</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">path</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;example-path&#39;</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">destination</span><span class="kw">:</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">server</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;https://kubernetes.default.svc&#39;</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">namespace</span><span class="kw">:</span><span class="at"> example-namespace</span></span></code></pre></div>
<p>These workflows help teams to use GitOps principles well. It improves
how we work together and keeps things consistent when deploying
applications with Argo CD and Kubernetes.</p>
<p>For more insights on implementing GitOps practices, check out <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-implement-gitops-with-kubernetes.html">How
Do I Implement GitOps with Kubernetes</a>.</p>
<h2 id="what-are-real-world-use-cases-for-gitops-with-argo-cd">What Are
Real World Use Cases for GitOps with Argo CD?</h2>
<p>GitOps with Argo CD is popular in many industries. It helps us to
make application deployment and management easier in Kubernetes. Here
are some real-world examples of how we can use it:</p>
<ol type="1">
<li><strong>Continuous Delivery and Deployment</strong>:
<ul>
<li>We can use Argo CD to automate our delivery pipelines. This means
when we change something in our Git repository, it gets automatically
deployed to our Kubernetes clusters.</li>
<li>For example, a company tracks changes in its microservices. This
helps teams to deploy updates smoothly and roll back if needed.</li>
</ul></li>
<li><strong>Multi-Cluster Management</strong>:
<ul>
<li>Argo CD lets us manage many Kubernetes clusters from one Git
repository. This gives us a clear view and control over deployments in
different environments.</li>
<li>For example, a SaaS provider runs different clusters for staging and
production. They use Argo CD to keep the configurations in sync.</li>
</ul></li>
<li><strong>Infrastructure as Code (IaC)</strong>:
<ul>
<li>With GitOps, we treat infrastructure changes like code. This helps
us to version control our Kubernetes manifests. We can easily check
changes and work together on improving infrastructure.</li>
<li>For example, a financial company tracks infrastructure changes in
Git. This helps them follow regulatory rules better.</li>
</ul></li>
<li><strong>Disaster Recovery</strong>:
<ul>
<li>GitOps helps us recover quickly from failures. We can restore
applications to a good state using the Git history.</li>
<li>For example, a retail company uses Argo CD to quickly bring back
services during an outage. They pull the last stable setup from the Git
repository.</li>
</ul></li>
<li><strong>Blue-Green Deployments</strong>:
<ul>
<li>By keeping two identical environments, Argo CD helps us do
blue-green deployments. This means we can release updates without
downtime and easily go back if needed.</li>
<li>For example, an e-commerce site adds new features to a blue
environment while the green one is live. They switch traffic only after
they check everything is okay.</li>
</ul></li>
<li><strong>Canary Releases</strong>:
<ul>
<li>Argo CD supports canary deployments. This lets us introduce new
features to a small group of users first before a full rollout.</li>
<li>For example, a social media app slowly gives new features to 10% of
users. They watch for any problems before releasing to everyone.</li>
</ul></li>
<li><strong>Configuration Drift Management</strong>:
<ul>
<li>Argo CD continuously checks the live state of our applications. It
can find and fix configuration drift. This makes sure the cluster state
matches what we want in Git.</li>
<li>For example, a gaming company uses Argo CD to keep configurations
correct and automatically revert any unauthorized changes.</li>
</ul></li>
<li><strong>Collaboration and Governance</strong>:
<ul>
<li>GitOps helps us work together better. Development and operations
teams can manage application configurations and infrastructure in a
shared Git repository.</li>
<li>For example, a healthcare organization uses GitOps to make
deployments easier. They ensure all changes go through code review.</li>
</ul></li>
<li><strong>Security and Compliance</strong>:
<ul>
<li>GitOps workflows improve our security. All changes are tracked and
can be checked. We can manage sensitive information safely using secrets
and config maps.</li>
<li>For example, a government agency uses GitOps for its Kubernetes
deployments. They make sure all changes follow strict security
rules.</li>
</ul></li>
</ol>
<p>These examples show how GitOps with Argo CD is flexible and
efficient. It helps us improve our deployment strategies in Kubernetes.
For more tips on using GitOps, check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-implement-gitops-with-kubernetes.html">this
article</a>.</p>
<h2 id="how-to-troubleshoot-common-issues-in-argo-cd">How to
Troubleshoot Common Issues in Argo CD?</h2>
<p>When we work with Argo CD in a Kubernetes setup, we may see different
problems. Here are some easy steps and commands to help us fix them.</p>
<h3 id="check-argo-cd-server-logs">1. Check Argo CD Server Logs</h3>
<p>We can check the logs of the Argo CD server pod with this
command:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> logs <span class="at">-n</span> argocd <span class="va">$(</span><span class="ex">kubectl</span> get pods <span class="at">-n</span> argocd <span class="at">-l</span> app.kubernetes.io/name=argocd-server <span class="at">-o</span> name<span class="va">)</span></span></code></pre></div>
<p>We should look for error messages. They can tell us what is going
wrong.</p>
<h3 id="sync-status-issues">2. Sync Status Issues</h3>
<p>If an application is out of sync, we can check the sync status
with:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">argocd</span> app get <span class="op">&lt;</span>APP_NAME<span class="op">&gt;</span></span></code></pre></div>
<p>If it shows out of sync, we can sync it manually:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">argocd</span> app sync <span class="op">&lt;</span>APP_NAME<span class="op">&gt;</span></span></code></pre></div>
<h3 id="application-health-checks">3. Application Health Checks</h3>
<p>To check if an application is healthy, we can use:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">argocd</span> app health <span class="op">&lt;</span>APP_NAME<span class="op">&gt;</span></span></code></pre></div>
<p>If the application is unhealthy, we need to look at the resources in
the Kubernetes cluster. We should check for any failing pods or
containers.</p>
<h3 id="authentication-problems">4. Authentication Problems</h3>
<p>If we have trouble logging into Argo CD, we must make sure we use the
right username and password. If we need to reset the admin password, we
can do it with:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> <span class="at">-n</span> argocd patch secret argocd-secret <span class="dt">\</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">-p</span> <span class="st">&#39;{&quot;stringData&quot;: {&quot;admin.password&quot;: &quot;&lt;NEW_PASSWORD&gt;&quot;, &quot;admin.passwordMtime&quot;: &quot;&#39;</span><span class="va">$(</span><span class="fu">date</span> +%FT%T%Z<span class="va">)</span><span class="st">&#39;&quot;}}&#39;</span></span></code></pre></div>
<h3 id="repository-access-issues">5. Repository Access Issues</h3>
<p>If Argo CD cannot reach your Git repository, we need to check the
repository setup. We should look at the repository URL and
credentials:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">argocd</span> repo list</span></code></pre></div>
<p>To update the repository credentials, we can use:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">argocd</span> repo update <span class="op">&lt;</span>REPO_URL<span class="op">&gt;</span> --username <span class="op">&lt;</span>USERNAME<span class="op">&gt;</span> --password <span class="op">&lt;</span>PASSWORD<span class="op">&gt;</span></span></code></pre></div>
<h3 id="kubernetes-resource-issues">6. Kubernetes Resource Issues</h3>
<p>If Kubernetes resources are not creating as we expect, we need to
look at the Application YAML for mistakes. We should make sure the YAML
files follow Kubernetes rules.</p>
<h3 id="network-policies">7. Network Policies</h3>
<p>If we use network policies, we need to check they allow traffic
between Argo CD parts and the Kubernetes API server. We can review our
network policies with:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get networkpolicies <span class="at">-n</span> <span class="op">&lt;</span>NAMESPACE<span class="op">&gt;</span></span></code></pre></div>
<h3 id="argo-cd-version-compatibility">8. Argo CD Version
Compatibility</h3>
<p>We should make sure we have a version of Argo CD that works with our
Kubernetes cluster. We can check the official <a
href="https://argo-cd.readthedocs.io/en/stable/">Argo CD
documentation</a> for compatibility details.</p>
<h3 id="resource-quotas-and-limits">9. Resource Quotas and Limits</h3>
<p>We need to verify if resource quotas or limits stop us from creating
new resources. We can check resource quotas with:</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get resourcequotas <span class="at">-n</span> <span class="op">&lt;</span>NAMESPACE<span class="op">&gt;</span></span></code></pre></div>
<h3 id="custom-resource-definitions-crds">10. Custom Resource
Definitions (CRDs)</h3>
<p>We should check the status of Argo CD CRDs to make sure they are
installed correctly:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get crd <span class="kw">|</span> <span class="fu">grep</span> argoproj.io</span></code></pre></div>
<p>If some CRDs are missing, we need to reinstall or update Argo CD.</p>
<p>By using these troubleshooting steps, we can find and fix common
problems while using Argo CD with Kubernetes. For more details on using
GitOps with Kubernetes, we can check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-implement-gitops-with-kubernetes.html">How
Do I Implement GitOps with Kubernetes?</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-is-gitops-in-kubernetes">What is GitOps in Kubernetes?</h3>
<p>GitOps is a way to manage operations that uses Git as the main source
of truth for infrastructure and applications. In Kubernetes, we use
tools like Argo CD to make deployment and management easier. This helps
us manage Kubernetes resources based on Git commits. It keeps everything
consistent, helps us work better together, and makes it easier to go
back to previous versions of applications.</p>
<h3 id="how-does-argo-cd-work-with-gitops">How does Argo CD work with
GitOps?</h3>
<p>Argo CD is a tool for continuous delivery made for Kubernetes. It
follows the GitOps method. Argo CD watches our Git repositories for
changes. When it sees changes, it automatically updates the Kubernetes
cluster. This way, the applications we have running match what we want
as stated in Git. It cuts down the need for manual work and makes
deployment smoother in GitOps processes.</p>
<h3
id="what-are-the-prerequisites-for-using-argo-cd-with-kubernetes">What
are the prerequisites for using Argo CD with Kubernetes?</h3>
<p>Before we can use Argo CD with Kubernetes, we need a working
Kubernetes cluster and access to it through <code>kubectl</code>. We
also need a Git repository for our Kubernetes manifests or Helm charts.
Knowing some Git and basic Kubernetes ideas will help a lot when we set
up and run Argo CD for GitOps.</p>
<h3 id="how-can-i-troubleshoot-common-issues-in-argo-cd">How can I
troubleshoot common issues in Argo CD?</h3>
<p>We can often find common problems in Argo CD using its user interface
or by checking logs. First, we should look at the sync status of
applications in the Argo CD dashboard and read any error messages. We
can also use <code>kubectl</code> commands to check the status of pods
and services. If we need more help, we can check the <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-troubleshoot-issues-in-my-kubernetes-deployments.html">Argo
CD troubleshooting documentation</a> for ways to fix specific
issues.</p>
<h3
id="what-are-some-best-practices-for-implementing-gitops-with-argo-cd">What
are some best practices for implementing GitOps with Argo CD?</h3>
<p>When we use GitOps with Argo CD, we should keep our Git repositories
neat and organized. This makes management easier. We can use Git
branches for different environments and take advantage of Argo CD’s
features like automated sync and health checks. Also, we need to handle
sensitive information carefully. Using Kubernetes Secrets or other
secret management tools is a good idea. Following these best practices
will make our GitOps work better with Argo CD in Kubernetes.</p>
<p>For more insights on GitOps, we can check out <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-implement-gitops-with-kubernetes.html">how
to implement GitOps with Kubernetes</a> and <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-troubleshoot-issues-in-my-kubernetes-deployments.html">troubleshooting
Kubernetes deployments</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            