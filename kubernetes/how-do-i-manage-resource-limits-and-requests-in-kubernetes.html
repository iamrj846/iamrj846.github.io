
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TFCQEJR7TD');
</script>
            <title>How Do I Manage Resource Limits and Requests in Kubernetes?</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Common CSS & Icons -->
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
<link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
<link rel="stylesheet" href="/assets/css/post.css">
            <meta name="description" content="Learn to effectively manage resource limits and requests in Kubernetes to optimize performance and ensure efficient resource use.">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Do I Manage Resource Limits and Requests in Kubernetes?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Managing resource limits and requests in Kubernetes is very important
for making our applications work better and using resources smartly in a
cluster. Resource requests tell us the least resources a Pod needs to
work. Resource limits show the most resources a Pod can use. Setting
these correctly helps avoid resource conflicts. It also makes sure our
applications run well without putting too much stress on the system.</p>
<p>In this article, we will look at different parts of managing resource
limits and requests in Kubernetes. We will talk about good ways to set
these numbers. We will show how to put them in YAML files. We will also
see how the <code>kubectl</code> command-line tool helps us manage these
resources. Moreover, we will check what happens if we go over resource
limits. We will discuss how these settings affect pod scheduling. We
will even talk about changing resource settings for pods that are
already running. Finally, we will share real-life examples and ways to
watch resource usage in Kubernetes. This will help us understand
resource management in our Kubernetes setup.</p>
<ul>
<li>How Can We Effectively Manage Resource Limits and Requests in
Kubernetes?</li>
<li>What Are Resource Requests and Limits in Kubernetes?</li>
<li>How Do We Set Resource Requests and Limits in Kubernetes YAML?</li>
<li>How Can We Use kubectl to Manage Resource Limits and Requests?</li>
<li>What Happens When Resource Limits Are Exceeded in Kubernetes?</li>
<li>How Do Resource Requests and Limits Impact Pod Scheduling?</li>
<li>Can We Update Resource Limits and Requests for Running Pods?</li>
<li>What Are Real Life Use Cases for Managing Kubernetes Resource
Limits?</li>
<li>How Do We Monitor Resource Usage in Kubernetes?</li>
<li>Frequently Asked Questions</li>
</ul>
<p>For more information about Kubernetes, we can check <a
href="https://bestonlinetutorial.com/kubernetes/what-is-kubernetes-and-how-does-it-simplify-container-management.html">what
is Kubernetes and how does it simplify container management</a> or learn
about <a
href="https://bestonlinetutorial.com/kubernetes/why-should-i-use-kubernetes-for-my-applications.html">why
we should use Kubernetes for our applications</a>.</p>
<h2 id="what-are-resource-requests-and-limits-in-kubernetes">What Are
Resource Requests and Limits in Kubernetes?</h2>
<p>In Kubernetes, we use resource requests and limits to set how much
CPU and memory (RAM) a container can have. These settings help us use
resources well and avoid problems when many pods want to use the same
resources.</p>
<h3 id="resource-requests">Resource Requests</h3>
<ul>
<li><strong>Definition</strong>: A resource request is a promise that a
certain amount of CPU and memory will be given to a container.</li>
<li><strong>Usage</strong>: When we schedule a pod, Kubernetes looks at
the resource requests. It helps to make sure the needed resources are
free on the node.</li>
</ul>
<h3 id="resource-limits">Resource Limits</h3>
<ul>
<li><strong>Definition</strong>: A resource limit sets the highest
amount of CPU and memory that a container can use.</li>
<li><strong>Usage</strong>: If a container tries to use more than its
limit, Kubernetes will slow it down or stop it, depending on what
resource it is.</li>
</ul>
<h3 id="configuration-example">Configuration Example</h3>
<p>We can set resource requests and limits in the pod or container
specification using YAML format. Here is an example of a pod definition
with resource requests and limits:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-pod</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-container</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;64Mi&quot;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;250m&quot;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">limits</span><span class="kw">:</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;128Mi&quot;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;500m&quot;</span></span></code></pre></div>
<p>In this example: - The container asks for <strong>64Mi</strong> of
memory and <strong>250m</strong> (0.25 cores) of CPU. - The container
can use a maximum of <strong>128Mi</strong> of memory and
<strong>500m</strong> (0.5 cores) of CPU.</p>
<p>Managing resource requests and limits in Kubernetes is very important
for good resource use and application speed. For more details about
Kubernetes resource management, we can check <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-pods-and-how-do-i-work-with-them.html">this
article</a>.</p>
<h2
id="how-do-we-set-resource-requests-and-limits-in-kubernetes-yaml">How
Do We Set Resource Requests and Limits in Kubernetes YAML?</h2>
<p>To set resource requests and limits in Kubernetes YAML files, we put
them under the <code>resources</code> field in the container section.
This tells Kubernetes how much CPU and memory to give to our Pods. It
helps with managing resources and scheduling them well.</p>
<p>Here’s an example of how we can define these settings in a Pod
specification:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-pod</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-container</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;64Mi&quot;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;250m&quot;</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">limits</span><span class="kw">:</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;128Mi&quot;</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;500m&quot;</span></span></code></pre></div>
<h3 id="explanation-of-the-fields">Explanation of the Fields:</h3>
<ul>
<li><strong>requests</strong>: This tells the minimum resources that
Kubernetes will promise for the container. If the resources we ask for
are not there, the Pod will not start.</li>
<li><strong>limits</strong>: This shows the maximum resources that the
container can use. If the container tries to use more than this limit,
it can be slowed down (for CPU) or stopped (for memory).</li>
</ul>
<h3 id="setting-resource-requests-and-limits-for-deployments">Setting
Resource Requests and Limits for Deployments:</h3>
<p>For Deployments, we can set resource requests and limits in a similar
way. Here is an example:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-deployment</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> example</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> example</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-container</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;64Mi&quot;</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;250m&quot;</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="at">            </span><span class="fu">limits</span><span class="kw">:</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;128Mi&quot;</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="at">              </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;500m&quot;</span></span></code></pre></div>
<h3 id="best-practices">Best Practices:</h3>
<ul>
<li>We should always define both requests and limits. This helps to
avoid resource issues and makes sure we schedule things well.</li>
<li>We need to watch how much resources we use. Then, we can change
requests and limits based on the needs of our application and how it
performs.</li>
</ul>
<p>For more details on resource management in Kubernetes, we can visit
this <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-pods-and-how-do-i-work-with-them.html">Kubernetes
resource management guide</a>.</p>
<h2
id="how-can-we-use-kubectl-to-manage-resource-limits-and-requests">How
Can We Use kubectl to Manage Resource Limits and Requests?</h2>
<p>We can use <code>kubectl</code> to manage resource limits and
requests in Kubernetes. This helps us view, set, and update resource
settings for our pods and deployments.</p>
<h3 id="viewing-current-resource-limits-and-requests">Viewing Current
Resource Limits and Requests</h3>
<p>To see the current resource limits and requests for a pod, we can use
this command:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get pod <span class="op">&lt;</span>pod-name<span class="op">&gt;</span> -o=jsonpath=<span class="st">&#39;{.spec.containers[*].resources}&#39;</span></span></code></pre></div>
<p>This command shows the resource details of all containers in the pod
we choose.</p>
<h3 id="setting-resource-limits-and-requests">Setting Resource Limits
and Requests</h3>
<p>When we create a new pod or deployment, we can set resource limits
and requests in the YAML file. Here is a simple example:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-pod</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-container</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;64Mi&quot;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;250m&quot;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">limits</span><span class="kw">:</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;128Mi&quot;</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;500m&quot;</span></span></code></pre></div>
<p>We can apply this configuration using:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> pod.yaml</span></code></pre></div>
<h3 id="updating-resource-limits-and-requests">Updating Resource Limits
and Requests</h3>
<p>If we want to change the resource limits and requests of a running
pod, we usually need to edit the deployment. We can do this with the
command:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> edit deployment <span class="op">&lt;</span>deployment-name<span class="op">&gt;</span></span></code></pre></div>
<p>Then we find the <code>resources</code> section for the container we
want to edit. We can update the <code>requests</code> and
<code>limits</code>. After that, we save and exit the editor. Kubernetes
will take care of the rolling update for us.</p>
<h3 id="scaling-deployments-with-resource-considerations">Scaling
Deployments with Resource Considerations</h3>
<p>When we scale a deployment, we can also add the
<code>--requests</code> and <code>--limits</code> flags:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> scale deployment <span class="op">&lt;</span>deployment-name<span class="op">&gt;</span> --replicas=<span class="op">&lt;</span>number<span class="op">&gt;</span> --requests=cpu=250m,memory=64Mi <span class="at">--limits</span><span class="op">=</span>cpu=500m,memory=128Mi</span></code></pre></div>
<h3 id="checking-resource-usage">Checking Resource Usage</h3>
<p>To check the resource usage of our pods, we can use:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> top pods</span></code></pre></div>
<p>This command shows the current CPU and memory usage for each pod.</p>
<p>If we want more detailed management and insights, we can use the
Kubernetes Metrics Server. We can install and set it up to get metrics
for horizontal pod autoscaling.</p>
<p>Using <code>kubectl</code> lets us manage resource limits and
requests easily. This helps our applications work well within the
resource limits of our Kubernetes cluster. For more details on managing
Kubernetes resources, we can check <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-monitor-my-kubernetes-cluster.html">this
article on monitoring your Kubernetes cluster</a>.</p>
<h2
id="what-happens-when-resource-limits-are-exceeded-in-kubernetes">What
Happens When Resource Limits Are Exceeded in Kubernetes?</h2>
<p>In Kubernetes, we set resource limits to control how much CPU and
memory a container can use. When these limits are too high, Kubernetes
steps in to manage them. This can cause different things to happen
depending on the type of resource.</p>
<ol type="1">
<li><strong>CPU Limits</strong>:
<ul>
<li>When a container tries to use more CPU than its limit, Kubernetes
slows it down. The container keeps running but gets less CPU time. This
can make it slower.</li>
<li>The slowing down does not stop the container. It just limits how
much CPU it can use.</li>
</ul></li>
<li><strong>Memory Limits</strong>:
<ul>
<li>If a container goes over its memory limit, Kubernetes will kill the
container. This is called an “OOMKill,” which means Out Of Memory
Kill.</li>
<li>The container might restart based on the restart rules we set. If it
keeps going over the limit, it can get stuck in a loop of crashing.</li>
</ul></li>
<li><strong>Pod Behavior</strong>:
<ul>
<li>When we run out of memory, Kubernetes tries to free up resources by
removing containers based on their quality-of-service (QoS)
classes.</li>
<li>Pods with lower QoS classes like BestEffort and Burstable are
usually the first to be removed.</li>
</ul></li>
<li><strong>Monitoring and Alerts</strong>:
<ul>
<li>We need to watch resource use with tools like Prometheus and
Grafana. This helps us see when we are close to hitting limits.</li>
<li>Setting up alerts helps us take action before we reach resource
limits.</li>
</ul></li>
<li><strong>Best Practices</strong>:
<ul>
<li>We should set resource requests and limits based on what we have
seen from past workloads. This keeps containers from going over their
limits without reason.</li>
<li>We need to check and change resource limits regularly based on how
our application behaves and performs.</li>
</ul></li>
</ol>
<p>Here is an example of setting resource limits in a Kubernetes YAML
file:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-pod</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> example-container</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> example-image</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;128Mi&quot;</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;500m&quot;</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">limits</span><span class="kw">:</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;256Mi&quot;</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;1&quot;</span></span></code></pre></div>
<p>When we understand and manage resource limits in Kubernetes well, we
can keep our applications running smoothly. This also helps us to avoid
problems that come with going over resource limits. For more information
about Kubernetes resource management, we can look into related topics
like <a
href="https://bestonlinetutorial.com/kubernetes/what-are-resource-requests-and-limits-in-kubernetes.html">resource
requests and limits</a>.</p>
<h2 id="how-do-resource-requests-and-limits-impact-pod-scheduling">How
Do Resource Requests and Limits Impact Pod Scheduling?</h2>
<p>Resource requests and limits are very important for scheduling pods
in Kubernetes. They help the Kubernetes scheduler decide where to put
pods based on what resources are available.</p>
<ol type="1">
<li><p><strong>Resource Requests</strong>: This shows the least amount
of CPU and memory that a pod needs. When we schedule a pod, the
scheduler checks if a node has enough resources to meet these
requests.</p></li>
<li><p><strong>Resource Limits</strong>: This tells the most CPU and
memory that a pod can use. If a pod uses more than its limits,
Kubernetes might reduce its resource use or stop the pod.</p></li>
</ol>
<p><strong>Pod Scheduling Impact</strong>: - <strong>Node
Selection</strong>: The scheduler looks at the resource requests of all
pods. It finds nodes that have enough capacity. Pods with higher
requests might get scheduled on nodes with more free resources. -
<strong>Overcommitment</strong>: If we set resource requests too low, it
can cause overcommitting. This may lead to performance problems if many
pods try to use the same resources. - <strong>Quality of Service
(QoS)</strong>: Kubernetes sorts pods into three QoS levels based on
their resource requests and limits: - <strong>Guaranteed</strong>: Pods
that have the same requests and limits. - <strong>Burstable</strong>:
Pods that have requests that are less than limits. -
<strong>Best-Effort</strong>: Pods that do not have any requests or
limits.</p>
<p>This sorting affects how we prioritize scheduling and eviction
rules.</p>
<p><strong>Example</strong>:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> mypod</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> mycontainer</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myimage</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;64Mi&quot;</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;250m&quot;</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">limits</span><span class="kw">:</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;128Mi&quot;</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;500m&quot;</span></span></code></pre></div>
<p>This setup makes sure that the scheduler can place <code>mypod</code>
correctly based on the requested and limited resources. It helps in
better resource use in the Kubernetes cluster.</p>
<p>By managing resource requests and limits well, we can support good
pod scheduling. This helps to avoid resource conflicts and keeps
application performance steady in our Kubernetes environment.</p>
<h2 id="can-i-update-resource-limits-and-requests-for-running-pods">Can
I Update Resource Limits and Requests for Running Pods?</h2>
<p>Yes, we can update resource limits and requests for running Pods in
Kubernetes. But we need to think carefully. Changes will not work until
we restart the Pod. Kubernetes lets us update resource requests and
limits in the Pod’s settings. We can do this with <code>kubectl</code>
or by changing the YAML file.</p>
<p>To update the resource limits and requests, we can use this
command:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> edit pod <span class="op">&lt;</span>pod-name<span class="op">&gt;</span></span></code></pre></div>
<p>This command opens the Pod’s settings in our default editor. We
should find the <code>resources</code> part and change the
<code>requests</code> and <code>limits</code> as we need:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> &lt;container-name&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;512Mi&quot;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;500m&quot;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">limits</span><span class="kw">:</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;1Gi&quot;</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;1&quot;</span></span></code></pre></div>
<p>After we save the changes, Kubernetes will do a rolling update if the
Pod is managed by something like a Deployment. If it is a standalone
Pod, we may need to delete the old Pod. Then Kubernetes will make a new
one with the updated settings.</p>
<p>If we are using a Deployment, we can also change the resource
requests and limits by running:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> set resources deployment <span class="op">&lt;</span>deployment-name<span class="op">&gt;</span> --limits=cpu=1,memory=1Gi <span class="at">--requests</span><span class="op">=</span>cpu=500m,memory=512Mi</span></code></pre></div>
<p>This command changes the Deployment we choose and will start a
rollout of the Pods with the new resource settings.</p>
<p>We should remember that if we increase resource limits, it may cause
problems if the nodes do not have enough capacity. If we decrease them,
it may lead to throttling or eviction of the Pods if they go over the
new limits. So, we need to watch our applications after making these
changes to make sure they work well.</p>
<p>For more info about managing resources in Kubernetes, we can check <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-deployments-and-how-do-i-use-them.html">this
article on Kubernetes deployments</a>.</p>
<h2
id="what-are-real-life-use-cases-for-managing-kubernetes-resource-limits">What
Are Real Life Use Cases for Managing Kubernetes Resource Limits?</h2>
<p>Managing resource limits and requests in Kubernetes is very
important. It helps applications run well and stay reliable. Here are
some real-life examples showing why resource management in Kubernetes
matters:</p>
<ol type="1">
<li><p><strong>Multi-Tenant Environments</strong>: In places where many
teams use the same cluster to run applications, we need to set resource
limits. This way, one application cannot take all the resources. For
example, limits can stop a heavy application from slowing down other
apps on the same system.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> multi-tenant-app</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> app-container</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-app-image</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;128Mi&quot;</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;500m&quot;</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">limits</span><span class="kw">:</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;256Mi&quot;</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;1&quot;</span></span></code></pre></div></li>
<li><p><strong>Development and Testing</strong>: We can set resource
requests for developers. This helps their apps have the needed resources
during testing. It also limits the use of resources to stop overuse of
the cluster. This keeps testing stable and helps find performance
problems early.</p></li>
<li><p><strong>Performance Stabilization</strong>: Applications may not
work well without the right resource limits. This can cause slowdowns or
crashes. By setting good limits, we can keep application performance
steady even when loads change. This helps the application stay
responsive.</p></li>
<li><p><strong>Cost Management</strong>: In cloud environments, managing
resource requests and limits helps control costs. It stops us from using
too many resources. For example, if a pod’s memory limit is too high, it
may cause extra charges. By optimizing requests, we can manage our cloud
spending better.</p></li>
<li><p><strong>Quality of Service (QoS)</strong>: Kubernetes sorts pods
into different QoS levels based on their resource requests and limits.
For important applications that need guaranteed resources, setting the
right limits makes sure they get what they need during busy times. This
improves reliability.</p></li>
<li><p><strong>Autoscaling</strong>: When we use Horizontal Pod
Autoscaler (HPA), resource limits and requests are very important for
scaling applications. Good limits help HPA make smart choices about
scaling up or down based on how much load there is.</p></li>
<li><p><strong>Resource Monitoring and Alerts</strong>: By setting
resource limits, we can monitor how much resources we are using. This
lets teams set up alerts. This way, if we run out of resources, teams
can act quickly. They can scale or optimize applications as
needed.</p></li>
</ol>
<p>For more information on Kubernetes resource management, check out
this article on <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-optimize-resource-usage-with-vertical-pod-autoscaler-vpa.html">how
to optimize resource usage with Vertical Pod Autoscaler (VPA)</a>.</p>
<h2 id="how-do-we-monitor-resource-usage-in-kubernetes">How Do We
Monitor Resource Usage in Kubernetes?</h2>
<p>Monitoring resource usage in Kubernetes is very important for keeping
our applications running well. We can check the CPU and memory usage of
our pods and nodes using different tools and methods.</p>
<h3 id="using-kubectl-top">Using <code>kubectl top</code></h3>
<p>The <code>kubectl top</code> command lets us quickly see resource
usage for nodes and pods.</p>
<p>To check node resource usage, we run:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> top nodes</span></code></pre></div>
<p>To check pod resource usage, we run:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> top pods <span class="at">--all-namespaces</span></span></code></pre></div>
<h3 id="metrics-server">Metrics Server</h3>
<p>Metrics Server is a tool that collects resource usage data across the
cluster. To set it up, we can use this command:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml</span></code></pre></div>
<p>After we set it up, we can use <code>kubectl top</code> again to see
the metrics.</p>
<h3 id="prometheus-and-grafana">Prometheus and Grafana</h3>
<p>For better monitoring, we can use Prometheus and Grafana. Prometheus
gathers metrics from different endpoints. Grafana helps us see those
metrics in a nice way.</p>
<ol type="1">
<li><strong>Install Prometheus</strong> with Helm:</li>
</ol>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> repo add prometheus-community https://prometheus-community.github.io/helm-charts</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> repo update</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> install prometheus prometheus-community/prometheus</span></code></pre></div>
<ol start="2" type="1">
<li><strong>Install Grafana</strong> with Helm:</li>
</ol>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">helm</span> install grafana grafana/grafana</span></code></pre></div>
<ol start="3" type="1">
<li>We can access Grafana by port-forwarding:</li>
</ol>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> port-forward service/grafana 3000:80</span></code></pre></div>
<ol start="4" type="1">
<li>Then, we go to <code>http://localhost:3000</code> and log in with
the default username and password
(<code>admin</code>/<code>prom-operator</code>).</li>
</ol>
<h3 id="resource-quotas-and-limits">Resource Quotas and Limits</h3>
<p>Setting resource quotas and limits is important. It helps to make
sure our applications do not use too many resources. Here is an example
of a resource quota YAML:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ResourceQuota</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-resource-quota</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">hard</span><span class="kw">:</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">requests.cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;2&quot;</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">requests.memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;4Gi&quot;</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">limits.cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;4&quot;</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">limits.memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;8Gi&quot;</span></span></code></pre></div>
<h3 id="monitoring-tools">Monitoring Tools</h3>
<p>There are many other tools that can help us monitor resource usage in
Kubernetes:</p>
<ul>
<li><strong>Kube-state-metrics</strong>: This shows cluster state
metrics.</li>
<li><strong>cAdvisor</strong>: This gives us container-level resource
usage data.</li>
<li><strong>Kubernetes Dashboard</strong>: This is a web UI for managing
and monitoring Kubernetes clusters.</li>
</ul>
<p>By using these methods and tools, we can monitor resource usage in
our Kubernetes cluster. This helps us keep our applications running
well. For more details on Kubernetes, we can check out <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-monitor-my-kubernetes-cluster.html">how
to monitor my Kubernetes cluster</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-are-resource-requests-and-limits-in-kubernetes-1">1. What
are resource requests and limits in Kubernetes?</h3>
<p>Resource requests and limits in Kubernetes help us manage how much
resources our containers can use. A <strong>resource request</strong>
tells us the least amount of CPU and memory a container needs. On the
other hand, <strong>resource limits</strong> show us the most resources
a container can use. By setting these values, Kubernetes helps us use
resources well and keeps our applications stable in a cluster. For more
details on Kubernetes architecture, we can visit our <a
href="https://bestonlinetutorial.com/kubernetes/what-are-the-key-components-of-a-kubernetes-cluster.html">Kubernetes
key components article</a>.</p>
<h3
id="how-do-i-set-resource-limits-and-requests-in-a-kubernetes-yaml-file">2.
How do I set resource limits and requests in a Kubernetes YAML
file?</h3>
<p>To set resource limits and requests in a Kubernetes YAML file, we can
define them under the <code>resources</code> field in our container
settings. Here’s a simple example:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Pod</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-pod</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-container</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-image</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">resources</span><span class="kw">:</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">requests</span><span class="kw">:</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;64Mi&quot;</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;250m&quot;</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">limits</span><span class="kw">:</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">memory</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;128Mi&quot;</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">cpu</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;500m&quot;</span></span></code></pre></div>
<p>This setup helps Kubernetes give the right resources to our
container. For more on YAML settings, we can check out our article on <a
href="https://bestonlinetutorial.com/kubernetes/what-are-kubernetes-deployments-and-how-do-i-use-them.html">Kubernetes
deployments</a>.</p>
<h3 id="what-happens-if-resource-limits-are-exceeded-in-kubernetes">3.
What happens if resource limits are exceeded in Kubernetes?</h3>
<p>When we exceed resource limits in Kubernetes, the container may get
slowed down or stopped. If a container uses more CPU than its limit,
Kubernetes will limit its usage, which can affect how it performs. If it
goes over its memory limit, Kubernetes might kill the container and
restart it. This could cause some downtime for our application. We can
learn more about managing resource limits in our guide on <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-monitor-my-kubernetes-cluster.html">Kubernetes
resource management</a>.</p>
<h3 id="how-do-resource-requests-and-limits-impact-pod-scheduling-1">4.
How do resource requests and limits impact pod scheduling?</h3>
<p>Resource requests and limits play a big role in how Kubernetes
schedules pods. The Kubernetes scheduler uses requests to see which node
has enough resources for the pod. If a node cannot meet the requested
resources, Kubernetes will not place the pod there. This way, we can
make sure pods go to the right places, which helps optimize resource use
in the cluster. For more insights, we can read our article on <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-scale-applications-using-kubernetes-deployments.html">Kubernetes
scaling applications</a>.</p>
<h3 id="can-i-update-resource-limits-and-requests-for-running-pods-1">5.
Can I update resource limits and requests for running pods?</h3>
<p>Yes, we can update resource limits and requests for running pods in
Kubernetes. But we need to edit the deployment or stateful set for this.
The changes will only work when the pod restarts. We can use the
<code>kubectl edit deployment</code> command to change things easily.
However, not all resource updates may come into effect right away. For
more information, we can see our guide on <a
href="https://bestonlinetutorial.com/kubernetes/how-do-i-troubleshoot-issues-in-my-kubernetes-deployments.html">Kubernetes
troubleshooting</a>.</p>
<p>By looking at these frequently asked questions, we can understand
better how to manage resource limits and requests in Kubernetes. This
helps</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            