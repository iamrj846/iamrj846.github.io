
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            
            <title>[Dynamic Programming] Longest Arithmetic Subsequence - Medium</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "BestOnlineTutorial",
      "url": "https://www.bestonlinetutorial.com/"
    }
    </script>

<!-- Common CSS & Icons -->
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
<link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
<link rel="stylesheet" href="/assets/css/post.css">
            <meta name="description" content="Discover how to solve the Longest Arithmetic Subsequence problem using dynamic programming in this informative Medium blog!">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">[Dynamic Programming] Longest Arithmetic Subsequence - Medium</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>The Longest Arithmetic Subsequence (LAS) problem is a well-known
challenge in dynamic programming. It focuses on finding the longest
subsequence in an array where the difference between the numbers is the
same. We can solve this problem well using dynamic programming. This
method helps us build solutions step by step and use results we already
have to make things faster. By keeping a count of differences and their
lengths, we can find the longest arithmetic subsequence quickly.</p>
<p>In this article, we will look at the Longest Arithmetic Subsequence
problem in detail. We will explain what it is and why it matters. We
will also talk about what arithmetic subsequences are. We will show how
to solve this problem using dynamic programming. We will give examples
in Java, Python, and C++. Additionally, we will share tips on how to
make our solution better. We will analyze time and space use. We will
point out common mistakes and answer some frequently asked questions
about the Longest Arithmetic Subsequence.</p>
<ul>
<li>Dynamic Programming Longest Arithmetic Subsequence Problem
Overview</li>
<li>Understanding the Concept of Arithmetic Subsequence</li>
<li>Dynamic Programming Approach to Longest Arithmetic Subsequence</li>
<li>Java Implementation of Longest Arithmetic Subsequence</li>
<li>Python Implementation of Longest Arithmetic Subsequence</li>
<li>C++ Implementation of Longest Arithmetic Subsequence</li>
<li>Optimizing the Dynamic Programming Solution</li>
<li>Time Complexity and Space Complexity Analysis</li>
<li>Common Pitfalls in Longest Arithmetic Subsequence</li>
<li>Frequently Asked Questions</li>
</ul>
<h2
id="understanding-the-concept-of-arithmetic-subsequence">Understanding
the Concept of Arithmetic Subsequence</h2>
<p>An arithmetic subsequence is a list of numbers where the difference
between each number and the next one is the same. This rule helps us to
find parts of a larger array. We can take out sequences that keep this
steady difference.</p>
<h3 id="key-properties">Key Properties:</h3>
<ul>
<li><p><strong>Common Difference</strong>: For a subsequence to be
arithmetic, we need a constant ( d ) such that:</p>
<p>[ a[j] - a[i] = d j &gt; i ]</p></li>
<li><p><strong>Subsequence</strong>: The numbers in the arithmetic
subsequence do not have to be next to each other in the original array.
But we must keep their order.</p></li>
</ul>
<h3 id="example">Example:</h3>
<p>If we look at the array <code>[3, 6, 9, 12, 15]</code>, the whole
array is an arithmetic subsequence with a common difference of ( 3
).</p>
<p>Another example is from the array <code>[5, 1, 3, 7, 8]</code>. Here,
the subsequence <code>[5, 3, 1]</code> is arithmetic with a common
difference of ( -2 ).</p>
<h3 id="importance-in-dynamic-programming">Importance in Dynamic
Programming:</h3>
<p>Finding the longest arithmetic subsequence is very important in many
areas. This includes data analysis, finding patterns, and solving
optimization problems. We can use dynamic programming methods to solve
this problem. This way, we can break the problem into smaller parts and
build the solution step by step.</p>
<p>By knowing about arithmetic subsequences, we can create algorithms to
find the longest arithmetic subsequence in a given array. We can use
ideas like common differences and dynamic programming methods. If you
want to learn more about related topics, you can check out the <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-increasing-subsequence-medium.html">Dynamic
Programming Longest Increasing Subsequence</a> and the <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-common-subsequence-medium.html">Dynamic
Programming Longest Common Subsequence</a>.</p>
<h2
id="dynamic-programming-approach-to-longest-arithmetic-subsequence">Dynamic
Programming Approach to Longest Arithmetic Subsequence</h2>
<p>The Longest Arithmetic Subsequence (LAS) problem is about finding the
longest subsequence in an array where the difference between the numbers
is the same. We can solve this problem well using dynamic programming.
We will keep a table that shows the length of the longest arithmetic
subsequence that ends at each index.</p>
<h3 id="steps-to-implement-the-dynamic-programming-solution">Steps to
Implement the Dynamic Programming Solution:</h3>
<ol type="1">
<li><p><strong>Define the DP Array</strong>: We start by making an array
<code>dp</code>. In this array, <code>dp[i]</code> shows the length of
the longest arithmetic subsequence that ends at index
<code>i</code>.</p></li>
<li><p><strong>Initialization</strong>: We set all values in
<code>dp</code> to 1. This is because the shortest length of any
subsequence is 1. That means it includes the element by itself.</p></li>
<li><p><strong>Iterate Over Pairs</strong>: We use two loops:</p>
<ul>
<li>The first loop goes through each element <code>i</code> from 0 to
n-1.</li>
<li>The second loop goes through each earlier element <code>j</code>
from 0 to i-1.</li>
</ul></li>
<li><p><strong>Check for Common Differences</strong>: For each pair
<code>(i, j)</code>, we find the common difference
<code>d = arr[i] - arr[j]</code>. We will use a hash map to keep track
of the longest subsequence lengths for each difference.</p></li>
<li><p><strong>Update the DP Table</strong>: If we have already seen the
difference <code>d</code>, we update <code>dp[i]</code> to be the bigger
value between its current value and <code>dp[j] + 1</code>.</p></li>
</ol>
<h3 id="time-complexity">Time Complexity:</h3>
<p>The time complexity for this approach is O(n^2). This is because of
the two nested loops.</p>
<h3 id="space-complexity">Space Complexity:</h3>
<p>The space complexity is O(n). This is for keeping the <code>dp</code>
array.</p>
<h3 id="example-code">Example Code:</h3>
<p>Here is a Python code that shows the Dynamic Programming way to find
the Longest Arithmetic Subsequence:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> longest_arith_seq_length(arr):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> arr:</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(arr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    dp <span class="op">=</span> [{} <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(n)]</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    max_length <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(i):</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>            diff <span class="op">=</span> arr[i] <span class="op">-</span> arr[j]</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> diff <span class="kw">in</span> dp[j]:</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                dp[i][diff] <span class="op">=</span> dp[j][diff] <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                dp[i][diff] <span class="op">=</span> <span class="dv">2</span>  <span class="co"># Starting a new sequence</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>            max_length <span class="op">=</span> <span class="bu">max</span>(max_length, dp[i][diff])</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max_length</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">9</span>, <span class="dv">12</span>]</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(longest_arith_seq_length(arr))  <span class="co"># Output: 4</span></span></code></pre></div>
<p>This code finds the length of the longest arithmetic subsequence
using dynamic programming. Each element’s common differences are tracked
using a dictionary. This allows us to update and look up values
quickly.</p>
<p>For more resources on dynamic programming techniques, we can check
out articles like <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-increasing-subsequence-medium.html">Dynamic
Programming - Longest Increasing Subsequence</a> and <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-common-subsequence-medium.html">Dynamic
Programming - Longest Common Subsequence</a>.</p>
<h2 id="java-implementation-of-longest-arithmetic-subsequence">Java
Implementation of Longest Arithmetic Subsequence</h2>
<p>We can implement the Longest Arithmetic Subsequence (LAS) in Java
using a dynamic programming method. An arithmetic subsequence is a
series of numbers where the difference between each number is the same.
Our goal is to find the longest such series in a given array.</p>
<h3 id="approach">Approach</h3>
<ol type="1">
<li><strong>Data Structures</strong>:
<ul>
<li>We use a HashMap to keep the length of the longest arithmetic
subsequence that ends at each index with a specific common
difference.</li>
</ul></li>
<li><strong>Iterate through the array</strong>:
<ul>
<li>For every pair of elements, we calculate the common difference and
update the HashMap.</li>
</ul></li>
<li><strong>Update the longest length</strong>:
<ul>
<li>We track the biggest length found during our checks.</li>
</ul></li>
</ol>
<h3 id="code-implementation">Code Implementation</h3>
<p>Here is the Java code for Longest Arithmetic Subsequence:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">java</span><span class="op">.</span><span class="im">util</span><span class="op">.</span><span class="im">HashMap</span><span class="op">;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> LongestArithmeticSubsequence <span class="op">{</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">int</span> <span class="fu">longestArithSeqLength</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> nums<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>nums<span class="op">.</span><span class="fu">length</span> <span class="op">&lt;=</span> <span class="dv">2</span><span class="op">)</span> <span class="cf">return</span> nums<span class="op">.</span><span class="fu">length</span><span class="op">;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">HashMap</span><span class="op">&lt;</span><span class="bu">Integer</span><span class="op">,</span> <span class="bu">Integer</span><span class="op">&gt;[]</span> dp <span class="op">=</span> <span class="kw">new</span> <span class="bu">HashMap</span><span class="op">[</span>nums<span class="op">.</span><span class="fu">length</span><span class="op">];</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> nums<span class="op">.</span><span class="fu">length</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>            dp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="kw">new</span> <span class="bu">HashMap</span><span class="op">&lt;&gt;();</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> maxLength <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> nums<span class="op">.</span><span class="fu">length</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> i<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> diff <span class="op">=</span> nums<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> nums<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>                dp<span class="op">[</span>i<span class="op">].</span><span class="fu">put</span><span class="op">(</span>diff<span class="op">,</span> dp<span class="op">[</span>j<span class="op">].</span><span class="fu">getOrDefault</span><span class="op">(</span>diff<span class="op">,</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>                maxLength <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>maxLength<span class="op">,</span> dp<span class="op">[</span>i<span class="op">].</span><span class="fu">get</span><span class="op">(</span>diff<span class="op">));</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> maxLength<span class="op">;</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span><span class="op">[]</span> args<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span><span class="op">[]</span> nums <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">12</span><span class="op">};</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Length of Longest Arithmetic Subsequence: &quot;</span> <span class="op">+</span> <span class="fu">longestArithSeqLength</span><span class="op">(</span>nums<span class="op">));</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="explanation-of-the-code">Explanation of the Code</h3>
<ul>
<li><strong>Initialization</strong>: We create an array of HashMaps.
Each HashMap at index <code>i</code> keeps the length of the longest
arithmetic subsequence that ends at <code>i</code> for each
difference.</li>
<li><strong>Nested Loops</strong>: The outer loop goes through each
element. The inner loop checks all previous elements to find the common
difference.</li>
<li><strong>HashMap Operations</strong>: For each difference, we update
the length of the subsequence and keep the longest length we found.</li>
<li><strong>Output</strong>: The <code>main</code> method shows how to
use the function with a sample input.</li>
</ul>
<p>This Java code calculates the length of the longest arithmetic
subsequence using dynamic programming. It works well for larger arrays.
For more dynamic programming problems, you can check out articles on <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-common-subsequence-medium.html">Dynamic
Programming: Longest Common Subsequence</a> and <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-increasing-subsequence-medium.html">Dynamic
Programming: Longest Increasing Subsequence</a>.</p>
<h2 id="python-implementation-of-longest-arithmetic-subsequence">Python
Implementation of Longest Arithmetic Subsequence</h2>
<p>To make the Longest Arithmetic Subsequence in Python, we can use a
dynamic programming method. We will keep a dictionary to save the length
of the longest arithmetic subsequence that ends at each index with a
certain common difference.</p>
<p>Here is a simple Python code:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> longest_arith_seq_length(A):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> A:</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(A)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    dp <span class="op">=</span> [{} <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(n)]</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    max_length <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n):</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(i):</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>            difference <span class="op">=</span> A[i] <span class="op">-</span> A[j]</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> difference <span class="kw">in</span> dp[j]:</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>                dp[i][difference] <span class="op">=</span> dp[j][difference] <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>                dp[i][difference] <span class="op">=</span> <span class="dv">2</span>  <span class="co"># Start new sequence with at least two numbers</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>            max_length <span class="op">=</span> <span class="bu">max</span>(max_length, dp[i][difference])</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max_length</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">9</span>, <span class="dv">12</span>]</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Length of Longest Arithmetic Subsequence:&quot;</span>, longest_arith_seq_length(A))  <span class="co"># Output: 4</span></span></code></pre></div>
<h3 id="explanation">Explanation:</h3>
<ul>
<li><strong>Input:</strong> The function takes a list <code>A</code> of
numbers.</li>
<li><strong>Dynamic Programming Table:</strong> <code>dp[i]</code> is a
dictionary. Each key is the difference and the value is the length of
the longest arithmetic subsequence that ends at index <code>i</code>
with that difference.</li>
<li><strong>Nested Loop:</strong> For each pair of indices
<code>(i, j)</code> where <code>i &gt; j</code>, we find the difference
<code>A[i] - A[j]</code>. If we have seen this difference at index
<code>j</code>, we add one to the count from
<code>dp[j][difference]</code>. If not, we set it to 2 (the pair
itself).</li>
<li><strong>Result:</strong> We keep track of the maximum length of any
arithmetic subsequence and return it.</li>
</ul>
<p>This method quickly finds the length of the longest arithmetic
subsequence in O(n^2) time and O(n) space.</p>
<p>For more about dynamic programming, you can look at similar articles
like <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-increasing-subsequence-medium.html">Dynamic
Programming - Longest Increasing Subsequence</a> or <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-common-subsequence-medium.html">Dynamic
Programming - Longest Common Subsequence</a>.</p>
<h2 id="c-implementation-of-longest-arithmetic-subsequence">C++
Implementation of Longest Arithmetic Subsequence</h2>
<p>To solve the Longest Arithmetic Subsequence (LAS) problem with C++,
we will use a simple dynamic programming method. Our goal is to find the
longest subsequence in a given array where the difference between each
pair of numbers is the same.</p>
<p>The main idea is to use a hash map or unordered map. This will help
us keep track of the longest arithmetic subsequence length for each
difference we find.</p>
<p>Here’s the C++ code:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;unordered_map&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> std<span class="op">;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> longestArithmeticSubsequence<span class="op">(</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;&amp;</span> nums<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>nums<span class="op">.</span>size<span class="op">()</span> <span class="op">&lt;</span> <span class="dv">2</span><span class="op">)</span> <span class="cf">return</span> nums<span class="op">.</span>size<span class="op">();</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> maxLength <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// The shortest arithmetic subsequence has length 2</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    unordered_map<span class="op">&lt;</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">&gt;</span> dp<span class="op">[</span>nums<span class="op">.</span>size<span class="op">()];</span> <span class="co">// dp[i] saves the longest subsequence length for index i with a certain difference</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> nums<span class="op">.</span>size<span class="op">();</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> i<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> diff <span class="op">=</span> nums<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> nums<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>            dp<span class="op">[</span>i<span class="op">][</span>diff<span class="op">]</span> <span class="op">=</span> dp<span class="op">[</span>j<span class="op">][</span>diff<span class="op">]</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// We add to the sequence</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>            maxLength <span class="op">=</span> max<span class="op">(</span>maxLength<span class="op">,</span> dp<span class="op">[</span>i<span class="op">][</span>diff<span class="op">]</span> <span class="op">+</span> <span class="dv">1</span><span class="op">);</span> <span class="co">// +1 to count nums[i]</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> maxLength<span class="op">;</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> nums <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">12</span><span class="op">};</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    cout <span class="op">&lt;&lt;</span> <span class="st">&quot;Length of Longest Arithmetic Subsequence: &quot;</span> <span class="op">&lt;&lt;</span> longestArithmeticSubsequence<span class="op">(</span>nums<span class="op">)</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="explanation-of-the-code-1">Explanation of the Code:</h3>
<ul>
<li>The function <code>longestArithmeticSubsequence</code> takes a list
of integers as input.</li>
<li>We create an array of unordered maps called <code>dp</code>. This
keeps track of the longest subsequence length for each difference at
each index.</li>
<li>Two loops go through the array. They calculate the difference
between pairs of numbers.</li>
<li>We update <code>dp[i][diff]</code> to show the longest subsequence
length found for that difference.</li>
<li>Finally, we return the maximum length found.</li>
</ul>
<h3 id="example-usage">Example Usage:</h3>
<p>For the input array <code>{3, 6, 9, 12}</code>, the output will be
<code>4</code>. This is because all numbers form an arithmetic sequence
with a common difference of <code>3</code>.</p>
<p>This code finds the longest arithmetic subsequence in an efficient
way. The time complexity is O(n^2) and the space complexity is O(n). If
we want to learn more about dynamic programming problems, we can look at
<a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-common-subsequence-medium.html">Dynamic
Programming - Longest Common Subsequence</a>.</p>
<h2 id="optimizing-the-dynamic-programming-solution">Optimizing the
Dynamic Programming Solution</h2>
<p>We can make the dynamic programming solution better for finding the
Longest Arithmetic Subsequence. We can change the space needed from
O(n^2) to O(n). We do this by using a hash map to keep track of the
lengths of arithmetic subsequences based on the common difference.</p>
<h3 id="steps-for-optimization">Steps for Optimization:</h3>
<ol type="1">
<li><p><strong>Use a Hash Map</strong>: We will use a hash map instead
of a 2D array. This hash map will store the length of the longest
arithmetic subsequence that ends at each index with a certain common
difference.</p></li>
<li><p><strong>Iterate Through Pairs</strong>: For every pair of indices
(i, j), we will calculate the common difference
<code>d = arr[j] - arr[i]</code>. Then we update the length of the
arithmetic subsequence in the hash map for the pair (j, d).</p></li>
<li><p><strong>Update Length</strong>: If we find a subsequence with the
same common difference, we will increase its length. If not, we will
start it.</p></li>
</ol>
<h3 id="implementation">Implementation:</h3>
<p>Here is a Java code that shows the optimized dynamic programming
solution:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">java</span><span class="op">.</span><span class="im">util</span><span class="op">.</span><span class="im">HashMap</span><span class="op">;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> LongestArithmeticSubsequence <span class="op">{</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">longestArithSeqLength</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> arr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">.</span><span class="fu">length</span> <span class="op">&lt;</span> <span class="dv">2</span><span class="op">)</span> <span class="cf">return</span> arr<span class="op">.</span><span class="fu">length</span><span class="op">;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> maxLength <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">HashMap</span><span class="op">&lt;</span><span class="bu">Integer</span><span class="op">,</span> <span class="bu">HashMap</span><span class="op">&lt;</span><span class="bu">Integer</span><span class="op">,</span> <span class="bu">Integer</span><span class="op">&gt;&gt;</span> dp <span class="op">=</span> <span class="kw">new</span> <span class="bu">HashMap</span><span class="op">&lt;&gt;();</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> arr<span class="op">.</span><span class="fu">length</span><span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> j<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> d <span class="op">=</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">-</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>                <span class="co">// Update the subsequence length for the pair (j, d)</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                dp<span class="op">.</span><span class="fu">putIfAbsent</span><span class="op">(</span>j<span class="op">,</span> <span class="kw">new</span> <span class="bu">HashMap</span><span class="op">&lt;&gt;());</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> length <span class="op">=</span> dp<span class="op">.</span><span class="fu">get</span><span class="op">(</span>i<span class="op">).</span><span class="fu">getOrDefault</span><span class="op">(</span>d<span class="op">,</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>                dp<span class="op">.</span><span class="fu">get</span><span class="op">(</span>j<span class="op">).</span><span class="fu">put</span><span class="op">(</span>d<span class="op">,</span> length<span class="op">);</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>                maxLength <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>maxLength<span class="op">,</span> length<span class="op">);</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> maxLength<span class="op">;</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="python-implementation">Python Implementation:</h3>
<p>We can also do it in Python like this:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> defaultdict</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> longest_arith_seq_length(arr):</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(arr) <span class="op">&lt;</span> <span class="dv">2</span>:</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">len</span>(arr)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    dp <span class="op">=</span> defaultdict(<span class="kw">lambda</span>: defaultdict(<span class="bu">int</span>))</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    max_length <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(arr)):</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(j):</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>            d <span class="op">=</span> arr[j] <span class="op">-</span> arr[i]</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>            dp[j][d] <span class="op">=</span> dp[i][d] <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>            max_length <span class="op">=</span> <span class="bu">max</span>(max_length, dp[j][d] <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max_length</span></code></pre></div>
<h3 id="c-implementation">C++ Implementation:</h3>
<p>Here is the C++ version of the optimized method:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;unordered_map&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> std<span class="op">;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> longestArithSeqLength<span class="op">(</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;&amp;</span> arr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr<span class="op">.</span>size<span class="op">()</span> <span class="op">&lt;</span> <span class="dv">2</span><span class="op">)</span> <span class="cf">return</span> arr<span class="op">.</span>size<span class="op">();</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    unordered_map<span class="op">&lt;</span><span class="dt">int</span><span class="op">,</span> unordered_map<span class="op">&lt;</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">&gt;&gt;</span> dp<span class="op">;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> maxLength <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> arr<span class="op">.</span>size<span class="op">();</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> j<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> d <span class="op">=</span> arr<span class="op">[</span>j<span class="op">]</span> <span class="op">-</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>            dp<span class="op">[</span>j<span class="op">][</span>d<span class="op">]</span> <span class="op">=</span> dp<span class="op">[</span>i<span class="op">][</span>d<span class="op">]</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>            maxLength <span class="op">=</span> max<span class="op">(</span>maxLength<span class="op">,</span> dp<span class="op">[</span>j<span class="op">][</span>d<span class="op">]</span> <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> maxLength<span class="op">;</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="benefits-of-optimization">Benefits of Optimization:</h3>
<ul>
<li><strong>Reduced Space Complexity</strong>: Now, the space needed is
O(n) instead of O(n^2) like the old dynamic programming way.</li>
<li><strong>Faster Execution</strong>: The hash maps help with faster
updates and queries. So, it runs better on bigger inputs.</li>
</ul>
<p>This method finds the longest arithmetic subsequence well by using
hash maps. It makes the traditional dynamic programming solution much
better.</p>
<h2 id="time-complexity-and-space-complexity-analysis">Time Complexity
and Space Complexity Analysis</h2>
<p>In the Dynamic Programming method for the Longest Arithmetic
Subsequence problem, we can look at the time and space complexity like
this:</p>
<h3 id="time-complexity-1">Time Complexity</h3>
<ol type="1">
<li><strong>Outer Loop</strong>: The algorithm goes through each element
of the input array. The size of this array is <code>n</code>.</li>
<li><strong>Inner Loop</strong>: For each element, we check the previous
elements to find pairs that can make an arithmetic sequence. In the
worst case, we may have to check all previous elements. This leads to a
complexity of <code>O(n)</code>.</li>
</ol>
<p>When we put these two loops together, the total time complexity is: -
<strong>Total Time Complexity</strong>: ( O(n^2) )</p>
<h3 id="space-complexity-1">Space Complexity</h3>
<ol type="1">
<li><strong>Storage for DP Table</strong>: The algorithm needs a 2D
table (or a hashmap) to keep the lengths of arithmetic subsequences. The
size of this table can be up to ( n^2 ) if we use a 2D array. But in
most better versions, we can reduce it to ( O(n) ) by only keeping the
needed values.</li>
<li><strong>Auxiliary Space</strong>: The extra variables for looping
and keeping track of indices are constant.</li>
</ol>
<p>So, we can say the space complexity is: - <strong>Total Space
Complexity</strong>: ( O(n) ) for better versions.</p>
<p>This analysis shows that the Longest Arithmetic Subsequence problem
can be solved well in terms of space. But the time complexity can be
high for big input sizes. For more details on other similar dynamic
programming problems, we can check articles like <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-increasing-subsequence-medium.html">Dynamic
Programming: Longest Increasing Subsequence</a> and <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-common-subsequence-medium.html">Dynamic
Programming: Longest Common Subsequence</a>.</p>
<h2 id="common-pitfalls-in-longest-arithmetic-subsequence">Common
Pitfalls in Longest Arithmetic Subsequence</h2>
<p>When we solve the Longest Arithmetic Subsequence problem with dynamic
programming, we can face some common mistakes. These mistakes can cause
wrong results and slow solutions. Knowing about these problems can help
us create a better and faster algorithm.</p>
<ol type="1">
<li><strong>Wrong Difference Calculation</strong>:
<ul>
<li>The main part of the problem is keeping the right common difference
for each pair of elements. A common error is to calculate the difference
wrong or not update it when we go through the array.</li>
</ul></li>
<li><strong>State Representation</strong>:
<ul>
<li>We should represent the DP state as a dictionary or a 2D array.
Here, <code>dp[i][d]</code> shows the length of the longest arithmetic
subsequence that ends at index <code>i</code> with a common difference
<code>d</code>. If we do not define this state right, we can get wrong
results.</li>
</ul></li>
<li><strong>Initialization Issues</strong>:
<ul>
<li>We need to make sure that we initialize DP states correctly. If we
start with random values or forget to initialize, it can lead to wrong
calculations. For example, every subsequence of length 1 should be
counted at the start.</li>
</ul></li>
<li><strong>Ignoring Edge Cases</strong>:
<ul>
<li>We must pay attention to edge cases like arrays with less than two
elements. These cannot form a subsequence. Always check these cases
before we do calculations.</li>
</ul></li>
<li><strong>Handling Negative Differences</strong>:
<ul>
<li>Arithmetic subsequences can have negative differences. We have to
make sure that our implementation can handle negative values right. We
should not use them as indices directly because it can cause
out-of-bounds errors.</li>
</ul></li>
<li><strong>Performance Concerns</strong>:
<ul>
<li>If we have an inefficient implementation, like using a nested loop
without memoization, it can cause a high time complexity. We should
ensure our approach has a time complexity that fits the input size,
ideally <code>O(n^2)</code> or better.</li>
</ul></li>
<li><strong>Memory Management</strong>:
<ul>
<li>If we use a dictionary or hashtable to store differences, we need to
manage memory well. If the difference is too big, it can waste memory.
We might need to use a smaller representation if necessary.</li>
</ul></li>
<li><strong>Updating Lengths in the DP Table</strong>:
<ul>
<li>When we update the lengths of arithmetic subsequences, we must make
sure we extend existing subsequences correctly. We should manage the
current state carefully while we iterate.</li>
</ul></li>
<li><strong>Testing with Diverse Cases</strong>:
<ul>
<li>When we test our solution, we should use many different input cases.
This includes cases with negative numbers, large datasets, and possible
duplicates. This helps us find any mistakes in the logic or
implementation.</li>
</ul></li>
<li><strong>Using Correct Data Structures</strong>:
<ul>
<li>We need to choose the right data structures to store the DP states.
For example, using a hashmap can help us map differences to lengths
efficiently. But we need to make sure that the implementation allows for
quick insertions and lookups.</li>
</ul></li>
</ol>
<p>By knowing these pitfalls, we can avoid common mistakes and make a
better solution for the Longest Arithmetic Subsequence problem. For more
reading on dynamic programming techniques, we can check out related
topics like <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-increasing-subsequence-medium.html">Dynamic
Programming: Longest Increasing Subsequence</a>. This topic shares
similar ideas.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3
id="what-is-the-definition-of-the-longest-arithmetic-subsequence-in-dynamic-programming">1.
What is the definition of the longest arithmetic subsequence in dynamic
programming?</h3>
<p>The longest arithmetic subsequence (LAS) is a set of numbers. In this
set, the gap between each number is the same. In dynamic programming, we
want to find out how long the longest subsequence is that keeps this
rule in a given list. We often use dynamic programming methods to look
at possible subsequences and their lengths.</p>
<h3
id="how-can-i-implement-the-dynamic-programming-solution-for-the-longest-arithmetic-subsequence-in-python">2.
How can I implement the dynamic programming solution for the longest
arithmetic subsequence in Python?</h3>
<p>To make the longest arithmetic subsequence in Python with dynamic
programming, we can create a 2D array. This array holds the lengths of
subsequences that have a fixed difference. We will look at each pair of
numbers to find their difference and update the lengths. For a full code
example, check our <a href="#">Python Implementation of Longest
Arithmetic Subsequence</a>.</p>
<h3
id="what-is-the-time-complexity-of-finding-the-longest-arithmetic-subsequence">3.
What is the time complexity of finding the longest arithmetic
subsequence?</h3>
<p>The time complexity to find the longest arithmetic subsequence using
dynamic programming is O(n^2). Here, n is the size of the input array.
This happens because we need nested loops to check all pairs of numbers
and find possible arithmetic subsequences. Even with this complexity,
this way works well for medium-sized arrays and gives quick results.</p>
<h3
id="are-there-any-common-pitfalls-when-solving-the-longest-arithmetic-subsequence-problem">4.
Are there any common pitfalls when solving the longest arithmetic
subsequence problem?</h3>
<p>Yes, there are some common mistakes when solving the longest
arithmetic subsequence problem. One mistake is missing edge cases like
arrays with less than two elements or arrays where all numbers are the
same. We also need to handle the differences between numbers carefully.
Wrong calculations can give wrong subsequence lengths. Learning about <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-increasing-subsequence-medium.html">Dynamic
Programming concepts</a> can help us avoid these issues.</p>
<h3
id="how-does-the-longest-arithmetic-subsequence-differ-from-the-longest-increasing-subsequence">5.
How does the longest arithmetic subsequence differ from the longest
increasing subsequence?</h3>
<p>The longest arithmetic subsequence looks for a constant gap between
each term. On the other hand, the longest increasing subsequence needs
each term to be bigger than the last one. We can use dynamic programming
for both problems, but the rules for making subsequences are different.
For more information on related ideas, see our article on <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-longest-increasing-subsequence-medium.html">Longest
Increasing Subsequence</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            