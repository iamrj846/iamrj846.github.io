
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            
            <title>[Dynamic Programming] Best Time to Buy and Sell Stock with Cooldown - Medium</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "BestOnlineTutorial",
      "url": "https://www.bestonlinetutorial.com/"
    }
    </script>

<!-- Common CSS & Icons -->
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
<link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
<link rel="stylesheet" href="/assets/css/post.css">
            <meta name="description" content="Learn the best strategies for buying and selling stocks with cooldown periods using dynamic programming techniques. Optimize your trading!">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">[Dynamic Programming] Best Time to Buy and Sell Stock with Cooldown - Medium</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Sure, here is the rewritten content following your instructions:</p>
<hr />
<p>The problem of finding the best time to buy and sell stocks with a
cooldown period is a good fit for dynamic programming. We need to know
that after we sell, we have to wait one day before we can buy again. We
can break this problem into states. These states show if we are holding
a stock or not. This way, we can find the best solution that helps us
earn the most money while keeping the cooldown rule.</p>
<p>In this article, we will look into the best dynamic programming
solution for buying and selling stocks with a cooldown. We will talk
about the problem, the dynamic programming method, and share code
examples in Java, Python, and C++. We will also look at ways to reduce
space used, check different methods, point out common mistakes, and
answer some questions that often come up.</p>
<ul>
<li>[Dynamic Programming] Best Solution for Buying and Selling Stocks
with Cooldown</li>
<li>What is the Problem for Stock Trading with Cooldown</li>
<li>Dynamic Programming Method for Best Time to Buy and Sell Stock</li>
<li>Java Code for Stock Trading with Cooldown</li>
<li>Python Code for Best Time to Buy and Sell Stock</li>
<li>C++ Code for Stock Trading with Cooldown</li>
<li>Reducing Space Used in Stock Trading Dynamic Programming</li>
<li>Comparing Different Ways to Solve Stock Trading Problem</li>
<li>Mistakes to Avoid in Stock Trading Dynamic Programming</li>
<li>Questions We Often Get</li>
</ul>
<p>If you want to learn more about dynamic programming, you can check
out related topics like <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Dynamic
Programming: Fibonacci Number</a> and <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-unique-paths-in-a-grid-easy.html">Dynamic
Programming: Unique Paths in a Grid</a>.</p>
<hr />
<p>Let me know if you need anything else!</p>
<h2
id="understanding-the-problem-statement-for-stock-trading-with-cooldown">Understanding
the Problem Statement for Stock Trading with Cooldown</h2>
<p>In the “Best Time to Buy and Sell Stock with Cooldown” problem, we
want to find the best profit from stock trading. We have a rule. After
we sell a stock, we cannot buy stock the next day. This means we have a
cooldown of one day after each sale.</p>
<h3 id="problem-definition">Problem Definition</h3>
<p>We have an array called <code>prices</code>. In this array,
<code>prices[i]</code> shows the price of a stock on the
<code>i-th</code> day. Our aim is to get the most profit under these
rules:</p>
<ul>
<li>We can buy and sell the stock many times.</li>
<li>After we sell the stock on day <code>i</code>, we must wait until
day <code>i + 2</code> to buy again.</li>
<li>We start with no stocks.</li>
</ul>
<h3 id="input-and-output">Input and Output</h3>
<ul>
<li><strong>Input</strong>: An integer array <code>prices</code> (1 ≤
prices.length ≤ 5000, 0 ≤ prices[i] ≤ 1000).</li>
<li><strong>Output</strong>: An integer that shows the maximum profit we
can make.</li>
</ul>
<h3 id="example">Example</h3>
<p>Input:</p>
<pre><code>prices = [1, 2, 3, 0, 2]</code></pre>
<p>Output:</p>
<pre><code>Profit = 3</code></pre>
<h3 id="explanation">Explanation</h3>
<ul>
<li>We buy on day 1 (price = 1) and sell on day 2 (price = 2) -&gt;
Profit = 2 - 1 = 1.</li>
<li>We buy on day 3 (price = 0) and sell on day 5 (price = 2) -&gt;
Profit = 2 - 0 = 2.</li>
<li>Total Profit = 1 + 2 = 3.</li>
</ul>
<p>We can solve this problem well using Dynamic Programming. We check
profits from different states. These states are: holding a stock, not
holding a stock, and being in a cooldown state.</p>
<p>For more examples on similar dynamic programming problems, we can
look at the <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">dynamic
programming on Fibonacci numbers</a> or the <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-coin-change-medium.html">coin
change problem</a>.</p>
<h2
id="dynamic-programming-approach-for-best-time-to-buy-and-sell-stock">Dynamic
Programming Approach for Best Time to Buy and Sell Stock</h2>
<p>We can solve the “Best Time to Buy and Sell Stock with Cooldown”
problem using dynamic programming. We define some states to track
buying, selling, and cooldown of stocks.</p>
<h3 id="state-definition">State Definition:</h3>
<ul>
<li><strong>hold</strong>: This is the maximum profit on day
<code>i</code> when we hold a stock.</li>
<li><strong>sold</strong>: This is the maximum profit on day
<code>i</code> when we sold a stock.</li>
<li><strong>rest</strong>: This is the maximum profit on day
<code>i</code> when we are in a cooldown state (not holding a
stock).</li>
</ul>
<h3 id="transition">Transition:</h3>
<ul>
<li>If we hold a stock on day <code>i</code>, it can come from:
<ul>
<li>Holding from the previous day: <code>hold[i] = hold[i-1]</code></li>
<li>Buying it on day <code>i</code>:
<code>hold[i] = max(hold[i-1], rest[i-1] - prices[i])</code></li>
</ul></li>
<li>If we sold a stock on day <code>i</code>, it can only come from
holding stock on day <code>i-1</code>:
<ul>
<li><code>sold[i] = hold[i-1] + prices[i]</code></li>
</ul></li>
<li>If we are resting on day <code>i</code>, we can be in a cooldown
after selling or resting after resting:
<ul>
<li><code>rest[i] = max(rest[i-1], sold[i-1])</code></li>
</ul></li>
</ul>
<h3 id="initialization">Initialization:</h3>
<ul>
<li>On day 0:
<ul>
<li><code>hold[0] = -prices[0]</code> (we buy the stock)</li>
<li><code>sold[0] = 0</code> (no profit from selling)</li>
<li><code>rest[0] = 0</code> (no profit from resting)</li>
</ul></li>
</ul>
<h3 id="final-result">Final Result:</h3>
<p>The maximum profit at the end of the last day will be the maximum of
the <code>sold</code> and <code>rest</code> states.</p>
<h3 id="code-example-in-python">Code Example in Python:</h3>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> prices:</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(prices)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    hold <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> n</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    sold <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> n</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    rest <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> n</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    hold[<span class="dv">0</span>] <span class="op">=</span> <span class="op">-</span>prices[<span class="dv">0</span>]</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    sold[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    rest[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n):</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        hold[i] <span class="op">=</span> <span class="bu">max</span>(hold[i <span class="op">-</span> <span class="dv">1</span>], rest[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">-</span> prices[i])</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>        sold[i] <span class="op">=</span> hold[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> prices[i]</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>        rest[i] <span class="op">=</span> <span class="bu">max</span>(rest[i <span class="op">-</span> <span class="dv">1</span>], sold[i <span class="op">-</span> <span class="dv">1</span>])</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">max</span>(sold[n <span class="op">-</span> <span class="dv">1</span>], rest[n <span class="op">-</span> <span class="dv">1</span>])</span></code></pre></div>
<p>This dynamic programming approach runs in O(n) time and needs O(n)
space to store states for each day.</p>
<h3 id="space-optimization">Space Optimization:</h3>
<p>We can make it better by using only a few variables instead of
keeping arrays for <code>hold</code>, <code>sold</code>, and
<code>rest</code>. This way we can reduce the space complexity to
O(1):</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices):</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> prices:</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    hold, sold, rest <span class="op">=</span> <span class="bu">float</span>(<span class="st">&#39;-inf&#39;</span>), <span class="dv">0</span>, <span class="dv">0</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> price <span class="kw">in</span> prices:</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        prev_sold <span class="op">=</span> sold</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        sold <span class="op">=</span> hold <span class="op">+</span> price</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        hold <span class="op">=</span> <span class="bu">max</span>(hold, rest <span class="op">-</span> price)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        rest <span class="op">=</span> <span class="bu">max</span>(rest, prev_sold)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">max</span>(sold, rest)</span></code></pre></div>
<p>This optimized way keeps the same logic but uses less space. The
dynamic programming method helps us to find the maximum profit while
considering cooldown times in stock trading.</p>
<h2 id="java-implementation-of-stock-trading-with-cooldown">Java
Implementation of Stock Trading with Cooldown</h2>
<p>To solve the “Best Time to Buy and Sell Stock with Cooldown” problem
using Java, we can use a simple dynamic programming method. We need to
keep track of states that show the maximum profit we can get each day.
This depends on if we hold a stock, do not hold a stock, or are in a
cooldown period.</p>
<p>We can define the states like this:</p>
<ul>
<li><code>hold</code>: Maximum profit when we hold a stock.</li>
<li><code>sold</code>: Maximum profit when we sell a stock.</li>
<li><code>rest</code>: Maximum profit during the cooldown period (not
holding stock).</li>
</ul>
<p>Here is the Java code:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> StockTradingWithCooldown <span class="op">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">maxProfit</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> prices<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>prices <span class="op">==</span> <span class="kw">null</span> <span class="op">||</span> prices<span class="op">.</span><span class="fu">length</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> n <span class="op">=</span> prices<span class="op">.</span><span class="fu">length</span><span class="op">;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span><span class="op">[]</span> hold <span class="op">=</span> <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span>n<span class="op">];</span> <span class="co">// profit when holding stock</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span><span class="op">[]</span> sold <span class="op">=</span> <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span>n<span class="op">];</span> <span class="co">// profit when sold stock</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span><span class="op">[]</span> rest <span class="op">=</span> <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span>n<span class="op">];</span> <span class="co">// profit during cooldown</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        hold<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="op">-</span>prices<span class="op">[</span><span class="dv">0</span><span class="op">];</span> <span class="co">// buying on day 0</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        sold<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="co">// no stock sold on day 0</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        rest<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="co">// no profit during cooldown on day 0</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>            hold<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>hold<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">],</span> rest<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">-</span> prices<span class="op">[</span>i<span class="op">]);</span> <span class="co">// hold or buy</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>            sold<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> hold<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">+</span> prices<span class="op">[</span>i<span class="op">];</span> <span class="co">// sell stock</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>            rest<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>rest<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">],</span> sold<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">]);</span> <span class="co">// rest or cooldown</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>sold<span class="op">[</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">],</span> rest<span class="op">[</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">]);</span> <span class="co">// maximum profit at the end</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span><span class="op">[]</span> args<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>        StockTradingWithCooldown solution <span class="op">=</span> <span class="kw">new</span> <span class="fu">StockTradingWithCooldown</span><span class="op">();</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span><span class="op">[]</span> prices <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Maximum Profit: &quot;</span> <span class="op">+</span> solution<span class="op">.</span><span class="fu">maxProfit</span><span class="op">(</span>prices<span class="op">));</span> <span class="co">// Output: 3</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="explanation-of-the-code">Explanation of the Code:</h3>
<p>We start with three arrays. They are <code>hold</code>,
<code>sold</code>, and <code>rest</code>. These arrays help us track the
maximum profit for each day and each state.</p>
<p>Each day, we decide the best action. We can either hold, sell, or
rest based on the values from the previous day.</p>
<p>At the end, we return the maximum profit we can get by either selling
on the last day or resting after selling.</p>
<p>This code runs in O(n) time and uses O(n) space. To save space, we
can change it to O(1) by using only a few variables instead of arrays.
We only need the states from the day before.</p>
<p>For more information on dynamic programming ideas and examples, you
can read articles like <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Dynamic
Programming - Fibonacci Number</a> and <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-minimum-path-sum-in-a-grid-medium.html">Dynamic
Programming - Minimum Path Sum in a Grid</a>.</p>
<h2 id="python-code-example-for-best-time-to-buy-and-sell-stock">Python
Code Example for Best Time to Buy and Sell Stock</h2>
<p>We want to solve the “Best Time to Buy and Sell Stock with Cooldown”
problem. We use dynamic programming in Python. We can define our states
like this:</p>
<ol type="1">
<li><strong>hold</strong>: The most profit we can get when we hold a
stock.</li>
<li><strong>sold</strong>: The most profit we can get after we sell a
stock.</li>
<li><strong>rest</strong>: The most profit we can get when we do not
hold a stock and are not in cooldown.</li>
</ol>
<p>The state changes depend on the daily stock prices. We also need to
think about the cooldown time after we sell.</p>
<p>Here is a simple Python code to do this:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices):</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> prices:</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(prices)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    hold <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> n</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    sold <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> n</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    rest <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> n</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    hold[<span class="dv">0</span>] <span class="op">=</span> <span class="op">-</span>prices[<span class="dv">0</span>]</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    sold[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    rest[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n):</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>        hold[i] <span class="op">=</span> <span class="bu">max</span>(hold[i <span class="op">-</span> <span class="dv">1</span>], rest[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">-</span> prices[i])</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>        sold[i] <span class="op">=</span> hold[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> prices[i]</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>        rest[i] <span class="op">=</span> <span class="bu">max</span>(rest[i <span class="op">-</span> <span class="dv">1</span>], sold[i <span class="op">-</span> <span class="dv">1</span>])</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">max</span>(sold[n <span class="op">-</span> <span class="dv">1</span>], rest[n <span class="op">-</span> <span class="dv">1</span>])</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>prices <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">2</span>]</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(maxProfit(prices))  <span class="co"># Output: 3</span></span></code></pre></div>
<h3 id="explanation-of-the-code-1">Explanation of the Code</h3>
<ul>
<li><strong>Initialization</strong>: The <code>hold</code> array shows
the best profit when holding stock. The <code>sold</code> array shows
profit after selling. The <code>rest</code> array shows profit when
resting.</li>
<li><strong>Iterative DP</strong>: We change the states for each day
based on the states from the previous day.</li>
<li><strong>Final Profit Calculation</strong>: The answer is the highest
value from the last day in sold and rest states.</li>
</ul>
<p>This simple implementation helps us find the best time to buy and
sell stocks with a cooldown. For more examples and ways to use dynamic
programming, check articles like <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Dynamic
Programming Fibonacci Number</a> or <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-coin-change-medium.html">Dynamic
Programming Coin Change</a>.</p>
<h2 id="c-solution-for-stock-trading-with-cooldown-problem">C++ Solution
for Stock Trading with Cooldown Problem</h2>
<p>We can solve the “Best Time to Buy and Sell Stock with Cooldown”
problem using C++. We will use dynamic programming. The main idea is to
keep an array that shows the maximum profit we can make each day. We
need to think about if we are holding a stock or not.</p>
<p>We can divide the problem into three states: 1.
<strong>Hold</strong>: This is the maximum profit when we hold a stock.
2. <strong>Sell</strong>: This is the maximum profit when we sell a
stock. 3. <strong>Cooldown</strong>: This is the maximum profit on a
cooldown day.</p>
<h3 id="c-code-implementation">C++ Code Implementation</h3>
<p>Here is a simple C++ code for the stock trading problem with a
cooldown:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;algorithm&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> std<span class="op">;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Solution <span class="op">{</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> maxProfit<span class="op">(</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;&amp;</span> prices<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>prices<span class="op">.</span>empty<span class="op">())</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> n <span class="op">=</span> prices<span class="op">.</span>size<span class="op">();</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> sell<span class="op">(</span>n<span class="op">,</span> <span class="dv">0</span><span class="op">);</span>    <span class="co">// Maximum profit on selling on day i</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> buy<span class="op">(</span>n<span class="op">,</span> <span class="dv">0</span><span class="op">);</span>     <span class="co">// Maximum profit on buying on day i</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Initial values</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        buy<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="op">-</span>prices<span class="op">[</span><span class="dv">0</span><span class="op">];</span>        <span class="co">// Buy on the first day</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        sell<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>                <span class="co">// Can&#39;t sell on the first day</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>            buy<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> max<span class="op">(</span>buy<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">],</span> sell<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">-</span> prices<span class="op">[</span>i<span class="op">]);</span> <span class="co">// Max profit if buying today</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>            sell<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> max<span class="op">(</span>sell<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">],</span> buy<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">+</span> prices<span class="op">[</span>i<span class="op">]);</span> <span class="co">// Max profit if selling today</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>i <span class="op">&gt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>                sell<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> max<span class="op">(</span>sell<span class="op">[</span>i<span class="op">],</span> buy<span class="op">[</span>i <span class="op">-</span> <span class="dv">2</span><span class="op">]</span> <span class="op">+</span> prices<span class="op">[</span>i<span class="op">]);</span> <span class="co">// Consider cooldown</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> sell<span class="op">[</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">];</span> <span class="co">// The maximum profit on the last day is when we sell</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<h3 id="explanation-of-the-code-2">Explanation of the Code</h3>
<ul>
<li><strong>Initialization</strong>: We set the <code>buy</code> array
with negative values. This shows the cost of buying a stock. The
<code>sell</code> array starts with zero profits.</li>
<li><strong>Dynamic Programming Transition</strong>:
<ul>
<li>Each day we calculate the maximum profit possible when buying or
selling a stock. We also think about the cooldown period.</li>
</ul></li>
<li><strong>Final Result</strong>: The last item in the
<code>sell</code> array gives us the maximum profit we can make by the
end of the last day.</li>
</ul>
<p>This method runs in O(n) time and uses O(n) space. To save space, we
can use a rolling array technique. This will reduce the space usage to
O(1).</p>
<p>For more information on dynamic programming, you can read about the
<a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Fibonacci
Number</a> and <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-climbing-stairs-easy.html">Climbing
Stairs Problem</a> articles.</p>
<h2
id="optimizing-space-complexity-in-stock-trading-dynamic-programming">Optimizing
Space Complexity in Stock Trading Dynamic Programming</h2>
<p>In the dynamic programming approach to solve the “Best Time to Buy
and Sell Stock with Cooldown” problem, we really need to optimize space
complexity. This is important for making our solution faster, especially
when we work with larger datasets. The original solution might use a 2D
array to keep track of states. But we can change it to use a constant
amount of space.</p>
<h3 id="space-complexity-reduction-technique">Space Complexity Reduction
Technique</h3>
<p>The main idea is that we can find the state of the current day by
using only the previous states. This helps us track just the last few
states instead of the whole array.</p>
<h4 id="state-representation">State Representation</h4>
<p>We can define the states like this: - <code>sold</code>: This is the
maximum profit on the day when we do not hold any stock (after selling).
- <code>held</code>: This is the maximum profit on the day when we hold
stock (after buying). - <code>rest</code>: This is the maximum profit on
the cooldown day (after resting).</p>
<h3 id="optimized-code-example">Optimized Code Example</h3>
<p>Here is a Java example that cuts down space use by using only a few
variables instead of a full array:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> StockTrading <span class="op">{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">maxProfit</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> prices<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>prices<span class="op">.</span><span class="fu">length</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> sold <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> held <span class="op">=</span> <span class="op">-</span>prices<span class="op">[</span><span class="dv">0</span><span class="op">],</span> rest <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> price <span class="op">:</span> prices<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> prevSold <span class="op">=</span> sold<span class="op">;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>            sold <span class="op">=</span> held <span class="op">+</span> price<span class="op">;</span> <span class="co">// Sell the stock</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>            held <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>held<span class="op">,</span> rest <span class="op">-</span> price<span class="op">);</span> <span class="co">// Buy the stock</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>            rest <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>rest<span class="op">,</span> prevSold<span class="op">);</span> <span class="co">// Cooldown</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>sold<span class="op">,</span> rest<span class="op">);</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="python-implementation">Python Implementation</h3>
<p>In Python, we can also optimize space with a simple method:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> StockTrading:</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> maxProfit(<span class="va">self</span>, prices):</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> prices:</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        sold, held, rest <span class="op">=</span> <span class="dv">0</span>, <span class="op">-</span>prices[<span class="dv">0</span>], <span class="dv">0</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> price <span class="kw">in</span> prices:</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>            prev_sold <span class="op">=</span> sold</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>            sold <span class="op">=</span> held <span class="op">+</span> price</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>            held <span class="op">=</span> <span class="bu">max</span>(held, rest <span class="op">-</span> price)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>            rest <span class="op">=</span> <span class="bu">max</span>(rest, prev_sold)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">max</span>(sold, rest)</span></code></pre></div>
<h3 id="c-implementation">C++ Implementation</h3>
<p>The C++ version is similar to the Java and Python versions:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> StockTrading <span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> maxProfit<span class="op">(</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;&amp;</span> prices<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>prices<span class="op">.</span>empty<span class="op">())</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> sold <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> held <span class="op">=</span> <span class="op">-</span>prices<span class="op">[</span><span class="dv">0</span><span class="op">],</span> rest <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> price <span class="op">:</span> prices<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> prev_sold <span class="op">=</span> sold<span class="op">;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>            sold <span class="op">=</span> held <span class="op">+</span> price<span class="op">;</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>            held <span class="op">=</span> max<span class="op">(</span>held<span class="op">,</span> rest <span class="op">-</span> price<span class="op">);</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>            rest <span class="op">=</span> max<span class="op">(</span>rest<span class="op">,</span> prev_sold<span class="op">);</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> max<span class="op">(</span>sold<span class="op">,</span> rest<span class="op">);</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<h3 id="benefits-of-space-optimization">Benefits of Space
Optimization</h3>
<ul>
<li><strong>Efficiency</strong>: We use less memory. This helps our code
run faster with big datasets.</li>
<li><strong>Simplicity</strong>: The code stays clean and easy to follow
while still being fast.</li>
</ul>
<p>By using these methods, we can solve the stock trading problem with
cooldown in a smart way. We also keep the space use low.</p>
<h2
id="comparative-analysis-of-different-approaches-to-stock-trading-problem">Comparative
Analysis of Different Approaches to Stock Trading Problem</h2>
<p>We can look at different ways to solve the stock trading problem with
cooldown. We can put these methods into three main groups: <strong>Brute
Force</strong>, <strong>Dynamic Programming</strong>, and
<strong>Memoization</strong>. Each way has its own good and bad points.
They differ in how complex they are, how fast they work, and how easy
they are to use.</p>
<h3 id="brute-force-approach">1. Brute Force Approach</h3>
<ul>
<li><strong>Description</strong>: The brute force method makes all
possible transactions and checks their profits. This is easy to
understand but takes a lot of time to compute.</li>
<li><strong>Time Complexity</strong>: O(2^n)</li>
<li><strong>Space Complexity</strong>: O(1)</li>
<li><strong>Example</strong>: Each day, we can choose to buy, sell, or
cooldown. This leads to many possibilities very quickly.</li>
</ul>
<h3 id="dynamic-programming-approach">2. Dynamic Programming
Approach</h3>
<ul>
<li><p><strong>Description</strong>: This method uses a table to keep
results of smaller problems. This way, we don’t have to do the same work
again. It tracks if we hold a stock or not and includes the cooldown
time.</p></li>
<li><p><strong>Time Complexity</strong>: O(n)</p></li>
<li><p><strong>Space Complexity</strong>: O(n)</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">int</span> <span class="fu">maxProfit</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> prices<span class="op">)</span> <span class="op">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>prices<span class="op">.</span><span class="fu">length</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> prices<span class="op">.</span><span class="fu">length</span><span class="op">;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span><span class="op">[]</span> buy <span class="op">=</span> <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span>n<span class="op">];</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span><span class="op">[]</span> sell <span class="op">=</span> <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span>n<span class="op">];</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    buy<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="op">-</span>prices<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>        buy<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>buy<span class="op">[</span>i<span class="op">-</span><span class="dv">1</span><span class="op">],</span> sell<span class="op">[</span>i<span class="op">-</span><span class="dv">1</span><span class="op">]</span> <span class="op">-</span> prices<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>        sell<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>sell<span class="op">[</span>i<span class="op">-</span><span class="dv">1</span><span class="op">],</span> buy<span class="op">[</span>i<span class="op">-</span><span class="dv">1</span><span class="op">]</span> <span class="op">+</span> prices<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sell<span class="op">[</span>n<span class="op">-</span><span class="dv">1</span><span class="op">];</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
</ul>
<h3 id="memoization-approach">3. Memoization Approach</h3>
<ul>
<li><p><strong>Description</strong>: This is a top-down way where we
calculate profits again and again while keeping the results of what we
already calculated. This helps avoid doing the same work.</p></li>
<li><p><strong>Time Complexity</strong>: O(n)</p></li>
<li><p><strong>Space Complexity</strong>: O(n) because of the recursion
and the memoization table.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices):</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> dp(i, can_buy):</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i <span class="op">&gt;=</span> <span class="bu">len</span>(prices): <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (i, can_buy) <span class="kw">in</span> memo: <span class="cf">return</span> memo[(i, can_buy)]</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> can_buy:</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>            memo[(i, can_buy)] <span class="op">=</span> <span class="bu">max</span>(dp(i <span class="op">+</span> <span class="dv">1</span>, <span class="va">True</span>), dp(i <span class="op">+</span> <span class="dv">1</span>, <span class="va">False</span>) <span class="op">-</span> prices[i])</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>            memo[(i, can_buy)] <span class="op">=</span> <span class="bu">max</span>(dp(i <span class="op">+</span> <span class="dv">1</span>, <span class="va">False</span>), dp(i <span class="op">+</span> <span class="dv">2</span>, <span class="va">True</span>) <span class="op">+</span> prices[i])</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> memo[(i, can_buy)]</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    memo <span class="op">=</span> {}</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dp(<span class="dv">0</span>, <span class="va">True</span>)</span></code></pre></div></li>
</ul>
<h3 id="comparative-summary">Comparative Summary</h3>
<ul>
<li>The <strong>brute force approach</strong> is easy to understand but
not good for big data sets because it takes too long.</li>
<li>The <strong>dynamic programming approach</strong> works well for
bigger inputs. It uses a bottom-up method that fills a table step by
step.</li>
<li>The <strong>memoization approach</strong> uses recursion and saves
time by storing results. But it can cause stack overflow with very big
inputs.</li>
</ul>
<p>For more learning on dynamic programming, we can look at problems
like <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Dynamic
Programming: Fibonacci Number</a> or <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-climbing-stairs-easy.html">Dynamic
Programming: Climbing Stairs</a>.</p>
<h2
id="common-mistakes-to-avoid-in-stock-trading-dynamic-programming">Common
Mistakes to Avoid in Stock Trading Dynamic Programming</h2>
<p>When we work on the Best Time to Buy and Sell Stock with Cooldown
problem using dynamic programming, we can make some common mistakes.
These mistakes can cause our solutions to be slow or wrong. Here are
some key mistakes we should avoid:</p>
<ol type="1">
<li><strong>Ignoring the Cooldown Period</strong>:
<ul>
<li>If we forget about the cooldown period after a sale, we can get the
wrong results. We must remember that if we sell on day <code>i</code>,
we cannot buy on day <code>i + 1</code>.</li>
</ul></li>
<li><strong>Incorrect State Definitions</strong>:
<ul>
<li>If we do not define our states well in the DP table, it can be
confusing. Usually, we use two states:
<ul>
<li><code>hold[i]</code>: This means maximum profit on day
<code>i</code> while holding a stock.</li>
<li><code>sell[i]</code>: This means maximum profit on day
<code>i</code> after selling the stock.</li>
</ul></li>
</ul></li>
<li><strong>Not Initializing Base Cases Correctly</strong>:
<ul>
<li>We need to initialize our base cases in the DP array right. For
example, on day 0:
<ul>
<li><code>hold[0]</code> should be <code>-prices[0]</code> (if we buy on
the first day).</li>
<li><code>sell[0]</code> should be <code>0</code> (no profit if no
transaction is made).</li>
</ul></li>
</ul></li>
<li><strong>Overcomplicating the Recurrence Relation</strong>:
<ul>
<li><p>The recurrence should be simple and clear. For example:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>hold[i] <span class="op">=</span> <span class="bu">max</span>(hold[i<span class="op">-</span><span class="dv">1</span>], sell[i<span class="op">-</span><span class="dv">2</span>] <span class="op">-</span> prices[i]) </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>sell[i] <span class="op">=</span> <span class="bu">max</span>(sell[i<span class="op">-</span><span class="dv">1</span>], hold[i<span class="op">-</span><span class="dv">1</span>] <span class="op">+</span> prices[i])</span></code></pre></div></li>
</ul></li>
<li><strong>Mismanaging Space Complexity</strong>:
<ul>
<li>We should not use too much space. Instead of keeping full arrays for
all days, we can use two variables to store the last state values. This
way, we reduce space complexity to O(1).</li>
</ul></li>
<li><strong>Failing to Consider Edge Cases</strong>:
<ul>
<li>We must test edge cases like empty prices array or arrays with only
one price. We should handle these cases early to avoid errors when
running the code.</li>
</ul></li>
<li><strong>Neglecting to Test with Different Inputs</strong>:
<ul>
<li>We need to run our algorithm with different inputs to make sure it
works well. We can use test cases with prices that go up, down, and
fluctuate.</li>
</ul></li>
<li><strong>Not Optimizing for Larger Inputs</strong>:
<ul>
<li>We should make sure our solution can handle larger inputs quickly.
We should aim for a time complexity of O(n) and space complexity of O(1)
by using iterative methods.</li>
</ul></li>
</ol>
<p>Here is a simple version of the Python code that shows the dynamic
programming approach:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices):</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> prices:</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(prices)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    hold, sell <span class="op">=</span> <span class="bu">float</span>(<span class="st">&#39;-inf&#39;</span>), <span class="dv">0</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> price <span class="kw">in</span> prices:</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>        new_hold <span class="op">=</span> <span class="bu">max</span>(hold, sell <span class="op">-</span> price)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>        new_sell <span class="op">=</span> <span class="bu">max</span>(sell, hold <span class="op">+</span> price)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        hold, sell <span class="op">=</span> new_hold, new_sell</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sell</span></code></pre></div>
<p>If we avoid these mistakes, we can make our Stock Trading with
Cooldown problem easier to solve. For more understanding of dynamic
programming, we can look at related topics like the <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Dynamic
Programming Fibonacci Number</a> and others linked here.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3
id="what-is-the-best-dynamic-programming-approach-for-the-stock-trading-problem-with-cooldown">1.
What is the best dynamic programming approach for the stock trading
problem with cooldown?</h3>
<p>The best way to solve the stock trading problem with cooldown is
using dynamic programming. We need to keep track of different states.
These states are holding a stock, not holding a stock, and being in a
cooldown period. This way, we can calculate profits easily while
thinking about the cooldown rule. This helps us find the best way to
make money in stock trading.</p>
<h3
id="how-do-i-implement-the-stock-trading-with-cooldown-algorithm-in-java">2.
How do I implement the stock trading with cooldown algorithm in
Java?</h3>
<p>To implement the stock trading with cooldown algorithm in Java, we
can use dynamic programming. We need an array to keep track of maximum
profits for different states. We define states for holding a stock, not
holding a stock, and in a cooldown period. Then, we can move between
these states to calculate the maximum profit step by step. You can check
our <a href="#">Java Implementation of Stock Trading with Cooldown</a>
for a full code example.</p>
<h3
id="what-are-the-common-pitfalls-in-solving-the-stock-trading-problem-with-a-cooldown">3.
What are the common pitfalls in solving the stock trading problem with a
cooldown?</h3>
<p>Some common pitfalls when solving the stock trading problem with
cooldown are misunderstanding how to move between holding and not
holding stocks. We also may forget to consider the cooldown period
properly. Sometimes, we do not set up our dynamic programming states
correctly. It is important to define our states and transitions clearly
to avoid these problems. You can read more about these mistakes in our
section on <a href="#">Common Mistakes to Avoid in Stock Trading Dynamic
Programming</a>.</p>
<h3
id="how-can-i-optimize-space-complexity-in-the-stock-trading-problem">4.
How can I optimize space complexity in the stock trading problem?</h3>
<p>To optimize space complexity in the stock trading problem, we can use
fewer arrays. Instead of keeping large arrays for each day, we can track
only the necessary states. We can do this with a few variables that
store the current and previous states. This way, we can cut down space
usage from O(n) to O(1). For more tips, look at our section on <a
href="#">Optimizing Space Complexity in Stock Trading Dynamic
Programming</a>.</p>
<h3
id="are-there-variations-of-the-stock-trading-problem-that-i-should-be-aware-of">5.
Are there variations of the stock trading problem that I should be aware
of?</h3>
<p>Yes, there are many variations of the stock trading problem. Some
allow multiple transactions or limit the number of transactions. Others
may add transaction fees. Each variation has its own challenges and may
need different dynamic programming methods. For example, we can look at
the problem of buying and selling stocks without a cooldown in resources
like <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-coin-change-medium.html">Dynamic
Programming: Coin Change</a> for a different view on how to improve
stock trading strategies.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            