
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            
            <title>[Dynamic Programming] Maximum Profit in Stock Trading with Transaction Fee - Medium</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "BestOnlineTutorial",
      "url": "https://www.bestonlinetutorial.com/"
    }
    </script>

<!-- Common CSS & Icons -->
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
<link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
<link rel="stylesheet" href="/assets/css/post.css">
            <meta name="description" content="Learn dynamic programming strategies to maximize profit in stock trading with transaction fees. Expert tips and insights!">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">[Dynamic Programming] Maximum Profit in Stock Trading with Transaction Fee - Medium</h1>
                        </header>

                        <div class="blog-post-body">
                            <p><strong>Maximum Profit in Stock Trading with Transaction
Fee</strong></p>
<p>Maximum Profit in Stock Trading with Transaction Fee is a problem. It
is about finding the best way to buy and sell stocks while thinking
about transaction fees. We want to make the most money over time. We
also need to think about the costs of each trade. We can solve this
problem well using dynamic programming. It helps us break the problem
into smaller pieces. This way, we can find the best solution.</p>
<p>In this article, we will look at different parts of the Maximum
Profit in Stock Trading with Transaction Fee problem. We will start by
understanding the problem. Then, we will see how to use dynamic
programming to find the maximum profit. We will give examples in Java,
Python, and C++. This will help us understand better. We will also talk
about making space usage better. We will handle special cases too.
Finally, we will answer common questions to clear up doubts.</p>
<ul>
<li>[Dynamic Programming] Optimal Solutions for Maximum Profit in Stock
Trading with Transaction Fee - Medium</li>
<li>Understanding the Problem Statement for Maximum Profit in Stock
Trading</li>
<li>Dynamic Programming Approach for Maximum Profit Calculation</li>
<li>Java Implementation of Maximum Profit in Stock Trading with
Transaction Fee</li>
<li>Python Code Example for Maximum Profit in Stock Trading with
Transaction Fee</li>
<li>C++ Solution for Maximum Profit in Stock Trading with Transaction
Fee</li>
<li>Comparative Analysis of Different Approaches</li>
<li>Optimizing Space Complexity in Dynamic Programming Solutions</li>
<li>Handling Edge Cases in Stock Trading Profit Calculation</li>
<li>Frequently Asked Questions</li>
</ul>
<p>If you want to learn more about dynamic programming, you can check
out articles like <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Dynamic
Programming Fibonacci Number</a> and <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-maximum-subarray-kadanes-algorithm-easy.html">Dynamic
Programming Maximum Subarray - Kadane’s Algorithm</a>. They are very
helpful.</p>
<h2
id="understanding-the-problem-statement-for-maximum-profit-in-stock-trading">Understanding
the Problem Statement for Maximum Profit in Stock Trading</h2>
<p>We want to maximize profit in stock trading while paying a
transaction fee. The problem can be seen like this:</p>
<p>We have an array called <code>prices</code>. In this array,
<code>prices[i]</code> shows the price of a stock on day <code>i</code>.
There is also a transaction fee called <code>fee</code>. Our goal is to
find the maximum profit we can make. We can do as many transactions as
we want. But remember, we must pay the transaction fee for each buy or
sell.</p>
<p>Here are some key points to think about: - We can buy and sell the
stock on the same day. - After we sell, we cannot buy any stock until
the next day. - We need to calculate the profit while including the
transaction fee.</p>
<h3 id="example">Example</h3>
<p>Let’s look at an example. If the prices array is
<code>[1, 3, 2, 8, 4, 9]</code> and the transaction fee is
<code>2</code>, the best transactions are: 1. Buy at price
<code>1</code> on day <code>0</code>. 2. Sell at price <code>8</code> on
day <code>3</code>. 3. Buy again at price <code>4</code> on day
<code>4</code>. 4. Sell at price <code>9</code> on day
<code>5</code>.</p>
<p>Now we can calculate the maximum profit like this: - Profit from the
first transaction: <code>8 - 1 - 2 = 5</code> - Profit from the second
transaction: <code>9 - 4 - 2 = 3</code> - Total profit =
<code>5 + 3 = 8</code>.</p>
<p>We can solve this problem well using dynamic programming. This method
helps us track profits and decisions over many days.</p>
<h2
id="dynamic-programming-approach-for-maximum-profit-calculation">Dynamic
Programming Approach for Maximum Profit Calculation</h2>
<p>We want to solve the problem of making the most profit in stock
trading with a transaction fee. We use dynamic programming for this. We
have two main states:</p>
<ol type="1">
<li><strong>hold</strong>: This is the maximum profit we can get while
we hold a stock.</li>
<li><strong>cash</strong>: This is the maximum profit we can get when we
do not hold any stock.</li>
</ol>
<p>The way we move between these states is like this:</p>
<ul>
<li><p>If we hold a stock today, it can be because we held it from
yesterday or we bought it today after selling yesterday. So, we can
update our <code>hold</code> state like this:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>hold <span class="op">=</span> <span class="bu">max</span>(hold, cash <span class="op">-</span> prices[i])</span></code></pre></div></li>
<li><p>If we do not hold a stock, we can either keep yesterday’s cash or
sell today. This gives us:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>cash <span class="op">=</span> <span class="bu">max</span>(cash, hold <span class="op">+</span> prices[i] <span class="op">-</span> fee)</span></code></pre></div></li>
</ul>
<p>We loop through the list of prices and update the <code>hold</code>
and <code>cash</code> states. At the end, the maximum profit we can have
without holding a stock will be in the <code>cash</code> variable.</p>
<h3 id="python-implementation">Python Implementation</h3>
<p>Here is a simple Python code for the dynamic programming solution to
maximize profit in stock trading with a transaction fee:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices, fee):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    hold <span class="op">=</span> <span class="op">-</span>prices[<span class="dv">0</span>]  <span class="co"># Initial profit when we buy the first stock</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    cash <span class="op">=</span> <span class="dv">0</span>  <span class="co"># Initial profit when we have no stock</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> price <span class="kw">in</span> prices[<span class="dv">1</span>:]:</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Update the states for holding and cash</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        hold <span class="op">=</span> <span class="bu">max</span>(hold, cash <span class="op">-</span> price)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        cash <span class="op">=</span> <span class="bu">max</span>(cash, hold <span class="op">+</span> price <span class="op">-</span> fee)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cash</span></code></pre></div>
<h3 id="java-implementation">Java Implementation</h3>
<p>Here is the Java version of the same code:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> StockProfit <span class="op">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">maxProfit</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> prices<span class="op">,</span> <span class="dt">int</span> fee<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> hold <span class="op">=</span> <span class="op">-</span>prices<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> cash <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> prices<span class="op">.</span><span class="fu">length</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>            hold <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>hold<span class="op">,</span> cash <span class="op">-</span> prices<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>            cash <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>cash<span class="op">,</span> hold <span class="op">+</span> prices<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> fee<span class="op">);</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> cash<span class="op">;</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="c-implementation">C++ Implementation</h3>
<p>This is how we can write the same logic in C++:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Solution <span class="op">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> maxProfit<span class="op">(</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;&amp;</span> prices<span class="op">,</span> <span class="dt">int</span> fee<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> hold <span class="op">=</span> <span class="op">-</span>prices<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> cash <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> prices<span class="op">.</span>size<span class="op">();</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>            hold <span class="op">=</span> max<span class="op">(</span>hold<span class="op">,</span> cash <span class="op">-</span> prices<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>            cash <span class="op">=</span> max<span class="op">(</span>cash<span class="op">,</span> hold <span class="op">+</span> prices<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> fee<span class="op">);</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> cash<span class="op">;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<h3 id="time-and-space-complexity">Time and Space Complexity</h3>
<ul>
<li><strong>Time Complexity</strong>: O(n), where n is the number of
days or length of the prices list.</li>
<li><strong>Space Complexity</strong>: O(1), because we only use a fixed
amount of space for <code>hold</code> and <code>cash</code>.</li>
</ul>
<p>This dynamic programming method helps us find the maximum profit we
can get with the rules of stock trading and transaction fees. If you
want to learn more about dynamic programming, you can read articles like
<a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Dynamic
Programming: Fibonacci Number</a>.</p>
<h2
id="java-implementation-of-maximum-profit-in-stock-trading-with-transaction-fee">Java
Implementation of Maximum Profit in Stock Trading with Transaction
Fee</h2>
<p>We want to solve the problem of making the most profit in stock
trading with a transaction fee using Java. We can use a simple method
called dynamic programming. We keep track of two situations: one when we
hold stock and one when we do not. We subtract the transaction fee from
the profit when we sell stock.</p>
<p>Here is the Java code:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> StockTrading <span class="op">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">int</span> <span class="fu">maxProfit</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> prices<span class="op">,</span> <span class="dt">int</span> fee<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>prices <span class="op">==</span> <span class="kw">null</span> <span class="op">||</span> prices<span class="op">.</span><span class="fu">length</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> n <span class="op">=</span> prices<span class="op">.</span><span class="fu">length</span><span class="op">;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span><span class="op">[]</span> hold <span class="op">=</span> <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span>n<span class="op">];</span> <span class="co">// Max profit when holding stock</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span><span class="op">[]</span> cash <span class="op">=</span> <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span>n<span class="op">];</span> <span class="co">// Max profit when not holding stock</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>        hold<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="op">-</span>prices<span class="op">[</span><span class="dv">0</span><span class="op">];</span>  <span class="co">// Buy stock on day 0</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        cash<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>           <span class="co">// No profit at the start</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Update hold and cash states</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>            hold<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>hold<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">],</span> cash<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">-</span> prices<span class="op">[</span>i<span class="op">]);</span> <span class="co">// max of holding or buying today</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>            cash<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>cash<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">],</span> hold<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">+</span> prices<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> fee<span class="op">);</span> <span class="co">// max of not holding or selling today</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> cash<span class="op">[</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">];</span> <span class="co">// Max profit is when not holding stock at the end</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span><span class="op">[]</span> args<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span><span class="op">[]</span> prices <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">9</span><span class="op">};</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> fee <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Maximum Profit: &quot;</span> <span class="op">+</span> <span class="fu">maxProfit</span><span class="op">(</span>prices<span class="op">,</span> fee<span class="op">));</span> <span class="co">// Output: 8</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="explanation">Explanation:</h3>
<ul>
<li><strong>hold[i]</strong>: This shows the max profit on day
<code>i</code> if we hold a stock.</li>
<li><strong>cash[i]</strong>: This shows the max profit on day
<code>i</code> if we do not hold a stock.</li>
<li>The code goes through the price list. It updates the
<code>hold</code> and <code>cash</code> states. It checks if buying or
selling is better, while also thinking about the transaction fee.</li>
</ul>
<p>This code finds the maximum profit by going through the prices just
one time. This gives us a time complexity of O(n) and space complexity
of O(n). If we want to make it better, we can lower the space complexity
to O(1) by only keeping the last states instead of using arrays.</p>
<p>For more information about dynamic programming, we can look at this
<a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">dynamic
programming Fibonacci number tutorial</a>.</p>
<h2
id="python-code-example-for-maximum-profit-in-stock-trading-with-transaction-fee">Python
Code Example for Maximum Profit in Stock Trading with Transaction
Fee</h2>
<p>We can solve the problem of making the most profit in stock trading
with a transaction fee using Python. We will use a simple dynamic
programming method. The main idea is to keep track of two situations:
one when we have stock and one when we do not have stock.</p>
<h3 id="problem-definition">Problem Definition</h3>
<p>We have an array <code>prices</code> where <code>prices[i]</code>
shows the price of a stock on day <code>i</code>. We also have a
transaction fee <code>fee</code>. Our goal is to find the maximum profit
we can get.</p>
<h3 id="dynamic-programming-logic">Dynamic Programming Logic</h3>
<ol type="1">
<li>We start with two variables:
<ul>
<li><code>cash</code>: This shows the maximum profit when we do not own
any stock.</li>
<li><code>hold</code>: This shows the maximum profit when we own
stock.</li>
</ul></li>
<li>We set the starting values:
<ul>
<li><code>cash = 0</code> (profit when we do not hold any stock).</li>
<li><code>hold = -prices[0]</code> (profit when we hold stock on the
first day).</li>
</ul></li>
<li>We go through the price list:
<ul>
<li>We update <code>cash</code> to be the higher value between its
current value or <code>hold + prices[i] - fee</code> (this is when we
sell stock).</li>
<li>We update <code>hold</code> to be the higher value between its
current value or <code>cash - prices[i]</code> (this is when we buy
stock).</li>
</ul></li>
<li>At the end of our loop, <code>cash</code> will have the result.</li>
</ol>
<h3 id="python-implementation-1">Python Implementation</h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices, fee):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    cash <span class="op">=</span> <span class="dv">0</span>  <span class="co"># max profit when not holding stock</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    hold <span class="op">=</span> <span class="op">-</span>prices[<span class="dv">0</span>]  <span class="co"># max profit when holding stock</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> price <span class="kw">in</span> prices[<span class="dv">1</span>:]:</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        cash <span class="op">=</span> <span class="bu">max</span>(cash, hold <span class="op">+</span> price <span class="op">-</span> fee)  <span class="co"># sell stock</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        hold <span class="op">=</span> <span class="bu">max</span>(hold, cash <span class="op">-</span> price)  <span class="co"># buy stock</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cash</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>prices <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">9</span>]</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>fee <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>profit <span class="op">=</span> maxProfit(prices, fee)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Maximum profit: </span><span class="sc">{</span>profit<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<h3 id="explanation-of-the-code">Explanation of the Code</h3>
<p>The <code>maxProfit</code> function takes a list of prices and a
transaction fee. It goes through the prices and updates
<code>cash</code> and <code>hold</code> based on our choice to buy or
sell. In the end, it gives us the maximum profit we can make after all
trades.</p>
<p>This way, we calculate the maximum profit while thinking about
transaction fees. We use a dynamic programming approach to keep our
space and time use low. For more on dynamic programming, you can check
<a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Dynamic
Programming - Fibonacci Number</a> or <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-maximum-subarray-kadanes-algorithm-easy.html">Dynamic
Programming - Maximum Subarray</a>.</p>
<h2
id="c-solution-for-maximum-profit-in-stock-trading-with-transaction-fee">C++
Solution for Maximum Profit in Stock Trading with Transaction Fee</h2>
<p>We will solve the problem of making the most profit in stock trading
with a transaction fee using C++. We will use a simple method called
dynamic programming. The main idea is to watch two states. One state is
the maximum profit if we own a stock. The other state is the maximum
profit if we do not own a stock.</p>
<h3 id="algorithm">Algorithm</h3>
<ol type="1">
<li><strong>Define State Variables</strong>:
<ul>
<li><code>hold</code>: This is the maximum profit when we hold a
stock.</li>
<li><code>cash</code>: This is the maximum profit when we do not hold a
stock.</li>
</ul></li>
<li><strong>State Transition</strong>:
<ul>
<li>When we hold a stock, we can either keep holding it or sell it. If
we sell, our profit is <code>cash + prices[i] - fee</code>.</li>
<li>When we do not hold a stock, we can either keep not holding it or
buy a stock. If we buy, our profit is
<code>hold - prices[i]</code>.</li>
</ul></li>
<li><strong>Initialization</strong>:
<ul>
<li>We set <code>hold</code> to negative infinity. At first, we cannot
hold any stock.</li>
<li>We set <code>cash</code> to <code>0</code> because if we do not own
any stock, our profit is zero.</li>
</ul></li>
<li><strong>Iterate through the prices</strong>:
<ul>
<li>We will update <code>hold</code> and <code>cash</code> based on the
rules we defined earlier.</li>
</ul></li>
</ol>
<h3 id="c-code">C++ Code</h3>
<p>Here is the C++ code for this method:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;algorithm&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Solution <span class="op">{</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> maxProfit<span class="op">(</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;&amp;</span> prices<span class="op">,</span> <span class="dt">int</span> fee<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> hold <span class="op">=</span> INT_MIN<span class="op">;</span>  <span class="co">// Maximum profit when holding a stock</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> cash <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>        <span class="co">// Maximum profit when not holding a stock</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> price <span class="op">:</span> prices<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Update the states</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>            hold <span class="op">=</span> <span class="bu">std::</span>max<span class="op">(</span>hold<span class="op">,</span> cash <span class="op">-</span> price<span class="op">);</span>  <span class="co">// Buy stock</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>            cash <span class="op">=</span> <span class="bu">std::</span>max<span class="op">(</span>cash<span class="op">,</span> hold <span class="op">+</span> price <span class="op">-</span> fee<span class="op">);</span>  <span class="co">// Sell stock</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> cash<span class="op">;</span>  <span class="co">// Maximum profit when not holding a stock at the end</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<h3 id="explanation-of-the-code-1">Explanation of the Code</h3>
<ul>
<li>We start by setting <code>hold</code> to <code>INT_MIN</code>. This
means we begin without any stocks.</li>
<li>We go through each price in the <code>prices</code> array. Then we
update our <code>hold</code> and <code>cash</code> values based on the
current price.</li>
<li>In the end, we return <code>cash</code>. This shows the maximum
profit we can have without holding any stock.</li>
</ul>
<p>This method using dynamic programming helps us understand the stock
trading problem with transaction fees. It lets us find the maximum
profit in a smart way. For more details about dynamic programming, you
can visit <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-maximum-profit-in-job-scheduling-medium.html">Dynamic
Programming - Maximum Profit in Job Scheduling</a>.</p>
<h2 id="comparative-analysis-of-different-approaches">Comparative
Analysis of Different Approaches</h2>
<p>We can solve the problem of finding the maximum profit in stock
trading with transaction fees using different methods. Each method has
its own good and bad points. Here is a simple comparison of these
methods.</p>
<h3 id="brute-force-approach">1. Brute Force Approach</h3>
<ul>
<li><strong>Time Complexity</strong>: O(2^n)</li>
<li><strong>Space Complexity</strong>: O(1)</li>
<li><strong>Description</strong>: This method tries all possible
transactions one by one. It checks each buy-sell pair. This makes it
slow for larger datasets.</li>
</ul>
<h3 id="dynamic-programming-approach">2. Dynamic Programming
Approach</h3>
<ul>
<li><p><strong>Time Complexity</strong>: O(n)</p></li>
<li><p><strong>Space Complexity</strong>: O(n)</p></li>
<li><p><strong>Description</strong>: We use a DP table to save results
from smaller problems. We define the state as:</p>
<ul>
<li><code>cash[i]</code> is the maximum profit at day <code>i</code>
when we do not hold stock.</li>
<li><code>hold[i]</code> is the maximum profit at day <code>i</code>
when we hold stock.</li>
</ul>
<p>The equations are:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>cash<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>cash<span class="op">[</span>i<span class="op">-</span><span class="dv">1</span><span class="op">],</span> hold<span class="op">[</span>i<span class="op">-</span><span class="dv">1</span><span class="op">]</span> <span class="op">+</span> prices<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> fee<span class="op">);</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>hold<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>hold<span class="op">[</span>i<span class="op">-</span><span class="dv">1</span><span class="op">],</span> cash<span class="op">[</span>i<span class="op">-</span><span class="dv">1</span><span class="op">]</span> <span class="op">-</span> prices<span class="op">[</span>i<span class="op">]);</span></span></code></pre></div></li>
</ul>
<h3 id="optimized-dynamic-programming">3. Optimized Dynamic
Programming</h3>
<ul>
<li><p><strong>Time Complexity</strong>: O(n)</p></li>
<li><p><strong>Space Complexity</strong>: O(1)</p></li>
<li><p><strong>Description</strong>: Here, we do not save results for
all days. We only keep track of the last two days using two variables.
This saves space and makes it faster:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cash <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> hold <span class="op">=</span> <span class="op">-</span>prices<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> prices<span class="op">.</span><span class="fu">length</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    cash <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>cash<span class="op">,</span> hold <span class="op">+</span> prices<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> fee<span class="op">);</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    hold <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>hold<span class="op">,</span> cash <span class="op">-</span> prices<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
</ul>
<h3 id="greedy-approach">4. Greedy Approach</h3>
<ul>
<li><strong>Time Complexity</strong>: O(n)</li>
<li><strong>Space Complexity</strong>: O(1)</li>
<li><strong>Description</strong>: This method does not work very well
for this problem. It is better when there are no transaction fees or
when they are very small. It looks for local best choices which do not
always give a global best.</li>
</ul>
<h3 id="memoization">5. Memoization</h3>
<ul>
<li><strong>Time Complexity</strong>: O(n)</li>
<li><strong>Space Complexity</strong>: O(n)</li>
<li><strong>Description</strong>: This method saves results from
recursive calls. It helps to avoid doing the same calculations over and
over. It makes the brute force approach faster by storing results.</li>
</ul>
<h3 id="summary-of-comparisons">Summary of Comparisons:</h3>
<ul>
<li><strong>Efficiency</strong>: The dynamic programming methods, both
standard and optimized, are much better than brute force.</li>
<li><strong>Space Usage</strong>: The optimized DP method uses less
space by not needing a full DP table.</li>
<li><strong>Ease of Implementation</strong>: Brute force and memoization
are simpler for small datasets, but they do not work well when data
grows.</li>
</ul>
<p>By looking at these methods, we see that dynamic programming is the
best choice for finding the maximum profit in stock trading with
transaction fees. It works well in both time and space. For more about
dynamic programming, check this link <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Dynamic
Programming - Fibonacci Number</a>.</p>
<h2
id="optimizing-space-complexity-in-dynamic-programming-solutions">Optimizing
Space Complexity in Dynamic Programming Solutions</h2>
<p>In dynamic programming, it is important to optimize space complexity.
This helps us improve the efficiency of algorithms. This is especially
true when we work with large datasets. We can use some strategies to
reduce space usage in our dynamic programming solutions.</p>
<ol type="1">
<li><p><strong>State Reduction</strong>: We should check if we really
need all states for our calculation. Often, only a few states are enough
to find the next state. For example, in the Fibonacci sequence, we do
not need to store all previous values. We only need the last two
values.</p></li>
<li><p><strong>In-Place Updates</strong>: If we can, we should update
the array in place. This way, we do not use extra space. We often use
this method in problems like “Maximum Subarray Sum” where we only need
the current and previous results.</p></li>
<li><p><strong>Sliding Window Technique</strong>: In problems with
sequences, we can use a sliding window approach. This helps us keep only
the necessary elements. We can discard those that we do not need
anymore.</p></li>
<li><p><strong>Iterative Approach</strong>: We can change recursive
methods to iterative ones. This way, we often use one array or just a
few variables to store results. We see this in the “Climbing Stairs”
problem.</p></li>
</ol>
<h3 id="example-fibonacci-sequence">Example: Fibonacci Sequence</h3>
<p>Instead of using an array for all Fibonacci numbers, we can optimize
to use two variables:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">int</span> <span class="fu">fib</span><span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="cf">return</span> n<span class="op">;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> i <span class="op">&lt;=</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> temp <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> b<span class="op">;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="example-maximum-profit-in-stock-trading">Example: Maximum Profit
in Stock Trading</h3>
<p>In the stock trading problem with transaction fees, we can optimize
space by using two variables. These track the two states we need:
holding stock and not holding stock.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices, fee):</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    sell, buy <span class="op">=</span> <span class="dv">0</span>, <span class="bu">float</span>(<span class="st">&#39;-inf&#39;</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> price <span class="kw">in</span> prices:</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>        buy <span class="op">=</span> <span class="bu">max</span>(buy, sell <span class="op">-</span> price <span class="op">-</span> fee)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>        sell <span class="op">=</span> <span class="bu">max</span>(sell, buy <span class="op">+</span> price)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sell</span></code></pre></div>
<h3 id="example-climbing-stairs">Example: Climbing Stairs</h3>
<p>With space optimization, we can reduce the space from an array to two
variables:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> climbStairs<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">2</span><span class="op">)</span> <span class="cf">return</span> n<span class="op">;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> first <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> second <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> i <span class="op">&lt;=</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> temp <span class="op">=</span> second<span class="op">;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>        second <span class="op">=</span> first <span class="op">+</span> second<span class="op">;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>        first <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> second<span class="op">;</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>By using these techniques, we can greatly reduce space complexity.
This helps us keep the quality of our dynamic programming approach. We
end up with more efficient algorithms. For more information on related
dynamic programming problems, we can check out <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">this
article on Fibonacci numbers</a> or <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-climbing-stairs-easy.html">this
one on climbing stairs</a>.</p>
<h2
id="handling-edge-cases-in-stock-trading-profit-calculation">Handling
Edge Cases in Stock Trading Profit Calculation</h2>
<p>When we calculate the maximum profit in stock trading with a
transaction fee, we need to think about different edge cases. These edge
cases can happen because of market changes, transaction limits, and
problems with inputs. Here are the important edge cases we should
handle:</p>
<ul>
<li><p><strong>Empty Prices Array</strong>: If the prices array is
empty, we should return a maximum profit of 0. There are no transactions
we can do.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>prices<span class="op">.</span><span class="fu">length</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div></li>
<li><p><strong>Single Price Entry</strong>: If there is just one price
in the array, we cannot make any transactions. So the profit is 0.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>prices<span class="op">.</span><span class="fu">length</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div></li>
<li><p><strong>High Transaction Fee</strong>: If the transaction fee is
as much or more than the difference between the highest and lowest
prices, it might be better to not trade at all.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="bu">max</span>(prices) <span class="op">-</span> <span class="bu">min</span>(prices) <span class="op">&lt;=</span> fee) <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div></li>
<li><p><strong>Consistent Price Decline</strong>: If the prices keep
going down, the maximum profit should also be 0. We cannot make any
profitable transactions.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> prices<span class="op">.</span><span class="fu">length</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>prices<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> prices<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> <span class="co">// No profit possible</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
<li><p><strong>Immediate Profit After Fee</strong>: If there is a price
jump right after buying, we need to make sure the profit calculation
includes the transaction fee. This can make the profit negative.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (prices[i] <span class="op">-</span> prices[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">&gt;</span> fee) {</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    profit <span class="op">+=</span> prices[i] <span class="op">-</span> prices[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">-</span> fee<span class="op">;</span> <span class="op">//</span> Account <span class="cf">for</span> fee</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p><strong>Alternating Price Fluctuations</strong>: We should handle
cases where prices go up and down often. This can create chances to buy
and sell. The algorithm must make sure we do not make unnecessary
transactions because of high fees.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> prices<span class="op">.</span><span class="fu">length</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>prices<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> prices<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">+</span> fee<span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Execute buy-sell logic</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
</ul>
<p>By adding these edge cases into our stock trading profit calculation,
we can make our solution stronger and more accurate. This way, we can
handle real-world situations better.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3
id="what-is-the-dynamic-programming-approach-to-maximize-profit-in-stock-trading-with-transaction-fees">1.
What is the dynamic programming approach to maximize profit in stock
trading with transaction fees?</h3>
<p>The dynamic programming way to get the most profit in stock trading
with transaction fees uses a method to track profits. We look at two
states: holding a stock and not holding a stock. As we go through the
prices, we think about the transaction fee when we buy or sell. This
way, we can find the best profit quickly. This method uses past results
to help us figure out future profits.</p>
<h3
id="how-do-i-implement-the-maximum-profit-algorithm-with-transaction-fee-in-java">2.
How do I implement the maximum profit algorithm with transaction fee in
Java?</h3>
<p>To implement the maximum profit algorithm with transaction fee in
Java, we can use a dynamic programming way. We keep two variables to
show the maximum profit. One is for when we hold stocks and the other
for when we do not. As we go through the list of prices, we update these
variables while thinking about the transaction fee. For more details,
check the <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-best-time-to-buy-and-sell-stock-with-cooldown-medium.html">Java
Implementation of Maximum Profit in Stock Trading with Transaction
Fee</a>.</p>
<h3
id="can-i-solve-the-maximum-profit-problem-with-transaction-fees-using-python">3.
Can I solve the maximum profit problem with transaction fees using
Python?</h3>
<p>Yes, we can solve the maximum profit problem with transaction fees
using Python. We apply a dynamic programming method. Just like in other
languages, we keep two states for profit calculation: one for holding a
stock and one for not holding a stock. This helps us find the best
profit while thinking about transaction fees. For a full Python code
example, look at the article.</p>
<h3
id="what-are-the-common-edge-cases-to-consider-when-calculating-stock-trading-profits">4.
What are the common edge cases to consider when calculating stock
trading profits?</h3>
<p>Some common edge cases when we calculate stock trading profits with
transaction fees are when there are no prices given, when prices go down
all the time (so we can’t make any profit), or when the transaction fee
is high compared to price changes. We need to handle these cases right
to make sure our algorithm works well in many real trading
situations.</p>
<h3
id="how-can-i-optimize-space-complexity-in-the-maximum-profit-algorithm">5.
How can I optimize space complexity in the maximum profit
algorithm?</h3>
<p>To optimize space complexity in the maximum profit algorithm with
transaction fees, we can use fewer arrays. Instead, we can just use two
variables to show the current states of holding and not holding stocks.
This way, we use less memory but still keep the same time complexity.
This makes our algorithm better for big datasets. For more tips on space
optimization in dynamic programming, look at the comparative analysis
section of the article.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            