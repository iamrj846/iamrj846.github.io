
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            
            <title>[Dynamic Programming] Maximum Profit from Stock Trading with Multiple Transactions and Cooldown - Hard</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Common CSS & Icons -->
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
<link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
<link rel="stylesheet" href="/assets/css/post.css">
            <meta name="description" content="Learn to maximize profits in stock trading with dynamic programming techniques, focusing on multiple transactions and cooldown strategies.">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">[Dynamic Programming] Maximum Profit from Stock Trading with Multiple Transactions and Cooldown - Hard</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Dynamic programming is a strong tool we can use to solve problems
where we want to get the best result. One example is finding the Maximum
Profit from Stock Trading with Multiple Transactions and a Cooldown
period. The main aim is to make the most money from buying and selling
stocks while following a rule that says we must wait after we sell a
stock. We can solve this problem well with dynamic programming. We can
break it down into smaller parts and keep track of results we’ve already
calculated. This way, we do not waste time repeating calculations.</p>
<p>In this article, we will look closely at the Maximum Profit from
Stock Trading problem. We will explain the problem statement and its
rules. We will also talk about advanced dynamic programming methods to
find the best solution. We will show how to implement this in Java,
Python, and C++. We will also share tips on how to save space when using
dynamic programming. Finally, we will compare different methods, looking
at their performance and complexity.</p>
<ul>
<li>[Dynamic Programming] Maximum Profit from Stock Trading with
Multiple Transactions and Cooldown - Advanced Techniques</li>
<li>Understanding the Problem Statement and Constraints</li>
<li>Dynamic Programming Approach for Maximum Profit</li>
<li>Java Implementation of Maximum Profit from Stock Trading</li>
<li>Python Implementation of Maximum Profit from Stock Trading</li>
<li>C++ Implementation of Maximum Profit from Stock Trading</li>
<li>Optimizing Space Complexity in Dynamic Programming</li>
<li>Comparative Analysis of Different Approaches</li>
<li>Performance and Complexity Analysis</li>
<li>Frequently Asked Questions</li>
</ul>
<p>If we want to improve our skills in dynamic programming, we can check
out more articles. Good ones are <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Fibonacci
Number</a> and <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-best-time-to-buy-and-sell-stock-with-cooldown-medium.html">Best
Time to Buy and Sell Stock with Cooldown</a>.</p>
<h2
id="understanding-the-problem-statement-and-constraints">Understanding
the Problem Statement and Constraints</h2>
<p>We want to maximize profit from stock trading. We can make many
transactions but we have a cooldown period. Here is what we need to
know:</p>
<ul>
<li><strong>Input</strong>: We have an array of integers. Each number
shows the stock price for a day.</li>
<li><strong>Constraints</strong>:
<ul>
<li>We can buy and sell many times.</li>
<li>After selling, we cannot buy on the next day. This means we have a
cooldown of one day.</li>
<li>Our job is to find out the maximum profit we can make with these
rules.</li>
</ul></li>
</ul>
<h3 id="problem-breakdown">Problem Breakdown</h3>
<ol type="1">
<li><strong>Buy and Sell</strong>: We can buy stocks on any day. We can
sell on any day after we buy.</li>
<li><strong>Cooldown</strong>: After we sell, we need to skip the next
day before we can buy again.</li>
<li><strong>Goal</strong>: We want to get the biggest total profit from
the stock prices given.</li>
</ol>
<h3 id="example">Example</h3>
<p>Let’s look at this example of stock prices:</p>
<pre><code>Prices: [1, 2, 3, 0, 2]</code></pre>
<ul>
<li>We buy on day 0 and sell on day 2. Profit = 3 - 1 = 2.</li>
<li>Then we have cooldown on day 3 (we don’t buy).</li>
<li>We buy on day 4 and sell on day 4. Profit = 2 - 0 = 2.</li>
</ul>
<p>So the max profit is 2 + 2 = 4.</p>
<h3 id="constraints">Constraints</h3>
<ul>
<li>The prices array can be very long, up to 10,000.</li>
<li>Prices can change a lot, which makes trading decisions hard.</li>
</ul>
<p>To solve this problem in a good way, we can use dynamic programming.
This will help us track the maximum profit while following the cooldown
rule.</p>
<p>This problem works well with dynamic programming methods. It is like
problems such as <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-maximum-profit-in-job-scheduling-medium.html">Maximum
Profit in Job Scheduling</a> or <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-best-time-to-buy-and-sell-stock-with-cooldown-medium.html">Best
Time to Buy and Sell Stock with Cooldown</a>.</p>
<h2 id="dynamic-programming-approach-for-maximum-profit">Dynamic
Programming Approach for Maximum Profit</h2>
<p>We can solve the problem of getting the most profit from stock
trading with many transactions and a waiting period using dynamic
programming. The main idea is to keep track of states that show possible
outcomes each day. This includes buying, selling, or resting.</p>
<h3 id="problem-definition">Problem Definition</h3>
<p>We have an array of prices. Here, <code>prices[i]</code> is the price
of a stock on the <code>i-th</code> day. Our goal is to find the highest
profit we can make with these rules: - We can buy and sell the stock
many times. - After we sell a stock, we must wait one day before buying
again (this is the cooldown).</p>
<h3 id="state-definition">State Definition</h3>
<p>We define three states to show the maximum profit: -
<code>cash[i]</code>: The maximum profit on day <code>i</code> when we
do not own any stock. - <code>hold[i]</code>: The maximum profit on day
<code>i</code> when we own a stock. - We can get <code>cash[i]</code>
from either <code>cash[i-1]</code> (staying in cash) or
<code>hold[i-1] + prices[i]</code> (selling the stock today). - We can
get <code>hold[i]</code> from either <code>hold[i-1]</code> (keeping the
stock) or <code>cash[i-1] - prices[i]</code> (buying the stock
today).</p>
<h3 id="recurrence-relations">Recurrence Relations</h3>
<p>We can write the transitions as: -
<code>cash[i] = max(cash[i-1], hold[i-1] + prices[i])</code> -
<code>hold[i] = max(hold[i-1], cash[i-2] - prices[i])</code></p>
<p>This way, we follow the cooldown rule after a sale by using
<code>cash[i-2]</code>.</p>
<h3 id="initialization">Initialization</h3>
<ul>
<li><code>cash[0] = 0</code> (no trades, no profit)</li>
<li><code>hold[0] = -prices[0]</code> (we buy the stock on the first
day)</li>
</ul>
<h3 id="implementation">Implementation</h3>
<p>Here is the dynamic programming solution in Python:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> prices:</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(prices)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    cash <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> n</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    hold <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> n</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    hold[<span class="dv">0</span>] <span class="op">=</span> <span class="op">-</span>prices[<span class="dv">0</span>]</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n):</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        cash[i] <span class="op">=</span> <span class="bu">max</span>(cash[i<span class="op">-</span><span class="dv">1</span>], hold[i<span class="op">-</span><span class="dv">1</span>] <span class="op">+</span> prices[i])</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        hold[i] <span class="op">=</span> <span class="bu">max</span>(hold[i<span class="op">-</span><span class="dv">1</span>], cash[i<span class="op">-</span><span class="dv">2</span>] <span class="op">-</span> prices[i] <span class="cf">if</span> i <span class="op">&gt;</span> <span class="dv">1</span> <span class="cf">else</span> <span class="op">-</span>prices[i])</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cash[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>prices <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">2</span>]</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(maxProfit(prices))  <span class="co"># Output: 3</span></span></code></pre></div>
<h3 id="space-optimization">Space Optimization</h3>
<p>The above code uses O(n) space. But we can make it better to O(1) by
only keeping the last two states of <code>cash</code> and
<code>hold</code>.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> prices:</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    cash, hold, prev_cash <span class="op">=</span> <span class="dv">0</span>, <span class="bu">float</span>(<span class="st">&#39;-inf&#39;</span>), <span class="dv">0</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> price <span class="kw">in</span> prices:</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        temp <span class="op">=</span> cash</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        cash <span class="op">=</span> <span class="bu">max</span>(cash, hold <span class="op">+</span> price)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        hold <span class="op">=</span> <span class="bu">max</span>(hold, prev_cash <span class="op">-</span> price)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        prev_cash <span class="op">=</span> temp</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cash</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>prices <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">2</span>]</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(maxProfit(prices))  <span class="co"># Output: 3</span></span></code></pre></div>
<p>This dynamic programming way helps us find the best profit from stock
trading while following the cooldown rule. It is good for real-life
trading situations. For more problems like this, we can check articles
on <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-best-time-to-buy-and-sell-stock-with-cooldown-medium.html">Dynamic
Programming: Best Time to Buy and Sell Stock with Cooldown</a>.</p>
<h2 id="java-implementation-of-maximum-profit-from-stock-trading">Java
Implementation of Maximum Profit from Stock Trading</h2>
<p>We can solve the problem of getting the most profit from stock
trading with many transactions and a cooldown time. We use a dynamic
programming method. In this way, we will keep track of three states:</p>
<ol type="1">
<li><strong>hold</strong>: The most profit we can have when we are
holding a stock.</li>
<li><strong>sold</strong>: The most profit we can have after we sell a
stock.</li>
<li><strong>rest</strong>: The most profit we can have when we are
resting (not holding or selling).</li>
</ol>
<p>The changes between states are like this:</p>
<ul>
<li>From the <strong>hold</strong> state, we can stay in
<strong>hold</strong> or move to <strong>sold</strong> by selling the
stock.</li>
<li>From the <strong>sold</strong> state, we can go to
<strong>rest</strong> or back to <strong>hold</strong> if we buy a new
stock after the cooldown.</li>
<li>From the <strong>rest</strong> state, we can move to
<strong>hold</strong> (buy a stock) or stay in
<strong>rest</strong>.</li>
</ul>
<p>Here is the Java code for this approach:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> StockTrading <span class="op">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">maxProfit</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> prices<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>prices <span class="op">==</span> <span class="kw">null</span> <span class="op">||</span> prices<span class="op">.</span><span class="fu">length</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> n <span class="op">=</span> prices<span class="op">.</span><span class="fu">length</span><span class="op">;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> hold <span class="op">=</span> <span class="bu">Integer</span><span class="op">.</span><span class="fu">MIN_VALUE</span><span class="op">;</span> <span class="co">// Maximum profit when holding a stock</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> sold <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>                  <span class="co">// Maximum profit when stock is sold</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> rest <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>                  <span class="co">// Maximum profit when resting</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> price <span class="op">:</span> prices<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> prevSold <span class="op">=</span> sold<span class="op">;</span> <span class="co">// Store the previous sold state</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>            sold <span class="op">=</span> hold <span class="op">+</span> price<span class="op">;</span> <span class="co">// Sell stock</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>            hold <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>hold<span class="op">,</span> rest <span class="op">-</span> price<span class="op">);</span> <span class="co">// Buy stock</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>            rest <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>rest<span class="op">,</span> prevSold<span class="op">);</span> <span class="co">// Rest state</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span><span class="op">(</span>sold<span class="op">,</span> rest<span class="op">);</span> <span class="co">// Maximum profit is either sold or resting</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span><span class="op">[]</span> args<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>        StockTrading trading <span class="op">=</span> <span class="kw">new</span> <span class="fu">StockTrading</span><span class="op">();</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span><span class="op">[]</span> prices <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Maximum Profit: &quot;</span> <span class="op">+</span> trading<span class="op">.</span><span class="fu">maxProfit</span><span class="op">(</span>prices<span class="op">));</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="explanation-of-the-code">Explanation of the Code:</h3>
<p>We start by setting <code>hold</code> to
<code>Integer.MIN_VALUE</code> because we do not own any stock at the
beginning.</p>
<p>The loop goes through each day’s price. It updates the
<code>hold</code>, <code>sold</code>, and <code>rest</code> states based
on the current price.</p>
<p>At the end, we return the highest value between the <code>sold</code>
and <code>rest</code> states. This gives us the maximum profit we can
make.</p>
<p>This code works well to find the maximum profit for stock trading
with many transactions and a cooldown time using dynamic programming.
For more on similar dynamic programming problems, we can check articles
on <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-best-time-to-buy-and-sell-stock-with-cooldown-medium.html">the
best time to buy and sell stock with cooldown</a>.</p>
<h2
id="python-implementation-of-maximum-profit-from-stock-trading">Python
Implementation of Maximum Profit from Stock Trading</h2>
<p>We want to find the best way to make money from stock trading. We can
buy and sell stocks many times. But after selling, we have to wait one
day before we can buy again. We will use a method called dynamic
programming to help us. The main idea is to keep track of three
situations each day: the best profit when we have a stock, the best
profit when we do not have a stock and are not waiting, and the best
profit when we are waiting.</p>
<h3 id="problem-statement">Problem Statement</h3>
<p>We get stock prices for different days. We can buy and sell multiple
times. But after we sell a stock, we must wait one day before we can buy
again. Our goal is to get the most profit.</p>
<h3 id="dynamic-programming-approach">Dynamic Programming Approach</h3>
<p>We will use three variables: - <code>hold</code>: Best profit when we
have a stock. - <code>sold</code>: Best profit when we do not have a
stock and are not waiting. - <code>cooldown</code>: Best profit when we
are waiting.</p>
<p>The updates are: - We can change <code>hold</code> by either keeping
the same state or buying a stock from the <code>sold</code> state of the
day before. - We can change <code>sold</code> by selling a stock from
the <code>hold</code> state. - We can change <code>cooldown</code> by
moving to waiting from the <code>sold</code> state.</p>
<h3 id="python-code-implementation">Python Code Implementation</h3>
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices):</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> prices:</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(prices)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    hold, sold, cooldown <span class="op">=</span> <span class="bu">float</span>(<span class="st">&#39;-inf&#39;</span>), <span class="dv">0</span>, <span class="dv">0</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> price <span class="kw">in</span> prices:</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        prev_sold <span class="op">=</span> sold</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        sold <span class="op">=</span> hold <span class="op">+</span> price</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>        hold <span class="op">=</span> <span class="bu">max</span>(hold, cooldown <span class="op">-</span> price)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        cooldown <span class="op">=</span> <span class="bu">max</span>(cooldown, prev_sold)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">max</span>(sold, cooldown)</span></code></pre></div>
<h3 id="example-usage">Example Usage</h3>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>prices <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">2</span>]</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>profit <span class="op">=</span> maxProfit(prices)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Maximum Profit: </span><span class="sc">{</span>profit<span class="sc">}</span><span class="ss">&quot;</span>)  <span class="co"># Output: 3</span></span></code></pre></div>
<h3 id="explanation-of-the-code-1">Explanation of the Code</h3>
<ol type="1">
<li><strong>Initialization</strong>: We set <code>hold</code> to
negative infinity because we cannot hold stock at the start. We set
<code>sold</code> to 0 because we have no profit when we do not hold. We
also set <code>cooldown</code> to 0.</li>
<li><strong>Iterate Through Prices</strong>: For each price:
<ul>
<li>We change <code>sold</code> to the best of current <code>sold</code>
or previous <code>hold</code> plus the current price.</li>
<li>We change <code>hold</code> to the best of current <code>hold</code>
or <code>cooldown</code> minus the current price.</li>
<li>We change <code>cooldown</code> to the best of current
<code>cooldown</code> or the previous value of <code>sold</code>.</li>
</ul></li>
<li><strong>Return Result</strong>: We can find the best profit in
either <code>sold</code> or <code>cooldown</code>.</li>
</ol>
<p>This code works well for many transactions and waiting times using
dynamic programming. It gives us a good solution for the stock trading
problem. For more about dynamic programming, you can check <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Dynamic
Programming: Fibonacci Number</a>.</p>
<h2 id="c-implementation-of-maximum-profit-from-stock-trading">C++
Implementation of Maximum Profit from Stock Trading</h2>
<p>We can solve the problem of getting the most profit from stock
trading by using C++. We will use dynamic programming. This method helps
us keep track of how much profit we can make on different days. We look
at whether we are holding a stock or not.</p>
<h3 id="problem-definition-1">Problem Definition</h3>
<p>We have an array called <code>prices</code>. In this array,
<code>prices[i]</code> is the price of the stock on the
<code>i-th</code> day. We can buy and sell the stock many times. But
after we sell a stock, we must wait one day before we buy again.</p>
<h3 id="dynamic-programming-states">Dynamic Programming States</h3>
<ul>
<li><code>hold[i]</code>: This is the maximum profit on day
<code>i</code> when we hold a stock.</li>
<li><code>sell[i]</code>: This is the maximum profit on day
<code>i</code> when we do not hold a stock.</li>
</ul>
<h3 id="state-transitions">State Transitions</h3>
<ul>
<li><code>hold[i] = max(hold[i - 1], sell[i - 2] - prices[i])</code>
<ul>
<li>Here, we either keep holding or we buy on day <code>i</code>.</li>
</ul></li>
<li><code>sell[i] = max(sell[i - 1], hold[i - 1] + prices[i])</code>
<ul>
<li>Here, we either keep not holding or we sell on day
<code>i</code>.</li>
</ul></li>
</ul>
<h3 id="base-cases">Base Cases</h3>
<ul>
<li><code>hold[0] = -prices[0]</code>
<ul>
<li>This means we buy on the first day.</li>
</ul></li>
<li><code>sell[0] = 0</code>
<ul>
<li>There is no profit on the first day if we do not sell anything.</li>
</ul></li>
</ul>
<h3 id="c-code-implementation">C++ Code Implementation</h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;algorithm&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> std<span class="op">;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> maxProfit<span class="op">(</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;&amp;</span> prices<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>prices<span class="op">.</span>empty<span class="op">())</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> prices<span class="op">.</span>size<span class="op">();</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> hold<span class="op">(</span>n<span class="op">,</span> <span class="dv">0</span><span class="op">),</span> sell<span class="op">(</span>n<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    hold<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="op">-</span>prices<span class="op">[</span><span class="dv">0</span><span class="op">];</span> <span class="co">// This is the cost of buying the first stock</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    sell<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="co">// No profit if we haven&#39;t sold anything</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        hold<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> max<span class="op">(</span>hold<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">],</span> <span class="op">(</span>i <span class="op">&gt;</span> <span class="dv">1</span> <span class="op">?</span> sell<span class="op">[</span>i <span class="op">-</span> <span class="dv">2</span><span class="op">]</span> <span class="op">:</span> <span class="dv">0</span><span class="op">)</span> <span class="op">-</span> prices<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>        sell<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> max<span class="op">(</span>sell<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">],</span> hold<span class="op">[</span>i <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">+</span> prices<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sell<span class="op">[</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">];</span> <span class="co">// Maximum profit when we sell on the last day</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> prices <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    cout <span class="op">&lt;&lt;</span> <span class="st">&quot;Maximum Profit: &quot;</span> <span class="op">&lt;&lt;</span> maxProfit<span class="op">(</span>prices<span class="op">)</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="explanation-of-the-code-2">Explanation of the Code</h3>
<p>We start by making two vectors called <code>hold</code> and
<code>sell</code>. They are both size <code>n</code>, and they store the
maximum profit states. We go through each day and update the
<code>hold</code> and <code>sell</code> states based on our rules.</p>
<p>In the end, we find the maximum profit in <code>sell[n - 1]</code>.
This tells us the profit when we are not holding a stock at the end.</p>
<p>This way, we can find out the maximum profit from stock trading with
many transactions and a cooldown period using dynamic programming in
C++. For more details on dynamic programming, you can check out the <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-maximum-profit-in-stock-trading-with-transaction-fee-medium.html">Dynamic
Programming - Maximum Profit in Stock Trading with Transaction
Fee</a>.</p>
<h2 id="optimizing-space-complexity-in-dynamic-programming">Optimizing
Space Complexity in Dynamic Programming</h2>
<p>In dynamic programming, we often need to keep a table to save
results. This can take up a lot of space. For the Maximum Profit from
Stock Trading with Multiple Transactions and Cooldown, we can make space
use better by using some simple methods.</p>
<h3 id="space-reduction-techniques">1. Space Reduction Techniques</h3>
<ul>
<li><p><strong>Rolling Array Technique</strong>: Instead of using a big
2D array, we can use a rolling array. This is a 1D array that only
remembers the last and current states. This works well when the next
state only needs a few previous states.</p></li>
<li><p><strong>In-Place Updates</strong>: If we can, we should change
the input array directly. This saves space. We can do this when changing
the input does not change the final result.</p></li>
<li><p><strong>State Compression</strong>: We can lower the number of
dimensions in the DP states. For example, if we track states for each
transaction, we can keep only what we really need instead of a full
array for each transaction.</p></li>
</ul>
<h3 id="example-of-space-optimization-in-stock-trading-problem">2.
Example of Space Optimization in Stock Trading Problem</h3>
<p>We can show the Maximum Profit from Stock Trading with Cooldown using
dynamic programming. Here is how we can use the rolling array technique
in Python:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> prices:</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(prices)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    dp <span class="op">=</span> [[<span class="dv">0</span>] <span class="op">*</span> <span class="dv">3</span> <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(n)]</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># State definitions:</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># dp[i][0] -&gt; max profit on day i if holding a stock</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># dp[i][1] -&gt; max profit on day i if not holding a stock, but in cooldown</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># dp[i][2] -&gt; max profit on day i if not holding a stock and not in cooldown</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    dp[<span class="dv">0</span>][<span class="dv">0</span>] <span class="op">=</span> <span class="op">-</span>prices[<span class="dv">0</span>]  <span class="co"># Buy the stock</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    dp[<span class="dv">0</span>][<span class="dv">1</span>] <span class="op">=</span> <span class="dv">0</span>           <span class="co"># Cooldown</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    dp[<span class="dv">0</span>][<span class="dv">2</span>] <span class="op">=</span> <span class="dv">0</span>           <span class="co"># No stock</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n):</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>        dp[i][<span class="dv">0</span>] <span class="op">=</span> <span class="bu">max</span>(dp[i<span class="op">-</span><span class="dv">1</span>][<span class="dv">0</span>], dp[i<span class="op">-</span><span class="dv">1</span>][<span class="dv">2</span>] <span class="op">-</span> prices[i])  <span class="co"># Max profit holding stock</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        dp[i][<span class="dv">1</span>] <span class="op">=</span> dp[i<span class="op">-</span><span class="dv">1</span>][<span class="dv">0</span>] <span class="op">+</span> prices[i]                    <span class="co"># Sold stock, now in cooldown</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>        dp[i][<span class="dv">2</span>] <span class="op">=</span> <span class="bu">max</span>(dp[i<span class="op">-</span><span class="dv">1</span>][<span class="dv">1</span>], dp[i<span class="op">-</span><span class="dv">1</span>][<span class="dv">2</span>])               <span class="co"># No stock, not in cooldown</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">max</span>(dp[n<span class="op">-</span><span class="dv">1</span>][<span class="dv">1</span>], dp[n<span class="op">-</span><span class="dv">1</span>][<span class="dv">2</span>])  <span class="co"># Max profit at the end without holding a stock</span></span></code></pre></div>
<h3 id="complexity-analysis">3. Complexity Analysis</h3>
<ul>
<li><strong>Time Complexity</strong>: O(n) where n is the number of
days, or the length of the prices array.</li>
<li><strong>Space Complexity</strong>: O(1) after we use the rolling
array method. We only keep the last two states instead of a big DP
table.</li>
</ul>
<h3 id="further-reading">4. Further Reading</h3>
<p>To learn more about optimizing space in dynamic programming and
related problems, you can read about the <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Dynamic
Programming - Fibonacci Number</a> and <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-maximum-subarray-kadanes-algorithm-easy.html">Dynamic
Programming - Maximum Subarray (Kadane’s Algorithm)</a>. These topics
help us understand important ideas for making dynamic programming
solutions better.</p>
<h2 id="comparative-analysis-of-different-approaches">Comparative
Analysis of Different Approaches</h2>
<p>When we try to solve the problem of making money from stock trading
with many transactions and a cooldown time, we see that different
methods give us different results. Some are more efficient than others.
Here is a simple analysis of the main techniques:</p>
<ol type="1">
<li><strong>Dynamic Programming (DP) Approach</strong>:
<ul>
<li><p><strong>Time Complexity</strong>: O(n), where n is the number of
days.</p></li>
<li><p><strong>Space Complexity</strong>: O(1) if we optimize, O(n) if
we do not.</p></li>
<li><p><strong>Description</strong>: This method uses a formula to build
solutions based on results we got before. It keeps track of whether we
are holding stock, not holding stock, or in a cooldown period.</p></li>
<li><p><strong>Example Implementation</strong>:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices):</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> prices:</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    sold <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    held <span class="op">=</span> <span class="op">-</span>prices[<span class="dv">0</span>]</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    cooled <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> price <span class="kw">in</span> prices[<span class="dv">1</span>:]:</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        sold, held, cooled <span class="op">=</span> <span class="bu">max</span>(sold, cooled), <span class="bu">max</span>(held, cooled <span class="op">-</span> price), sold <span class="op">+</span> price</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">max</span>(sold, cooled)</span></code></pre></div></li>
</ul></li>
<li><strong>Greedy Approach</strong>:
<ul>
<li><strong>Time Complexity</strong>: O(n).</li>
<li><strong>Space Complexity</strong>: O(1).</li>
<li><strong>Description</strong>: This method tries to make the best
choice at every step. We hope it will find the best overall solution.
But it does not always work well for stock trading since it does not
look at future prices properly.</li>
<li><strong>Limitations</strong>: It fails when we need to think about
future prices to make more profit.</li>
</ul></li>
<li><strong>Brute Force Approach</strong>:
<ul>
<li><p><strong>Time Complexity</strong>: O(2^n).</p></li>
<li><p><strong>Space Complexity</strong>: O(n) because of the recursion
stack.</p></li>
<li><p><strong>Description</strong>: This method makes all possible
transactions and calculates profits for each one. It is easy to
understand but takes a lot of time and is not good for larger data
sets.</p></li>
<li><p><strong>Example Implementation</strong>:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices, index<span class="op">=</span><span class="dv">0</span>, holding<span class="op">=</span><span class="va">False</span>):</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> index <span class="op">&gt;=</span> <span class="bu">len</span>(prices):</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> holding:</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>        sell <span class="op">=</span> prices[index] <span class="op">+</span> maxProfit(prices, index <span class="op">+</span> <span class="dv">2</span>, <span class="va">False</span>)  <span class="co"># Cooldown</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        skip <span class="op">=</span> maxProfit(prices, index <span class="op">+</span> <span class="dv">1</span>, <span class="va">True</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">max</span>(sell, skip)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        buy <span class="op">=</span> <span class="op">-</span>prices[index] <span class="op">+</span> maxProfit(prices, index <span class="op">+</span> <span class="dv">1</span>, <span class="va">True</span>)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        skip <span class="op">=</span> maxProfit(prices, index <span class="op">+</span> <span class="dv">1</span>, <span class="va">False</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">max</span>(buy, skip)</span></code></pre></div></li>
</ul></li>
<li><strong>Memoization Approach</strong>:
<ul>
<li><p><strong>Time Complexity</strong>: O(n).</p></li>
<li><p><strong>Space Complexity</strong>: O(n) to store
results.</p></li>
<li><p><strong>Description</strong>: This is a change of the brute force
method. We keep results we calculated before to avoid doing the same
work again. This makes it faster.</p></li>
<li><p><strong>Example Implementation</strong>:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices):</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    memo <span class="op">=</span> {}</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> dp(index, holding):</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> index <span class="op">&gt;=</span> <span class="bu">len</span>(prices):</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (index, holding) <span class="kw">in</span> memo:</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> memo[(index, holding)]</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> holding:</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>            sell <span class="op">=</span> prices[index] <span class="op">+</span> dp(index <span class="op">+</span> <span class="dv">2</span>, <span class="va">False</span>)  <span class="co"># Cooldown</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>            skip <span class="op">=</span> dp(index <span class="op">+</span> <span class="dv">1</span>, <span class="va">True</span>)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>            memo[(index, holding)] <span class="op">=</span> <span class="bu">max</span>(sell, skip)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>            buy <span class="op">=</span> <span class="op">-</span>prices[index] <span class="op">+</span> dp(index <span class="op">+</span> <span class="dv">1</span>, <span class="va">True</span>)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>            skip <span class="op">=</span> dp(index <span class="op">+</span> <span class="dv">1</span>, <span class="va">False</span>)</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>            memo[(index, holding)] <span class="op">=</span> <span class="bu">max</span>(buy, skip)</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> memo[(index, holding)]</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dp(<span class="dv">0</span>, <span class="va">False</span>)</span></code></pre></div></li>
</ul></li>
<li><strong>Comparative Summary</strong>:
<ul>
<li>The <strong>Dynamic Programming approach</strong> is the best for
this problem. It is good in both time and space, especially when we
optimize it.</li>
<li>The <strong>Greedy approach</strong> is not good. It does not handle
future dependencies well.</li>
<li>The <strong>Brute Force method</strong> helps us understand the
problem, but it is not practical in real life.</li>
<li>The <strong>Memoization technique</strong> is a good mix of brute
force and dynamic programming. But it uses more space.</li>
</ul></li>
</ol>
<p>For more about dynamic programming, you can check out <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-fibonacci-number-easy.html">Dynamic
Programming: Fibonacci Number</a> or <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-maximum-subarray-kadanes-algorithm-easy.html">Dynamic
Programming: Maximum Subarray (Kadane’s Algorithm)</a>.</p>
<h2 id="performance-and-complexity-analysis">Performance and Complexity
Analysis</h2>
<p>We can look at how well the Dynamic Programming method works for
finding the maximum profit from stock trading. This includes multiple
transactions and a cooldown time. We will check the time complexity and
space complexity.</p>
<h3 id="time-complexity">Time Complexity</h3>
<p>The time complexity for our dynamic programming solution is O(n).
Here, n is the number of days or how long the stock prices array is. We
go through the prices array one time. At each step, we find the maximum
profit using values from before.</p>
<h3 id="space-complexity">Space Complexity</h3>
<p>We can make the space complexity O(1). We do this by only keeping the
last two states we need. Instead of saving a whole DP array, we track
the maximum profit from the previous day and the day before the last
transaction.</p>
<h3 id="detailed-complexity-breakdown">Detailed Complexity
Breakdown</h3>
<ol type="1">
<li><strong>Transition States</strong>:
<ul>
<li>Let <code>hold</code> be the maximum profit while we hold a
stock.</li>
<li>Let <code>sell</code> be the maximum profit when we do not hold a
stock, meaning we have sold it.</li>
<li>The rules are:
<ul>
<li><code>hold = max(hold, sell - prices[i])</code></li>
<li><code>sell = max(sell, hold + prices[i])</code></li>
</ul></li>
</ul></li>
<li><strong>Implementation</strong>:
<ul>
<li>With these rules, we can find the values quickly in one go.</li>
</ul></li>
</ol>
<h3 id="example-1">Example</h3>
<p>For stock prices <code>[1, 2, 3, 0, 2]</code>: - On day 0 (price 1):
<code>hold = -1</code>, <code>sell = 0</code> - On day 1 (price 2):
<code>hold = -1</code>, <code>sell = 1</code> - On day 2 (price 3):
<code>hold = -1</code>, <code>sell = 2</code> - On day 3 (price 0):
<code>hold = 2</code>, <code>sell = 2</code> - On day 4 (price 2):
<code>hold = 2</code>, <code>sell = 4</code> (this is the maximum
profit)</p>
<h3 id="conclusion">Conclusion</h3>
<p>We see that the dynamic programming method works well for getting the
maximum profit from stock trading with many transactions and a cooldown
time. It uses O(n) time and O(1) space when we optimize it. For more
details on similar dynamic programming ideas, we can look at articles
like <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-maximum-profit-in-job-scheduling-medium.html">Dynamic
Programming: Maximum Profit in Job Scheduling</a> and <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-best-time-to-buy-and-sell-stock-with-cooldown-medium.html">Dynamic
Programming: Best Time to Buy and Sell Stock with Cooldown</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3
id="what-is-the-maximum-profit-from-stock-trading-with-multiple-transactions-and-cooldown">1.
What is the maximum profit from stock trading with multiple transactions
and cooldown?</h3>
<p>We can find the maximum profit from stock trading with many
transactions and a cooldown using dynamic programming. We track profits
during different stages. These stages are buying, selling, and resting.
This way, we can make the most money while following the cooldown rule
after a sale. This is very important for good stock trading.</p>
<h3
id="how-does-the-dynamic-programming-approach-work-for-stock-trading">2.
How does the dynamic programming approach work for stock trading?</h3>
<p>The dynamic programming approach for stock trading breaks the big
problem into smaller ones. We store past results to avoid doing the same
work again. By setting states for buying, selling, and resting, the
algorithm updates the highest profit step by step. In the end, we get
the best solution for maximum profit from stock trading while including
cooldown times.</p>
<h3
id="can-you-explain-the-time-complexity-of-the-stock-trading-problem">3.
Can you explain the time complexity of the stock trading problem?</h3>
<p>The time complexity for finding the maximum profit from stock trading
with many transactions and cooldowns using dynamic programming is O(n).
Here, n is the number of days. This is fast because we look at each
day’s price only once. This makes it work well even for larger data,
which is important for stock trading in real time.</p>
<h3
id="are-there-any-space-optimization-techniques-for-this-stock-trading-problem">4.
Are there any space optimization techniques for this stock trading
problem?</h3>
<p>Yes, we can use space optimization techniques like a rolling array.
This can lower the space needed for the dynamic programming solution for
maximum profit in stock trading. Instead of using a big 2D array, we
just need two variables to keep track of past states. This lets the
algorithm run with O(1) space complexity while still doing well.</p>
<h3
id="how-can-i-implement-the-maximum-profit-stock-trading-solution-in-python">5.
How can I implement the maximum profit stock trading solution in
Python?</h3>
<p>To implement the maximum profit from stock trading with many
transactions and a cooldown in Python, we can create a function that
uses dynamic programming. Here is a simple version of the algorithm:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maxProfit(prices):</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> prices:</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(prices)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    buy, sell, cooldown <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> n, [<span class="dv">0</span>] <span class="op">*</span> n, [<span class="dv">0</span>] <span class="op">*</span> n</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    buy[<span class="dv">0</span>] <span class="op">=</span> <span class="op">-</span>prices[<span class="dv">0</span>]</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n):</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>        buy[i] <span class="op">=</span> <span class="bu">max</span>(buy[i <span class="op">-</span> <span class="dv">1</span>], cooldown[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">-</span> prices[i])</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>        sell[i] <span class="op">=</span> <span class="bu">max</span>(sell[i <span class="op">-</span> <span class="dv">1</span>], buy[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> prices[i])</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>        cooldown[i] <span class="op">=</span> <span class="bu">max</span>(cooldown[i <span class="op">-</span> <span class="dv">1</span>], sell[i <span class="op">-</span> <span class="dv">1</span>])</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">max</span>(sell[<span class="op">-</span><span class="dv">1</span>], cooldown[<span class="op">-</span><span class="dv">1</span>])</span></code></pre></div>
<p>This code finds the maximum profit while thinking about cooldown
periods. It shows how strong dynamic programming is in stock trading.
For more tough stock trading problems, you can look at the article on
the <a
href="https://bestonlinetutorial.com/dynamic_programming/dynamic-programming-best-time-to-buy-and-sell-stock-with-cooldown-medium.html">best
time to buy and sell stock with cooldown</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            