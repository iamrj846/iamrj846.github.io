
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            
            <title>Redis command to get all available keys? - redis</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Common CSS & Icons -->
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
<link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
<link rel="stylesheet" href="/assets/css/post.css">
            <meta name="description" content="Discover the Redis command to retrieve all available keys efficiently. Boost your Redis skills with our comprehensive guide!">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">Redis command to get all available keys? - redis</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>To get all keys in Redis, we can use the <code>KEYS *</code> command.
This command gets all keys in your Redis database. It is easy to use and
works well for small data sets. But if we have a lot of data, this
command can slow things down because it stops everything for a
while.</p>
<p>For a better way, we can use the <code>SCAN</code> command. This
command lets us go through the keys bit by bit without stopping the
Redis server.</p>
<p>In this article, we will look at different ways to get keys in Redis.
We will talk about the <code>KEYS</code> command and how to use it.
Then, we will check the <code>SCAN</code> command for faster key
retrieval. We will also share best practices for listing all keys.</p>
<p>Moreover, we will show how to filter keys using patterns. We will
mention the limits of the <code>KEYS</code> command too. Lastly, we will
answer common questions about getting keys in Redis.</p>
<ul>
<li>Redis command to get all keys: <code>KEYS *</code></li>
<li>How we use the KEYS command in Redis to get all keys</li>
<li>Looking at the SCAN command for better key retrieval in Redis</li>
<li>Best ways to use Redis commands to list all keys</li>
<li>How to filter keys using patterns in Redis commands</li>
<li>Knowing the limits of the KEYS command in Redis</li>
<li>Common questions about Redis key retrieval</li>
</ul>
<h2
id="how-to-use-the-keys-command-in-redis-to-get-all-keys---redis">How to
use the KEYS command in Redis to get all keys? - redis</h2>
<p>To get all keys in Redis, we can use the <code>KEYS</code> command.
This command gives us all keys that match a certain pattern. If we want
to get all keys, we can use the wildcard <code>*</code> like this:</p>
<pre class="redis"><code>KEYS *</code></pre>
<p>This command will return all keys that are in the Redis database. But
we should be careful. Using the <code>KEYS</code> command in a live
environment is not a good idea. It can slow down the server, especially
if we have a lot of data.</p>
<h3 id="example">Example</h3>
<p>Let us see an example:</p>
<ol type="1">
<li><p><strong>Set some keys:</strong></p>
<pre class="redis"><code>SET key1 &quot;value1&quot;
SET key2 &quot;value2&quot;
SET key3 &quot;value3&quot;</code></pre></li>
<li><p><strong>Get all keys:</strong></p>
<pre class="redis"><code>KEYS *</code></pre>
<p>Output:</p>
<pre><code>1) &quot;key1&quot;
2) &quot;key2&quot;
3) &quot;key3&quot;</code></pre></li>
</ol>
<p>The <code>KEYS</code> command is simple to use but we must be
careful. For better and faster key retrieval, we can use the
<code>SCAN</code> command. This command works better in live
situations.</p>
<p>If we want to learn more about Redis commands, we can look at <a
href="https://bestonlinetutorial.com/redis/what-are-redis-data-types.html">Redis
Data Types</a>. This will help us understand how different data types
can work with key retrieval commands.</p>
<h2
id="exploring-the-scan-command-for-efficient-key-retrieval-in-redis">Exploring
the SCAN command for efficient key retrieval in Redis</h2>
<p>The SCAN command in Redis helps us to go through keys in a Redis
database in a better way. It is more efficient and less blocking than
the KEYS command. This is very helpful in production environments. We
want to avoid blocking the server for a long time.</p>
<h3 id="syntax">Syntax</h3>
<pre class="plaintext"><code>SCAN cursor [MATCH pattern] [COUNT count]</code></pre>
<ul>
<li><strong>cursor</strong>: This shows where we are in the scanning.
Start with 0 to begin.</li>
<li><strong>MATCH pattern</strong>: This is an optional filter to find
keys that match a specific pattern.</li>
<li><strong>COUNT count</strong>: This is an optional hint to say how
many items we want to get in each round (this is just a
suggestion).</li>
</ul>
<h3 id="example-usage">Example Usage</h3>
<p>To get keys using the SCAN command, we can use this example in the
Redis CLI:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">127.0.0.1:6379</span><span class="op">&gt;</span> SCAN 0 MATCH user:<span class="pp">*</span> COUNT 10</span></code></pre></div>
<p>This command starts scanning from cursor <code>0</code>. It looks for
keys that match the pattern <code>user:*</code>. It will try to return
up to 10 keys with each call.</p>
<h3 id="iterating-through-all-keys">Iterating Through All Keys</h3>
<p>To go through all keys, we can follow this loop until the cursor from
SCAN goes back to <code>0</code>:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> redis</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> redis.StrictRedis(host<span class="op">=</span><span class="st">&#39;localhost&#39;</span>, port<span class="op">=</span><span class="dv">6379</span>, db<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>cursor <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    cursor, keys <span class="op">=</span> client.scan(cursor<span class="op">=</span>cursor, match<span class="op">=</span><span class="st">&#39;*&#39;</span>, count<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> key <span class="kw">in</span> keys:</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(key)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> cursor <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span></code></pre></div>
<h3 id="advantages-of-scan-over-keys">Advantages of SCAN over KEYS</h3>
<ul>
<li><strong>Non-blocking</strong>: SCAN does not block the server. This
makes it good for production.</li>
<li><strong>Incremental iteration</strong>: SCAN helps us to get keys in
small parts. This is better than getting all at once and it uses less
memory.</li>
<li><strong>Pattern matching</strong>: We can filter keys with patterns.
This is like the KEYS command but safer.</li>
</ul>
<p>Using the SCAN command is a good practice for getting keys in Redis.
This is especially true when we have many keys. Performance and
responsiveness are very important. For more about Redis commands and how
to use them, check out <a
href="https://bestonlinetutorial.com/redis/what-is-redis.html">this
article on Redis commands</a>.</p>
<h2
id="best-practices-for-using-redis-commands-to-list-all-keys---redis">Best
practices for using Redis commands to list all keys? - redis</h2>
<p>When we work with Redis to list all keys, we need to follow some best
practices. This way, we can get keys quickly and easily. Here are some
important points:</p>
<ol type="1">
<li><p><strong>Use SCAN instead of KEYS</strong>: We should use the
<code>SCAN</code> command instead of the <code>KEYS</code> command. The
<code>SCAN</code> command helps us go through keys without stopping the
server. The <code>KEYS</code> command can be slow and cause problems,
especially when we have a lot of data.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">SCAN</span> 0</span></code></pre></div></li>
<li><p><strong>Limit Result Set</strong>: When we use <code>SCAN</code>,
we can limit how many keys we get back each time. We do this by using
the <code>COUNT</code> option. This helps keep memory use low and speeds
up responses.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">SCAN</span> 0 COUNT 100</span></code></pre></div></li>
<li><p><strong>Pattern Matching</strong>: We can use pattern matching
with <code>SCAN</code> to find keys we want. We can do this with the
<code>MATCH</code> option.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">SCAN</span> 0 MATCH user:<span class="pp">*</span> COUNT 100</span></code></pre></div></li>
<li><p><strong>Batch Processing</strong>: The <code>SCAN</code> command
gives us a cursor. We can use this in a loop to get all keys little by
little. This way, we do not overload the server.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>cursor <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    cursor, keys <span class="op">=</span> redis_client.scan(cursor, match<span class="op">=</span><span class="st">&#39;user:*&#39;</span>, count<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Process keys</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> cursor <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span></code></pre></div></li>
<li><p><strong>Avoiding KEYS in Production</strong>: We should not use
the <code>KEYS</code> command in production. It can give us all keys at
once, which can slow down other tasks.</p></li>
<li><p><strong>Consider Key Expiration</strong>: When we list keys, we
must remember that some keys can expire. Once they expire, we cannot see
them anymore. This can change what we find.</p></li>
<li><p><strong>Monitoring and Logging</strong>: We should set up
monitoring for Redis commands. This helps us see how often keys are used
and how well the system works.</p></li>
<li><p><strong>Use Redis Data Structures</strong>: Instead of just using
key patterns, we can use Redis data types like Sets or Hashes. This
helps us group related keys better.</p></li>
</ol>
<p>By following these best practices, we can manage key retrieval in
Redis well. This will help our application work faster and stay
responsive. For more about Redis commands and how to use them, check out
<a href="https://bestonlinetutorial.com/redis/what-is-redis.html">what
is Redis</a>.</p>
<h2 id="how-to-filter-keys-using-patterns-in-redis-commands---redis">How
to filter keys using patterns in Redis commands? - redis</h2>
<p>In Redis, we can filter keys using patterns with the
<code>KEYS</code> command or the better <code>SCAN</code> command. This
helps us to get keys that match certain rules instead of getting all
keys.</p>
<h3 id="using-the-keys-command">Using the KEYS Command</h3>
<p>The <code>KEYS</code> command gives us keys that match a certain
pattern. The pattern can use special characters:</p>
<ul>
<li><code>*</code> matches any number of characters.</li>
<li><code>?</code> matches one character.</li>
<li><code>[abc]</code> matches any one character from the letters in the
brackets.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get all keys</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">KEYS</span> <span class="pp">*</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get all keys that start with &quot;user:&quot;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="ex">KEYS</span> user:<span class="pp">*</span> </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Get all keys that end with &quot;.session&quot;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="ex">KEYS</span> <span class="pp">*</span>.session </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get all keys that contain &quot;data&quot;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="ex">KEYS</span> <span class="pp">*</span>data<span class="pp">*</span> </span></code></pre></div>
<h3 id="using-the-scan-command">Using the SCAN Command</h3>
<p>The <code>SCAN</code> command is a better choice for big datasets. It
lets us look through the keys step by step without stopping the server.
It also works with patterns.</p>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using SCAN to find keys with a pattern</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="ex">SCAN</span> 0 MATCH user:<span class="pp">*</span> COUNT 10</span></code></pre></div>
<h3 id="key-properties-and-configurations">Key Properties and
Configurations</h3>
<ul>
<li><strong>Performance:</strong> We should use <code>SCAN</code>
instead of <code>KEYS</code> in production to avoid problems with
performance.</li>
<li><strong>Incremental:</strong> <code>SCAN</code> gives us a cursor
that we can use for the next call to keep scanning.</li>
</ul>
<h3 id="important-note">Important Note</h3>
<p>We should remember that using <code>KEYS</code> in a production
environment is not good because it can block the server and slow things
down. For safer work, we prefer to use <code>SCAN</code>.</p>
<p>For more information about Redis commands and how to use them, we can
check out <a
href="https://bestonlinetutorial.com/redis/what-is-redis.html">this
article</a>.</p>
<h2
id="understanding-the-limitations-of-the-keys-command-in-redis---redis">Understanding
the limitations of the KEYS command in Redis? - redis</h2>
<p>The <code>KEYS</code> command in Redis helps us get all keys that
match a certain pattern. It is useful for debugging or during
development. But we need to be careful. There are many problems with
using it in production.</p>
<ol type="1">
<li><p><strong>Performance Impact</strong>:<br />
The <code>KEYS</code> command looks at the whole database. This makes it
O(N) in complexity. Here, N is the number of keys. If we have a lot of
data, it can slow down the system a lot.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">KEYS</span> <span class="pp">*</span></span></code></pre></div></li>
<li><p><strong>Blocking Behavior</strong>:<br />
When we run the <code>KEYS</code> command, Redis gets blocked. This can
slow down other operations. Other clients trying to use the database may
experience timeouts.</p></li>
<li><p><strong>Not Suitable for Production</strong>:<br />
Because of the performance and blocking problems, we should not use
<code>KEYS</code> in production. It can cause slow service or even
outages.</p></li>
<li><p><strong>Limited Pattern Matching</strong>:<br />
The <code>KEYS</code> command can only use simple glob-style patterns
like <code>*</code>, <code>?</code>, and <code>[abc]</code>. It does not
support complex patterns. This can limit how useful it is in some
cases.</p></li>
<li><p><strong>Alternative Recommendations</strong>:<br />
Instead of <code>KEYS</code>, we should use the <code>SCAN</code>
command. This command helps us get keys in a way that does not block
operations. It also uses less memory.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">SCAN</span> 0 MATCH pattern<span class="pp">*</span></span></code></pre></div></li>
<li><p><strong>Data Safety</strong>:<br />
Using <code>KEYS</code> can show sensitive data if we do not manage keys
well. This is especially true in multi-tenant applications.</p></li>
</ol>
<p>In short, the <code>KEYS</code> command can get all keys in Redis.
But its issues with performance, blocking, and data exposure make it not
good for production. We should use the <code>SCAN</code> command for
better and safer key retrieval.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-is-the-keys-command-in-redis-and-how-does-it-work">1. What
is the KEYS command in Redis and how does it work?</h3>
<p>We use the KEYS command in Redis to get all keys that match a certain
pattern. We can run it as <code>KEYS *</code> to get all keys in the
database. But this command can be slow on big data sets. It goes through
all the keys, which can slow things down. For better speed, we should
use the SCAN command. SCAN checks keys step by step.</p>
<h3 id="how-does-the-scan-command-differ-from-keys-in-redis">2. How does
the SCAN command differ from KEYS in Redis?</h3>
<p>The SCAN command in Redis lets us look at keys step by step, so it is
better than KEYS for big data sets. Instead of stopping the Redis server
while getting keys, SCAN gives us a few keys at a time. This helps keep
things running smoothly. We can use SCAN with a cursor and a pattern to
find what we need. This makes SCAN a good choice for real-world use.</p>
<h3 id="can-i-filter-keys-using-patterns-in-redis-commands">3. Can I
filter keys using patterns in Redis commands?</h3>
<p>Yes, we can filter keys using patterns in Redis commands. Both KEYS
and SCAN commands let us use glob-style patterns. This helps us match
keys based on what we want. For example, if we use
<code>KEYS user:*</code>, we will get all keys that start with “user:”.
This is helpful for keeping related keys organized.</p>
<h3 id="what-are-the-limitations-of-the-keys-command-in-redis">4. What
are the limitations of the KEYS command in Redis?</h3>
<p>The KEYS command is good for getting keys, but it has big limits. It
can slow down the system with large data sets because it checks
everything at once, which blocks Redis. Also, we should not use KEYS in
production. It can hurt server speed and response time. It is better to
use the SCAN command for faster results.</p>
<h3 id="how-can-i-implement-best-practices-for-listing-keys-in-redis">5.
How can I implement best practices for listing keys in Redis?</h3>
<p>To follow best practices for listing keys in Redis, we should not use
the KEYS command in production. We should use the SCAN command for safer
and step-by-step key retrieval. Also, we can organize our keys using
namespaces or prefixes. This makes management easier. We should check
our Redis instance regularly and use patterns to filter keys when we
need. For more tips on making Redis better, check out our article on <a
href="https://bestonlinetutorial.com/redis/what-are-the-best-practices-for-redis-optimization.html">Redis
optimization techniques</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            