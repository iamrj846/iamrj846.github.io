
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            
            <title>What Are the Key Differences Between Redis Pub/Sub and Streams?</title>
            <meta name="description" content="Discover the key differences between Redis Pub/Sub and Streams. Enhance your messaging strategies with our in-depth comparison!">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">What Are the Key Differences Between Redis Pub/Sub and Streams?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Understanding the main differences between Redis Pub/Sub and Streams
is very important for developers who want to build good messaging
systems. Redis Pub/Sub helps us talk in real-time. It lets us send
messages to many subscribers quickly. On the other hand, Redis Streams
gives us a stronger messaging option. It allows us to keep messages,
create consumer groups, and confirm messages. This makes Streams great
for when we need our data to be reliable and last longer.</p>
<p>In this article, we will look at the key differences between Redis
Pub/Sub and Streams. We will also see how they work and when we should
use each one. We will talk about how Redis Pub/Sub works in real-time
apps. We will also look at the benefits of using Redis Streams instead
of Pub/Sub. Lastly, we will give tips on how to use both Redis Pub/Sub
and Streams. We will end with answers to common questions about these
features.</p>
<ul>
<li>Key differences between Redis Pub/Sub and Streams</li>
<li>How Redis Pub/Sub works in real-time applications</li>
<li>Advantages of using Redis Streams over Pub/Sub</li>
<li>When to use Redis Pub/Sub instead of Streams</li>
<li>Implementation of Redis Pub/Sub in applications</li>
<li>Implementation of Redis Streams for reliable messaging</li>
<li>Frequently asked questions about Redis Pub/Sub and Streams</li>
</ul>
<p>If you want to learn more about Redis, you can read these articles:
<a href="https://bestonlinetutorial.com/redis/what-is-redis.html">What
Is Redis?</a>, <a
href="https://bestonlinetutorial.com/redis/what-are-redis-streams.html">What
Are Redis Streams?</a>, and <a
href="https://bestonlinetutorial.com/redis/how-do-i-implement-real-time-communication-with-redis-pub-sub.html">How
Do I Implement Real-Time Communication with Redis Pub/Sub?</a>.</p>
<h2 id="how-does-redis-pubsub-work-in-real-time-applications">How Does
Redis Pub/Sub Work in Real-Time Applications</h2>
<p>Redis Pub/Sub (Publish/Subscribe) is a way to send messages in
real-time between different parts of an application. It helps us to
connect without direct links. This makes a simple structure where
publishers send messages to channels. Subscribers listen to these
channels to get messages.</p>
<h3 id="key-components">Key Components</h3>
<ul>
<li><strong>Publisher</strong>: It sends messages to a channel.</li>
<li><strong>Subscriber</strong>: It gets messages from channels it is
subscribed to.</li>
<li><strong>Channel</strong>: This is a named path for messages.</li>
</ul>
<h3 id="workflow">Workflow</h3>
<ol type="1">
<li><p><strong>Publishers send messages</strong> to a channel:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">PUBLISH</span> my_channel <span class="st">&quot;Hello, Redis!&quot;</span></span></code></pre></div></li>
<li><p><strong>Subscribers listen</strong> to the channel:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">SUBSCRIBE</span> my_channel</span></code></pre></div></li>
<li><p>When someone publishes a message on <code>my_channel</code>, all
active subscribers get it right away.</p></li>
</ol>
<h3 id="use-cases">Use Cases</h3>
<ul>
<li><strong>Real-time notifications</strong>: We can get instant alerts
in web applications.</li>
<li><strong>Chat applications</strong>: Users send and receive messages
in real-time.</li>
<li><strong>Live updates</strong>: We can push updates to clients when
data changes.</li>
</ul>
<h3 id="example-implementation">Example Implementation</h3>
<p>We can use Python with the <code>redis-py</code> library to make a
simple Pub/Sub example like this:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> redis</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> threading</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Publisher</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> publish_messages():</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> redis.Redis()</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        message <span class="op">=</span> <span class="bu">input</span>(<span class="st">&quot;Enter message to publish: &quot;</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        r.publish(<span class="st">&#39;my_channel&#39;</span>, message)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Subscriber</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> subscribe_messages():</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> redis.Redis()</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    pubsub <span class="op">=</span> r.pubsub()</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    pubsub.subscribe(<span class="st">&#39;my_channel&#39;</span>)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> message <span class="kw">in</span> pubsub.listen():</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> message[<span class="st">&#39;type&#39;</span>] <span class="op">==</span> <span class="st">&#39;message&#39;</span>:</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f&quot;Received: </span><span class="sc">{</span>message[<span class="st">&#39;data&#39;</span>]<span class="sc">.</span>decode(<span class="st">&#39;utf-8&#39;</span>)<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Start publisher and subscriber in separate threads</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>threading.Thread(target<span class="op">=</span>publish_messages).start()</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>threading.Thread(target<span class="op">=</span>subscribe_messages).start()</span></code></pre></div>
<h3 id="advantages">Advantages</h3>
<ul>
<li><strong>Low latency</strong>: Messages go out right away.</li>
<li><strong>Scalability</strong>: Many subscribers can get the same
message.</li>
<li><strong>Decoupling</strong>: Publishers and subscribers work
separately.</li>
</ul>
<h3 id="limitations">Limitations</h3>
<ul>
<li><strong>No message persistence</strong>: If a subscriber is offline,
it will miss messages.</li>
<li><strong>No message acknowledgment</strong>: There is no guarantee
that delivery will happen.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>Redis Pub/Sub is great for real-time applications that need quick
communication. But if we need messages to be saved, we should think
about using Redis Streams for better reliability.</p>
<h2 id="what-are-the-advantages-of-using-redis-streams-over-pubsub">What
Are the Advantages of Using Redis Streams Over Pub/Sub</h2>
<p>We can see that Redis Streams have many benefits over Redis Pub/Sub.
They are better for some situations, especially when we need reliable
messaging and when we want to keep messages. Here are the main
advantages of using Redis Streams:</p>
<ol type="1">
<li><strong>Message Persistence</strong>:
<ul>
<li>Streams keep messages in a data structure. This means messages stay
there even after we read them. But in Pub/Sub, messages are temporary.
If a subscriber is offline when a message is sent, they will not get
that message.</li>
</ul></li>
<li><strong>Message Acknowledgment</strong>:
<ul>
<li>With Streams, consumers can confirm they have processed messages.
This helps ensure that messages do not get lost if a consumer has a
problem or crashes.</li>
</ul></li>
<li><strong>Consumer Groups</strong>:
<ul>
<li>Streams let us create consumer groups. This means many consumers can
read from the same stream together. It helps share the load among
consumers and ensures that each message is processed only once by the
group.</li>
</ul></li>
<li><strong>Message IDs</strong>:
<ul>
<li>Each message in a stream has a unique ID. We can use this ID to
track and confirm processed messages. This feature helps us with things
like replaying messages and avoiding duplicates.</li>
</ul></li>
<li><strong>Range Queries</strong>:
<ul>
<li>Streams allow range queries. We can get messages based on their IDs
or timestamps. This makes it easier for us to find specific messages and
process them according to different needs.</li>
</ul></li>
<li><strong>Automatic Cleanup</strong>:
<ul>
<li>We can set Streams to automatically delete old messages after a
certain time. This helps us manage memory better.</li>
</ul></li>
</ol>
<h3 id="example-of-creating-and-using-redis-streams">Example of Creating
and Using Redis Streams</h3>
<p>Here is a simple way to create a stream and use it:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a stream</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">XADD</span> mystream <span class="pp">*</span> name <span class="st">&quot;Alice&quot;</span> age <span class="st">&quot;30&quot;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read messages from the stream</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="ex">XRANGE</span> mystream <span class="at">-</span> +</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Acknowledge a message (assuming the message ID is 1630920852671-0)</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="ex">XACK</span> mystream mygroup 1630920852671-0</span></code></pre></div>
<h3 id="example-of-consumer-group">Example of Consumer Group</h3>
<p>Here is how to create a consumer group and read from it:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a consumer group</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">XGROUP</span> CREATE mystream mygroup $ MKSTREAM</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read messages from the stream using the consumer group</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="ex">XREADGROUP</span> GROUP mygroup consumer1 COUNT 1 BLOCK 0 STREAMS mystream <span class="op">&gt;</span></span></code></pre></div>
<p>By using these features, Redis Streams give us a strong choice for
applications that need more than just basic message broadcasting from
Redis Pub/Sub. If we want to learn more about Redis Streams, we can read
<a
href="https://bestonlinetutorial.com/redis/what-are-redis-streams.html">this
article</a>.</p>
<h2 id="when-should-we-use-redis-pubsub-instead-of-streams">When Should
We Use Redis Pub/Sub Instead of Streams</h2>
<p>Redis Pub/Sub is good for real-time messaging where we need quick
response times. We should use it when:</p>
<ul>
<li><strong>Broadcasting Messages</strong>: We want to tell many
subscribers at once about events, like chat messages or
notifications.</li>
<li><strong>Simple Communication</strong>: We have a simple way to
interact that does not need message storage or confirmation.</li>
<li><strong>Low Overhead</strong>: We want low overhead for cases with a
lot of messages, like live updates of dashboards or stock prices.</li>
</ul>
<h3 id="example-use-cases">Example Use Cases</h3>
<ol type="1">
<li><p><strong>Chat Applications</strong>: We can use Pub/Sub to send
messages in real-time to everyone in a chat room.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> redis</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> redis.Redis()</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Publisher</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>r.publish(<span class="st">&#39;chat_room&#39;</span>, <span class="st">&#39;Hello everyone!&#39;</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Subscriber</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>pubsub <span class="op">=</span> r.pubsub()</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>pubsub.subscribe(<span class="st">&#39;chat_room&#39;</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> message <span class="kw">in</span> pubsub.listen():</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(message[<span class="st">&#39;data&#39;</span>])</span></code></pre></div></li>
<li><p><strong>Real-Time Notifications</strong>: We can send alerts or
notifications to users as things happen in the system without saving
those messages.</p></li>
<li><p><strong>Event Notifications</strong>: We can use Pub/Sub to start
events in microservices. This way, services can react to changes or
updates without saving the events.</p></li>
</ol>
<h3 id="limitations-1">Limitations</h3>
<ul>
<li><strong>No Message Persistence</strong>: Messages do not get stored.
If a subscriber is not connected, it misses the message.</li>
<li><strong>No Delivery Guarantees</strong>: There is no guarantee a
message will reach subscribers. This makes it not good for important
messages.</li>
</ul>
<p>If we need message storage and reliability, we should use Redis
Streams. This way, messages are not lost and can be processed when the
subscriber is ready.</p>
<p>For more info on Redis Pub/Sub, visit <a
href="https://bestonlinetutorial.com/redis/what-is-redis-pub-sub.html">What
is Redis Pub/Sub</a>.</p>
<h2 id="how-to-implement-redis-pubsub-in-your-application">How to
Implement Redis Pub/Sub in Your Application</h2>
<p>We can set up Redis Pub/Sub in our application by creating a
publisher and a subscriber. Redis Pub/Sub lets different parts of our
application send messages in real-time without keeping messages stored.
Here is a simple guide to help us start.</p>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>We must have Redis installed and running. You can find how to
install it <a
href="https://bestonlinetutorial.com/redis/how-do-i-install-redis.html">here</a>.</li>
</ul>
<h3 id="code-implementation">Code Implementation</h3>
<p><strong>1. Using Node.js</strong></p>
<p>First, we need to install the Redis package:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install redis</span></code></pre></div>
<p><strong>Publisher Code:</strong></p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> redis <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;redis&#39;</span>)<span class="op">;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> publisher <span class="op">=</span> redis<span class="op">.</span><span class="fu">createClient</span>()<span class="op">;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>publisher<span class="op">.</span><span class="fu">on</span>(<span class="st">&#39;connect&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;Publisher connected to Redis&#39;</span>)<span class="op">;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Publish messages to a channel</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="pp">setInterval</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> message <span class="op">=</span> <span class="st">&#39;Hello Subscribers!&#39;</span><span class="op">;</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    publisher<span class="op">.</span><span class="fu">publish</span>(<span class="st">&#39;my_channel&#39;</span><span class="op">,</span> message<span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Published: </span><span class="sc">${</span>message<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span> <span class="dv">1000</span>)<span class="op">;</span></span></code></pre></div>
<p><strong>Subscriber Code:</strong></p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> redis <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;redis&#39;</span>)<span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> subscriber <span class="op">=</span> redis<span class="op">.</span><span class="fu">createClient</span>()<span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>subscriber<span class="op">.</span><span class="fu">on</span>(<span class="st">&#39;connect&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;Subscriber connected to Redis&#39;</span>)<span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Subscribe to a channel</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>subscriber<span class="op">.</span><span class="fu">subscribe</span>(<span class="st">&#39;my_channel&#39;</span>)<span class="op">;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Listen for messages</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>subscriber<span class="op">.</span><span class="fu">on</span>(<span class="st">&#39;message&#39;</span><span class="op">,</span> (channel<span class="op">,</span> message) <span class="kw">=&gt;</span> {</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Received message from </span><span class="sc">${</span>channel<span class="sc">}</span><span class="vs">: </span><span class="sc">${</span>message<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p><strong>2. Using Python</strong></p>
<p>First, we need to install the Redis library:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install redis</span></code></pre></div>
<p><strong>Publisher Code:</strong></p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> redis</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>publisher <span class="op">=</span> redis.Redis()</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    publisher.publish(<span class="st">&#39;my_channel&#39;</span>, <span class="st">&#39;Hello Subscribers!&#39;</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Message published.&#39;</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    time.sleep(<span class="dv">1</span>)</span></code></pre></div>
<p><strong>Subscriber Code:</strong></p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> redis</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>subscriber <span class="op">=</span> redis.Redis()</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>pubsub <span class="op">=</span> subscriber.pubsub()</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>pubsub.subscribe(<span class="st">&#39;my_channel&#39;</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> message <span class="kw">in</span> pubsub.listen():</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> message[<span class="st">&#39;type&#39;</span>] <span class="op">==</span> <span class="st">&#39;message&#39;</span>:</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f&quot;Received message: </span><span class="sc">{</span>message[<span class="st">&#39;data&#39;</span>]<span class="sc">.</span>decode(<span class="st">&#39;utf-8&#39;</span>)<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<h3 id="important-notes">Important Notes</h3>
<ul>
<li><strong>Non-Persistent</strong>: Redis Pub/Sub does not keep
messages. Subscribers must be on to get messages.</li>
<li><strong>Performance</strong>: This is best for real-time alerts and
fast messaging.</li>
<li><strong>Scaling</strong>: For bigger applications, we should think
about using message queues or reliable messaging ways.</li>
</ul>
<p>By using these code examples, we can easily set up Redis Pub/Sub in
our application. This will let us have real-time communication between
different parts. For more details about Redis Pub/Sub, we can check this
article on <a
href="https://bestonlinetutorial.com/redis/what-is-redis-pub-sub.html">Redis
Pub/Sub</a>.</p>
<h2 id="how-to-implement-redis-streams-for-reliable-messaging">How to
Implement Redis Streams for Reliable Messaging</h2>
<p>We can implement Redis Streams for reliable messaging by following
these simple steps:</p>
<ol type="1">
<li><p><strong>Create a Stream</strong>: We use the <code>XADD</code>
command to create a stream and add some messages.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">XADD</span> mystream <span class="pp">*</span> key1 value1 key2 value2</span></code></pre></div></li>
<li><p><strong>Reading from a Stream</strong>: We can read messages
using the <code>XREAD</code> command. We can set a block time and choose
the stream we want to read from.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">XREAD</span> BLOCK 0 STREAMS mystream $</span></code></pre></div>
<p>The <code>$</code> means we want to read the new messages.</p></li>
<li><p><strong>Acknowledging Messages</strong>: After we process the
messages, we use the <code>XACK</code> command to acknowledge them.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">XACK</span> mystream group_name message_id</span></code></pre></div></li>
<li><p><strong>Creating Consumer Groups</strong>: We create a consumer
group for processing messages together. We do this with the
<code>XGROUP CREATE</code> command.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">XGROUP</span> CREATE mystream mygroup 0</span></code></pre></div></li>
<li><p><strong>Reading from a Consumer Group</strong>: As a member of a
consumer group, we can read messages using the <code>XREADGROUP</code>
command.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">XREADGROUP</span> GROUP mygroup consumer_name BLOCK 0 STREAMS mystream <span class="op">&gt;</span></span></code></pre></div>
<p>The <code>&gt;</code> shows that we want to read messages that are
not acknowledged yet.</p></li>
<li><p><strong>Handling Message Failures</strong>: We need to handle
message failures. We can check pending messages using
<code>XPENDING</code>.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">XPENDING</span> mystream mygroup</span></code></pre></div></li>
<li><p><strong>Message Retention Policies</strong>: We should set a
retention policy for our stream. We can use the <code>XTRIM</code>
command to help manage memory.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">XTRIM</span> mystream MAXLEN 1000</span></code></pre></div></li>
</ol>
<p>By following these steps, we can use Redis Streams for reliable
messaging. This helps our application to manage message delivery and
processing well. For more information on Redis Streams, we can check the
article on <a
href="https://bestonlinetutorial.com/redis/what-are-redis-streams.html">What
Are Redis Streams</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3
id="what-is-redis-pubsub-and-how-does-it-differ-from-redis-streams">1.
What is Redis Pub/Sub and how does it differ from Redis Streams?</h3>
<p>Redis Pub/Sub is a way to send messages. Publishers send messages to
channels. They do not know who gets the messages. This makes it good for
real-time broadcasting. Redis Streams is different. It is a data
structure for message queuing. It lets consumers read messages at their
own speed. It also has features like saving messages and confirming
receipt. For more details, check our article on <a
href="https://bestonlinetutorial.com/redis/what-is-redis-pub-sub.html">What
is Redis Pub/Sub</a>.</p>
<h3 id="when-should-i-choose-redis-streams-over-pubsub">2. When should I
choose Redis Streams over Pub/Sub?</h3>
<p>If we need reliable message delivery and message saving, we should
choose Redis Streams. It lets us use consumer groups and automatic
message confirmation. These are important to make sure messages do not
get lost. Redis Pub/Sub is fast for real-time alerts, but it does not
guarantee that messages will be delivered.</p>
<h3 id="how-can-i-implement-redis-pubsub-in-my-application">3. How can I
implement Redis Pub/Sub in my application?</h3>
<p>To use Redis Pub/Sub, we first connect to the Redis server. Then we
use the <code>PUBLISH</code> command to send messages to a channel.
Subscribers use the <code>SUBSCRIBE</code> command to listen for
messages. This method is simple and allows real-time updates in
different systems. For a step-by-step guide, visit our article on <a
href="https://bestonlinetutorial.com/redis/how-do-i-implement-real-time-communication-with-redis-pub-sub.html">How
to Implement Redis Pub/Sub in Your Application</a>.</p>
<h3 id="are-there-performance-considerations-when-using-redis-pubsub">4.
Are there performance considerations when using Redis Pub/Sub?</h3>
<p>Yes, Redis Pub/Sub is fast but it can have problems with many
subscribers or messages. Unlike Redis Streams, which can keep messages
safe, Pub/Sub is not as good for apps that need messages to last. We
should think about what our app needs to pick the best messaging
solution.</p>
<h3 id="how-do-redis-streams-ensure-message-reliability">5. How do Redis
Streams ensure message reliability?</h3>
<p>Redis Streams makes sure messages are reliable with features like
saving messages and confirming receipt. When we send a message to a
Stream, we can store it and get it later, even if the consumer is
offline. Also, consumers can confirm messages after they process them.
This way, no message is lost. Learn more about Redis Streams in our
article on <a
href="https://bestonlinetutorial.com/redis/what-are-redis-streams.html">What
Are Redis Streams</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            