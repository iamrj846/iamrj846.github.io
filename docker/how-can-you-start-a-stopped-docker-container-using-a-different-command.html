
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How can you start a stopped Docker container using a different command?</title>
            <meta name="description" content="Learn how to start a stopped Docker container with alternative commands. Boost your Docker skills with this essential guide!">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How can you start a stopped Docker container using a different command?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>To start a stopped Docker container with a different command, we can
use the <code>docker start</code> command with the
<code>--detach-keys</code> flag. We can also use the
<code>docker run</code> command to create a new container with a new
command from the original image. This way, we can run the container with
the command we want while keeping the original settings. This method is
simple and helps us change how our Docker containers run without losing
any data or settings.</p>
<p>In this article, we will look at different ways to start a stopped
Docker container with a different command. We will talk about using
Docker Run, Docker Commit, Docker Exec, and how to change Docker
container commands in Dockerfiles for later use. We will also show how
to start a stopped container using shell commands. Plus, we will answer
some common questions about this topic. Here is what we will cover:</p>
<ul>
<li>How to Start a Stopped Docker Container Using a Different
Command</li>
<li>Using Docker Run to Start a Stopped Container with a New
Command</li>
<li>How to Use Docker Commit to Create a New Image and Start a
Container</li>
<li>Using Docker Exec to Run a Different Command in a Stopped
Container</li>
<li>Changing Docker Container Command in Dockerfile for Future
Starts</li>
<li>How to Start a Stopped Docker Container with a Shell Command</li>
<li>Frequently Asked Questions</li>
</ul>
<p>For more info about Docker, we think these links are helpful: <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a>, <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">What
are Docker Images and How Do They Work?</a>, and <a
href="https://bestonlinetutorial.com/docker/how-to-list-and-inspect-docker-images.html">How
to List and Inspect Docker Images</a>.</p>
<h2
id="using-docker-run-to-start-a-stopped-container-with-a-new-command">Using
Docker Run to Start a Stopped Container with a New Command</h2>
<p>We can start a stopped Docker container with a new command using the
<code>docker run</code> command and the <code>--entrypoint</code>
option. This lets us set a new command that replaces the default command
in the Docker image. But remember, <code>docker run</code> makes a new
container. So, we must make sure to copy the original container’s
settings like volumes and environment variables.</p>
<p>Here’s how we can do it:</p>
<ol type="1">
<li><p><strong>Identify the Stopped Container</strong>: First, we need
to see our stopped containers. This helps us find the one we want to
restart.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> ps <span class="at">-a</span> <span class="at">--filter</span> <span class="st">&quot;status=exited&quot;</span></span></code></pre></div></li>
<li><p><strong>Create a New Container with a Different Command</strong>:
Next, we use the <code>docker run</code> command with the
<code>--entrypoint</code> option to set the new command.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> new_container_name <span class="at">--entrypoint</span> new_command <span class="at">-d</span> original_image_name</span></code></pre></div>
<p>Replace <code>new_container_name</code> with a name we want for the
new container. Change <code>new_command</code> with the command we want
to run. Also, put <code>original_image_name</code> with the name of the
image for the stopped container.</p></li>
<li><p><strong>Example</strong>: Let’s say we have a stopped container
from an image called <code>my_app</code>. If we want to start it with a
different command like <code>my_script.sh</code>, we can do this:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> my_new_app <span class="at">--entrypoint</span> /path/to/my_script.sh <span class="at">-d</span> my_app</span></code></pre></div></li>
</ol>
<p>This command makes a new container named <code>my_new_app</code> that
runs <code>my_script.sh</code> from the <code>my_app</code> image. The
original stopped container will stay the same.</p>
<p>We must also manage any needed environment variables and volumes from
the old container. We can do this by adding the right flags like
<code>-e</code> for environment variables and <code>-v</code> for
volumes to the <code>docker run</code> command.</p>
<p>For more details on Docker container commands and settings, we can
check related articles on <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">Docker
Images and How They Work</a>.</p>
<h2
id="how-to-use-docker-commit-to-create-a-new-image-and-start-a-container">How
to Use Docker Commit to Create a New Image and Start a Container</h2>
<p>We can start a stopped Docker container with a different command. To
do this, we use the <code>docker commit</code> command. This command
helps us create a new image from the existing container. With this, we
can change the command that runs when we start the new container.</p>
<ol type="1">
<li><p><strong>Identify the Stopped Container</strong>: First, we need
to find the container ID or name of the stopped container we want to
change. We can list all containers, even the stopped ones, with this
command:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> ps <span class="at">-a</span></span></code></pre></div></li>
<li><p><strong>Commit the Container</strong>: Next, we use the
<code>docker commit</code> command to make a new image from the stopped
container. We also say what new command we want to run in the container
using the <code>--change</code> option. Replace
<code>&lt;container_id&gt;</code> with the ID or name of your container
and <code>&lt;new_image_name&gt;</code> with what you want to name your
new image.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> commit <span class="at">--change</span> <span class="st">&#39;CMD [&quot;your_new_command&quot;]&#39;</span> <span class="op">&lt;</span>container_id<span class="op">&gt;</span> <span class="op">&lt;</span>new_image_name<span class="op">&gt;</span></span></code></pre></div>
<p>For example, if we want to run a new script in the container:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> commit <span class="at">--change</span> <span class="st">&#39;CMD [&quot;python&quot;, &quot;new_script.py&quot;]&#39;</span> my_stopped_container my_new_image</span></code></pre></div></li>
<li><p><strong>Start the New Container</strong>: After we commit the new
image, we can start a container from this image with:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="op">&lt;</span>new_image_name<span class="op">&gt;</span></span></code></pre></div>
<p>If we want to run it interactively, we can use:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-it</span> <span class="op">&lt;</span>new_image_name<span class="op">&gt;</span></span></code></pre></div></li>
</ol>
<p>This way, we can change the command that runs in our container
without changing the original image or Dockerfile. For more advanced use
of Docker, we can learn about other commands like
<code>docker exec</code> or <code>docker run</code> for special cases.
We can read more about Docker images and how they work <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">here</a>.</p>
<h2
id="leveraging-docker-exec-to-run-a-different-command-in-a-stopped-container">Leveraging
Docker Exec to Run a Different Command in a Stopped Container</h2>
<p>We can run a different command in a stopped Docker container using
the <code>docker exec</code> command. But we can’t use this command
directly in a stopped container. First, we need to restart the
container. Then we can tell it to run a different command.</p>
<ol type="1">
<li><p><strong>Restart the Stopped Container</strong>: We use the
<code>docker start</code> command to get the container running
again.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> start <span class="op">&lt;</span>container_name_or_id<span class="op">&gt;</span></span></code></pre></div></li>
<li><p><strong>Execute a Different Command</strong>: After the container
is running, we can run a new command with <code>docker exec</code>.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> <span class="op">&lt;</span>container_name_or_id<span class="op">&gt;</span> <span class="op">&lt;</span>new_command<span class="op">&gt;</span></span></code></pre></div></li>
</ol>
<p>For example, if we have a stopped container called
<code>my_container</code> and we want to start a shell inside it, we do
this:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> start my_container</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> my_container /bin/bash</span></code></pre></div>
<p>If the container is not running, we can also do both steps in one
line. We use <code>docker run</code> with the <code>--rm</code> option
to create a new instance of the container with the new command:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--rm</span> <span class="at">--name</span> <span class="op">&lt;</span>new_container_name<span class="op">&gt;</span> <span class="op">&lt;</span>image_name<span class="op">&gt;</span> <span class="op">&lt;</span>new_command<span class="op">&gt;</span></span></code></pre></div>
<p>This way, we can run different commands without changing the original
container setup. We should always check that the commands work well with
the container’s environment. For more help on container management, we
can look at <a
href="https://bestonlinetutorial.com/docker/how-to-stop-and-start-docker-containers.html">how
to stop and start Docker containers</a>.</p>
<h2
id="modifying-docker-container-command-in-dockerfile-for-future-starts">Modifying
Docker Container Command in Dockerfile for Future Starts</h2>
<p>To change the command a Docker container runs when it starts, we can
use the <code>CMD</code> or <code>ENTRYPOINT</code> in our Dockerfile.
This helps us make sure that every time the container starts, it runs
the command we choose.</p>
<h3 id="example-usage-of-cmd">Example Usage of CMD</h3>
<p>The <code>CMD</code> instruction gives default settings for a running
container. It can include a program, or we can list them in a JSON
array.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Install necessary packages</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> install <span class="at">-y</span> curl</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the default command</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;curl&quot;</span>, <span class="st">&quot;--version&quot;</span>]</span></code></pre></div>
<h3 id="example-usage-of-entrypoint">Example Usage of ENTRYPOINT</h3>
<p><code>ENTRYPOINT</code> lets us set a container that runs like a
program. This is good because it makes sure the container runs a
specific command no matter what extra inputs we give it at runtime.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the entry point</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;python3&quot;</span>, <span class="st">&quot;-m&quot;</span>, <span class="st">&quot;http.server&quot;</span>]</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional CMD to provide a default argument</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;8000&quot;</span>]</span></code></pre></div>
<p>In this example, when we run the container, it will start a Python
HTTP server on port 8000 by default.</p>
<h3 id="overriding-cmd-and-entrypoint">Overriding CMD and
ENTRYPOINT</h3>
<p>When we use <code>docker run</code>, we can change the
<code>CMD</code> in the Dockerfile by giving a different command:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run your-image-name ls <span class="at">-l</span></span></code></pre></div>
<p>To change an <code>ENTRYPOINT</code>, we use the
<code>--entrypoint</code> flag:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--entrypoint</span> /bin/bash your-image-name</span></code></pre></div>
<h3 id="best-practices">Best Practices</h3>
<ul>
<li>Use <code>ENTRYPOINT</code> for the main command that should not be
changed.</li>
<li>Use <code>CMD</code> for default arguments that we can change.</li>
<li>Think about using environment variables for settings that need to
change.</li>
</ul>
<p>By changing the command in the Dockerfile, we can make sure our
Docker containers start with the behavior we want. For more details
about Docker and its commands, check out <a
href="https://bestonlinetutorial.com/docker/what-is-a-docker-container-and-how-does-it-operate.html">what
is a Docker container and how does it operate</a>.</p>
<h2
id="how-to-start-a-stopped-docker-container-with-a-shell-command">How to
Start a Stopped Docker Container with a Shell Command</h2>
<p>To start a stopped Docker container with a shell command, we can use
the <code>docker start</code> command. Just add the container name or ID
after it. If we want to run a different command than the one in the
Dockerfile, we need to use the <code>docker run</code> command. The
<code>docker start</code> command does not let us change the
command.</p>
<h3 id="using-docker-start-command">Using <code>docker start</code>
Command</h3>
<p>To restart a stopped container, we can do it like this:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> start <span class="op">&lt;</span>container_name_or_id<span class="op">&gt;</span></span></code></pre></div>
<p>This command will start the container using the command that is in
the Docker image.</p>
<h3 id="using-docker-run-for-a-new-command">Using
<code>docker run</code> for a New Command</h3>
<p>If we want to start a new instance of the container with a different
command, we can use <code>docker run</code>. We can add the
<code>--rm</code> flag to remove the container after it stops:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--rm</span> <span class="op">&lt;</span>image_name<span class="op">&gt;</span> <span class="op">&lt;</span>new_command<span class="op">&gt;</span></span></code></pre></div>
<h3
id="example-of-starting-a-stopped-container-with-a-shell-command">Example
of Starting a Stopped Container with a Shell Command</h3>
<p>If we have a container named <code>my_container</code> and we want to
start it with a new shell command, we would do this:</p>
<ol type="1">
<li><p><strong>Start the original container</strong> (if we want it to
run normally):</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> start my_container</span></code></pre></div></li>
<li><p><strong>Run a new command in a new container
instance</strong>:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--rm</span> <span class="at">--name</span> my_new_container my_image /bin/bash</span></code></pre></div></li>
</ol>
<h3 id="important-notes">Important Notes</h3>
<ul>
<li>If we need to pass environment variables or port mappings, we can
add those in the <code>docker run</code> command.</li>
<li>Remember that <code>docker start</code> cannot change the command;
it just resumes the container as it was running before. To change the
command, we must create a new container using
<code>docker run</code>.</li>
</ul>
<p>For more details on Docker commands and how to use them, we can check
<a
href="https://bestonlinetutorial.com/docker/how-to-stop-and-start-docker-containers.html">Docker’s
documentation on how to manage containers</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3
id="how-do-we-start-a-stopped-docker-container-with-a-different-command">1.
How do we start a stopped Docker container with a different
command?</h3>
<p>To start a stopped Docker container with another command, we can use
the <code>docker start</code> command. Just follow it with the container
ID or name. But if we want to run a different command than the one in
the Dockerfile, we need to make a new container from the original image.
We can do this with <code>docker run</code>. For more steps, check our
guide on <a href="#">how to start a stopped Docker container using a
different command</a>.</p>
<h3 id="can-we-modify-the-command-of-a-running-docker-container">2. Can
we modify the command of a running Docker container?</h3>
<p>No, we cannot change the command of a running Docker container
directly. If we want to change it, we can make a new container from the
same image with our command using <code>docker run</code>. Another way
is to use <code>docker commit</code> to create a new image with the
changes before starting a new container. Learn more about <a
href="#">how to use Docker commit to create a new image</a>.</p>
<h3
id="is-it-possible-to-run-a-command-in-a-stopped-docker-container">3. Is
it possible to run a command in a stopped Docker container?</h3>
<p>Yes, we can run a command in a stopped Docker container. We use the
<code>docker start</code> command with the <code>-i</code> option to
connect to the container’s input. But if the container is stopped, we
usually need to start it with a new command using
<code>docker run</code>. For details, check our section on <a
href="#">leveraging Docker exec</a>.</p>
<h3
id="how-can-we-create-a-new-image-from-a-stopped-docker-container">4.
How can we create a new image from a stopped Docker container?</h3>
<p>To create a new image from a stopped Docker container, we use the
<code>docker commit</code> command. We follow it with the container ID
or name and the new image name. This lets us save the current state of
the container. Then we can start a new one with that image. For more
details, read our article on <a href="#">how to use Docker
commit</a>.</p>
<h3 id="is-there-a-way-to-change-the-default-command-in-a-dockerfile">5.
Is there a way to change the default command in a Dockerfile?</h3>
<p>Yes, we can change the default command in a Dockerfile. We do this by
using the <code>CMD</code> or <code>ENTRYPOINT</code> instructions. We
just change these in our Dockerfile and then rebuild our image with
<code>docker build</code>. This makes sure that every new container from
that image starts with the updated command. For more info, visit our
guide on <a href="#">what is a Dockerfile and how do you create
one</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            