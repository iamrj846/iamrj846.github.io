
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How Can You Use Environment Variables in CMD with Docker?</title>
            <meta name="description" content="Discover how to effectively use environment variables in CMD with Docker to enhance your container management and deployment.">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Can You Use Environment Variables in CMD with Docker?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Using environment variables in CMD with Docker is a good way to set
up your applications while they run. We do not need to hardcode values.
Environment variables help us manage settings, secrets, and runtime
information easily. This makes our Docker containers more flexible and
safe. By using these variables, we can build applications that are
portable and can change based on where they run.</p>
<p>In this article, we will look at different ways to use environment
variables in Docker. We will learn how to set them in a Dockerfile. We
will also see how to pass them when we run <code>docker run</code> and
how to use them in Docker Compose. We will explain how to access these
variables inside Docker containers. We will also use them for managing
secrets. Here is what we will talk about:</p>
<ul>
<li>How to Use Environment Variables in CMD with Docker</li>
<li>How Can You Set Environment Variables in Dockerfile</li>
<li>How Can You Pass Environment Variables at Docker Run</li>
<li>How Can You Use Environment Variables in CMD for Docker Compose</li>
<li>How Can You Access Environment Variables Inside Docker
Containers</li>
<li>How Can You Use Environment Variables for Secrets in Docker</li>
<li>Frequently Asked Questions</li>
</ul>
<p>For more information on Docker, you can check articles like <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a> and <a
href="https://bestonlinetutorial.com/docker/how-does-docker-differ-from-virtual-machines.html">How
Does Docker Differ from Virtual Machines?</a>.</p>
<h2 id="how-can-we-set-environment-variables-in-dockerfile">How Can We
Set Environment Variables in Dockerfile</h2>
<p>We can set environment variables in a Dockerfile using the
<code>ENV</code> instruction. This helps us define environment variables
that will be available in the container when it runs. The syntax looks
like this:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> &lt;key&gt;=&lt;value&gt; ...</span></code></pre></div>
<h3 id="example-of-setting-environment-variables">Example of Setting
Environment Variables</h3>
<p>Here is an example Dockerfile where we set some environment
variables:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set environment variables</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> APP_HOME=/usr/src/app</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> APP_ENV=production</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> APP_VERSION=1.0.0</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the application directory</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="fu">mkdir</span> <span class="at">-p</span> <span class="va">$APP_HOME</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the working directory</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="kw">WORKDIR</span> $APP_HOME</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy application files</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> . .</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the application</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;python&quot;</span>, <span class="st">&quot;app.py&quot;</span>]</span></code></pre></div>
<h3 id="accessing-environment-variables">Accessing Environment
Variables</h3>
<p>We can access these environment variables in our application code.
This depends on the programming language we use. For example, in Python,
we can get environment variables with the <code>os</code> module:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>app_env <span class="op">=</span> os.getenv(<span class="st">&#39;APP_ENV&#39;</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Running in </span><span class="sc">{</span>app_env<span class="sc">}</span><span class="ss"> environment&quot;</span>)</span></code></pre></div>
<h3 id="best-practices">Best Practices</h3>
<ul>
<li>Use all uppercase letters for environment variable names. This helps
to tell them apart.</li>
<li>Write down our environment variables in the Dockerfile. This makes
it clear.</li>
<li>Do not hardcode sensitive information in the Dockerfile. We should
think about using Docker secrets or passing variables when we run
it.</li>
</ul>
<p>For more details about using Dockerfiles, check out <a
href="https://bestonlinetutorial.com/docker/what-is-the-dockerfile-and-how-do-you-create-one.html">what
is the Dockerfile and how do you create one</a>.</p>
<h2 id="how-can-we-pass-environment-variables-at-docker-run">How Can We
Pass Environment Variables at Docker Run</h2>
<p>We can pass environment variables to a Docker container when we run
it. We use the <code>-e</code> flag with the <code>docker run</code>
command. This helps us set different settings and secrets for our
application without putting them directly in our images.</p>
<h3 id="syntax">Syntax</h3>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-e</span> VARIABLE_NAME=value image_name</span></code></pre></div>
<h3 id="example">Example</h3>
<p>If we want to pass an environment variable called
<code>DATABASE_URL</code> to a container that runs a Node.js
application, we would do it like this:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-e</span> DATABASE_URL=mongodb://localhost:27017/mydatabase my-node-app</span></code></pre></div>
<h3 id="multiple-environment-variables">Multiple Environment
Variables</h3>
<p>We can also pass more than one environment variable by adding more
<code>-e</code> flags:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-e</span> VARIABLE1=value1 <span class="at">-e</span> VARIABLE2=value2 image_name</span></code></pre></div>
<h3 id="using-environment-variables-from-a-file">Using Environment
Variables from a File</h3>
<p>We can use the <code>--env-file</code> option to load environment
variables from a file. First, we create a <code>.env</code> file with
this content:</p>
<pre><code>DATABASE_URL=mongodb://localhost:27017/mydatabase
API_KEY=myapikey</code></pre>
<p>After that, we run:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--env-file</span> .env my-node-app</span></code></pre></div>
<h3 id="accessing-environment-variables-in-our-application">Accessing
Environment Variables in Our Application</h3>
<p>Inside our application, we can access the environment variables using
the usual method for our programming language. For example, in Node.js,
we do:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> dbUrl <span class="op">=</span> <span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">DATABASE_URL</span><span class="op">;</span></span></code></pre></div>
<p>This way of passing environment variables at runtime helps us keep
our setup safe and flexible. It lets us manage our settings outside of
the Docker images. For more info, we can check <a
href="https://bestonlinetutorial.com/docker/how-can-i-pass-environment-variables-to-docker-containers.html">how
to use environment variables in Docker</a>.</p>
<h2
id="how-can-we-use-environment-variables-in-cmd-for-docker-compose">How
Can We Use Environment Variables in CMD for Docker Compose</h2>
<p>In Docker Compose, we can use environment variables to set up our
services in a flexible way. We can define these environment variables in
different ways. These ways include the <code>docker-compose.yml</code>
file, an <code>.env</code> file, or right in the shell. Let’s look at
how to use them.</p>
<h3 id="defining-environment-variables-in-docker-compose.yml">Defining
Environment Variables in <code>docker-compose.yml</code></h3>
<p>We can add environment variables directly in our
<code>docker-compose.yml</code> file. We do this under the
<code>environment</code> section for a service.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> NODE_ENV=production</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> API_URL=http://api.example.com</span></span></code></pre></div>
<h3 id="using-an-.env-file">Using an <code>.env</code> File</h3>
<p>We can create a <code>.env</code> file in the same folder as our
<code>docker-compose.yml</code>. The variables we write in this file
will load automatically.</p>
<p><strong>Example of an <code>.env</code> file:</strong></p>
<pre><code>NODE_ENV=production
API_URL=http://api.example.com</code></pre>
<p><strong>Referencing in <code>docker-compose.yml</code>:</strong></p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> NODE_ENV=${NODE_ENV}</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> API_URL=${API_URL}</span></span></code></pre></div>
<h3 id="passing-environment-variables-at-runtime">Passing Environment
Variables at Runtime</h3>
<p>We can also pass environment variables when we run our commands. We
use the <code>-e</code> flag with the <code>docker-compose</code>
command.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">-e</span> NODE_ENV=production <span class="at">-e</span> API_URL=http://api.example.com</span></code></pre></div>
<h3 id="accessing-environment-variables-in-containers">Accessing
Environment Variables in Containers</h3>
<p>Inside our application that runs in the Docker container, we can
access the environment variables. We use the normal way for the
programming language we are using. For example, in Node.js, we can
access them like this:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">NODE_ENV</span>)<span class="op">;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">API_URL</span>)<span class="op">;</span></span></code></pre></div>
<h3 id="using-environment-variables-for-secrets">Using Environment
Variables for Secrets</h3>
<p>For sensitive information like passwords or API keys, it is better to
use Docker secrets. We can define secrets in our
<code>docker-compose.yml</code> file and then use them in our
service.</p>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">secrets</span><span class="kw">:</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> db_password</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">secrets</span><span class="kw">:</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db_password</span><span class="kw">:</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">file</span><span class="kw">:</span><span class="at"> ./secrets/db_password.txt</span></span></code></pre></div>
<p>This way, we can keep sensitive information safe and not show it in
our code.</p>
<p>By using environment variables in CMD for Docker Compose, we can make
our applications flexible. They can change easily for different
environments. For more detailed information about environment variables
and how to use them in Docker, we can check <a
href="https://bestonlinetutorial.com/docker/how-can-i-pass-environment-variables-to-docker-containers.html">this
article</a>.</p>
<h2
id="how-can-we-access-environment-variables-inside-docker-containers">How
Can We Access Environment Variables Inside Docker Containers</h2>
<p>To get environment variables inside Docker containers, we can use the
<code>printenv</code> command or get them in our application code. Here
is how we can do it:</p>
<ol type="1">
<li><p><strong>Using Command Line</strong>:<br />
We can run a command in a running container to show all environment
variables:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="op">&lt;</span>container_name_or_id<span class="op">&gt;</span> printenv</span></code></pre></div></li>
<li><p><strong>Accessing in Application Code</strong>:<br />
In different programming languages, we can access environment variables
using their own methods:</p>
<ul>
<li><p><strong>Python</strong>:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>db_host <span class="op">=</span> os.getenv(<span class="st">&#39;DB_HOST&#39;</span>)</span></code></pre></div></li>
<li><p><strong>Node.js</strong>:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> dbHost <span class="op">=</span> <span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">DB_HOST</span><span class="op">;</span></span></code></pre></div></li>
<li><p><strong>Bash</strong>:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$DB_HOST</span></span></code></pre></div></li>
</ul></li>
<li><p><strong>Setting Environment Variables on Container
Startup</strong>:<br />
If we want to pass environment variables when starting the container, we
can use the <code>-e</code> flag:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-e</span> DB_HOST=mydatabase.com myimage</span></code></pre></div></li>
<li><p><strong>Dockerfile Example</strong>:<br />
We can also set environment variables in our Dockerfile using the
<code>ENV</code> instruction:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> DB_HOST=mydatabase.com</span></code></pre></div></li>
<li><p><strong>Docker Compose</strong>:<br />
In <code>docker-compose.yml</code>, we can define environment variables
under the service:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> DB_HOST=mydatabase.com</span></span></code></pre></div></li>
</ol>
<p>By using these ways, we can easily access and manage environment
variables inside our Docker containers. For more details on how to use
environment variables, we can check <a
href="https://bestonlinetutorial.com/docker/how-can-i-effectively-use-environment-variables-in-docker-compose.html">this
guide on using environment variables in Docker Compose</a>.</p>
<h2 id="how-can-we-use-environment-variables-for-secrets-in-docker">How
Can We Use Environment Variables for Secrets in Docker</h2>
<p>We often use environment variables to handle sensitive data like API
keys or database passwords in Docker. This method helps keep our
sensitive information safe. We do not want to hardcode it in our
Dockerfiles or application code.</p>
<h3 id="storing-secrets-in-environment-variables">Storing Secrets in
Environment Variables</h3>
<ol type="1">
<li><p><strong>Using Docker Secrets (for Swarm mode)</strong>: Docker
Swarm gives us a simple way to manage secrets. We can create a secret
and then use it in our services.</p>
<p><strong>Create a secret</strong>:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;my_secret_password&quot;</span> <span class="kw">|</span> <span class="ex">docker</span> secret create my_secret <span class="at">-</span></span></code></pre></div>
<p><strong>Deploy a service using the secret</strong>:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">my_service</span><span class="kw">:</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my_image</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">secrets</span><span class="kw">:</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> my_secret</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">secrets</span><span class="kw">:</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">my_secret</span><span class="kw">:</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">external</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
<p>Inside our container, we can find the secret at
<code>/run/secrets/my_secret</code>.</p></li>
<li><p><strong>Using Environment Variables in Dockerfile</strong>: We
can also set environment variables in our Dockerfile. But we should be
careful. These variables can show up in image layers.</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> alpine</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MY_SECRET=my_secret_password</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;sh&quot;</span>, <span class="st">&quot;-c&quot;</span>, <span class="st">&quot;echo $MY_SECRET&quot;</span>]</span></code></pre></div></li>
<li><p><strong>Passing Environment Variables at Runtime</strong>: We can
use the <code>-e</code> flag with <code>docker run</code> to pass
secrets as environment variables when we start a container.</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-e</span> MY_SECRET=my_secret_password my_image</span></code></pre></div></li>
<li><p><strong>Using Docker Compose for Secrets</strong>: In Docker
Compose, we can set environment variables in the
<code>docker-compose.yml</code> file.</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">my_service</span><span class="kw">:</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my_image</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MY_SECRET</span><span class="kw">:</span><span class="at"> my_secret_password</span></span></code></pre></div></li>
</ol>
<h3 id="accessing-environment-variables-in-containers-1">Accessing
Environment Variables in Containers</h3>
<p>To get the environment variables in our application code inside the
container, we can use the regular methods from the programming language
we choose. For example, in Python:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>my_secret <span class="op">=</span> os.getenv(<span class="st">&#39;MY_SECRET&#39;</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(my_secret)</span></code></pre></div>
<h3
id="best-practices-for-managing-secrets-with-environment-variables">Best
Practices for Managing Secrets with Environment Variables</h3>
<ul>
<li><strong>Do not hardcode secrets in Dockerfiles</strong></li>
<li><strong>Use Docker Secrets</strong> for important data in
production</li>
<li><strong>Limit access</strong> to the Docker daemon and the
secrets</li>
<li><strong>Use <code>.env</code> files</strong> for local work and do
not include them in version control</li>
<li><strong>Think about using tools</strong> like HashiCorp Vault for
more complex needs with secrets</li>
</ul>
<p>For more detailed tips on managing secrets in Docker, check out <a
href="https://bestonlinetutorial.com/docker/how-can-i-pass-environment-variables-to-docker-containers.html">How
Can I Pass Environment Variables to Docker Containers</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="how-can-we-pass-environment-variables-to-docker-containers">1.
How can we pass environment variables to Docker containers?</h3>
<p>We can pass environment variables to Docker containers using the
<code>-e</code> flag with the <code>docker run</code> command. For
example, we can run
<code>docker run -e MY_ENV_VAR=value my_image</code>. This command will
set the <code>MY_ENV_VAR</code> variable inside the container. This way
helps us configure our applications without putting sensitive info in
our Docker images.</p>
<h3 id="how-do-we-set-environment-variables-in-a-dockerfile">2. How do
we set environment variables in a Dockerfile?</h3>
<p>To set environment variables in a Dockerfile, we use the
<code>ENV</code> instruction. For example, we can add
<code>ENV MY_ENV_VAR=value</code> in our Dockerfile. This will create an
environment variable called <code>MY_ENV_VAR</code> with the value we
want. This method is good for setting default configurations that our
application can use when it runs.</p>
<h3
id="what-is-the-difference-between-cmd-and-entrypoint-in-a-dockerfile">3.
What is the difference between CMD and ENTRYPOINT in a Dockerfile?</h3>
<p>The <code>CMD</code> instruction gives default arguments for the
<code>ENTRYPOINT</code> command. It also can tell which command to run
when the container starts. On the other hand, <code>ENTRYPOINT</code>
sets the main command that runs and ignores any extra command-line
parameters. Knowing these differences is important for using environment
variables in CMD with Docker.</p>
<h3
id="how-can-we-access-environment-variables-inside-docker-containers-1">4.
How can we access environment variables inside Docker containers?</h3>
<p>Inside a Docker container, we can access environment variables using
the <code>printenv</code> command. We can also reference them in our
application code. For example, in a shell script, we can use
<code>$MY_ENV_VAR</code> to get the value set for
<code>MY_ENV_VAR</code>. This ability lets us create dynamic
configurations for different environments.</p>
<h3
id="how-can-we-use-docker-compose-to-manage-environment-variables">5.
How can we use Docker Compose to manage environment variables?</h3>
<p>Docker Compose helps us define environment variables in a
<code>.env</code> file or right in the <code>docker-compose.yml</code>
file under the <code>environment</code> section. For example:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">my_service</span><span class="kw">:</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my_image</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> MY_ENV_VAR=value</span></span></code></pre></div>
<p>Using environment variables in Docker Compose makes it easier to
manage application configurations across many services.</p>
<p>For more info on Docker’s features and best practices, we can read
articles like <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a> and <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">What
are the Benefits of Using Docker in Development?</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            