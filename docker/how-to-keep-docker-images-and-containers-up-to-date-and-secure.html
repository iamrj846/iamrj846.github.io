
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TFCQEJR7TD');
</script>
            <title>How to Keep Docker Images and Containers Up-to-date and Secure?</title>
            <meta name="description" content="Discover essential tips on keeping your Docker images and containers updated and secure for optimal performance and safety.">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How to Keep Docker Images and Containers Up-to-date and Secure?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Docker images and containers are very important parts of the Docker
platform. They help us package applications and their dependencies into
separate spaces. It is very important to keep Docker images and
containers up-to-date and safe. This helps us keep good performance and
protect against problems. If we update regularly, our applications can
use the latest features and security fixes.</p>
<p>In this article, we will look at different ways to keep our Docker
images and containers current and secure. We will talk about how to
update them best. We will also see how to automate updates with CI/CD
pipelines. Plus, we can check tools that help us monitor
vulnerabilities. We will explain how to do security scans. We will share
steps to rebuild and redeploy updated containers. Finally, we will
answer some common questions about Docker security and updates.</p>
<ul>
<li>How Can We Ensure Our Docker Images and Containers Are Up-to-date
and Secure?</li>
<li>What Are the Best Practices for Updating Docker Images and
Containers?</li>
<li>How to Automate Docker Image Updates Using CI/CD Pipelines?</li>
<li>What Tools Can Help Us Monitor Docker Image Vulnerabilities?</li>
<li>How to Use Docker Security Scans to Identify Risks?</li>
<li>What Steps Should We Follow to Rebuild and Redeploy Updated
Containers?</li>
<li>Frequently Asked Questions</li>
</ul>
<p>If you want to learn more about Docker, you can read <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">what
Docker is and why you should use it</a> and <a
href="https://bestonlinetutorial.com/docker/how-does-docker-differ-from-virtual-machines.html">how
Docker differs from virtual machines</a>.</p>
<h2
id="what-are-the-best-practices-for-updating-docker-images-and-containers">What
Are the Best Practices for Updating Docker Images and Containers?</h2>
<p>To keep our Docker images and containers up-to-date and safe, we can
follow these best practices:</p>
<ol type="1">
<li><p><strong>Regularly Pull Updated Base Images</strong>: We should
regularly pull the latest base images. This helps us get security fixes
and updates.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> pull <span class="op">&lt;</span>image-name<span class="op">&gt;</span>:latest</span></code></pre></div></li>
<li><p><strong>Use Version Tags</strong>: It is better to avoid the
<code>latest</code> tag for production. We can use specific version tags
instead. This gives us stability and predictability.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> <span class="op">&lt;</span>image-name<span class="op">&gt;</span>:<span class="op">&lt;</span>version<span class="op">&gt;</span> .</span></code></pre></div></li>
<li><p><strong>Rebuild Images on Dependency Changes</strong>: If any
dependencies in our app change, we need to rebuild the Docker image.
This will include the new updates.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> <span class="op">&lt;</span>image-name<span class="op">&gt;</span>:<span class="op">&lt;</span>new-version<span class="op">&gt;</span> .</span></code></pre></div></li>
<li><p><strong>Automate Image Updates</strong>: We can set up CI/CD
pipelines. This will help us automate the building and deploying of
updated images. We can use tools like Jenkins, GitLab CI, or GitHub
Actions.</p></li>
<li><p><strong>Scan Images for Vulnerabilities</strong>: It is important
to scan Docker images for vulnerabilities. We can use tools like Trivy
or Clair to help us find and fix security problems.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">trivy</span> image <span class="op">&lt;</span>image-name<span class="op">&gt;</span></span></code></pre></div></li>
<li><p><strong>Use Docker Compose for Version Control</strong>: When we
use Docker Compose, we should keep a version control for our
<code>docker-compose.yml</code> file. This helps us track changes in our
services.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> &lt;image-name&gt;:&lt;version&gt;</span></span></code></pre></div></li>
<li><p><strong>Implement Health Checks</strong>: We can use Docker’s
health check feature. This checks if our containers are running well. If
they fail, Docker can restart them automatically.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">HEALTHCHECK</span> <span class="kw">CMD</span> <span class="ex">curl</span> <span class="at">--fail</span> http://localhost/ <span class="kw">||</span> <span class="bu">exit</span> 1</span></code></pre></div></li>
<li><p><strong>Document Changes</strong>: We should keep a changelog for
our Docker images. This will help us know what has changed between
versions.</p></li>
<li><p><strong>Limit Container Permissions</strong>: We should run
containers with the least privilege. This means we can specify user
permissions to lower security risks.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">USER</span> nonrootuser</span></code></pre></div></li>
<li><p><strong>Use Multi-Stage Builds</strong>: We can make our Docker
images better by using multi-stage builds. This keeps the final images
small and safe.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> golang:1.16 <span class="kw">AS</span> builder</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">WORKDIR</span> /app</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> . .</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">go</span> build <span class="at">-o</span> myapp</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> alpine:latest</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> <span class="op">--from=builder</span> /app/myapp /app/myapp</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;/app/myapp&quot;</span>]</span></code></pre></div></li>
</ol>
<p>By following these best practices for updating Docker images and
containers, we can make our container environment safer and more
efficient. For more info on Docker security best practices, check out <a
href="https://bestonlinetutorial.com/docker/what-are-docker-security-best-practices.html">Docker
Security Best Practices</a>.</p>
<h2 id="how-to-automate-docker-image-updates-using-cicd-pipelines">How
to Automate Docker Image Updates Using CI/CD Pipelines?</h2>
<p>We can automate Docker image updates using CI/CD pipelines. We can
use tools like Jenkins, GitLab CI, or GitHub Actions. The steps are
simple:</p>
<ol type="1">
<li><p><strong>Create a Dockerfile</strong>: First, make sure you have a
<code>Dockerfile</code>. It tells how to build our Docker image.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> python:3.8-slim</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">WORKDIR</span> /app</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> . .</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">pip</span> install <span class="at">-r</span> requirements.txt</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;python&quot;</span>, <span class="st">&quot;app.py&quot;</span>]</span></code></pre></div></li>
<li><p><strong>Set Up CI/CD Configuration</strong>:</p>
<ul>
<li>For <strong>Jenkins</strong>, we can create a
<code>Jenkinsfile</code>:</li>
</ul>
<div class="sourceCode" id="cb10"><pre
class="sourceCode groovy"><code class="sourceCode groovy"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>pipeline <span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    agent any</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    stages <span class="op">{</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stage</span><span class="op">(</span><span class="st">&#39;Build&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>            steps <span class="op">{</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                script <span class="op">{</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>                    docker<span class="op">.</span><span class="fu">build</span><span class="op">(</span><span class="st">&quot;myapp:</span><span class="ss">${</span>env<span class="op">.</span>BUILD_ID<span class="ss">}</span><span class="st">&quot;</span><span class="op">)</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stage</span><span class="op">(</span><span class="st">&#39;Test&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>            steps <span class="op">{</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>                script <span class="op">{</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>                    docker<span class="op">.</span><span class="fu">image</span><span class="op">(</span><span class="st">&quot;myapp:</span><span class="ss">${</span>env<span class="op">.</span>BUILD_ID<span class="ss">}</span><span class="st">&quot;</span><span class="op">).</span><span class="fu">inside</span> <span class="op">{</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>                        sh <span class="st">&#39;pytest&#39;</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>                    <span class="op">}</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">stage</span><span class="op">(</span><span class="st">&#39;Push&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>            steps <span class="op">{</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>                script <span class="op">{</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>                    docker<span class="op">.</span><span class="fu">image</span><span class="op">(</span><span class="st">&quot;myapp:</span><span class="ss">${</span>env<span class="op">.</span>BUILD_ID<span class="ss">}</span><span class="st">&quot;</span><span class="op">).</span><span class="fu">push</span><span class="op">(</span><span class="st">&quot;latest&quot;</span><span class="op">)</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<ul>
<li>For <strong>GitLab CI</strong>, we add a
<code>.gitlab-ci.yml</code>:</li>
</ul>
<div class="sourceCode" id="cb11"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stages</span><span class="kw">:</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> build</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> test</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> deploy</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">stage</span><span class="kw">:</span><span class="at"> build</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">script</span><span class="kw">:</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> docker build -t myapp:$CI_COMMIT_SHORT_SHA .</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="fu">test</span><span class="kw">:</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">stage</span><span class="kw">:</span><span class="at"> test</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">script</span><span class="kw">:</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> docker run myapp:$CI_COMMIT_SHORT_SHA pytest</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="fu">deploy</span><span class="kw">:</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">stage</span><span class="kw">:</span><span class="at"> deploy</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">script</span><span class="kw">:</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> docker push myapp:$CI_COMMIT_SHORT_SHA</span></span></code></pre></div>
<ul>
<li>For <strong>GitHub Actions</strong>, we use this in our
<code>.github/workflows/docker-image.yml</code>:</li>
</ul>
<div class="sourceCode" id="cb12"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> CI</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> main</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout code</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v2</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build Docker image</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>        docker build . -t myapp:${{ github.sha }}</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test Docker image</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>        docker run myapp:${{ github.sha }} pytest</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Push Docker image</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>        echo &quot;${{ secrets.DOCKER_PASSWORD }}&quot; | docker login -u &quot;${{ secrets.DOCKER_USERNAME }}&quot; --password-stdin</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>        docker push myapp:${{ github.sha }}</span></code></pre></div></li>
<li><p><strong>Triggering Updates</strong>: We need to set up webhooks
or triggers. We can do this based on code changes or pull requests. We
can also schedule updates to run at regular times.</p></li>
<li><p><strong>Monitor and Rollback</strong>: We should monitor our
images to check if they are healthy. It is also good to have a rollback
plan if something goes wrong.</p></li>
<li><p><strong>Secure Credentials</strong>: We must keep Docker registry
credentials safe. We can use secrets management in our CI/CD tools to do
this.</p></li>
</ol>
<p>By following these steps, we can automate Docker image updates in our
CI/CD pipelines. This helps keep our images up-to-date and secure. For
more information on Docker best practices, we can refer to <a
href="https://bestonlinetutorial.com/docker/what-are-docker-security-best-practices.html">Docker
Security Best Practices</a>.</p>
<h2
id="what-tools-can-help-you-monitor-docker-image-vulnerabilities">What
Tools Can Help You Monitor Docker Image Vulnerabilities?</h2>
<p>To keep our Docker images and containers safe, we need to check for
vulnerabilities all the time. There are many tools that can help us find
and fix risks related to Docker images.</p>
<ol type="1">
<li><p><strong>Docker Bench for Security</strong>: This is a script. It
checks many best practices for running Docker containers in production.
It helps us look at the security setup of our Docker host and
containers.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/docker/docker-bench-security</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> docker-bench-security</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sh</span> docker-bench-security.sh</span></code></pre></div></li>
<li><p><strong>Clair</strong>: This is an open-source project. It does a
static check for vulnerabilities in application containers. Clair scans
our images and shares details about known vulnerabilities.</p></li>
<li><p><strong>Trivy</strong>: This is a simple and complete scanner for
vulnerabilities. It checks containers and other files. It finds issues
in OS packages and app dependencies.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">trivy</span> image your-image:tag</span></code></pre></div></li>
<li><p><strong>Anchore Engine</strong>: This is an open-source tool. It
analyzes container images. It gives detailed reports about
vulnerabilities and checks for compliance.</p></li>
<li><p><strong>Snyk</strong>: This tool provides a cloud service. It
tests containers for vulnerabilities. It works well with CI/CD pipelines
for ongoing checks.</p></li>
<li><p><strong>Aqua Security</strong>: Aqua has many security tools for
container apps. It includes image scanning and runtime
protection.</p></li>
<li><p><strong>Sysdig Secure</strong>: Sysdig gives us good monitoring
and security features for containers. It includes managing
vulnerabilities and checks for compliance.</p></li>
</ol>
<p>Using these tools helps us monitor Docker image vulnerabilities. It
makes our container security stronger. For more info on keeping Docker
containers safe, we can check out <a
href="https://bestonlinetutorial.com/docker/what-are-docker-security-best-practices.html">Docker
Security Best Practices</a>.</p>
<h2 id="how-to-use-docker-security-scans-to-identify-risks">How to Use
Docker Security Scans to Identify Risks?</h2>
<p>We know that Docker security scans are important for finding weak
points in our Docker images and containers. When we use security scans,
we help keep our applications safe and follow the best rules. Here are
some easy ways and tools to run security scans on our Docker images:</p>
<ol type="1">
<li><p><strong>Using Docker’s Built-in Security Scanning</strong><br />
If we use Docker Hub, we can turn on automated security scanning for our
images. When we push an image to Docker Hub, it automatically checks for
problems using tools like Clair.</p>
<p>To turn it on:</p>
<ul>
<li>Go to settings of your repository in Docker Hub.</li>
<li>Turn on the “Security Scanning” feature.</li>
</ul></li>
<li><p><strong>Integrating with Clair</strong><br />
Clair is a project that helps us check for weak points in appc and
Docker containers. We can set it up in our CI/CD pipeline to scan images
before we deploy them.</p>
<p>Example setup:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="at">--name</span> clair <span class="at">--restart</span> always <span class="dt">\</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>-p 6060:6060 <span class="at">-p</span> 6061:6061 <span class="dt">\</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>quay.io/coreos/clair:v2.1.0</span></code></pre></div></li>
<li><p><strong>Using Trivy</strong><br />
Trivy is a simple tool that checks for weak points in containers and
other things. We can use it to scan images on our computer before we
deploy them.</p>
<p>Installation:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install aquasecurity/trivy/trivy  <span class="co"># For macOS</span></span></code></pre></div>
<p>Scanning an image:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">trivy</span> image your-image:tag</span></code></pre></div></li>
<li><p><strong>Using Anchore Engine</strong><br />
Anchore Engine is another good tool for checking Docker images. It gives
us detailed reports about weak points and policy rules.</p>
<p>Installation:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="at">--name</span> anchore-engine <span class="dt">\</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>-e ANCHORE_DB_USER=anchore <span class="dt">\</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>-e ANCHORE_DB_PASS=anchore <span class="dt">\</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>-e ANCHORE_DB_HOST=your-db-host <span class="dt">\</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>anchore/engine:latest</span></code></pre></div>
<p>To scan an image:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">anchore-cli</span> image add your-image:tag</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">anchore-cli</span> image wait your-image:tag</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="ex">anchore-cli</span> image vuln your-image:tag all</span></code></pre></div></li>
<li><p><strong>CI/CD Pipeline Integration</strong><br />
We can add these tools to our CI/CD pipelines (like GitHub Actions or
Jenkins) to automatically scan for weak points during the build process.
For example, we can use Trivy in a GitHub Actions workflow:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> CI</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">]</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">scan</span><span class="kw">:</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v2</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run Trivy</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> trivy image your-image:tag</span></span></code></pre></div></li>
</ol>
<p>By using these Docker security scans, we can find and fix risks that
come from weak points in our Docker images and containers. For more
information on Docker security rules, we can read the article on <a
href="https://bestonlinetutorial.com/docker/what-are-docker-security-best-practices.html">Docker
security best practices</a>.</p>
<h2
id="what-steps-should-we-follow-to-rebuild-and-redeploy-updated-containers">What
Steps Should We Follow to Rebuild and Redeploy Updated Containers?</h2>
<p>To rebuild and redeploy updated Docker containers, we can follow
these simple steps:</p>
<ol type="1">
<li><p><strong>Update the Dockerfile</strong>: Change your Dockerfile to
add the latest dependencies or changes. Make sure to mention any updated
base images.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> python:3.9-slim</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Install dependencies</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> requirements.txt .</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">pip</span> install <span class="at">--no-cache-dir</span> <span class="at">-r</span> requirements.txt</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy application files</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> . /app</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="kw">WORKDIR</span> /app</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Command to run the application</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;python&quot;</span>, <span class="st">&quot;app.py&quot;</span>]</span></code></pre></div></li>
<li><p><strong>Rebuild the Docker Image</strong>: We need to use the
<code>docker build</code> command to create a new image. We should tag
the image correctly.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> yourusername/yourapp:latest .</span></code></pre></div></li>
<li><p><strong>Stop and Remove the Existing Container</strong>: We
should find and stop the running container by its name or ID. Then we
can remove it.</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> ps  <span class="co"># List running containers</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> stop your_container_name</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> rm your_container_name</span></code></pre></div></li>
<li><p><strong>Run the New Container</strong>: Now we can start a new
container from the updated image. We must map the necessary ports and
volumes.</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="at">--name</span> your_container_name <span class="at">-p</span> 80:80 yourusername/yourapp:latest</span></code></pre></div></li>
<li><p><strong>Verify Deployment</strong>: We should check if the new
container is running well and serving the application like we
expect.</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> ps  <span class="co"># Check running containers</span></span></code></pre></div></li>
<li><p><strong>Clean Up Unused Images and Containers</strong>: If we
want, we can remove any unused images to save space.</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> image prune</span></code></pre></div></li>
</ol>
<p>By following these steps, we can rebuild and redeploy our updated
Docker containers. This helps us make sure our applications run the
latest code and dependencies. For more details on Docker containers, you
can see <a
href="https://bestonlinetutorial.com/docker/what-is-a-docker-container-and-how-does-it-operate.html">What
is a Docker Container and How Does It Operate?</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="how-often-should-we-update-our-docker-images-and-containers">1.
How often should we update our Docker images and containers?</h3>
<p>We should update our Docker images and containers regularly. It is
good to check for updates every week or every two weeks. This is very
important for production environments. By keeping our images and
containers updated, we get the latest security fixes and features. This
helps reduce risks and makes our systems more stable. For more
information, we can read about <a
href="https://bestonlinetutorial.com/docker/what-are-docker-security-best-practices.html">Docker
security best practices</a>.</p>
<h3 id="what-are-the-risks-of-using-old-docker-images">2. What are the
risks of using old Docker images?</h3>
<p>Using old Docker images can put our applications at risk. These
images may have security problems like malware or unauthorized access.
Old images can have software that is not fixed. Attackers can use these
problems to steal data or disrupt services. To avoid these risks, we
should scan our images and containers often. We need to make sure they
come from the latest base images. We can learn more about <a
href="https://bestonlinetutorial.com/docker/how-to-secure-docker-containers-from-malicious-attacks.html">how
to secure Docker containers from bad attacks</a>.</p>
<h3 id="how-can-we-automate-docker-image-updates">3. How can we automate
Docker image updates?</h3>
<p>We can automate Docker image updates by using CI/CD pipelines. We can
use tools like Jenkins, GitLab CI, or GitHub Actions. We can set them up
to pull the latest base images. They can also rebuild our Docker images
and redeploy our containers without us doing it manually. This helps
reduce downtime and keeps our Docker containers up-to-date. For more
help, we can check out how to <a
href="https://bestonlinetutorial.com/docker/how-to-automate-docker-image-updates-using-ci-cd-pipelines.html">automate
Docker image updates using CI/CD pipelines</a>.</p>
<h3 id="what-tools-help-us-monitor-docker-image-vulnerabilities">4. What
tools help us monitor Docker image vulnerabilities?</h3>
<p>There are several tools that can help us with this. Tools like Clair,
Trivy, and Aqua Security are useful. They scan our Docker images for
known vulnerabilities in real-time. They give us alerts for any security
issues. Using these tools regularly helps us keep our Docker images and
containers safe. We can learn more about <a
href="https://bestonlinetutorial.com/docker/how-to-use-docker-security-scans-to-identify-risks.html">Docker
security scans to find risks</a>.</p>
<h3
id="what-steps-should-we-follow-to-rebuild-and-redeploy-updated-containers-1">5.
What steps should we follow to rebuild and redeploy updated
containers?</h3>
<p>To rebuild and redeploy our updated containers, we first need to make
sure our Dockerfile and application code are updated. Then we run the
command <code>docker build -t your_image_name:latest .</code> to build
the new image. After that, we stop the running container with
<code>docker stop container_id</code> and remove it using
<code>docker rm container_id</code>. Finally, we can deploy the new
container with <code>docker run -d your_image_name:latest</code>. This
process helps keep our containers secure and updated. For more detailed
steps, we can refer to the article on <a
href="https://bestonlinetutorial.com/docker/what-are-docker-container-names-and-how-do-you-assign-them.html">how
to rebuild and redeploy updated containers</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            