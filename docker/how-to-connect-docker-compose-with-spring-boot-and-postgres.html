
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "BestOnlineTutorial",
      "url": "https://www.bestonlinetutorial.com/"
    }
    </script>
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How to Connect Docker Compose with Spring Boot and Postgres?</title>
            <meta name="description" content="Learn how to seamlessly connect Docker Compose with Spring Boot and Postgres in this step-by-step guide. Boost your development!">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How to Connect Docker Compose with Spring Boot and Postgres?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>To connect Docker Compose with Spring Boot and Postgres, we need to
set up a Docker Compose environment. This environment helps us run our
Spring Boot app and Postgres database together. We do this by
configuring our application properties, making a Dockerfile for our
Spring Boot app, and writing a Docker Compose file. This file describes
the services we need for both Spring Boot and Postgres. When we follow
these steps, our app will run well in a containerized environment.</p>
<p>In this article, we will show how to connect Docker Compose with
Spring Boot and Postgres. We will cover important topics like setting up
the Docker Compose environment, configuring Spring Boot application
properties for Postgres, creating a Dockerfile for the Spring Boot app,
writing a Docker Compose file, and connecting Spring Boot with Postgres.
We will also answer some common questions about this integration. Here
is what we will cover:</p>
<ul>
<li>Setting Up Your Docker Compose Environment for Spring Boot and
Postgres</li>
<li>Configuring Spring Boot Application Properties for Postgres</li>
<li>Creating Dockerfile for Spring Boot Application</li>
<li>Writing Docker Compose File for Spring Boot and Postgres</li>
<li>Connecting Spring Boot to Postgres Using Docker Compose</li>
<li>Frequently Asked Questions</li>
</ul>
<h2
id="setting-up-your-docker-compose-environment-for-spring-boot-and-postgres">Setting
Up Your Docker Compose Environment for Spring Boot and Postgres</h2>
<p>To set up our Docker Compose environment for a Spring Boot app with
PostgreSQL, we can follow these steps:</p>
<ol type="1">
<li><p><strong>Install Docker and Docker Compose</strong>: First, we
need to make sure Docker and Docker Compose are installed on our
machine. We can check this guide on <a
href="https://bestonlinetutorial.com/docker/how-to-install-docker-on-different-operating-systems.html">how
to install Docker on different operating systems</a>.</p></li>
<li><p><strong>Create a Project Directory</strong>: Next, we create a
new folder for our Spring Boot app and go into it.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> spring-boot-postgres-docker</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> spring-boot-postgres-docker</span></code></pre></div></li>
<li><p><strong>Create a Spring Boot Application</strong>: We will use
Spring Initializr (https://start.spring.io/) to make a Spring Boot
project. We need to add these dependencies:</p>
<ul>
<li>Spring Web</li>
<li>Spring Data JPA</li>
<li>PostgreSQL Driver</li>
</ul>
<p>After that, we download the project and extract it in our
folder.</p></li>
<li><p><strong>Dockerfile Creation</strong>: Now, we create a
<code>Dockerfile</code> in our project folder for our Spring Boot
app:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> openjdk:11-jre</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">VOLUME</span> /tmp</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> target/myapp.jar app.jar</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;java&quot;</span>, <span class="st">&quot;-jar&quot;</span>, <span class="st">&quot;/app.jar&quot;</span>]</span></code></pre></div></li>
<li><p><strong>Docker Compose File</strong>: We also need to make a
<code>docker-compose.yml</code> file in our project folder:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">postgres</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> postgres:latest</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">restart</span><span class="kw">:</span><span class="at"> always</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">POSTGRES_DB</span><span class="kw">:</span><span class="at"> mydatabase</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">POSTGRES_USER</span><span class="kw">:</span><span class="at"> user</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">POSTGRES_PASSWORD</span><span class="kw">:</span><span class="at"> password</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;5432:5432&quot;</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> postgres_data:/var/lib/postgresql/data</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">spring-boot-app</span><span class="kw">:</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">build</span><span class="kw">:</span><span class="at"> .</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;8080:8080&quot;</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">depends_on</span><span class="kw">:</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> postgres</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">SPRING_DATASOURCE_URL</span><span class="kw">:</span><span class="at"> jdbc:postgresql://postgres:5432/mydatabase</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">SPRING_DATASOURCE_USERNAME</span><span class="kw">:</span><span class="at"> user</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">SPRING_DATASOURCE_PASSWORD</span><span class="kw">:</span><span class="at"> password</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">postgres_data</span><span class="kw">:</span></span></code></pre></div></li>
<li><p><strong>Build and Run Docker Compose</strong>: Finally, we run
this command to build and start our containers:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">--build</span></span></code></pre></div></li>
</ol>
<p>This setup will create a PostgreSQL database and a Spring Boot app
connected to it in our Docker Compose environment. We can change the
database name, username, and password as we need for our
configuration.</p>
<h2
id="configuring-spring-boot-application-properties-for-postgres">Configuring
Spring Boot Application Properties for Postgres</h2>
<p>To connect a Spring Boot app with PostgreSQL using Docker Compose, we
need to set the application properties correctly. We must set the
database URL, username, password, and JPA properties.</p>
<p>In your <code>application.properties</code> file, we add this
configuration:</p>
<pre class="properties"><code># PostgreSQL Database Configuration
spring.datasource.url=jdbc:postgresql://postgres:5432/mydb
spring.datasource.username=myuser
spring.datasource.password=mypassword
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect</code></pre>
<h3 id="explanation-of-properties">Explanation of Properties:</h3>
<ul>
<li><p><code>spring.datasource.url</code>: This is the JDBC URL for
connecting to the PostgreSQL database. It looks like
<code>jdbc:postgresql://&lt;host&gt;:&lt;port&gt;/&lt;database&gt;</code>.
Here, <code>postgres</code> is the service name from the Docker Compose
file.</p></li>
<li><p><code>spring.datasource.username</code>: This is the username we
use to access the PostgreSQL database.</p></li>
<li><p><code>spring.datasource.password</code>: This is the password for
the username we set.</p></li>
<li><p><code>spring.datasource.driver-class-name</code>: This is the
driver class for PostgreSQL.</p></li>
<li><p><code>spring.jpa.hibernate.ddl-auto</code>: This property tells
Hibernate how to manage the database schema. Setting it to
<code>update</code> will update the schema automatically.</p></li>
<li><p><code>spring.jpa.show-sql</code>: We set this to
<code>true</code> to log the SQL statements made by Hibernate.</p></li>
<li><p><code>spring.jpa.properties.hibernate.dialect</code>: This sets
the Hibernate dialect for PostgreSQL.</p></li>
</ul>
<p>We should also have the PostgreSQL dependency in our
<code>pom.xml</code>:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">dependency</span>&gt;</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">groupId</span>&gt;org.springframework.boot&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">artifactId</span>&gt;spring-boot-starter-data-jpa&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">dependency</span>&gt;</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">dependency</span>&gt;</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">groupId</span>&gt;org.postgresql&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">artifactId</span>&gt;postgresql&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">scope</span>&gt;runtime&lt;/<span class="kw">scope</span>&gt;</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">dependency</span>&gt;</span></code></pre></div>
<p>This setup lets our Spring Boot app connect smoothly with PostgreSQL
when we use Docker Compose. For more details about Docker and its
features, we can check <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a>.</p>
<h2 id="creating-dockerfile-for-spring-boot-application">Creating
Dockerfile for Spring Boot Application</h2>
<p>To containerize our Spring Boot application, we need to create a
<code>Dockerfile</code>. This file tells Docker how to set up the
environment for our app and the steps to build the Docker image. Here is
a simple example of a <code>Dockerfile</code> for a Spring Boot
application.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use a base image with Java</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> openjdk:11-jre-slim</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the working directory inside the container</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WORKDIR</span> /app</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy the jar file to the container</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> target/my-spring-boot-app.jar app.jar</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Expose the port that your Spring Boot app runs on</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="kw">EXPOSE</span> 8080</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Command to run the application</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;java&quot;</span>, <span class="st">&quot;-jar&quot;</span>, <span class="st">&quot;app.jar&quot;</span>]</span></code></pre></div>
<h3 id="explanation-of-the-dockerfile">Explanation of the
Dockerfile</h3>
<ul>
<li><strong>FROM</strong>: This tells Docker to use a base image called
<code>openjdk:11-jre-slim</code>. It has the Java runtime
environment.</li>
<li><strong>WORKDIR</strong>: We set the working directory inside the
container to <code>/app</code>.</li>
<li><strong>COPY</strong>: This copies the JAR file from the target
folder of our Spring Boot project into the container.</li>
<li><strong>EXPOSE</strong>: This lets Docker know that our container
listens on port 8080 when it runs.</li>
<li><strong>CMD</strong>: This is the command to run our Spring Boot
application when the container starts.</li>
</ul>
<h3 id="building-the-docker-image">Building the Docker Image</h3>
<p>To build the Docker image, we go to the directory where our
<code>Dockerfile</code> is. Then we run this command:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> my-spring-boot-app .</span></code></pre></div>
<p>This command makes a Docker image named
<code>my-spring-boot-app</code>.</p>
<h3 id="running-the-docker-container">Running the Docker Container</h3>
<p>After we build the image, we can run the container with this
command:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-p</span> 8080:8080 my-spring-boot-app</span></code></pre></div>
<p>This command connects port 8080 of our host to port 8080 of the
container. Now we can access the Spring Boot application at
<code>http://localhost:8080</code>.</p>
<p>By following this process, we can create a <code>Dockerfile</code>
for our Spring Boot application. This lets us run it in a Docker
container. For more details on Docker and what it can do, you can read
this <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">article
on Docker images</a>.</p>
<h2
id="writing-docker-compose-file-for-spring-boot-and-postgres">Writing
Docker Compose File for Spring Boot and Postgres</h2>
<p>To connect a Spring Boot app with PostgreSQL using Docker Compose, we
need to create a <code>docker-compose.yml</code> file. This file tells
Docker how to set up the app and the database. Let’s see how to do
it.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">springboot-app</span><span class="kw">:</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> your-spring-boot-image</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">context</span><span class="kw">:</span><span class="at"> .</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">dockerfile</span><span class="kw">:</span><span class="at"> Dockerfile</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;8080:8080&quot;</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">SPRING_DATASOURCE_URL</span><span class="kw">:</span><span class="at"> jdbc:postgresql://postgres-db:5432/mydb</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">SPRING_DATASOURCE_USERNAME</span><span class="kw">:</span><span class="at"> user</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">SPRING_DATASOURCE_PASSWORD</span><span class="kw">:</span><span class="at"> password</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">depends_on</span><span class="kw">:</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> postgres-db</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">postgres-db</span><span class="kw">:</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> postgres:latest</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">restart</span><span class="kw">:</span><span class="at"> always</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;5432:5432&quot;</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">POSTGRES_DB</span><span class="kw">:</span><span class="at"> mydb</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">POSTGRES_USER</span><span class="kw">:</span><span class="at"> user</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">POSTGRES_PASSWORD</span><span class="kw">:</span><span class="at"> password</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> postgres_data:/var/lib/postgresql/data</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">postgres_data</span><span class="kw">:</span></span></code></pre></div>
<h3 id="explanation-of-the-docker-compose-file">Explanation of the
Docker Compose File</h3>
<ol type="1">
<li><strong>Version</strong>: This shows the version of the Compose file
format.</li>
<li><strong>Services</strong>:
<ul>
<li><strong>springboot-app</strong>: This is the Spring Boot app
service.
<ul>
<li><strong>image</strong>: Change <code>your-spring-boot-image</code>
to your real image name.</li>
<li><strong>build</strong>: This is where Docker finds the build context
and Dockerfile for the app.</li>
<li><strong>ports</strong>: This connects port 8080 of our computer to
port 8080 of the container.</li>
<li><strong>environment</strong>: This sets the variables needed to
connect to the database.</li>
<li><strong>depends_on</strong>: This makes sure the PostgreSQL database
starts before the Spring Boot app.</li>
</ul></li>
<li><strong>postgres-db</strong>: This is the PostgreSQL database
service.
<ul>
<li><strong>image</strong>: This uses the latest PostgreSQL image.</li>
<li><strong>restart</strong>: This makes the container restart
automatically unless we stop it.</li>
<li><strong>ports</strong>: This connects the default PostgreSQL
port.</li>
<li><strong>environment</strong>: This sets the database name, user, and
password.</li>
<li><strong>volumes</strong>: This keeps PostgreSQL data safe using a
volume.</li>
</ul></li>
</ul></li>
<li><strong>Volumes</strong>: This sets up a volume for storing
PostgreSQL data.</li>
</ol>
<p>Make sure to change the placeholders to your own settings and
database details. After we create this file, we can run
<code>docker-compose up</code> to start the app and the PostgreSQL
database. For more info on Docker Compose, we can check <a
href="https://bestonlinetutorial.com/docker/what-is-docker-compose-and-how-does-it-simplify-multi-container-applications.html">what
is Docker Compose and how does it simplify multi-container
applications</a>.</p>
<h2
id="connecting-spring-boot-to-postgres-using-docker-compose">Connecting
Spring Boot to Postgres Using Docker Compose</h2>
<p>To connect a Spring Boot app to a PostgreSQL database with Docker
Compose, we can follow these steps:</p>
<ol type="1">
<li><p><strong>Check Prerequisites</strong>: First, we need to make sure
that we have Docker and Docker Compose installed. You can find how to
install them <a
href="https://bestonlinetutorial.com/docker/how-to-install-docker-on-different-operating-systems.html">here</a>.</p></li>
<li><p><strong>Create a Spring Boot Application</strong>: Next, we need
to set up our Spring Boot app. It should include the needed dependencies
for PostgreSQL in our <code>pom.xml</code> file:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">dependency</span>&gt;</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">groupId</span>&gt;org.springframework.boot&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">artifactId</span>&gt;spring-boot-starter-data-jpa&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">dependency</span>&gt;</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">dependency</span>&gt;</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">groupId</span>&gt;org.postgresql&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">artifactId</span>&gt;postgresql&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">scope</span>&gt;runtime&lt;/<span class="kw">scope</span>&gt;</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">dependency</span>&gt;</span></code></pre></div></li>
<li><p><strong>Setup application.properties</strong>: Now, we update our
Spring Boot <code>application.properties</code> file with the PostgreSQL
connection info:</p>
<pre class="properties"><code>spring.datasource.url=jdbc:postgresql://db:5432/mydatabase
spring.datasource.username=myuser
spring.datasource.password=mypassword
spring.jpa.hibernate.ddl-auto=update</code></pre></li>
<li><p><strong>Make Dockerfile</strong>: We create a
<code>Dockerfile</code> for our Spring Boot app:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> openjdk:17-jdk-slim</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">VOLUME</span> /tmp</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> target/myapp.jar app.jar</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;java&quot;</span>,<span class="st">&quot;-jar&quot;</span>,<span class="st">&quot;/app.jar&quot;</span>]</span></code></pre></div></li>
<li><p><strong>Write docker-compose.yml</strong>: We need to write a
<code>docker-compose.yml</code> file to define our services:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db</span><span class="kw">:</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> postgres:14</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">POSTGRES_DB</span><span class="kw">:</span><span class="at"> mydatabase</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">POSTGRES_USER</span><span class="kw">:</span><span class="at"> myuser</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">POSTGRES_PASSWORD</span><span class="kw">:</span><span class="at"> mypassword</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;5432:5432&quot;</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> postgres_data:/var/lib/postgresql/data</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">build</span><span class="kw">:</span><span class="at"> .</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;8080:8080&quot;</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">depends_on</span><span class="kw">:</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> db</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">postgres_data</span><span class="kw">:</span></span></code></pre></div></li>
<li><p><strong>Build and Run with Docker Compose</strong>: Finally, we
run this command to build and start our containers:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">--build</span></span></code></pre></div></li>
</ol>
<p>Now, our Spring Boot app should connect to the PostgreSQL database
that is running in Docker. We need to check that the database is set up
right and can be accessed from the Spring Boot app.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3
id="how-do-we-set-up-a-spring-boot-application-to-connect-with-postgresql-using-docker-compose">1.
How do we set up a Spring Boot application to connect with PostgreSQL
using Docker Compose?</h3>
<p>To set up a Spring Boot application with PostgreSQL using Docker
Compose, we start by making our <code>docker-compose.yml</code> file. We
need to define services for both the Spring Boot app and the PostgreSQL
database. It is important to specify the right image for PostgreSQL and
set the necessary environment variables for database connection. For
more details, we can look at our guide on <a
href="https://bestonlinetutorial.com/docker/how-to-write-a-simple-docker-compose-yml-file.html">How
to Write a Simple Docker Compose YML File</a>.</p>
<h3
id="what-are-the-common-issues-we-face-when-connecting-a-spring-boot-application-to-postgresql-in-docker">2.
What are the common issues we face when connecting a Spring Boot
application to PostgreSQL in Docker?</h3>
<p>Common issues are connection timeout errors, wrong database settings
in application properties, and network problems between containers. To
fix these issues, we should check that our PostgreSQL container is
running and can be reached from the Spring Boot container. We can also
read our article on <a
href="https://bestonlinetutorial.com/docker/how-to-troubleshoot-docker-networking-issues.html">How
to Troubleshoot Docker Networking Issues</a> for more help.</p>
<h3
id="how-can-we-use-docker-volumes-for-our-postgresql-database-in-a-spring-boot-application">3.
How can we use Docker volumes for our PostgreSQL database in a Spring
Boot application?</h3>
<p>Using Docker volumes for our PostgreSQL database helps keep data safe
even when containers restart. In our <code>docker-compose.yml</code>, we
define a volume for the PostgreSQL service and connect it to the right
data folder. This way, our data stays safe even if we recreate the
container. To learn more, we can check our guide on <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">What
Are Docker Volumes and How Do They Work</a>.</p>
<h3
id="what-is-the-best-way-to-manage-environment-variables-for-docker-compose-in-a-spring-boot-application">4.
What is the best way to manage environment variables for Docker Compose
in a Spring Boot application?</h3>
<p>The best way to manage environment variables in Docker Compose is to
use an <code>.env</code> file or set them directly in our
<code>docker-compose.yml</code>. This makes it easy to configure and
keeps sensitive data like database passwords separate from our code. For
more insights, we can visit our article on <a
href="https://bestonlinetutorial.com/docker/how-to-override-docker-compose-configurations.html">How
to Override Docker Compose Configurations</a>.</p>
<h3
id="how-do-docker-networks-help-communication-between-spring-boot-and-postgresql-containers">5.
How do Docker networks help communication between Spring Boot and
PostgreSQL containers?</h3>
<p>Docker networks help containers talk to each other by letting them
find each other’s names. By creating a custom network in our
<code>docker-compose.yml</code>, we can make sure our Spring Boot
application connects to the PostgreSQL service using its name as the
hostname. For more details, we can read our overview on <a
href="https://bestonlinetutorial.com/docker/how-does-docker-networking-work-for-multi-container-applications.html">How
Does Docker Networking Work for Multi-Container Applications</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            