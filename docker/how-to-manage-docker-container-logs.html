
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <title>How to Manage Docker Container Logs?</title>
            <meta name="description" content="Learn effective strategies for managing Docker container logs. Enhance your application monitoring and troubleshooting today!">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How to Manage Docker Container Logs?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Managing Docker container logs is very important for keeping our
applications healthy and running well. Docker container logs give us,
the developers and system admins, important information about how our
applications behave. They also show us errors and help us see how the
system performs. If we manage these logs properly, they will not take
too much disk space. We can also find important information easily when
we need to fix problems or analyze data.</p>
<p>In this article, we will talk about good ways to manage Docker
container logs. We will look at Docker logging drivers, how to set up
logging options, how to view logs, how to rotate logs automatically, and
how to use the ELK Stack for centralizing logs. By the end of this
guide, we will understand how to manage Docker container logs in a smart
way. Here are the key points we will cover:</p>
<ul>
<li>How to Effectively Manage Docker Container Logs</li>
<li>What Are Docker Logging Drivers</li>
<li>How to Configure Docker Logging Options</li>
<li>How to View Docker Container Logs</li>
<li>How to Rotate Docker Logs Automatically</li>
<li>How to Centralize Docker Logs with ELK Stack</li>
<li>Frequently Asked Questions</li>
</ul>
<p>If you want to learn more about Docker and what it can do, we can
check these articles: <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a>, <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">What
Are Docker Images and How Do They Work?</a>, and <a
href="https://bestonlinetutorial.com/docker/what-is-containerization-and-how-does-it-relate-to-docker.html">What
is Containerization and How Does It Relate to Docker?</a>.</p>
<h2 id="what-are-docker-logging-drivers">What Are Docker Logging
Drivers?</h2>
<p>Docker logging drivers help us manage the logs from containers. They
decide how we collect, store, and send logs. By default, Docker uses the
<code>json-file</code> logging driver. This driver writes logs in JSON
format to a file on our host system.</p>
<h3 id="common-docker-logging-drivers">Common Docker Logging
Drivers</h3>
<ol type="1">
<li><strong>json-file</strong>: This is the default driver. It logs
container output in JSON format.</li>
<li><strong>syslog</strong>: This driver sends logs to the syslog daemon
on the host.</li>
<li><strong>journald</strong>: This one works with systemd’s journal for
storing logs.</li>
<li><strong>gelf</strong>: It sends logs to a Graylog Extended Log
Format (GELF) endpoint.</li>
<li><strong>fluentd</strong>: This driver routes logs to Fluentd for
flexible log collection.</li>
<li><strong>awslogs</strong>: It sends logs to Amazon CloudWatch.</li>
<li><strong>splunk</strong>: This driver forwards logs to a Splunk
server.</li>
</ol>
<h3 id="configuring-logging-drivers">Configuring Logging Drivers</h3>
<p>To set a logging driver for a container, we can use the
<code>--log-driver</code> option with the <code>docker run</code>
command. Here is an example using the <code>syslog</code> driver:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--log-driver</span><span class="op">=</span>syslog <span class="at">--log-opt</span> syslog-address=udp://localhost:514 my-container</span></code></pre></div>
<h3 id="viewing-logs-based-on-driver">Viewing Logs Based on Driver</h3>
<ul>
<li><p>For the <code>json-file</code>, we can view logs by using:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> logs <span class="op">&lt;</span>container_id<span class="op">&gt;</span></span></code></pre></div></li>
<li><p>For <code>syslog</code>, we can access logs through the syslog
daemon.</p></li>
</ul>
<h3 id="setting-default-logging-driver">Setting Default Logging
Driver</h3>
<p>To set a default logging driver for all containers, we need to change
the Docker daemon configuration file
(<code>/etc/docker/daemon.json</code>):</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;log-driver&quot;</span><span class="fu">:</span> <span class="st">&quot;json-file&quot;</span><span class="fu">,</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;log-opts&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max-size&quot;</span><span class="fu">:</span> <span class="st">&quot;10m&quot;</span><span class="fu">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max-file&quot;</span><span class="fu">:</span> <span class="st">&quot;3&quot;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>After we edit this file, we should restart the Docker service:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart docker</span></code></pre></div>
<p>By knowing and setting up Docker logging drivers well, we can handle
container logs in a way that fits our application needs and setup. To
learn more about Docker and how it works, we can visit <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a>.</p>
<h2 id="how-to-configure-docker-logging-options">How to Configure Docker
Logging Options?</h2>
<p>We can set up Docker logging options to control how logs are
collected and stored from our Docker containers. We can choose logging
drivers and set log options in our <code>docker run</code> command or in
the Docker daemon configuration.</p>
<h3 id="using-docker-run">Using <code>docker run</code></h3>
<p>When we start a container, we can configure logging options with the
<code>--log-driver</code> and optional <code>--log-opt</code> flags:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="dt">\</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--log-driver</span><span class="op">=&lt;</span>driver_name<span class="op">&gt;</span> <span class="dt">\</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--log-opt</span> <span class="op">&lt;</span>option1<span class="op">&gt;</span>=<span class="op">&lt;</span>value1<span class="op">&gt;</span> <span class="dt">\</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--log-opt</span> <span class="op">&lt;</span>option2<span class="op">&gt;</span>=<span class="op">&lt;</span>value2<span class="op">&gt;</span> <span class="dt">\</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">&lt;</span>image_name<span class="op">&gt;</span></span></code></pre></div>
<p><strong>Example: Using the JSON File Driver</strong></p>
<p>The default logging driver is <code>json-file</code>. If we want to
change the logging options, we can use:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="dt">\</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--log-driver</span><span class="op">=</span>json-file <span class="dt">\</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--log-opt</span> max-size=10m <span class="dt">\</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--log-opt</span> max-file=3 <span class="dt">\</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  nginx</span></code></pre></div>
<p>This setup limits each log file to 10 MB. It keeps a maximum of 3 log
files.</p>
<h3 id="configuring-logging-in-docker-daemon">Configuring Logging in
Docker Daemon</h3>
<p>We can also set logging options for all containers in the Docker
daemon configuration file. This file is usually found at
<code>/etc/docker/daemon.json</code>.</p>
<p><strong>Example Configuration:</strong></p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;log-driver&quot;</span><span class="fu">:</span> <span class="st">&quot;json-file&quot;</span><span class="fu">,</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;log-opts&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max-size&quot;</span><span class="fu">:</span> <span class="st">&quot;10m&quot;</span><span class="fu">,</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max-file&quot;</span><span class="fu">:</span> <span class="st">&quot;3&quot;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>After we change the configuration file, we need to restart the Docker
service to apply the changes:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart docker</span></code></pre></div>
<h3 id="available-logging-drivers">Available Logging Drivers</h3>
<ul>
<li><code>json-file</code>: This is the default driver that saves logs
in JSON format.</li>
<li><code>syslog</code>: This sends logs to the syslog daemon.</li>
<li><code>journald</code>: This uses the journald logging service.</li>
<li><code>gelf</code>: This sends logs to a Graylog Extended Log Format
(GELF) endpoint.</li>
<li><code>fluentd</code>: This sends logs to Fluentd.</li>
<li><code>awslogs</code>, <code>splunk</code>, etc.: These are for
third-party logging services.</li>
</ul>
<h3 id="checking-current-logging-configuration">Checking Current Logging
Configuration</h3>
<p>If we want to see the current logging options for a running
container, we can use:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> inspect <span class="op">&lt;</span>container_id<span class="op">&gt;</span> --format=<span class="st">&#39;{{.HostConfig.LogConfig}}&#39;</span></span></code></pre></div>
<p>This command shows details about the logging driver and options that
are being used for the specified container.</p>
<p>By setting Docker logging options right, we can manage and keep our
container logs well. This way, we make sure logging fits our
application’s needs.</p>
<h2 id="how-to-view-docker-container-logs">How to View Docker Container
Logs?</h2>
<p>We can view Docker container logs using the Docker CLI with the
<code>docker logs</code> command. This command helps us get logs from a
specific container. It lets us check output and fix issues.</p>
<h3 id="basic-command-syntax">Basic Command Syntax</h3>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> logs <span class="pp">[</span><span class="ss">OPTIONS</span><span class="pp">]</span> CONTAINER</span></code></pre></div>
<h3 id="common-options">Common Options</h3>
<ul>
<li><code>-f</code>, <code>--follow</code>: This option lets us see new
logs as they come in.</li>
<li><code>--tail</code>: This option shows only the last N lines of
logs.</li>
<li><code>--since</code>: This option shows logs from a specific
time.</li>
</ul>
<h3 id="examples">Examples</h3>
<ol type="1">
<li><p><strong>View logs of a specific container</strong>:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> logs my_container</span></code></pre></div></li>
<li><p><strong>Follow logs in real-time</strong>:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> logs <span class="at">-f</span> my_container</span></code></pre></div></li>
<li><p><strong>Show the last 100 lines of logs</strong>:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> logs <span class="at">--tail</span> 100 my_container</span></code></pre></div></li>
<li><p><strong>Show logs since a specific time</strong>:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> logs <span class="at">--since</span> 1h my_container</span></code></pre></div></li>
</ol>
<h3 id="viewing-logs-from-all-containers">Viewing Logs from All
Containers</h3>
<p>To see logs from all running containers, we can use
<code>docker ps</code> and <code>docker logs</code> commands in a
loop:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> container <span class="kw">in</span> <span class="va">$(</span><span class="ex">docker</span> ps <span class="at">-q</span><span class="va">)</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;Logs for container: </span><span class="va">$container</span><span class="st">&quot;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="ex">docker</span> logs <span class="va">$container</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre></div>
<h3 id="accessing-logs-for-stopped-containers">Accessing Logs for
Stopped Containers</h3>
<p>To get logs for a stopped container, we just use the same
<code>docker logs</code> command with the container ID or name:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> logs my_stopped_container</span></code></pre></div>
<p>Using these ways will help us manage and view Docker container logs
better. This is important for checking and fixing our applications. For
more information about Docker management, we can check <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">what
is Docker and why should you use it</a>.</p>
<h2 id="how-to-rotate-docker-logs-automatically">How to Rotate Docker
Logs Automatically?</h2>
<p>We need to manage Docker container logs well. Rotating logs
automatically helps us save disk space and keeps the logging system
fast. Docker has built-in options for log rotation. We can use the
<code>json-file</code> logging driver. This driver is the default
one.</p>
<h3 id="configuring-log-rotation">Configuring Log Rotation</h3>
<p>We can set up log rotation by adding options in the
<code>docker run</code> command. We can also do it in the Docker
daemon’s configuration file. Here are some common options for log
rotation:</p>
<ul>
<li><strong>max-size</strong>: This is the biggest size for the log file
before it gets rotated.</li>
<li><strong>max-file</strong>: This is the most number of log files we
want to keep.</li>
</ul>
<h3 id="example-using-docker-run">Example: Using
<code>docker run</code></h3>
<p>We can add log rotation options when we run a container like
this:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--log-driver</span><span class="op">=</span>json-file <span class="dt">\</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">--log-opt</span> max-size=10m <span class="dt">\</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">--log-opt</span> max-file=3 <span class="dt">\</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>           your-image</span></code></pre></div>
<p>In this example, each log file can be up to 10 MB. Docker will keep a
maximum of 3 log files.</p>
<h3 id="configuring-via-docker-daemon">Configuring via Docker
Daemon</h3>
<p>If we want to set log rotation for all containers, we need to change
the Docker daemon configuration file. This file is usually at
<code>/etc/docker/daemon.json</code>. We add or change this
configuration:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;log-driver&quot;</span><span class="fu">:</span> <span class="st">&quot;json-file&quot;</span><span class="fu">,</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;log-opts&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max-size&quot;</span><span class="fu">:</span> <span class="st">&quot;10m&quot;</span><span class="fu">,</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max-file&quot;</span><span class="fu">:</span> <span class="st">&quot;3&quot;</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>After we change the configuration file, we must restart the Docker
service. This is how we do it:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart docker</span></code></pre></div>
<h3 id="verifying-log-rotation">Verifying Log Rotation</h3>
<p>To see if log rotation is working, we check the logs of a running
container. We can look at the log files in the
<code>/var/lib/docker/containers/&lt;container-id&gt;/</code>
folder.</p>
<p>This setup helps us manage Docker container logs better. It
automatically rotates them and keeps our system clean and fast. For more
information about Docker, we can check out <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">what
Docker is and why you should use it</a>.</p>
<h2 id="how-to-centralize-docker-logs-with-elk-stack">How to Centralize
Docker Logs with ELK Stack?</h2>
<p>We can centralize Docker container logs using the ELK Stack. ELK
stands for Elasticsearch, Logstash, and Kibana. This setup helps us
manage and analyze logs from many containers easily. Let us see how to
set it up.</p>
<ol type="1">
<li><strong>Install ELK Stack</strong>: We can run the ELK stack using
Docker. Use this <code>docker-compose.yml</code> to set up
Elasticsearch, Logstash, and Kibana.</li>
</ol>
<div class="sourceCode" id="cb20"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">elasticsearch</span><span class="kw">:</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> elasticsearch:7.10.1</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> discovery.type=single-node</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;9200:9200&quot;</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">logstash</span><span class="kw">:</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> logstash:7.10.1</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./logstash.conf:/usr/share/logstash/pipeline/logstash.conf</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;5044:5044&quot;</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">kibana</span><span class="kw">:</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> kibana:7.10.1</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;5601:5601&quot;</span></span></code></pre></div>
<ol start="2" type="1">
<li><strong>Configure Logstash</strong>: Next, we need to create a
<code>logstash.conf</code> file. This file will tell Logstash where to
get the input and where to send the output. It will read logs from
Docker containers and send them to Elasticsearch.</li>
</ol>
<pre class="conf"><code>input {
  tcp {
    port =&gt; 5044
    codec =&gt; json_lines
  }
}

output {
  elasticsearch {
    hosts =&gt; [&quot;elasticsearch:9200&quot;]
    index =&gt; &quot;docker-logs-%{+YYYY.MM.dd}&quot;
  }
}</code></pre>
<ol start="3" type="1">
<li><strong>Run ELK Stack</strong>: Now, we run the stack. Go to the
folder where your <code>docker-compose.yml</code> is. Then run:</li>
</ol>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">-d</span></span></code></pre></div>
<ol start="4" type="1">
<li><strong>Configure Docker Logging Driver</strong>: We need to send
logs from Docker containers to Logstash. To do this, we set the logging
driver to <code>gelf</code> in the container settings.</li>
</ol>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="dt">\</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--log-driver</span><span class="op">=</span>gelf <span class="dt">\</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--log-opt</span> gelf-address=udp://<span class="op">&lt;</span>logstash-ip<span class="op">&gt;</span>:5044 <span class="dt">\</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  your_docker_image</span></code></pre></div>
<p>Make sure to replace <code>&lt;logstash-ip&gt;</code> with the IP
address of your Logstash container or use <code>localhost</code> if you
run it on your machine.</p>
<ol start="5" type="1">
<li><p><strong>Access Kibana</strong>: Open your web browser. Go to
<code>http://localhost:5601</code>. Here, we can see and analyze logs in
Kibana.</p></li>
<li><p><strong>Create an Index Pattern</strong>: In Kibana, go to the
“Management” section. Then click on “Index Patterns.” Create an index
pattern for <code>docker-logs-*</code>. This will help us start
analyzing our logs.</p></li>
</ol>
<p>This setup helps us centralize Docker container logs. Now we can
monitor and troubleshoot our applications better. For more advanced
logging methods, we can look into how to <a
href="https://bestonlinetutorial.com/docker/how-to-manage-docker-container-logs/">manage
Docker container logs</a> with other tools and settings.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-are-docker-container-logs-used-for">1. What are Docker
container logs used for?</h3>
<p>We use Docker container logs to watch and fix problems in
applications that run in containers. These logs show the output from the
processes inside the container. This includes standard output (stdout)
and standard error (stderr). When we manage Docker container logs well,
we can see how the application works, find issues, and make it run
better. For more about Docker’s setup, check out <a
href="https://bestonlinetutorial.com/docker/what-are-the-core-components-of-docker-architecture.html">this
article on Docker’s core parts</a>.</p>
<h3 id="how-can-i-view-docker-container-logs">2. How can I view Docker
container logs?</h3>
<p>We can view Docker container logs using the command line. Just run
the command <code>docker logs &lt;container_id&gt;</code> to see the
logs for a specific container. This command shows the logs in real-time.
It is very important for fixing issues. We can also use flags like
<code>-f</code> to follow logs or <code>--tail</code> to limit how many
lines we see. For more on Docker container actions, look at <a
href="https://bestonlinetutorial.com/docker/how-to-create-a-docker-container-from-an-image.html">this
guide on how to create and manage Docker containers</a>.</p>
<h3 id="what-are-docker-logging-drivers-and-how-do-they-work">3. What
are Docker logging drivers, and how do they work?</h3>
<p>Docker logging drivers tell us how to collect and save logs from
Docker containers. There are different logging drivers like
<code>json-file</code>, <code>syslog</code>, and <code>fluentd</code>.
They give us different ways to manage logs. Picking the right logging
driver is important for good log management and to work well with other
logging systems. For more details about containerization, see <a
href="https://bestonlinetutorial.com/docker/what-is-containerization-and-how-does-it-relate-to-docker.html">this
article on what is containerization and how it relates to
Docker</a>.</p>
<h3 id="how-do-i-configure-docker-logging-options">4. How do I configure
Docker logging options?</h3>
<p>To set Docker logging options, we need to choose the logging driver
and settings in the Docker daemon config file
(<code>/etc/docker/daemon.json</code>). For example, we can set the
default logging driver to <code>json-file</code> and add options for log
rotation. After we change the settings, we need to restart the Docker
service for the changes to work. For a full guide on installing Docker,
visit <a
href="https://bestonlinetutorial.com/docker/how-to-install-docker-on-different-operating-systems.html">this
article on how to install Docker on different operating systems</a>.</p>
<h3 id="how-can-i-centralize-docker-logs-using-the-elk-stack">5. How can
I centralize Docker logs using the ELK stack?</h3>
<p>We can centralize Docker logs using the ELK stack (Elasticsearch,
Logstash, and Kibana). This helps us search, analyze, and visualize logs
better. We can set Docker to send logs to Logstash with a compatible
logging driver. Once the logs are in Elasticsearch, we can use Kibana to
visualize and query our logs easily. This makes our log management much
better. For more about what Docker can do, check out <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">this
article on the benefits of using Docker in development</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            