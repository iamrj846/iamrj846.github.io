
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TFCQEJR7TD');
</script>
            <title>How to Use Docker with Kubernetes for Orchestration?</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Common CSS & Icons -->
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
<link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
<link rel="stylesheet" href="/assets/css/post.css">
            <meta name="description" content="Learn how to effectively use Docker with Kubernetes for seamless orchestration in your containerized applications. Get started now!">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How to Use Docker with Kubernetes for Orchestration?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Docker is a strong platform that helps us create, deploy, and manage
containerized applications. It packages applications and their needed
parts into units called containers. This way, we can make sure our apps
work the same in different places. Kubernetes is a tool that automates
the deployment, scaling, and management of these containerized apps.
When we use Docker with Kubernetes, we get a good way to handle complex
applications in the cloud. This makes our work easier and helps us scale
better.</p>
<p>In this article, we will look at how we can use Docker with
Kubernetes for good orchestration. We will talk about what we need to
use Docker and Kubernetes, how to set up both tools on our machine, how
to create a Docker image for our application, how to deploy Docker
containers to Kubernetes, and how to manage and scale those containers.
We will also answer some common questions to help with any issues or
best practices. Here’s what we will discuss:</p>
<ul>
<li>How Can You Use Docker with Kubernetes for Effective
Orchestration</li>
<li>What Are the Prerequisites for Using Docker and Kubernetes</li>
<li>How to Set Up Docker and Kubernetes on Your Machine</li>
<li>How to Create a Docker Image for Your Application</li>
<li>How to Deploy Docker Containers to Kubernetes</li>
<li>How to Manage and Scale Docker Containers with Kubernetes</li>
<li>Frequently Asked Questions</li>
</ul>
<p>By putting Docker and Kubernetes together, we can use the full power
of container orchestration. This helps us manage and deploy applications
better. For more information, you can check these helpful resources: <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a> and <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">What
are the Benefits of Using Docker in Development?</a>.</p>
<h2 id="what-are-the-prerequisites-for-using-docker-and-kubernetes">What
Are the Prerequisites for Using Docker and Kubernetes?</h2>
<p>Before we use Docker with Kubernetes, we need to make sure our system
meets some requirements.</p>
<ol type="1">
<li><strong>Operating System</strong>:
<ul>
<li>Linux like Ubuntu or CentOS<br />
</li>
<li>macOS<br />
</li>
<li>Windows 10 Pro or Enterprise with WSL 2</li>
</ul></li>
<li><strong>Docker Installation</strong>:
<ul>
<li>We need to have Docker on our machine. We can check the installation
guide for our operating system <a
href="https://bestonlinetutorial.com/docker/how-to-install-docker-on-different-operating-systems.html">here</a>.</li>
</ul></li>
<li><strong>Kubernetes Installation</strong>:
<ul>
<li>We have to install a Kubernetes distribution. Some popular options
are:
<ul>
<li><p><strong>Minikube</strong>: Good for local work. We can install
Minikube by running:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-LO</span> https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> install minikube-linux-amd64 /usr/local/bin/minikube</span></code></pre></div></li>
<li><p><strong>Kubeadm</strong>: This is for making a production
cluster. We can install it by using:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt-get install <span class="at">-y</span> apt-transport-https</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> kubelet kubeadm kubectl</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-mark hold kubelet kubeadm kubectl</span></code></pre></div></li>
</ul></li>
</ul></li>
<li><strong>System Requirements</strong>:
<ul>
<li>We need at least 2 GB of RAM (4 GB is better).<br />
</li>
<li>We should have at least 20 GB of free space.<br />
</li>
<li>We must enable virtualization in BIOS.</li>
</ul></li>
<li><strong>Network Configuration</strong>:
<ul>
<li>We have to make sure our firewall allows communication between
Docker and Kubernetes parts.</li>
</ul></li>
<li><strong>kubectl Command Line Tool</strong>:
<ul>
<li><p>We need to install <code>kubectl</code> to manage Kubernetes
clusters. We can install it by running:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-LO</span> <span class="st">&quot;https://storage.googleapis.com/kubernetes-release/release/</span><span class="va">$(</span><span class="ex">curl</span> <span class="at">-s</span> https://storage.googleapis.com/kubernetes-release/release/stable.txt<span class="va">)</span><span class="st">/bin/linux/amd64/kubectl&quot;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> +x ./kubectl</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mv ./kubectl /usr/local/bin/kubectl</span></code></pre></div></li>
</ul></li>
<li><strong>Container Runtime</strong>:
<ul>
<li>We must set Docker as the container runtime for Kubernetes.</li>
</ul></li>
</ol>
<p>When we have these prerequisites ready, we can start using Docker
with Kubernetes to organize our applications well.</p>
<h2 id="how-to-set-up-docker-and-kubernetes-on-your-machine">How to Set
Up Docker and Kubernetes on Your Machine?</h2>
<p>To set up Docker and Kubernetes on your machine, we can follow these
steps for each operating system.</p>
<h3 id="for-windows">For Windows:</h3>
<ol type="1">
<li><strong>Install Docker Desktop:</strong>
<ul>
<li>First, we need to download Docker Desktop from the <a
href="https://www.docker.com/products/docker-desktop">Docker
Hub</a>.</li>
<li>Next, we run the installer and follow the steps.</li>
<li>We should check “Use the WSL 2 based engine” during the
installation.</li>
</ul></li>
<li><strong>Enable Kubernetes:</strong>
<ul>
<li>Now we open Docker Desktop.</li>
<li>We go to Settings and then Kubernetes.</li>
<li>We check “Enable Kubernetes” and click “Apply &amp; Restart”.</li>
</ul></li>
</ol>
<h3 id="for-macos">For macOS:</h3>
<ol type="1">
<li><strong>Install Docker Desktop:</strong>
<ul>
<li>First, we download Docker Desktop from the <a
href="https://www.docker.com/products/docker-desktop">Docker
Hub</a>.</li>
<li>After that, we open the downloaded <code>.dmg</code> file and drag
Docker to our Applications folder.</li>
</ul></li>
<li><strong>Enable Kubernetes:</strong>
<ul>
<li>We open Docker Desktop again.</li>
<li>We go to Preferences and then Kubernetes.</li>
<li>We check “Enable Kubernetes” and click “Apply &amp; Restart”.</li>
</ul></li>
</ol>
<h3 id="for-linux-ubuntu">For Linux (Ubuntu):</h3>
<ol type="1">
<li><p><strong>Install Docker:</strong></p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install apt-transport-https ca-certificates curl software-properties-common</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg <span class="kw">|</span> <span class="fu">sudo</span> apt-key add <span class="at">-</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="st">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu </span><span class="va">$(</span><span class="ex">lsb_release</span> <span class="at">-cs</span><span class="va">)</span><span class="st"> stable&quot;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install docker-ce</span></code></pre></div></li>
<li><p><strong>Install Kubernetes (using Minikube):</strong></p>
<ul>
<li>First, we install Minikube:</li>
</ul>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-LO</span> https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> install minikube-linux-amd64 /usr/local/bin/minikube</span></code></pre></div>
<ul>
<li>Next, we start Minikube:</li>
</ul>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">minikube</span> start</span></code></pre></div></li>
<li><p><strong>Install Kubectl:</strong></p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> kubectl</span></code></pre></div></li>
</ol>
<h3 id="verify-installation">Verify Installation:</h3>
<p>After we install, we can check if Docker and Kubernetes work. We
run:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> <span class="at">--version</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> version <span class="at">--client</span></span></code></pre></div>
<p>We need to make sure both commands show the version numbers. This
shows that Docker and Kubernetes are set up right on our machine.</p>
<h2 id="how-to-create-a-docker-image-for-your-application">How to Create
a Docker Image for Your Application?</h2>
<p>We can create a Docker image for our application by defining the
environment and what it needs to run. We usually do this with a file
called <code>Dockerfile</code>. Here are the steps to create a Docker
image:</p>
<ol type="1">
<li><p><strong>Create a Dockerfile</strong>: This file tells how to
build our Docker image.</p>
<p>Here is an example <code>Dockerfile</code> for a Node.js
application:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the official Node.js image as the base image</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> node:14</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the working directory inside the container</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WORKDIR</span> /usr/src/app</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy package.json and package-lock.json</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> package*.json ./</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Install the application dependencies</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">npm</span> install</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy the rest of the application source code</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> . .</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Expose the port the app runs on</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="kw">EXPOSE</span> 3000</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Command to run the application</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;node&quot;</span>, <span class="st">&quot;app.js&quot;</span>]</span></code></pre></div></li>
<li><p><strong>Build the Docker Image</strong>: We can use the
<code>docker build</code> command to create the image from the
Dockerfile.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> my-node-app .</span></code></pre></div>
<p>In this command:</p>
<ul>
<li><code>-t my-node-app</code>: Tags the image with the name
<code>my-node-app</code>.</li>
<li><code>.</code>: This means we use the current directory for the
build.</li>
</ul></li>
<li><p><strong>Verify the Image</strong>: After we build it, we can
check if the image was created.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> images</span></code></pre></div></li>
<li><p><strong>Run the Docker Image</strong>: Now we can run a container
from the image we just made.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-p</span> 3000:3000 my-node-app</span></code></pre></div>
<p>This command connects port <code>3000</code> of the container to port
<code>3000</code> on our host machine.</p></li>
<li><p><strong>Testing the Application</strong>: Open your web browser
and go to <code>http://localhost:3000</code>. You should see our
application running.</p></li>
</ol>
<p>If you want to learn more about Docker images and how they work, you
can check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">What
Are Docker Images and How Do They Work?</a>.</p>
<h2 id="how-to-deploy-docker-containers-to-kubernetes">How to Deploy
Docker Containers to Kubernetes?</h2>
<p>We can deploy Docker containers to Kubernetes by following some
simple steps. This will help our application work well in a Kubernetes
cluster. Here are the steps we need to follow.</p>
<ol type="1">
<li><p><strong>Prepare Your Docker Image</strong>: We need a Docker
image ready for deployment. We can create an image using a Dockerfile.
Here is a simple example:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> nginx:latest</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> ./html /usr/share/nginx/html</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">EXPOSE</span> 80</span></code></pre></div>
<p>Now, we build the Docker image:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> my-nginx-image:latest .</span></code></pre></div></li>
<li><p><strong>Push Docker Image to a Registry</strong>: After we build
our Docker image, we need to push it to a container registry. This could
be Docker Hub or a private registry.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> tag my-nginx-image:latest username/my-nginx-image:latest</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> push username/my-nginx-image:latest</span></code></pre></div></li>
<li><p><strong>Create Kubernetes Deployment</strong>: We need to define
a Kubernetes deployment YAML file. This will help us manage our Docker
container. Here is a simple example of a deployment config:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-nginx-deployment</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-nginx</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-nginx</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-nginx</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> username/my-nginx-image:latest</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div>
<p>We save this config to a file called
<code>deployment.yaml</code>.</p></li>
<li><p><strong>Apply Deployment to Kubernetes</strong>: We use the
<code>kubectl</code> command to deploy our application in
Kubernetes.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> deployment.yaml</span></code></pre></div></li>
<li><p><strong>Expose the Deployment</strong>: To make our application
visible, we can expose it using a Kubernetes Service. We create a
service YAML file:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-nginx-service</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> LoadBalancer</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">targetPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-nginx</span></span></code></pre></div>
<p>Save it to a file named <code>service.yaml</code> and apply it:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> apply <span class="at">-f</span> service.yaml</span></code></pre></div></li>
<li><p><strong>Verify the Deployment</strong>: We check the status of
our deployment and service.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get deployments</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> get services</span></code></pre></div></li>
<li><p><strong>Access the Application</strong>: If we are using a cloud
provider, the service will give us an external IP. We can use this IP to
access our application.</p></li>
</ol>
<p>These steps help us deploy Docker containers to Kubernetes easily.
For more info on creating Docker images, we can check out <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">what
are Docker images and how do they work</a>.</p>
<h2 id="how-to-manage-and-scale-docker-containers-with-kubernetes">How
to Manage and Scale Docker Containers with Kubernetes?</h2>
<p>Kubernetes gives us great tools to manage and scale Docker
containers. Below are some important things we should think about when
managing and scaling our Docker containers with Kubernetes.</p>
<h3 id="managing-docker-containers-with-kubernetes">Managing Docker
Containers with Kubernetes</h3>
<ol type="1">
<li><p><strong>Deployments</strong>: We can use Deployments to control
the lifecycle of our Docker containers. A Deployment helps us set the
desired state for our app. Kubernetes will then take care of deploying
the right number of copies.</p>
<p>Example deployment YAML:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">matchLabels</span><span class="kw">:</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">labels</span><span class="kw">:</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">containers</span><span class="kw">:</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-container</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-app-image:latest</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="kw">-</span><span class="at"> </span><span class="fu">containerPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div></li>
<li><p><strong>Services</strong>: We can use Services to make our
application available on the network. A Service gives a stable IP
address and DNS name to reach our app.</p>
<p>Example service YAML:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> Service</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-service</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">selector</span><span class="kw">:</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">protocol</span><span class="kw">:</span><span class="at"> TCP</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">targetPort</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> LoadBalancer</span></span></code></pre></div></li>
<li><p><strong>ConfigMaps and Secrets</strong>: We use ConfigMaps for
regular configuration data and Secrets for important information. This
helps us manage environment-specific settings without putting them in
our images.</p>
<p>Example ConfigMap YAML:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> v1</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> ConfigMap</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-config</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span><span class="kw">:</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">APP_ENV</span><span class="kw">:</span><span class="at"> production</span></span></code></pre></div></li>
</ol>
<h3 id="scaling-docker-containers-with-kubernetes">Scaling Docker
Containers with Kubernetes</h3>
<ol type="1">
<li><p><strong>Horizontal Pod Autoscaler</strong>: This feature helps us
to automatically scale our application based on CPU usage or other
chosen metrics. We can set the minimum and maximum number of
replicas.</p>
<p>Example Horizontal Pod Autoscaler YAML:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> autoscaling/v2beta2</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kind</span><span class="kw">:</span><span class="at"> HorizontalPodAutoscaler</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app-hpa</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span><span class="kw">:</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">scaleTargetRef</span><span class="kw">:</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">apiVersion</span><span class="kw">:</span><span class="at"> apps/v1</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">kind</span><span class="kw">:</span><span class="at"> Deployment</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> my-app</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">minReplicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">maxReplicas</span><span class="kw">:</span><span class="at"> </span><span class="dv">10</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">metrics</span><span class="kw">:</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">type</span><span class="kw">:</span><span class="at"> Resource</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">resource</span><span class="kw">:</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">name</span><span class="kw">:</span><span class="at"> cpu</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">target</span><span class="kw">:</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">type</span><span class="kw">:</span><span class="at"> Utilization</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">averageUtilization</span><span class="kw">:</span><span class="at"> </span><span class="dv">80</span></span></code></pre></div></li>
<li><p><strong>Manual Scaling</strong>: We can also scale the number of
replicas in our Deployment by using the <code>kubectl scale</code>
command.</p>
<p>Command to scale:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> scale deployment my-app <span class="at">--replicas</span><span class="op">=</span>5</span></code></pre></div></li>
<li><p><strong>Rolling Updates</strong>: Kubernetes allows rolling
updates to reduce downtime during changes. We just need to change the
image version in our Deployment spec. Kubernetes will update the pods
step by step.</p>
<p>Command to update:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">kubectl</span> set image deployment/my-app my-app-container=my-app-image:v2</span></code></pre></div></li>
<li><p><strong>Monitoring and Logging</strong>: We can use tools like
Prometheus and Grafana to monitor our containers. For logging, we can
use tools like ELK Stack or Fluentd to keep track of what our containers
are doing.</p></li>
</ol>
<p>By using these tools and features from Kubernetes, we can manage and
scale our Docker containers well. This helps us keep our applications
available and performing good. To learn more about Docker and how it
works with Kubernetes, we can check this article on <a
href="https://bestonlinetutorial.com/docker/how-does-docker-differ-from-virtual-machines.html">how
Docker differs from virtual machines</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-is-the-relationship-between-docker-and-kubernetes">1. What
is the relationship between Docker and Kubernetes?</h3>
<p>We know that Docker is a platform. It helps developers make, deploy,
and manage applications in containers. Kubernetes is an orchestration
tool. It automates the deployment and management of these containerized
applications. When we use Docker with Kubernetes, we get the benefits of
containerization. This makes it easier to manage and scale applications
in production. If you want to learn more about Docker, you can check out
<a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a>.</p>
<h3 id="how-do-i-install-docker-and-kubernetes-on-my-machine">2. How do
I install Docker and Kubernetes on my machine?</h3>
<p>To install Docker and Kubernetes, we first need to get Docker
Desktop. It has both Docker Engine and Kubernetes. If we are using
Windows or macOS, we can just download Docker Desktop from the official
Docker website. For Linux, we have to follow the installation guide for
our specific distribution. You can find detailed steps for Docker
installation in <a
href="https://bestonlinetutorial.com/docker/how-to-install-docker-on-different-operating-systems.html">How
to Install Docker on Different Operating Systems</a>.</p>
<h3 id="how-can-i-create-a-docker-image-for-my-application">3. How can I
create a Docker image for my application?</h3>
<p>To create a Docker image, we write a Dockerfile. This file tells the
application environment, dependencies, and how to build the image. We
use the <code>docker build</code> command to create the image from our
Dockerfile. After building, we can run it as a container using
<code>docker run</code>. If you want to know more about making Docker
images, read <a
href="https://bestonlinetutorial.com/docker/what-is-a-docker-image-and-how-is-it-different-from-a-container.html">What
is a Docker Image and How is it Different from a Container?</a>.</p>
<h3
id="what-steps-are-involved-in-deploying-docker-containers-to-kubernetes">4.
What steps are involved in deploying Docker containers to
Kubernetes?</h3>
<p>To deploy Docker containers to Kubernetes, we need to create a
Kubernetes Deployment YAML file. This file defines what we want for our
application. It tells us the Docker image, the number of replicas, and
other settings. We then use the <code>kubectl apply -f</code> command to
apply the deployment file. This helps to deploy our containers across
the Kubernetes cluster. For more information, check out <a
href="https://bestonlinetutorial.com/docker/what-is-containerization-and-how-does-it-relate-to-docker.html">What
is Containerization and How Does It Relate to Docker?</a>.</p>
<h3 id="how-does-kubernetes-manage-and-scale-docker-containers">5. How
does Kubernetes manage and scale Docker containers?</h3>
<p>Kubernetes manages and scales Docker containers by watching the
health of the containers. It can restart failed ones automatically and
scale applications based on how much resources they use. We can set
scaling rules in our deployment configuration. This allows Kubernetes to
change the number of replicas based on demand. It helps keep the
application available and uses resources well. For more details on the
benefits of Docker in development, see <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">What
are the Benefits of Using Docker in Development?</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            