
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <title>What are Volumes and Networks in Docker Compose?</title>
            <meta name="description" content="Discover how to manage volumes and networks in Docker Compose for efficient container orchestration. Learn best practices today!">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">What are Volumes and Networks in Docker Compose?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p><strong>Volumes and Networks in Docker Compose</strong></p>
<p>Volumes and networks in Docker Compose are important parts. They help
us manage and organize multi-container applications better. We use
volumes to keep data created by Docker containers. This way, data stays
available even if the container stops or gets removed. On the other
hand, networks help containers talk to each other. They allow containers
to work together smoothly in a set environment.</p>
<p>In this article, we will look at why volumes and networks are
important in Docker Compose. We will explain how Docker Compose volumes
work. We will also show how to define and use them. We will talk about
the role of networks. We will cover custom network setups too. Finally,
we will see how volumes and networks improve Docker Compose projects.
The next sections will help us understand these ideas:</p>
<ul>
<li>Understanding Volumes and Networks in Docker Compose</li>
<li>How do Docker Compose Volumes Work?</li>
<li>How to Define and Use Volumes in Docker Compose?</li>
<li>What is the Role of Networks in Docker Compose?</li>
<li>How to Configure Custom Networks in Docker Compose?</li>
<li>How do Volumes and Networks Enhance Docker Compose Projects?</li>
<li>Frequently Asked Questions</li>
</ul>
<p>For more information on Docker and its parts, we can read these
articles: <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a> and <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">What
are Docker Volumes and How Do They Work?</a>.</p>
<h2 id="how-do-docker-compose-volumes-work">How do Docker Compose
Volumes Work?</h2>
<p>We use Docker Compose volumes to manage data in multi-container
Docker apps. These volumes help data stay available even after we stop
or remove a container. This makes it easier for us to share and manage
data between different services in a <code>docker-compose.yml</code>
file.</p>
<h3 id="key-features-of-docker-compose-volumes">Key Features of Docker
Compose Volumes:</h3>
<ul>
<li><strong>Persistence</strong>: Data in volumes stays there even if we
stop or delete the container.</li>
<li><strong>Sharing</strong>: Many containers can use the same volume.
This helps with sharing data.</li>
<li><strong>Isolation</strong>: Docker manages volumes. This gives us a
separate storage place that is not mixed with the container’s
filesystem.</li>
</ul>
<h3 id="basic-structure-in-docker-compose.yml">Basic Structure in
<code>docker-compose.yml</code></h3>
<p>We define volumes at the top of the <code>docker-compose.yml</code>
file. Then we can use them in services.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp:latest</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> mydata:/data</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">mydata</span><span class="kw">:</span></span></code></pre></div>
<p>In this example: - We create a named volume called
<code>mydata</code>. - The <code>app</code> service uses this volume and
mounts it at <code>/data</code> inside the container.</p>
<h3 id="volume-drivers">Volume Drivers</h3>
<p>Docker has different volume drivers. This lets us customize based on
what we need. The local driver is the default. It saves data on the host
filesystem.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">mydata</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">driver</span><span class="kw">:</span><span class="at"> local</span></span></code></pre></div>
<p>We can also find other drivers for remote storage, depending on what
we do.</p>
<h3 id="accessing-volume-data">Accessing Volume Data</h3>
<p>We can use a command to see the data in the volume from the host.
Here is how we do it:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> volume inspect mydata</span></code></pre></div>
<p>This command shows details about the volume. It includes its mount
point on the host system.</p>
<h3 id="backup-and-restore">Backup and Restore</h3>
<p>We can back up or restore volumes using Docker commands. For example,
we can back up a volume with a simple container:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--rm</span> <span class="at">-v</span> mydata:/data <span class="at">-v</span> <span class="va">$(</span><span class="bu">pwd</span><span class="va">)</span>:/backup busybox cp <span class="at">-a</span> /data /backup</span></code></pre></div>
<p>This command copies what is in the <code>mydata</code> volume to the
current working directory.</p>
<p>For more detailed information about Docker volumes and why they are
important for data persistence, check the article on <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">what
are Docker volumes and how do they work</a>.</p>
<h2 id="how-to-define-and-use-volumes-in-docker-compose">How to Define
and Use Volumes in Docker Compose?</h2>
<p>In Docker Compose, we use volumes to keep and share data between
containers. Volumes let us store data separately from the container’s
life. So, even if we stop or remove containers, our data stays safe.</p>
<p>To define and use volumes in Docker Compose, we write them in the
<code>docker-compose.yml</code> file. Here is a simple example showing
how to define a volume and use it in a service:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp:latest</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> mydata:/data</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">mydata</span><span class="kw">:</span></span></code></pre></div>
<h3 id="explanation">Explanation:</h3>
<ul>
<li><strong><code>version</code></strong>: This tells which version of
the Docker Compose file format to use.</li>
<li><strong><code>services</code></strong>: This section defines the
services we use in our app. Here, we have <code>app</code>.</li>
<li><strong><code>image</code></strong>: This shows the Docker image for
the service.</li>
<li><strong><code>volumes</code></strong>: This lists volumes we want to
mount in the container. In this case, <code>mydata</code> mounts to the
<code>/data</code> directory in the app container.</li>
<li><strong><code>volumes</code></strong> (at the bottom): This part
declares the volume <code>mydata</code>. Docker will create and manage
this volume.</li>
</ul>
<h3 id="using-existing-volumes">Using Existing Volumes</h3>
<p>We can also use a volume that already exists by mentioning it
directly in the service definition:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp:latest</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> existing_volume:/data</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">existing_volume</span><span class="kw">:</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">external</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
<h3 id="key-properties">Key Properties:</h3>
<ul>
<li><strong><code>external: true</code></strong>: This shows that the
volume is managed outside of the current Docker Compose file. This lets
us use volumes that are already there.</li>
</ul>
<h3 id="mounting-host-directories">Mounting Host Directories</h3>
<p>We can also mount directories from our host as volumes:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp:latest</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./data:/data</span></span></code></pre></div>
<p>In this example: - <strong><code>./data</code></strong>: This is a
directory on the host machine. - <strong><code>/data</code></strong>:
This is the path inside the container.</p>
<p>By defining and using volumes in Docker Compose, we help our
application manage and keep data safe. This makes it easier to share
data between different services or containers.</p>
<p>For more details on Docker volumes, we can check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">what
are Docker volumes and how do they work</a>.</p>
<h2 id="what-is-the-role-of-networks-in-docker-compose">What is the Role
of Networks in Docker Compose?</h2>
<p>In Docker Compose, networks help services talk to each other. We
define these services in the <code>docker-compose.yml</code> file.
Networks keep containers separate but let them communicate. This keeps
things safe and fast. Docker Compose makes a default network for us. But
we can also make custom networks for more complex setups.</p>
<h3 id="key-roles-of-networks-in-docker-compose">Key Roles of Networks
in Docker Compose:</h3>
<ul>
<li><p><strong>Service Communication</strong>: Networks help containers
find and talk to each other. They use service names like
hostnames.</p></li>
<li><p><strong>Isolation</strong>: We can run different applications on
the same Docker host. They will not bother each other because they use
separate networks.</p></li>
<li><p><strong>Security</strong>: By default, containers in different
networks do not communicate. This makes our applications safer.</p></li>
<li><p><strong>Custom Networking</strong>: We can create our own
networks, choose network drivers, and set options that fit our
needs.</p></li>
</ul>
<h3 id="example-configuration">Example Configuration:</h3>
<p>Here is a simple example of how to define networks in a
<code>docker-compose.yml</code> file:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> frontend</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">database</span><span class="kw">:</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> mysql:5.7</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_ROOT_PASSWORD</span><span class="kw">:</span><span class="at"> example</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> backend</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">frontend</span><span class="kw">:</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">backend</span><span class="kw">:</span></span></code></pre></div>
<p>In this example: - The <code>web</code> service is on the
<code>frontend</code> network. - The <code>database</code> service is on
the <code>backend</code> network. - This setup let the web service talk
to clients but keeps the database service separate.</p>
<h3 id="network-types">Network Types:</h3>
<p>Docker Compose has different types of networks: -
<strong>Bridge</strong>: This is the default network driver. It works
well for standalone containers. - <strong>Host</strong>: This uses the
host’s network stack directly. - <strong>Overlay</strong>: This lets
containers on different Docker hosts talk to each other. It’s useful in
swarm mode. - <strong>None</strong>: This turns off networking for the
container.</p>
<p>To read more about Docker networking ideas, you can visit <a
href="https://bestonlinetutorial.com/docker/what-are-docker-networks-and-why-are-they-necessary.html">What
are Docker Networks and Why are They Necessary?</a>.</p>
<h2 id="how-to-configure-custom-networks-in-docker-compose">How to
Configure Custom Networks in Docker Compose?</h2>
<p>We can configure custom networks in Docker Compose to control how
containers talk to each other. This also helps us keep them safe and
separate. Docker Compose has different types of networks like bridge,
overlay, and host. Let us see how to set up custom networks in a
<code>docker-compose.yml</code> file.</p>
<h3 id="step-1-define-networks">Step 1: Define Networks</h3>
<p>We can define custom networks under the <code>networks</code> section
in our <code>docker-compose.yml</code> file. Here is an example:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> frontend</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> frontend</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> backend</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">database</span><span class="kw">:</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> postgres</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> backend</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">frontend</span><span class="kw">:</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">backend</span><span class="kw">:</span></span></code></pre></div>
<p>In this example: - The <strong><code>frontend</code></strong> network
connects the <code>web</code> and <code>app</code> services. - The
<strong><code>backend</code></strong> network connects the
<code>app</code> and <code>database</code> services.</p>
<h3 id="step-2-specify-network-options">Step 2: Specify Network
Options</h3>
<p>We can also set options for the networks, like the driver type. Here
is how to use a custom driver:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">frontend</span><span class="kw">:</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">driver</span><span class="kw">:</span><span class="at"> bridge</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">backend</span><span class="kw">:</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">driver</span><span class="kw">:</span><span class="at"> overlay</span></span></code></pre></div>
<h3 id="step-3-use-the-networks-in-services">Step 3: Use the Networks in
Services</h3>
<p>We should specify the networks each service needs to connect to. This
lets the services talk over the networks we set up.</p>
<h3 id="step-4-deploy-the-stack">Step 4: Deploy the Stack</h3>
<p>To run the Docker Compose stack with custom networks, we can use this
command:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">-d</span></span></code></pre></div>
<h3 id="verifying-networks">Verifying Networks</h3>
<p>After we run the stack, we can check the networks that are created by
using:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> network ls</span></code></pre></div>
<h3 id="inspecting-a-network">Inspecting a Network</h3>
<p>If we want to look at a specific network to see which containers are
connected, we can use:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> network inspect <span class="op">&lt;</span>network_name<span class="op">&gt;</span></span></code></pre></div>
<p>This command gives us details about the network and the services
connected to it.</p>
<h3 id="additional-considerations">Additional Considerations</h3>
<ul>
<li><strong>Isolation</strong>: Services on different networks cannot
talk to each other unless we set it up that way.</li>
<li><strong>DNS Resolution</strong>: Docker Compose gives automatic DNS
resolution for services in the same network.</li>
</ul>
<p>If you want to learn more about Docker networking and its types, you
can check this article on <a
href="https://bestonlinetutorial.com/docker/what-are-docker-networks-and-why-are-they-necessary.html">what
are Docker networks and why are they necessary</a>.</p>
<h2 id="how-do-volumes-and-networks-enhance-docker-compose-projects">How
do Volumes and Networks Enhance Docker Compose Projects?</h2>
<p>Volumes and networks are important parts of Docker Compose. They help
us make multi-container apps better. We can use volumes to manage data
storage. Networks help containers talk to each other smoothly.</p>
<h3 id="benefits-of-using-volumes">Benefits of Using Volumes</h3>
<ul>
<li><p><strong>Data Persistence</strong>: Normally, data in a container
does not last long. Volumes help keep data safe even after we remove or
recreate a container. For example, we can keep a database’s data in a
volume. This volume stays even if the database container is gone.</p>
<p>Example of defining a volume in <code>docker-compose.yml</code>:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db</span><span class="kw">:</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> postgres</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> db_data:/var/lib/postgresql/data</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db_data</span><span class="kw">:</span></span></code></pre></div></li>
<li><p><strong>Data Sharing</strong>: With volumes, many containers can
share data easily. This is very helpful in microservices where different
services need the same data.</p></li>
<li><p><strong>Backup and Restore</strong>: We can back up volumes
easily. This makes it simple to recover data if we need to.</p></li>
</ul>
<h3 id="benefits-of-using-networks">Benefits of Using Networks</h3>
<ul>
<li><p><strong>Isolation and Security</strong>: Docker Compose lets us
create custom networks. This keeps services separate from each other.
Only services on the same network can talk. This makes our apps
safer.</p></li>
<li><p><strong>Service Discovery</strong>: Containers in the same
network can use their service names to talk to each other. This makes
finding services easier and we do not have to worry about IP
addresses.</p>
<p>Example of defining a network in <code>docker-compose.yml</code>:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> frontend</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">api</span><span class="kw">:</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-api</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> frontend</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> backend</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">frontend</span><span class="kw">:</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">backend</span><span class="kw">:</span></span></code></pre></div></li>
<li><p><strong>Multi-Container Communication</strong>: Networks help
containers talk directly. This is very important for apps with many
services that work together.</p></li>
</ul>
<h3 id="integration-of-volumes-and-networks">Integration of Volumes and
Networks</h3>
<p>When we use volumes and networks together in Docker Compose, we get
stronger app designs. For example, a web app can keep user-uploaded
files in a volume. At the same time, it can talk to a database using a
special network. This setup helps us make our applications more flexible
and easier to scale.</p>
<p>Using volumes and networks in Docker Compose projects helps us manage
data better, keep things secure, and have more options in our container
apps. For more details on Docker Compose and its parts, we can read
about <a
href="https://bestonlinetutorial.com/docker/what-is-docker-compose-and-how-does-it-simplify-multi-container-applications.html">what
is Docker Compose and how does it simplify multi-container
applications</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-are-docker-compose-volumes-used-for">What are Docker
Compose volumes used for?</h3>
<p>We use Docker Compose volumes to keep data safe that Docker
containers generate and use. They help to store data outside the
container’s filesystem. This way, we do not lose data when we stop or
remove the container. It is very important for apps that need to keep
data, like databases. To know more about how Docker volumes work, you
can check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">what
are Docker volumes and how do they work</a>.</p>
<h3
id="how-do-i-mount-a-host-directory-as-a-volume-in-docker-compose">How
do I mount a host directory as a volume in Docker Compose?</h3>
<p>To mount a host directory as a volume in Docker Compose, we need to
write the host path and container path in our
<code>docker-compose.yml</code> file. Here is an example:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">myservice</span><span class="kw">:</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myimage</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./host_directory:/container_directory</span></span></code></pre></div>
<p>This setup lets us access data in <code>host_directory</code> inside
the container at <code>container_directory</code>. It makes data
management easier. For more details, visit <a
href="https://bestonlinetutorial.com/docker/how-to-mount-host-directories-to-docker-containers.html">how
to mount host directories to Docker containers</a>.</p>
<h3 id="what-is-the-purpose-of-networks-in-docker-compose">What is the
purpose of networks in Docker Compose?</h3>
<p>Networks in Docker Compose help containers to talk to each other in a
safe environment. By default, Docker Compose makes a bridge network for
your app. This allows all containers in the same Compose file to connect
easily. It also makes things more secure and helps us manage
communication between containers. To learn more about Docker networks,
check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-networks-and-why-are-they-necessary.html">what
are Docker networks and why are they necessary</a>.</p>
<h3 id="how-can-i-create-custom-networks-in-docker-compose">How can I
create custom networks in Docker Compose?</h3>
<p>Creating custom networks in Docker Compose is simple. We can define
networks in our <code>docker-compose.yml</code> file under the
<code>networks</code> part. Here is an example:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">myservice</span><span class="kw">:</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myimage</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> my_custom_network</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">my_custom_network</span><span class="kw">:</span></span></code></pre></div>
<p>This setup helps us to separate services and control how they talk to
each other. For more information about custom networks, visit <a
href="https://bestonlinetutorial.com/docker/how-do-you-create-custom-docker-networks.html">how
to create custom Docker networks</a>.</p>
<h3
id="how-do-volumes-and-networks-enhance-docker-compose-projects-1">How
do volumes and networks enhance Docker Compose projects?</h3>
<p>Volumes and networks make Docker Compose projects much better by
keeping data safe and helping containers communicate well. Volumes make
sure data stays the same even when we recreate containers. Networks help
containers to talk to each other in a secure way. This mix allows us to
build strong and scalable applications easily. To understand more about
this, read <a
href="https://bestonlinetutorial.com/docker/what-is-docker-compose-and-how-does-it-simplify-multi-container-applications.html">how
Docker Compose simplifies multi-container applications</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            