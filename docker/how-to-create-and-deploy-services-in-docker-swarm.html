
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TFCQEJR7TD');
</script>
            <title>How to Create and Deploy Services in Docker Swarm?</title>
            <meta name="description" content="Learn how to create and deploy services in Docker Swarm with our step-by-step guide. Simplify container orchestration today!">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How to Create and Deploy Services in Docker Swarm?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Docker Swarm is a tool that helps us manage Docker containers. It
lets us use many Docker engines together as one system. With Docker
Swarm, we can easily scale our applications, balance the load, and find
services. This makes it simpler to run and manage applications that use
containers in different places.</p>
<p>In this article, we will show you how to create and deploy services
in Docker Swarm. We will talk about these topics: how to create and
deploy services step by step, what Docker Swarm is and why it is good,
how to start a Docker Swarm cluster, how to create a service in Docker
Swarm with code examples, how to scale services in Docker Swarm, how to
update and manage services in Docker Swarm, and we will also answer some
questions that people often ask.</p>
<ul>
<li>Creating and Deploying Services in Docker Swarm Step by Step
Guide</li>
<li>What is Docker Swarm and Why Use It for Services?</li>
<li>How to Initialize a Docker Swarm Cluster?</li>
<li>How to Create a Service in Docker Swarm with Code Examples?</li>
<li>How to Scale Services in Docker Swarm?</li>
<li>How to Update and Manage Services in Docker Swarm?</li>
<li>Frequently Asked Questions</li>
</ul>
<h2 id="what-is-docker-swarm-and-why-use-it-for-services">What is Docker
Swarm and Why Use It for Services?</h2>
<p>Docker Swarm is a tool that helps us manage Docker containers. It
lets us group several Docker hosts together. We call this group a swarm.
This makes it easier to deploy, scale, and handle our containerized
applications.</p>
<h3 id="key-features-of-docker-swarm">Key Features of Docker Swarm:</h3>
<ul>
<li><strong>High Availability:</strong> Docker Swarm keeps track of the
cluster’s state. It makes sure that we have the right number of copies
running.</li>
<li><strong>Load Balancing:</strong> It automatically shares incoming
requests among the available services. This helps improve
performance.</li>
<li><strong>Declarative Service Model:</strong> We can set the desired
state of our application. Swarm will work to keep that state.</li>
<li><strong>Rolling Updates:</strong> We can update services without
downtime. It does this by updating containers one by one.</li>
<li><strong>Multi-host Networking:</strong> Swarm has built-in
networking that lets containers talk to each other securely across
different hosts.</li>
</ul>
<h3 id="benefits-of-using-docker-swarm-for-services">Benefits of Using
Docker Swarm for Services:</h3>
<ul>
<li><strong>Simplicity:</strong> Swarm works well with Docker CLI. This
makes it easy for developers who already know Docker.</li>
<li><strong>Scalability:</strong> We can quickly scale services up or
down with just one command. This helps us handle different loads.</li>
<li><strong>Resource Efficiency:</strong> Swarm uses resources well by
spreading workloads across the cluster.</li>
<li><strong>Security:</strong> It uses TLS encryption for communication
between nodes. This makes sure our interactions are secure.</li>
</ul>
<p>Docker Swarm is great for microservices. In microservices,
applications have many connected services. If you want to learn more
about Docker and its benefits, you can check <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">what
is Docker and why should you use it</a>.</p>
<h2 id="how-to-initialize-a-docker-swarm-cluster">How to Initialize a
Docker Swarm Cluster?</h2>
<p>To start a Docker Swarm cluster, we need to do these steps:</p>
<ol type="1">
<li><p><strong>Install Docker</strong>: First, make sure Docker is on
your machine. We can check this by typing:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> <span class="at">--version</span></span></code></pre></div></li>
<li><p><strong>Initialize the Swarm</strong>: Next, we use this command
to make a new Swarm cluster. We run this command on the manager
node.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> swarm init <span class="at">--advertise-addr</span> <span class="op">&lt;</span>MANAGER-IP<span class="op">&gt;</span></span></code></pre></div>
<p>We should change <code>&lt;MANAGER-IP&gt;</code> with the IP address
of the manager node.</p></li>
<li><p><strong>Output Join Command</strong>: After we start the swarm,
Docker will give us a join command for worker nodes:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> swarm join <span class="at">--token</span> <span class="op">&lt;</span>TOKEN<span class="op">&gt;</span> <span class="op">&lt;</span>MANAGER-IP<span class="op">&gt;</span>:2377</span></code></pre></div>
<p>We need to remember this command. We will use it to add worker nodes
to the swarm.</p></li>
<li><p><strong>Add Worker Nodes</strong>: On each worker node, we run
the join command from the last step to connect it to the swarm.</p></li>
<li><p><strong>Verify Swarm Status</strong>: We can check the status of
the swarm and its nodes by running:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> node ls</span></code></pre></div>
<p>This command shows us the list of nodes in the swarm and their
status.</p></li>
</ol>
<p>By doing these steps, we will initialize a Docker Swarm cluster. This
lets us create and manage services in the swarm environment. For more
info about Docker Swarm and what it can do, we can check <a
href="https://bestonlinetutorial.com/docker/what-is-docker-swarm-and-how-does-it-enable-container-orchestration.html">What
is Docker Swarm and How Does It Enable Container Orchestration?</a>.</p>
<h2 id="how-to-create-a-service-in-docker-swarm-with-code-examples">How
to Create a Service in Docker Swarm with Code Examples?</h2>
<p>We can create a service in Docker Swarm to deploy and manage
containers in a distributed way. A Docker service helps us define how
containers run on a Swarm cluster. Here are the steps and code examples
to create a service in Docker Swarm.</p>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>First, we need to make sure that Docker is installed and
running.</li>
<li>Then, we need to initialize or join a Docker Swarm cluster.</li>
</ul>
<h3 id="creating-a-docker-service">Creating a Docker Service</h3>
<p>We can create a service using the command
<code>docker service create</code>. The basic way to write it is:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service create <span class="at">--name</span> <span class="op">&lt;</span>service_name<span class="op">&gt;</span> --replicas <span class="op">&lt;</span>number_of_replicas<span class="op">&gt;</span> <span class="op">&lt;</span>image_name<span class="op">&gt;</span></span></code></pre></div>
<h3 id="example-create-a-simple-nginx-service">Example: Create a Simple
Nginx Service</h3>
<p>To create a service called <code>my-nginx</code> with 3 replicas of
the Nginx image, we can use this command:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service create <span class="at">--name</span> my-nginx <span class="at">--replicas</span> 3 <span class="at">-p</span> 80:80 nginx</span></code></pre></div>
<h3 id="inspecting-the-service">Inspecting the Service</h3>
<p>After we create a service, we can check its details with:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service inspect my-nginx</span></code></pre></div>
<h3 id="listing-services">Listing Services</h3>
<p>If we want to see all running services in our Swarm cluster, we can
use:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service ls</span></code></pre></div>
<h3 id="updating-a-service">Updating a Service</h3>
<p>When we want to update the service, like changing the image or the
number of replicas, we can use:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service update <span class="at">--image</span> nginx:latest <span class="at">--replicas</span> 5 my-nginx</span></code></pre></div>
<h3 id="removing-a-service">Removing a Service</h3>
<p>To remove a service from our Swarm, we can use:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service rm my-nginx</span></code></pre></div>
<h3 id="additional-features">Additional Features</h3>
<ul>
<li><p><strong>Environment Variables</strong>: We can set environment
variables for the service like this:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service create <span class="at">--name</span> my-nginx <span class="at">--env</span> NGINX_HOST=example.com nginx</span></code></pre></div></li>
<li><p><strong>Mounting Volumes</strong>: We can mount volumes for
persistent data with:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service create <span class="at">--name</span> my-nginx <span class="at">--mount</span> type=volume,source=my-volume,target=/usr/share/nginx/html nginx</span></code></pre></div></li>
</ul>
<p>For more information on creating and managing services in Docker
Swarm, we can check the <a
href="https://bestonlinetutorial.com/docker/what-is-docker-swarm-and-how-does-it-enable-container-orchestration.html">official
Docker documentation</a>.</p>
<h2 id="how-to-scale-services-in-docker-swarm">How to Scale Services in
Docker Swarm?</h2>
<p>Scaling services in Docker Swarm helps us change the number of copies
of a service based on demand. We can do this easily with Docker CLI
commands.</p>
<p>To scale a service, we use the <code>docker service scale</code>
command. We write the service name and how many copies we want.</p>
<h3 id="example-command">Example Command</h3>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service scale my_service=5</span></code></pre></div>
<p>This command will change <code>my_service</code> to 5 copies.</p>
<h3 id="scaling-up-and-down">Scaling Up and Down</h3>
<ul>
<li><p>To <strong>add</strong> more copies:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service scale my_service=10</span></code></pre></div></li>
<li><p>To <strong>remove</strong> some copies:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service scale my_service=3</span></code></pre></div></li>
</ul>
<h3 id="viewing-service-scale">Viewing Service Scale</h3>
<p>We can see the current state of services and their copies by
running:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service ls</span></code></pre></div>
<h3 id="updating-a-service-with-scale">Updating a Service with
Scale</h3>
<p>We can also say how many copies we want when we update a service:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service update <span class="at">--replicas</span> 7 my_service</span></code></pre></div>
<h3 id="load-balancing">Load Balancing</h3>
<p>Docker Swarm automatically shares requests to different copies of a
service. This helps to make sure the traffic goes evenly across all
instances.</p>
<h3 id="auto-scaling">Auto-scaling</h3>
<p>Docker Swarm does not have built-in auto-scaling. But we can use
other tools and scripts that watch our services. They can change the
number of copies based on some rules.</p>
<p>For more information on Docker Swarm and scaling, you can read <a
href="https://bestonlinetutorial.com/docker/what-is-docker-swarm-and-how-does-it-enable-container-orchestration.html">what
is Docker Swarm and how does it enable container orchestration</a>.</p>
<h2 id="how-to-update-and-manage-services-in-docker-swarm">How to Update
and Manage Services in Docker Swarm?</h2>
<p>We can update and manage services in Docker Swarm using some
commands. These commands help us change running services without
stopping them. Here is how we can do it well.</p>
<h3 id="updating-a-service-1">Updating a Service</h3>
<p>To update a service, we use the <code>docker service update</code>
command. We can change many things like image, replicas, and environment
variables.</p>
<p><strong>Example: Update service image</strong></p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service update <span class="at">--image</span> myimage:latest my_service</span></code></pre></div>
<p><strong>Example: Change number of replicas</strong></p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service update <span class="at">--replicas</span> 5 my_service</span></code></pre></div>
<p><strong>Example: Update environment variables</strong></p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service update <span class="at">--env-add</span> NEW_ENV=value my_service</span></code></pre></div>
<h3 id="managing-services">Managing Services</h3>
<p>We can inspect, remove, and list services in our Docker Swarm
cluster.</p>
<p><strong>Inspecting a Service</strong></p>
<p>To get more information about a service, we can use this command:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service inspect my_service</span></code></pre></div>
<p><strong>Listing Services</strong></p>
<p>To see all services running in the Swarm, we use:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service ls</span></code></pre></div>
<p><strong>Removing a Service</strong></p>
<p>If we want to remove a service from the Swarm, we can run:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service rm my_service</span></code></pre></div>
<h3 id="monitoring-service-health">Monitoring Service Health</h3>
<p>Docker Swarm helps us check the health of our services. We can set
health checks in our service settings to make sure our services work
well.</p>
<p><strong>Example: Add health check when creating a
service</strong></p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service create <span class="at">--name</span> my_service <span class="at">--health-cmd</span><span class="op">=</span><span class="st">&#39;curl -f http://localhost/health || exit 1&#39;</span> <span class="at">--health-interval</span><span class="op">=</span>30s <span class="at">--health-timeout</span><span class="op">=</span>10s <span class="at">--health-retries</span><span class="op">=</span>3 myimage</span></code></pre></div>
<h3 id="rolling-back-updates">Rolling Back Updates</h3>
<p>If an update gives us problems, we can go back to the last version
with this command:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service update <span class="at">--rollback</span> my_service</span></code></pre></div>
<h3 id="scaling-services">Scaling Services</h3>
<p>To change the number of instances of a service, we can use this
command:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service scale my_service=3</span></code></pre></div>
<p>This command sets the number of replicas to three.</p>
<h3 id="additional-management-commands">Additional Management
Commands</h3>
<ul>
<li><p><strong>Pause a Service</strong>: This stops updates for a
while.</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service update <span class="at">--pause</span> my_service</span></code></pre></div></li>
<li><p><strong>Resume a Service</strong>: This continues updates after
we paused.</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service update <span class="at">--resume</span> my_service</span></code></pre></div></li>
</ul>
<p>These commands help us update and manage services easily in Docker
Swarm. This way, we can have a smooth process for deploying and
maintaining services. For more details on Docker Swarm and what it can
do, we can check <a
href="https://bestonlinetutorial.com/docker/what-is-docker-swarm-and-how-does-it-enable-container-orchestration.html">What
is Docker Swarm and How Does it Enable Container Orchestration</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-is-docker-swarm-and-how-does-it-work">1. What is Docker
Swarm and how does it work?</h3>
<p>Docker Swarm is a tool that helps us manage a group of Docker
containers. It makes it easy to run our applications in a reliable and
scalable way. With Docker Swarm, we can connect multiple Docker hosts
into one virtual host. This way, we can deploy and manage our services
easily. If you want to learn more, you can check this guide on <a
href="https://bestonlinetutorial.com/docker/what-is-docker-swarm-and-how-does-it-enable-container-orchestration.html">what
is Docker Swarm</a>.</p>
<h3 id="how-do-i-initialize-a-docker-swarm-cluster">2. How do I
initialize a Docker Swarm cluster?</h3>
<p>To start a Docker Swarm cluster, we use the command
<code>docker swarm init</code> in our terminal. This command changes our
current Docker host into a manager node. After we run this command, we
get a join token. This token lets other Docker hosts join our Swarm as
worker nodes. This is an easy first step to create and run services in
Docker Swarm.</p>
<h3 id="what-are-the-steps-to-create-a-service-in-docker-swarm">3. What
are the steps to create a service in Docker Swarm?</h3>
<p>To create a service in Docker Swarm, we use the command
<code>docker service create</code>. We need to tell it options like the
image, replicas, and ports. For example:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service create <span class="at">--name</span> my_service <span class="at">--replicas</span> 3 <span class="at">-p</span> 80:80 nginx</span></code></pre></div>
<p>This command makes a service called “my_service” with 3 replicas
using the Nginx image. This way, we can manage our application services
in the Swarm.</p>
<h3 id="how-can-i-scale-services-in-docker-swarm">4. How can I scale
services in Docker Swarm?</h3>
<p>We can scale services in Docker Swarm easily with the command
<code>docker service scale</code>. For example, to change the service
“my_service” to 5 replicas, we run:</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service scale my_service=5</span></code></pre></div>
<p>This command changes the number of task replicas for the service.
This helps us manage resources better and improves the performance of
our application in Docker Swarm.</p>
<h3 id="what-is-the-best-way-to-update-services-in-docker-swarm">5. What
is the best way to update services in Docker Swarm?</h3>
<p>To update services in Docker Swarm, we can use the command
<code>docker service update</code>. This command lets us change things
like image version or environment variables. For example:</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service update <span class="at">--image</span> nginx:latest my_service</span></code></pre></div>
<p>This command updates “my_service” to use the latest Nginx image. This
way, we make sure our services run the right versions. It increases the
reliability and consistency of our application.</p>
<p>By looking at these frequently asked questions, we can better
understand how to create and run services in Docker Swarm. If you want
to read more, you can explore topics like <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">the
benefits of using Docker in development</a> and <a
href="https://bestonlinetutorial.com/docker/how-does-docker-differ-from-virtual-machines.html">how
Docker differs from virtual machines</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            