
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>What are the key differences between CMD and ENTRYPOINT in a Dockerfile?</title>
            <meta name="description" content="Discover the key differences between CMD and ENTRYPOINT in a Dockerfile to optimize your Docker container configurations.">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">What are the key differences between CMD and ENTRYPOINT in a Dockerfile?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p><strong>Key Differences Between CMD and ENTRYPOINT in a
Dockerfile</strong></p>
<p>The main differences between CMD and ENTRYPOINT in a Dockerfile are
important for us to know how to set up container behavior. CMD is used
to give default arguments for the ENTRYPOINT command or to set a command
that runs when a container starts. ENTRYPOINT, on the other hand, sets
the command that always runs inside the container. This helps us to keep
the application running as we want.</p>
<p>In this article, we will look at the details between CMD and
ENTRYPOINT in Dockerfiles. We will see what each one does and how they
work together. Here are the topics we will cover:</p>
<ul>
<li>Key differences between CMD and ENTRYPOINT in a Dockerfile</li>
<li>What CMD does in a Dockerfile</li>
<li>What ENTRYPOINT does in a Dockerfile</li>
<li>How CMD and ENTRYPOINT work together in a Dockerfile</li>
<li>When to use CMD or ENTRYPOINT in a Dockerfile</li>
<li>Best ways to use CMD and ENTRYPOINT in a Dockerfile</li>
<li>Common questions about CMD and ENTRYPOINT</li>
</ul>
<p>For more information on Docker, we can read about <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">what
is Docker and why you should use it</a> or <a
href="https://bestonlinetutorial.com/docker/how-does-docker-differ-from-virtual-machines.html">how
Docker is different from virtual machines</a>.</p>
<h2 id="understanding-cmd-in-a-dockerfile">Understanding CMD in a
Dockerfile</h2>
<p>The <code>CMD</code> instruction in a Dockerfile gives default
commands or arguments for a container when it starts. We can use it to
say what command should run inside the container. But users can change
it when they run the container. There are two ways to write
<code>CMD</code>:</p>
<ol type="1">
<li><p><strong>Shell form</strong> (runs in a shell):</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> <span class="bu">command</span> param1 param2</span></code></pre></div></li>
<li><p><strong>Exec form</strong> (better to use, does not use a
shell):</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;executable&quot;</span>, <span class="st">&quot;param1&quot;</span>, <span class="st">&quot;param2&quot;</span>]</span></code></pre></div></li>
</ol>
<h3 id="key-properties-of-cmd">Key Properties of <code>CMD</code></h3>
<ul>
<li><strong>Overridable</strong>: Users can change the <code>CMD</code>
instruction when they run the container using the command line.</li>
<li><strong>Single Instance</strong>: We can only have one
<code>CMD</code> instruction in a Dockerfile. If we write more, only the
last one will work.</li>
<li><strong>Execution Context</strong>: It tells what command to run as
the default inside the container.</li>
</ul>
<h3 id="examples">Examples</h3>
<p>We can use <code>CMD</code> in a Dockerfile to run a simple web
server like nginx:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> nginx:latest</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> ./html /usr/share/nginx/html</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;nginx&quot;</span>, <span class="st">&quot;-g&quot;</span>, <span class="st">&quot;daemon off;&quot;</span>]</span></code></pre></div>
<p>In this case, when the container starts, it will run
<code>nginx</code> in the foreground as its default command.</p>
<p>For a Python app, it looks like this:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> python:3.9</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> app.py /app.py</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;python&quot;</span>, <span class="st">&quot;/app.py&quot;</span>]</span></code></pre></div>
<p>Here, the container will run <code>python /app.py</code> by default
when it starts.</p>
<p>We should remember that if a user gives a command when they run the
container, it will change the <code>CMD</code> instruction.</p>
<h2 id="understanding-entrypoint-in-a-dockerfile">Understanding
ENTRYPOINT in a Dockerfile</h2>
<p>In a Dockerfile, <code>ENTRYPOINT</code> tells what command to run
when we start a container. It helps us set up a container to act like an
executable.</p>
<h3 id="key-features-of-entrypoint">Key Features of ENTRYPOINT:</h3>
<ul>
<li><strong>Fixed Command</strong>: Unlike <code>CMD</code>, we cannot
easily change <code>ENTRYPOINT</code> when the container runs. This is
good for containers that need to run a certain application.</li>
<li><strong>Syntax</strong>: There are two ways to write
<code>ENTRYPOINT</code>:
<ul>
<li><p><strong>Exec form</strong> (we recommend this):</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;executable&quot;</span>, <span class="st">&quot;param1&quot;</span>, <span class="st">&quot;param2&quot;</span>]</span></code></pre></div></li>
<li><p><strong>Shell form</strong>:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> <span class="bu">command</span> param1 param2</span></code></pre></div></li>
</ul></li>
<li><strong>Combining with CMD</strong>: We can use <code>CMD</code> to
give default arguments to the <code>ENTRYPOINT</code>.</li>
</ul>
<h3 id="example-usage">Example Usage:</h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;python3&quot;</span>, <span class="st">&quot;app.py&quot;</span>]</span></code></pre></div>
<p>In this example, when the container starts, it runs
<code>python3 app.py</code>. If we want to add more arguments, we can
use <code>CMD</code>:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;python3&quot;</span>, <span class="st">&quot;app.py&quot;</span>]</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;--help&quot;</span>]</span></code></pre></div>
<p>Now, the container will run <code>python3 app.py --help</code> by
default.</p>
<h3 id="environment-variables">Environment Variables:</h3>
<p><code>ENTRYPOINT</code> can also use environment variables. This lets
us run commands based on the environment.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> APP_ENV=production</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;python3&quot;</span>, <span class="st">&quot;app.py&quot;</span>]</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;--env&quot;</span>, <span class="st">&quot;$APP_ENV&quot;</span>]</span></code></pre></div>
<h3 id="best-practices">Best Practices:</h3>
<ul>
<li>Use exec form for better control of signals and arguments.</li>
<li>Combine <code>ENTRYPOINT</code> with <code>CMD</code> for more
options in passing parameters.</li>
<li>Think about using <code>ENTRYPOINT</code> for containers that are
services or applications.</li>
</ul>
<p>For more info about managing containers and best practices in Docker,
check out <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">what
is Docker and why should you use it</a>.</p>
<h2 id="how-cmd-and-entrypoint-work-together-in-a-dockerfile">How CMD
and ENTRYPOINT Work Together in a Dockerfile</h2>
<p>In a Dockerfile, we can use <code>CMD</code> and
<code>ENTRYPOINT</code> together to decide how a container starts. They
have different roles but can work well together to make flexible
commands for running containers.</p>
<h3 id="working-mechanism">Working Mechanism</h3>
<ul>
<li><p><strong>ENTRYPOINT</strong>: This sets the main command that runs
when the container starts. It is the main program for the container. We
cannot change this command by default unless we set it to be
changeable.</p></li>
<li><p><strong>CMD</strong>: This gives default arguments to the
<code>ENTRYPOINT</code>. If we do not pass any arguments during
<code>docker run</code>, it uses the values from <code>CMD</code>. This
helps us keep a default command while also allowing some flexibility in
how the container behaves.</p></li>
</ul>
<h3 id="example-usage-1">Example Usage</h3>
<p>Here is an example of using <code>CMD</code> and
<code>ENTRYPOINT</code> together in a Dockerfile:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the ENTRYPOINT</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;python3&quot;</span>, <span class="st">&quot;-m&quot;</span>, <span class="st">&quot;http.server&quot;</span>]</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the CMD</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;8000&quot;</span>]</span></code></pre></div>
<p>In this example, when we run the container, it will execute:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span> <span class="at">-m</span> http.server 8000</span></code></pre></div>
<p>If we want to run it on a different port, we can change the
<code>CMD</code> part:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run my-python-server 9000</span></code></pre></div>
<p>This will execute:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python3</span> <span class="at">-m</span> http.server 9000</span></code></pre></div>
<h3 id="behavior-of-cmd-and-entrypoint">Behavior of CMD and
ENTRYPOINT</h3>
<ul>
<li>If we define <code>ENTRYPOINT</code>, Docker uses it as the main
command.</li>
<li>The <code>CMD</code> instruction gives default arguments to the
<code>ENTRYPOINT</code>.</li>
<li>When both <code>CMD</code> and <code>ENTRYPOINT</code> are defined,
the <code>CMD</code> is extra parameters to the command in
<code>ENTRYPOINT</code>.</li>
</ul>
<h3 id="combining-with-shell-form">Combining with Shell Form</h3>
<p>We can also write <code>ENTRYPOINT</code> in shell form:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> <span class="ex">python3</span> <span class="at">-m</span> http.server</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> <span class="ex">8000</span></span></code></pre></div>
<p>This gives the same result. But it changes how the command is
understood. In this case, the default command runs through a shell. This
allows us to use shell features like variable substitution.</p>
<h3 id="best-practices-1">Best Practices</h3>
<ul>
<li>Use <code>ENTRYPOINT</code> for the main command so it runs as we
want.</li>
<li>Use <code>CMD</code> for arguments that can be changed. This gives
us flexibility in how the container runs.</li>
<li>Avoid using both unless we really need to. It can make command
running confusing.</li>
</ul>
<p>For more about Dockerfiles, you can read <a
href="https://bestonlinetutorial.com/docker/what-is-the-dockerfile-and-how-do-you-create-one.html">what
is a Dockerfile and how do you create one</a>.</p>
<h2 id="when-to-use-cmd-vs-entrypoint-in-a-dockerfile">When to Use CMD
vs ENTRYPOINT in a Dockerfile</h2>
<p>In a Dockerfile, we need to choose between <code>CMD</code> and
<code>ENTRYPOINT</code>. This choice is important for how our container
works. Here are some tips on when to use each one:</p>
<h3 id="use-cmd-when">Use <code>CMD</code> When:</h3>
<ul>
<li>We want to set default options for an <code>ENTRYPOINT</code>.</li>
<li>We want to let users change the default command when they run the
container.</li>
<li>We need a simple command that does not need extra steps.</li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;echo&quot;</span>, <span class="st">&quot;Hello, World!&quot;</span>]</span></code></pre></div>
<p>This command can change if we give a different command when running
the container.</p>
<h3 id="use-entrypoint-when">Use <code>ENTRYPOINT</code> When:</h3>
<ul>
<li>We want to make sure a specific command always runs when the
container starts.</li>
<li>We want to give options to the command without changing it.</li>
<li>We are making a container that should work like a standalone
program.</li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;ping&quot;</span>]</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;localhost&quot;</span>]</span></code></pre></div>
<p>In this case, <code>ping</code> will always run, and we can change
<code>localhost</code> to a different option.</p>
<h3 id="combined-use">Combined Use:</h3>
<ul>
<li>We can use both <code>ENTRYPOINT</code> and <code>CMD</code>
together to have more options. <code>ENTRYPOINT</code> sets the main
command. <code>CMD</code> gives default arguments.</li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;python&quot;</span>]</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;app.py&quot;</span>]</span></code></pre></div>
<p>Here, <code>python</code> is the main program. <code>app.py</code> is
the default option, and we can replace it if needed.</p>
<h3 id="summary">Summary:</h3>
<ul>
<li>Use <code>CMD</code> for default options and flexibility.</li>
<li>Use <code>ENTRYPOINT</code> for commands that must run.</li>
<li>Combine both for strong command setup in our Dockerfile.</li>
</ul>
<h2
id="best-practices-for-using-cmd-and-entrypoint-in-a-dockerfile">Best
Practices for Using CMD and ENTRYPOINT in a Dockerfile</h2>
<p>When we use <code>CMD</code> and <code>ENTRYPOINT</code> in a
Dockerfile, we should follow some best practices. This helps our
containers work as we want. Here are some tips to think about:</p>
<ol type="1">
<li><strong>Use <code>ENTRYPOINT</code> for the Main Command</strong>:
<ul>
<li>We should use <code>ENTRYPOINT</code> to set the main command that
runs when the container starts. This makes our container act like a
standalone program.</li>
</ul>
<div class="sourceCode" id="cb18"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;python&quot;</span>, <span class="st">&quot;app.py&quot;</span>]</span></code></pre></div></li>
<li><strong>Use <code>CMD</code> for Default Arguments</strong>:
<ul>
<li>We can use <code>CMD</code> to give default arguments. Users can
change these if they want. This allows flexibility without changing the
<code>ENTRYPOINT</code>.</li>
</ul>
<div class="sourceCode" id="cb19"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;--port&quot;</span>, <span class="st">&quot;8080&quot;</span>]</span></code></pre></div></li>
<li><strong>Combine <code>ENTRYPOINT</code> and
<code>CMD</code></strong>:
<ul>
<li>When we combine <code>ENTRYPOINT</code> and <code>CMD</code>, we can
set the main command and also give default options. This gives us both
fixed behavior and flexibility.</li>
</ul>
<div class="sourceCode" id="cb20"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;java&quot;</span>, <span class="st">&quot;-jar&quot;</span>, <span class="st">&quot;app.jar&quot;</span>]</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;--server.port=8080&quot;</span>]</span></code></pre></div></li>
<li><strong>Avoid Using Shell Form</strong>:
<ul>
<li>We should prefer the exec form (JSON array) instead of the shell
form (string) for <code>CMD</code> and <code>ENTRYPOINT</code>. This
helps us avoid problems with signals and makes sure our command runs
directly.</li>
</ul>
<div class="sourceCode" id="cb21"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;nginx&quot;</span>, <span class="st">&quot;-g&quot;</span>, <span class="st">&quot;daemon off;&quot;</span>]</span></code></pre></div></li>
<li><strong>Keep it Simple</strong>:
<ul>
<li>We need to keep our <code>ENTRYPOINT</code> and <code>CMD</code>
commands simple. If a command needs many arguments, maybe we should
create a shell script and call that from <code>ENTRYPOINT</code>.</li>
</ul>
<div class="sourceCode" id="cb22"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> entrypoint.sh /usr/local/bin/</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;entrypoint.sh&quot;</span>]</span></code></pre></div></li>
<li><strong>Document Your Dockerfile</strong>:
<ul>
<li>We should add comments in our Dockerfile to explain what
<code>CMD</code> and <code>ENTRYPOINT</code> do. This helps us and
others understand it better.</li>
</ul>
<div class="sourceCode" id="cb23"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the main command for the container</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;python&quot;</span>, <span class="st">&quot;app.py&quot;</span>]</span></code></pre></div></li>
<li><strong>Use Health Checks</strong>:
<ul>
<li>We can use health checks to make sure the app is running fine. This
helps manage container restarts and updates.</li>
</ul>
<div class="sourceCode" id="cb24"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">HEALTHCHECK</span> <span class="kw">CMD</span> <span class="ex">curl</span> <span class="at">--fail</span> http://localhost:8080/ <span class="kw">||</span> <span class="bu">exit</span> 1</span></code></pre></div></li>
<li><strong>Test with Different Scenarios</strong>:
<ul>
<li>We should test our Dockerfile in different situations. This helps us
see how <code>CMD</code> and <code>ENTRYPOINT</code> work when we change
them or use the defaults.</li>
</ul></li>
</ol>
<p>By following these best practices for <code>CMD</code> and
<code>ENTRYPOINT</code> in a Dockerfile, we can make better and easier
to maintain container images. For more information on Docker and how it
works, check out <a
href="https://bestonlinetutorial.com/docker/what-is-a-docker-container-and-how-does-it-operate.html">what
is a Docker container and how does it operate</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-is-the-main-purpose-of-cmd-in-a-dockerfile">1. What is the
main purpose of CMD in a Dockerfile?</h3>
<p>The <code>CMD</code> instruction in a Dockerfile tells what command
to run by default when we start a container from the image. It helps us
define the main action for our container. We can change this action by
giving command-line arguments when we run the container. Knowing how to
use <code>CMD</code> well is important for making our Docker work
better.</p>
<h3 id="how-is-entrypoint-different-from-cmd-in-a-dockerfile">2. How is
ENTRYPOINT different from CMD in a Dockerfile?</h3>
<p><code>ENTRYPOINT</code> in a Dockerfile sets a command that always
runs when the container starts. This makes it great for setting the main
application to run. Unlike <code>CMD</code>, we cannot change
<code>ENTRYPOINT</code> easily. This means the command we set will
always run no matter what command-line arguments we give. This
difference is important when we want our container to behave the same
way every time.</p>
<h3 id="can-we-use-both-cmd-and-entrypoint-in-a-dockerfile">3. Can we
use both CMD and ENTRYPOINT in a Dockerfile?</h3>
<p>Yes, we can use both <code>CMD</code> and <code>ENTRYPOINT</code>
together in a Dockerfile. This way, <code>ENTRYPOINT</code> sets the
main command and <code>CMD</code> gives default arguments for that
command. This is useful for making containers that can take extra
parameters while still doing the main job.</p>
<h3 id="when-should-we-use-cmd-vs-entrypoint-in-a-dockerfile">4. When
should we use CMD vs ENTRYPOINT in a Dockerfile?</h3>
<p>We should use <code>CMD</code> when we want to give default arguments
that can be easily changed when we run a container. We should choose
<code>ENTRYPOINT</code> when we need to make sure a specific command
always runs, no matter what arguments we provide. Knowing these
differences can help us manage our Docker containers better and improve
our application’s behavior.</p>
<h3
id="what-are-some-good-practices-for-using-cmd-and-entrypoint-in-a-dockerfile">5.
What are some good practices for using CMD and ENTRYPOINT in a
Dockerfile?</h3>
<p>When we use <code>CMD</code> and <code>ENTRYPOINT</code>, we should
keep our commands simple and not use complex scripts. It is better to
use the exec form of commands like
<code>["executable", "param1", "param2"]</code>. This helps with
handling signals and arguments better. For more tips on improving our
Dockerfiles, we can check our article on <a
href="https://bestonlinetutorial.com/docker/what-is-a-dockerfile-and-how-do-you-create-one.html">what
is a Dockerfile and how do you create one</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            