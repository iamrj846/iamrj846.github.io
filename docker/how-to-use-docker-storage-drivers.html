
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TFCQEJR7TD');
</script>
            <title>How to Use Docker Storage Drivers?</title>
            <meta name="description" content="Discover how to effectively use Docker storage drivers to optimize your container's performance and manage data efficiently.">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How to Use Docker Storage Drivers?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Docker storage drivers are important parts that help us manage
container data storage in Docker environments. They help the Docker
engine talk to the storage system. This way, we can easily manage how we
store, get, and share data across containers. The storage driver we
choose can affect performance, data safety, and the overall working of
our container apps.</p>
<p>In this article, we will look at how to use Docker storage drivers in
a good way. We will talk about their definitions, importance, how to
list available drivers, set up specific drivers, manage settings, and
check usage. We will also answer some common questions about Docker
storage drivers. This will help us understand this important part of
Docker better. The topics we will cover include:</p>
<ul>
<li>How to Effectively Use Docker Storage Drivers?</li>
<li>What Are Docker Storage Drivers and Why Do They Matter?</li>
<li>How to List Available Docker Storage Drivers?</li>
<li>How to Configure a Specific Docker Storage Driver?</li>
<li>How to Manage Docker Storage Driver Settings?</li>
<li>How to Verify Docker Storage Driver Usage?</li>
<li>Frequently Asked Questions</li>
</ul>
<p>For more reading on related topics, we can check these articles: <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a>, <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">What
Are Docker Volumes and How Do They Work?</a>, and <a
href="https://bestonlinetutorial.com/docker/what-are-docker-bind-mounts-and-how-do-they-differ-from-volumes.html">What
Are Docker Bind Mounts and How Do They Differ from Volumes?</a>.</p>
<h2 id="what-are-docker-storage-drivers-and-why-do-they-matter">What Are
Docker Storage Drivers and Why Do They Matter?</h2>
<p>Docker storage drivers are key parts that help us manage how we store
and get data in Docker containers. They connect the container’s
filesystem with the host’s filesystem. This connection decides how
images and containers work with storage places.</p>
<h3 id="key-points">Key Points:</h3>
<ul>
<li><p><strong>Purpose</strong>: Storage drivers help us create, manage,
and delete container filesystems. They hide the storage technology
behind them. This lets Docker work well in different
environments.</p></li>
<li><p><strong>Drivers</strong>: Some common Docker storage drivers
are:</p>
<ul>
<li><strong>Overlay2</strong>: This is the best driver for most cases.
It gives great performance and low overhead.</li>
<li><strong>aufs</strong>: This driver lets us merge files and
directories from different sources.</li>
<li><strong>btrfs</strong>: This is a new filesystem that has advanced
features like snapshots and subvolumes.</li>
<li><strong>devicemapper</strong>: This driver uses block-level storage.
It is good for thin provisioning.</li>
<li><strong>zfs</strong>: This driver gives us high storage capacity. It
also has features like data checks and compression.</li>
</ul></li>
<li><p><strong>Importance</strong>:</p>
<ul>
<li><strong>Performance</strong>: The storage driver we choose can
change how well our containers work. It affects read and write speeds
and how efficient they are.</li>
<li><strong>Compatibility</strong>: Some drivers work better with
certain filesystems and environments. This can change how we deploy our
applications.</li>
<li><strong>Data Management</strong>: Storage drivers help us manage
data that we want to keep. They make sure data in containers stays safe
even when we stop or remove them.</li>
</ul></li>
</ul>
<p>Choosing the right Docker storage driver is very important. It helps
us make our container applications work better and be more reliable. If
we want to learn more about Docker’s design and functions, we can check
<a
href="https://bestonlinetutorial.com/docker/what-are-the-core-components-of-docker-architecture.html">what
are the core components of Docker architecture</a>.</p>
<h2 id="how-to-list-available-docker-storage-drivers">How to List
Available Docker Storage Drivers?</h2>
<p>To list Docker storage drivers on your system, we can check the
Docker daemon’s settings or use command-line tools. Docker storage
drivers help us manage how images and containers are saved on our host
filesystem. The common storage drivers are <code>overlay2</code>,
<code>aufs</code>, <code>btrfs</code>, <code>zfs</code>, and
<code>devicemapper</code>.</p>
<h3 id="using-docker-info-command">Using Docker Info Command</h3>
<p>We can use the <code>docker info</code> command to see the current
storage driver and other important information:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Storage Driver&quot;</span></span></code></pre></div>
<h3 id="inspecting-docker-daemon-configuration">Inspecting Docker Daemon
Configuration</h3>
<p>Another way is to check the Docker daemon configuration file. This
file is usually at <code>/etc/docker/daemon.json</code>. We can view
this file by using:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> /etc/docker/daemon.json</span></code></pre></div>
<p>If the <code>storage-driver</code> property is there, it shows the
storage driver we are using.</p>
<h3 id="listing-supported-storage-drivers">Listing Supported Storage
Drivers</h3>
<p>To see all supported storage drivers for our Docker setup, we can
check the Docker documentation or run this command:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Storage Drivers:&quot;</span></span></code></pre></div>
<p>This command shows the list of storage drivers we can use.</p>
<p>Remember, the storage drivers we can use may change depending on the
operating system and the Docker version we have. For more details on
specific storage drivers, we can look at the <a
href="https://docs.docker.com/storage/storagedriver/">Docker storage
drivers documentation</a>.</p>
<h2 id="how-to-configure-a-specific-docker-storage-driver">How to
Configure a Specific Docker Storage Driver?</h2>
<p>To set a specific Docker storage driver, we need to change the Docker
daemon configuration file or choose the driver when we start Docker.
Here is how we can do it:</p>
<h3 id="method-1-using-the-docker-daemon-configuration-file">Method 1:
Using the Docker Daemon Configuration File</h3>
<ol type="1">
<li><p><strong>Find the Docker Daemon Configuration File</strong><br />
The configuration file is usually found at
<code>/etc/docker/daemon.json</code>. If it is not there, we can create
one.</p></li>
<li><p><strong>Edit the Configuration File</strong><br />
We can open the file with a text editor. Here is an example of how to
set the storage driver to <code>overlay2</code>:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;storage-driver&quot;</span><span class="fu">:</span> <span class="st">&quot;overlay2&quot;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div></li>
<li><p><strong>Restart the Docker Service</strong><br />
After we save the changes, we need to restart the Docker daemon to apply
the new settings:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart docker</span></code></pre></div></li>
</ol>
<h3 id="method-2-specifying-the-storage-driver-at-runtime">Method 2:
Specifying the Storage Driver at Runtime</h3>
<p>We can also set the storage driver when we start the Docker daemon
from the command line. This way is good for testing:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dockerd <span class="at">--storage-driver</span><span class="op">=</span>overlay2</span></code></pre></div>
<h3 id="verifying-the-configuration">Verifying the Configuration</h3>
<p>After we set the storage driver, we can check which storage driver is
active by running:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Storage Driver&quot;</span></span></code></pre></div>
<p>This command will show the storage driver we set, and we can confirm
that our changes worked.</p>
<h3 id="common-storage-drivers">Common Storage Drivers</h3>
<ul>
<li><code>overlay2</code>: This is good for modern Linux systems.</li>
<li><code>aufs</code>: This works on older systems but is not supported
much.</li>
<li><code>btrfs</code>: This is for advanced file system features.</li>
<li><code>zfs</code>: This is for big storage needs and snapshots.</li>
</ul>
<p>We should pick the right driver based on what our system can support.
For more information on Docker storage, we can check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">what
are Docker volumes and how do they work</a>.</p>
<h2 id="how-to-manage-docker-storage-driver-settings">How to Manage
Docker Storage Driver Settings?</h2>
<p>Managing the Docker storage driver settings is very important. It
helps us improve the performance of our Docker containers. Here is how
we can manage these settings easily.</p>
<h3 id="check-current-storage-driver">1. Check Current Storage
Driver</h3>
<p>To find out which storage driver Docker is using now, we can run this
command:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Storage Driver&quot;</span></span></code></pre></div>
<h3 id="configure-storage-driver-at-startup">2. Configure Storage Driver
at Startup</h3>
<p>We can set the storage driver that Docker will use. To do this, we
need to change the Docker daemon configuration file. This file is
usually found at <code>/etc/docker/daemon.json</code>. Here is an
example to set the storage driver to <code>overlay2</code>:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;storage-driver&quot;</span><span class="fu">:</span> <span class="st">&quot;overlay2&quot;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>After we edit the file, we need to restart the Docker service:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart docker</span></code></pre></div>
<h3 id="set-storage-driver-options">3. Set Storage Driver Options</h3>
<p>We can also add options for the storage driver in the
<code>daemon.json</code> file. For example:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;storage-driver&quot;</span><span class="fu">:</span> <span class="st">&quot;overlay2&quot;</span><span class="fu">,</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;storage-opts&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;overlay2.override_kernel_check=true&quot;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="verify-changes">4. Verify Changes</h3>
<p>After we make changes, we must check that the storage driver and
settings are correct. We can do this by running:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Storage Driver&quot;</span></span></code></pre></div>
<h3 id="monitor-disk-usage">5. Monitor Disk Usage</h3>
<p>To see how much disk space Docker is using, we can use this
command:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> system df</span></code></pre></div>
<p>This command shows us the space used by images, containers, and
volumes.</p>
<h3 id="clean-up-unused-data">6. Clean Up Unused Data</h3>
<p>To keep our storage clean, we should regularly remove unused data. We
can do this with:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> system prune</span></code></pre></div>
<p>This command will delete all stopped containers, unused networks,
dangling images, and build cache.</p>
<p>Managing Docker storage driver settings is key for good performance
and using resources well. If we want to learn more about Docker volume
management, we should read <a
href="https://bestonlinetutorial.com/docker/how-to-create-and-use-docker-volumes.html">how
to create and use Docker volumes</a>.</p>
<h2 id="how-to-verify-docker-storage-driver-usage">How to Verify Docker
Storage Driver Usage?</h2>
<p>To check the current Docker storage driver we use, we can look at the
Docker info or inspect the Docker daemon configuration. Here is how we
can do it:</p>
<ol type="1">
<li><p><strong>Using Docker Info Command</strong>: The
<code>docker info</code> command gives us details about the storage
driver and other settings.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Storage Driver&quot;</span></span></code></pre></div>
<p>This command shows us just the line that tells which storage driver
is active now.</p></li>
<li><p><strong>Inspecting Docker Daemon Configuration</strong>: We can
also open the Docker daemon configuration file. It is usually found at
<code>/etc/docker/daemon.json</code>. Here we can see if there is a
storage driver mentioned.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> /etc/docker/daemon.json</span></code></pre></div>
<p>We should look for the <code>"storage-driver"</code> key in the
output. If we do not see it, Docker will pick a default driver based on
the operating system.</p></li>
<li><p><strong>Using Docker Inspect</strong>: To find the storage driver
for a specific container, we can use the <code>docker inspect</code>
command.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> inspect <span class="at">-f</span> <span class="st">&#39;{{ .GraphDriver }}&#39;</span> <span class="op">&lt;</span>container_id<span class="op">&gt;</span></span></code></pre></div>
<p>Here, we replace <code>&lt;container_id&gt;</code> with the real ID
or name of our container. This command will show us the storage driver
details for that container.</p></li>
<li><p><strong>List All Containers and Their Storage Drivers</strong>:
If we want a quick look at all running containers and their storage
drivers, we can use:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> ps <span class="at">-q</span> <span class="kw">|</span> <span class="fu">xargs</span> docker inspect <span class="at">-f</span> <span class="st">&#39;{{ .Id }}: {{ .GraphDriver.Name }}&#39;</span></span></code></pre></div>
<p>This command lists all running containers with their storage driver
names.</p></li>
</ol>
<p>By using these methods, we can easily check the Docker storage driver
in use. This is important for fixing issues and improving our Docker
setup. For more information on Docker and how it works, we can check out
<a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">What
are Docker Volumes and How Do They Work?</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-are-docker-storage-drivers-and-how-do-they-work">1. What
are Docker storage drivers and how do they work?</h3>
<p>Docker storage drivers are important parts that help us manage and
store data in Docker containers. They help store, get, and share data
between containers in a good way. There are different storage drivers
like Overlay2, aufs, and btrfs. They use different ways to work with
container file systems and keep data safe. It is important to know how
these drivers work. This helps us make our containers run better and use
storage more efficiently.</p>
<h3 id="how-can-i-list-available-docker-storage-drivers">2. How can I
list available Docker storage drivers?</h3>
<p>To see the available Docker storage drivers on our system, we can use
this command in the terminal:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info</span></code></pre></div>
<p>This command gives us details about our Docker setup. It shows the
storage driver we are using and other options we can choose. This
information is important for picking the right driver for our container
applications.</p>
<h3
id="what-factors-should-i-consider-when-choosing-a-docker-storage-driver">3.
What factors should I consider when choosing a Docker storage
driver?</h3>
<p>When we pick a Docker storage driver, we should think about things
like if it works with our operating system, how well it performs, and
what we need it for. For example, people often suggest using Overlay2
because it is fast and efficient. On the other hand, aufs might be
needed for some older applications. We should check what each driver can
do and what its limits are. This helps us make a good choice that
improves our Docker container’s performance.</p>
<h3 id="how-do-i-configure-a-specific-docker-storage-driver">4. How do I
configure a specific Docker storage driver?</h3>
<p>To set up a specific Docker storage driver, we usually need to change
the Docker daemon configuration file. This file is often found at
<code>/etc/docker/daemon.json</code>. We can add this JSON to choose the
storage driver we want:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;storage-driver&quot;</span><span class="fu">:</span> <span class="st">&quot;overlay2&quot;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>After we make these changes, we need to restart the Docker service
using:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart docker</span></code></pre></div>
<p>This will make sure our new settings work.</p>
<h3
id="how-can-i-verify-which-docker-storage-driver-is-currently-being-used">5.
How can I verify which Docker storage driver is currently being
used?</h3>
<p>To check which Docker storage driver we are using right now, we can
run this command:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Storage Driver&quot;</span></span></code></pre></div>
<p>This command shows us the active storage driver and some details.
Knowing which driver is working helps us check performance and fix any
storage issues we may have.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            