
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How can you run a shell script on the host from a Docker container?</title>
            <meta name="description" content="Learn how to execute shell scripts on your host from a Docker container with our step-by-step guide. Boost your Docker skills!">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How can you run a shell script on the host from a Docker container?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Running a shell script on the host from a Docker container is easy.
We can do this using different ways like Docker volumes, bind mounts,
and SSH. These methods help us run scripts from the container. This
makes it simpler to work with tasks on the host system. This skill is
important for developers and DevOps engineers. It helps us make our
workflows faster and automate things in container environments.</p>
<p>In this article, we will look at different ways to run a shell script
on the host from a Docker container. We will talk about using Docker
volumes, running scripts with Docker exec, using bind mounts, passing
commands from the container, and using SSH for running commands from far
away. By the end of this guide, we will know how to run shell scripts
well from within a Docker container.</p>
<ul>
<li>How to run a shell script on the host from a Docker container</li>
<li>Using Docker volumes to run a shell script on the host</li>
<li>Executing a shell script on the host using Docker exec</li>
<li>Running a shell script on the host with Docker bind mounts</li>
<li>How to pass commands from a Docker container to the host shell
script</li>
<li>Using SSH to execute a shell script on the host from a Docker
container</li>
<li>Frequently Asked Questions</li>
</ul>
<p>For more information on what Docker can do, you may want to read
articles like <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a> and <a
href="https://bestonlinetutorial.com/docker/how-does-docker-differ-from-virtual-machines.html">How
Does Docker Differ from Virtual Machines?</a>.</p>
<h2 id="using-docker-volumes-to-run-a-shell-script-on-the-host">Using
Docker volumes to run a shell script on the host</h2>
<p>To run a shell script on the host from a Docker container, we can use
Docker volumes. We will mount a directory from the host into the
container. This lets the container access and run scripts that are on
the host system.</p>
<h3 id="steps-to-use-docker-volumes">Steps to Use Docker Volumes</h3>
<ol type="1">
<li><p><strong>Create a Script on the Host</strong>: First, we need to
create a shell script on the host.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="at">-e</span> <span class="st">&#39;#!/bin/bash\n echo &quot;Hello from the host!&quot;&#39;</span> <span class="op">&gt;</span> /path/to/your/script.sh</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> +x /path/to/your/script.sh</span></code></pre></div></li>
<li><p><strong>Run the Docker Container with Volume Mounting</strong>:
Now we run the Docker container and mount the directory with the
script.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-v</span> /path/to/your:/scripts <span class="at">--rm</span> your-image-name</span></code></pre></div>
<p>In this command:</p>
<ul>
<li><code>-v /path/to/your:/scripts</code> mounts the host directory to
<code>/scripts</code> in the container.</li>
<li><code>--rm</code> will remove the container after it finishes.</li>
</ul></li>
<li><p><strong>Execute the Script Inside the Container</strong>: When we
are inside the container, we can run the shell script.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-v</span> /path/to/your:/scripts <span class="at">--rm</span> your-image-name bash <span class="at">-c</span> <span class="st">&quot;/scripts/script.sh&quot;</span></span></code></pre></div></li>
</ol>
<h3 id="important-notes">Important Notes</h3>
<ul>
<li>Make sure the script is executable on the host.</li>
<li>The container needs permission to access the mounted directory.</li>
<li>Using Docker volumes helps us share files between the host and
containers. It makes it easy to run scripts from the host.</li>
</ul>
<p>For more info on managing Docker volumes, we can check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">this
article on Docker volumes</a>.</p>
<h2
id="executing-a-shell-script-on-the-host-using-docker-exec">Executing a
shell script on the host using Docker exec</h2>
<p>To run a shell script on the host from a Docker container, we can use
the <code>docker exec</code> command. This command helps us run commands
inside a running container. With the right setup, we can run scripts on
the host system.</p>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>We must have Docker installed and running on our host machine.</li>
<li>We need to have a container that is already running.</li>
</ul>
<h3 id="steps-to-execute-a-shell-script">Steps to Execute a Shell
Script</h3>
<ol type="1">
<li><p><strong>Make Sure the Host Script is Accessible</strong>: We
should check that our shell script is on the host machine and can be
executed. For example, if we have a script called
<code>script.sh</code>, we use this command:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> +x /path/to/script.sh</span></code></pre></div></li>
<li><p><strong>Run the Container</strong>: We can start our container in
interactive mode or check that it is running:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="at">--name</span> my_container ubuntu tail <span class="at">-f</span> /dev/null</span></code></pre></div></li>
<li><p><strong>Execute the Host Script</strong>: We will use the
<code>docker exec</code> command to execute the script on the host. We
need to provide the script path and make sure the container has access
to the host file system.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec my_container bash <span class="at">-c</span> <span class="st">&quot;bash /path/to/script.sh&quot;</span></span></code></pre></div></li>
</ol>
<h3 id="important-notes-1">Important Notes</h3>
<ul>
<li><strong>Permissions</strong>: The user who runs the Docker container
must have the rights to execute the script on the host.</li>
<li><strong>Container User Context</strong>: If our container runs as a
non-root user, we need to make sure that the user can run the host
script.</li>
</ul>
<h3 id="example">Example</h3>
<p>Here is a complete example:</p>
<ol type="1">
<li><p>First, we create a shell script called <code>script.sh</code> on
the host:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="at">-e</span> <span class="st">&quot;#!/bin/bash\necho &#39;Hello from the host!&#39;&quot;</span> <span class="op">&gt;</span> /path/to/script.sh</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> +x /path/to/script.sh</span></code></pre></div></li>
<li><p>Next, we run a Docker container:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="at">--name</span> my_container ubuntu tail <span class="at">-f</span> /dev/null</span></code></pre></div></li>
<li><p>Finally, we execute the script from the container:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec my_container bash <span class="at">-c</span> <span class="st">&quot;bash /path/to/script.sh&quot;</span></span></code></pre></div></li>
</ol>
<p>This will show:</p>
<pre><code>Hello from the host!</code></pre>
<p>Using <code>docker exec</code> is a simple way to run shell scripts
on the host while we work inside a Docker container. We just need to set
the correct permissions and paths. For more details on Docker commands,
we can check the <a
href="https://bestonlinetutorial.com/docker/how-to-work-with-docker-containers-using-the-docker-cli.html">Docker
command documentation</a>.</p>
<h2
id="running-a-shell-script-on-the-host-with-docker-bind-mounts">Running
a shell script on the host with Docker bind mounts</h2>
<p>Docker bind mounts help us share files or folders between the host
and the Docker container. This makes it easy to run a shell script on
the host from the container. To do this, we can follow these steps:</p>
<ol type="1">
<li><p><strong>Create a Shell Script on the Host</strong>: First, we
need to make a simple shell script on our host machine. For example, we
can name it <code>script.sh</code>:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;This script is running on the host.&quot;</span></span></code></pre></div>
<p>We must make sure the script can run. We do this with:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> +x script.sh</span></code></pre></div></li>
<li><p><strong>Run a Docker Container with Bind Mount</strong>: Now we
start a Docker container and bind mount the folder that has our script.
We can use the <code>-v</code> option to create the bind mount:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-it</span> <span class="at">--rm</span> <span class="at">-v</span> <span class="va">$(</span><span class="bu">pwd</span><span class="va">)</span>:/scripts ubuntu</span></code></pre></div>
<p>This command will mount the current folder to <code>/scripts</code>
in the container.</p></li>
<li><p><strong>Execute the Shell Script from the Container</strong>:
After we get inside the container, we can run the shell script with this
command:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/scripts/script.sh</span></span></code></pre></div>
<p>This will run the script on the host, and we will see the output
“This script is running on the host.”</p></li>
</ol>
<p>This way is good for development. We can change scripts on the host
and run them in the container without rebuilding the container. For more
details on using volumes and mounts, we can check the article on <a
href="https://bestonlinetutorial.com/docker/how-to-bind-mount-host-files-to-docker-containers.html">how
to bind mount host files to Docker containers</a>.</p>
<h2
id="how-to-pass-commands-from-a-docker-container-to-the-host-shell-script">How
to pass commands from a Docker container to the host shell script</h2>
<p>We can pass commands from a Docker container to a shell script on the
host using different methods. Here are some simple and effective
ways:</p>
<ol type="1">
<li><p><strong>Using Docker Volumes</strong>: We can mount a host
directory into the container. Then, we write commands to a file in that
directory. A shell script can run those commands later.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-v</span> /path/on/host:/path/in/container my-container /bin/sh <span class="at">-c</span> <span class="st">&quot;echo &#39;command to run&#39; &gt;&gt; /path/in/container/commands.sh&quot;</span></span></code></pre></div></li>
<li><p><strong>Using Docker exec</strong>: If we have a running
container, we can run commands directly on it that work with the
host.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec my-container sh <span class="at">-c</span> <span class="st">&quot;echo &#39;command to run&#39; &gt;&gt; /path/on/host/commands.sh&quot;</span></span></code></pre></div></li>
<li><p><strong>Using Bind Mounts</strong>: This is like using volumes.
Bind mounts let us share a host directory with the container. Any
commands written to the file in the container will show up on the
host.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-v</span> /host/path:/container/path my-container sh <span class="at">-c</span> <span class="st">&quot;echo &#39;command to run&#39; &gt;&gt; /container/path/commands.sh&quot;</span></span></code></pre></div></li>
<li><p><strong>Using SSH</strong>: If the host has SSH on and the
container has an SSH client, we can run commands on the host using
SSH.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> user@host <span class="st">&quot;bash -s&quot;</span> <span class="op">&lt;</span> /path/in/container/script.sh</span></code></pre></div></li>
<li><p><strong>Using <code>docker cp</code></strong>: This command helps
us copy files from the container to the host. We can include scripts or
command files.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> cp my-container:/path/in/container/commands.sh /path/on/host/commands.sh</span></code></pre></div></li>
</ol>
<p>These methods let us run or pass commands from a Docker container to
a shell script on the host. This gives us good options for working
between the container and the host system. For more information on
Docker, we can check articles like <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">What
are Docker Volumes and How Do They Work</a> or <a
href="https://bestonlinetutorial.com/docker/how-to-bind-mount-host-files-to-docker-containers.html">How
to Bind Mount Host Files to Docker Containers</a>.</p>
<h2
id="using-ssh-to-execute-a-shell-script-on-the-host-from-a-docker-container">Using
SSH to execute a shell script on the host from a Docker container</h2>
<p>To run a shell script on the host from a Docker container using SSH,
we can follow these steps:</p>
<ol type="1">
<li><p><strong>Ensure SSH is Installed</strong>: First, we need to check
if the SSH server is running on our host machine. We can install it
using these commands:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install openssh-server</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start ssh</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable ssh</span></code></pre></div></li>
<li><p><strong>Setup SSH Keys</strong>: Next, we generate SSH keys in
our Docker container and copy the public key to the host’s
<code>authorized_keys</code> file. This way, we get password-less
access.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inside your Docker container</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh-keygen</span> <span class="at">-t</span> rsa <span class="at">-b</span> 4096 <span class="at">-C</span> <span class="st">&quot;your_email@example.com&quot;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> ~/.ssh/id_rsa.pub <span class="kw">|</span> <span class="fu">ssh</span> user@host <span class="st">&quot;mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys&quot;</span></span></code></pre></div></li>
<li><p><strong>Run the Shell Script</strong>: After setting up the SSH
keys, we can run a shell script from the host while inside the
container. We use this command:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> user@host <span class="st">&#39;bash /path/to/your/script.sh&#39;</span></span></code></pre></div></li>
<li><p><strong>Example</strong>: If our script is at
<code>/home/user/myscript.sh</code>, the command will be:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> user@host <span class="st">&#39;bash /home/user/myscript.sh&#39;</span></span></code></pre></div></li>
<li><p><strong>Troubleshooting</strong>: If we have problems, let’s
check:</p>
<ul>
<li>The SSH service must be running on the host.</li>
<li>The firewall should allow SSH connections.</li>
<li>The Docker container needs network access to the host.</li>
</ul></li>
</ol>
<p>This method helps us run scripts on the host from a Docker container
securely, using SSH’s safe communication. For more details on Docker and
its settings, we can check <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">what
is Docker and why should you use it</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="can-a-docker-container-execute-commands-on-the-host-machine">1.
Can a Docker container execute commands on the host machine?</h3>
<p>Yes, Docker containers can run commands on the host machine. There
are different ways to do this. A common way is to use Docker volumes or
bind mounts. These let us share files and folders between the container
and the host. Also, we can use the <code>docker exec</code> command to
run shell scripts on the host from inside the container. This helps us
work well between the container and the host system.</p>
<h3
id="what-are-docker-volumes-and-how-do-they-help-in-running-scripts-on-the-host">2.
What are Docker volumes, and how do they help in running scripts on the
host?</h3>
<p>Docker volumes are ways to keep data that we can share between the
host and containers. When we mount a Docker volume to a certain path, we
can store and run shell scripts from the host directly inside the
container. This is useful because we do not need to copy files back and
forth. It makes the execution process easier.</p>
<h3
id="how-can-i-use-ssh-to-run-a-shell-script-on-the-host-from-a-docker-container">3.
How can I use SSH to run a shell script on the host from a Docker
container?</h3>
<p>We can use SSH to connect safely to the host machine from a Docker
container and run shell scripts. First, we need to install an SSH client
in the container and set up SSH access on the host. Then, we can run a
command like <code>ssh user@host 'bash /path/to/script.sh'</code>. This
way, we can easily run scripts on the host. It helps us automate things
and manage tasks from a distance.</p>
<h3
id="what-is-the-difference-between-docker-bind-mounts-and-volumes-for-running-scripts">4.
What is the difference between Docker bind mounts and volumes for
running scripts?</h3>
<p>Docker bind mounts and volumes both let us share data between the
host and containers, but they work in different ways. Bind mounts
connect specific host files or folders to a container. This gives direct
access to the host’s filesystem. On the other hand, volumes are managed
by Docker. They are stored in a part of the host filesystem that Docker
controls. For running shell scripts, bind mounts give us more freedom.
We can change and access scripts from the host more easily.</p>
<h3
id="how-can-i-pass-commands-from-a-docker-container-to-the-host-shell-script-securely">5.
How can I pass commands from a Docker container to the host shell script
securely?</h3>
<p>To pass commands from a Docker container to a host shell script
safely, we can use Docker’s <code>docker exec</code> command with
environment variables or command input. For example, we can do
<code>docker exec -it container_name bash -c 'command_to_execute'</code>
to run a command directly on the host. It is important to check that our
commands are safe to avoid security issues.</p>
<p>For more information on Docker and what it can do, we can look at
related topics like <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It</a> and <a
href="https://bestonlinetutorial.com/docker/how-to-manage-docker-container-logs.html">How
to Manage Docker Container Logs</a>. These articles help us understand
Docker better and learn good practices.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            