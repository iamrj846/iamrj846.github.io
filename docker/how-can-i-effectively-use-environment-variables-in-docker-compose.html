
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How can I effectively use environment variables in Docker Compose?</title>
            <meta name="description" content="Learn to effectively use environment variables in Docker Compose for flexible configurations and enhanced application management.">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How can I effectively use environment variables in Docker Compose?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Using environment variables in Docker Compose is important for
managing settings without putting them directly into your app. When we
use environment variables well, we keep our applications flexible and
safe. This lets us easily change settings based on different situations
like development, testing, and production. This practice makes our
Docker Compose setup better and follows good rules in app
development.</p>
<p>In this article, we will look at different ways to use environment
variables in Docker Compose. We will talk about how to define these
variables in your Docker Compose file. We will also see how to use an
<code>.env</code> file to keep things organized. You will learn how to
change environment variables when we need to and how to access them
inside your Docker containers. By the end, we will understand how to use
environment variables to make our Docker Compose workflows better. Here
is what we will talk about:</p>
<ul>
<li>How to use environment variables in Docker Compose</li>
<li>What are the good things about using environment variables in Docker
Compose</li>
<li>How to define environment variables in a Docker Compose file</li>
<li>How to use an .env file for environment variables in Docker
Compose</li>
<li>How to override environment variables in Docker Compose</li>
<li>How to access environment variables in my Docker containers</li>
<li>Frequently Asked Questions</li>
</ul>
<h2
id="what-are-the-benefits-of-using-environment-variables-in-docker-compose">What
are the benefits of using environment variables in Docker Compose</h2>
<p>Using environment variables in Docker Compose gives us many benefits.
These benefits help make our applications more flexible, secure, and
easier to maintain. Here are some important benefits:</p>
<ol type="1">
<li><p><strong>Configuration Management</strong>: We can easily
configure services without putting values directly in the
<code>docker-compose.yml</code> file. This helps us manage different
setups for development, testing, and production.</p></li>
<li><p><strong>Sensitive Data Handling</strong>: We can store sensitive
information like API keys, passwords, and database credentials in
environment variables. This reduces the chance of leaking sensitive
data. We do not need to put them directly in our source code.</p></li>
<li><p><strong>Avoiding Code Changes</strong>: If we need to change
settings for a specific environment, we can just update the environment
variables. We do not need to change the application code or the
<code>docker-compose.yml</code> file. This makes deployments
faster.</p></li>
<li><p><strong>Enhanced Portability</strong>: By using environment
variables, our Docker Compose files work well in different environments.
This makes it easier to share and work together with our team
members.</p></li>
<li><p><strong>Dynamic Configuration</strong>: We can use environment
variables to set values that may change while the application runs.
Examples are hostnames, ports, or resource limits. This helps us adapt
to different deployment situations.</p></li>
<li><p><strong>Simplified Secrets Management</strong>: We can use
environment variables with Docker secrets to manage sensitive
configurations safely. This is especially important in production
environments.</p></li>
</ol>
<p>Here is an example of using environment variables in a
<code>docker-compose.yml</code> file:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.7&#39;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp:latest</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> DATABASE_URL=${DATABASE_URL}</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> API_KEY=${API_KEY}</span></span></code></pre></div>
<p>In this example, we set <code>DATABASE_URL</code> and
<code>API_KEY</code> as environment variables. This allows for dynamic
setup based on where we deploy the application. This way is good for
security and keeping our Docker Compose environments easy to maintain.
For more insights on Docker and its benefits, check out <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">this
article</a>.</p>
<h2
id="how-can-i-define-environment-variables-in-a-docker-compose-file">How
can I define environment variables in a Docker Compose file</h2>
<p>In a Docker Compose file, we can define environment variables in a
few ways. Here are some methods we can use:</p>
<ol type="1">
<li><p><strong>Directly in the <code>docker-compose.yml</code>
file</strong>:<br />
We can write environment variables under the <code>environment</code>
section for each service. Here’s a simple example:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> NODE_ENV=production</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> API_URL=https://api.example.com</span></span></code></pre></div></li>
<li><p><strong>Using key-value pairs</strong>:<br />
We can also write environment variables in a clearer key-value
format:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">NODE_ENV</span><span class="kw">:</span><span class="at"> production</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">API_URL</span><span class="kw">:</span><span class="at"> https://api.example.com</span></span></code></pre></div></li>
<li><p><strong>Referencing an environment variable from the
host</strong>:<br />
We can use environment variables from our host machine with the format
<code>${VARIABLE_NAME}</code>:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">NODE_ENV</span><span class="kw">:</span><span class="at"> ${NODE_ENV}</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">API_URL</span><span class="kw">:</span><span class="at"> ${API_URL}</span></span></code></pre></div></li>
<li><p><strong>Using an <code>.env</code> file</strong>:<br />
We can create an <code>.env</code> file in the same folder as our
<code>docker-compose.yml</code> and define our environment variables
there. For example:</p>
<p><strong>.env file</strong>:</p>
<pre><code>NODE_ENV=production
API_URL=https://api.example.com</code></pre>
<p>Then in our <code>docker-compose.yml</code>, we can use these
variables without saying them again:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span></code></pre></div></li>
</ol>
<p>These methods give us options to manage environment variables in a
Docker Compose file. This makes it easier to configure and deploy our
services.</p>
<p>For more detailed info on Docker Compose, we can check this article
on <a
href="https://bestonlinetutorial.com/docker/how-to-write-a-simple-docker-compose-yml-file.html">how
to write a simple Docker Compose YML file</a>.</p>
<h2
id="how-can-i-use-an-.env-file-for-environment-variables-in-docker-compose">How
can I use an .env file for environment variables in Docker Compose</h2>
<p>We can use an <code>.env</code> file for environment variables in
Docker Compose by following some easy steps.</p>
<ol type="1">
<li><p><strong>Create an <code>.env</code> file</strong>: We should put
this file in the same folder as our <code>docker-compose.yml</code>. In
this file, we write our environment variables like this:
<code>KEY=VALUE</code>. For example:</p>
<pre class="plaintext"><code>DB_HOST=db
DB_USER=user
DB_PASS=password</code></pre></li>
<li><p><strong>Reference the variables in
<code>docker-compose.yml</code></strong>: We can use the variables from
our <code>.env</code> file in the <code>docker-compose.yml</code>. Here
is how we can do it:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db</span><span class="kw">:</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> postgres</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">POSTGRES_USER</span><span class="kw">:</span><span class="at"> ${DB_USER}</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">POSTGRES_PASSWORD</span><span class="kw">:</span><span class="at"> ${DB_PASS}</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">POSTGRES_DB</span><span class="kw">:</span><span class="at"> mydatabase</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> mynetwork</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">DATABASE_URL</span><span class="kw">:</span><span class="at"> postgres://${DB_USER}:${DB_PASS}@${DB_HOST}/mydatabase</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> mynetwork</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">mynetwork</span><span class="kw">:</span></span></code></pre></div></li>
<li><p><strong>Load the <code>.env</code> file automatically</strong>:
Docker Compose looks for an <code>.env</code> file in the same folder as
the <code>docker-compose.yml</code>. It loads the variables from this
file automatically. We don’t need to tell Docker Compose to load
it.</p></li>
<li><p><strong>Use the variables in your application</strong>: In our
application code, we can get these environment variables as we usually
do. This depends on what programming language or framework we are using.
For example, in Node.js, we can use
<code>process.env.DB_USER</code>.</p></li>
</ol>
<p>Using an <code>.env</code> file helps us keep configuration separate
from code. This makes our Docker Compose setup easier to manage and
safer. For more details on Docker Compose and using environment
variables, we can check <a
href="https://bestonlinetutorial.com/docker/how-to-write-a-simple-docker-compose-yml-file.html">how
to write a simple Docker Compose YML file</a>.</p>
<h2 id="how-can-we-override-environment-variables-in-docker-compose">How
can we override environment variables in Docker Compose</h2>
<p>To override environment variables in Docker Compose, we can use these
methods:</p>
<ol type="1">
<li><p><strong>Override in the Compose file</strong>: We can put
environment variables directly in our <code>docker-compose.yml</code>
file under the specific service. This will be more important than any
values in the .env file.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-web-app</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> DATABASE_URL=mysql://user:pass@db:3306/dbname</span></span></code></pre></div></li>
<li><p><strong>Using the command line</strong>: When we run
<code>docker-compose up</code>, we can set environment variables right
there. This will change any values in the Compose file or .env file.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="va">DATABASE_URL</span><span class="op">=</span>mysql://user:pass@db:3306/dbname <span class="ex">docker-compose</span> up</span></code></pre></div></li>
<li><p><strong>Using an .env file</strong>: We can create a
<code>.env</code> file in the same folder as our
<code>docker-compose.yml</code>. The values we put here can be used in
the Compose file but can also be changed in the Compose file.</p>
<p><strong>.env file example:</strong></p>
<pre class="env"><code>DATABASE_URL=mysql://user:pass@db:3306/dbname</code></pre>
<p>In <code>docker-compose.yml</code>:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-web-app</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> DATABASE_URL=${DATABASE_URL}</span></span></code></pre></div></li>
<li><p><strong>Using profiles</strong>: If we use Docker Compose version
1.28.0 or newer, we can make profiles in our
<code>docker-compose.yml</code>. We can set different environment
variables for each profile.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.9&#39;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-web-app</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">profiles</span><span class="kw">:</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">dev</span><span class="kw">:</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="kw">-</span><span class="at"> DATABASE_URL=mysql://dev_user:dev_pass@db:3306/dev_db</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">prod</span><span class="kw">:</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="kw">-</span><span class="at"> DATABASE_URL=mysql://prod_user:prod_pass@db:3306/prod_db</span></span></code></pre></div></li>
<li><p><strong>Using Docker Compose override files</strong>: We can make
an override file like <code>docker-compose.override.yml</code> to set
different environment variables. This file will be used automatically if
it is there.</p>
<p><strong>docker-compose.override.yml example:</strong></p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> DATABASE_URL=mysql://override_user:override_pass@db:3306/override_db</span></span></code></pre></div></li>
</ol>
<p>This helps us manage environment variables easily. It makes it simple
to change for different environments or settings when we use Docker
Compose. For more details about managing Docker configurations, check <a
href="https://bestonlinetutorial.com/docker/how-to-override-docker-compose-configurations.html">how
to override Docker Compose configurations</a>.</p>
<h2
id="how-can-i-access-environment-variables-in-my-docker-containers">How
can I access environment variables in my Docker containers</h2>
<p>We can access environment variables in our Docker containers using
different ways. Here are the main methods:</p>
<ol type="1">
<li><p><strong>Using the <code>docker run</code> command</strong>: We
can pass environment variables directly when we start a container.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-e</span> MY_ENV_VAR=value my_image</span></code></pre></div></li>
<li><p><strong>Defining environment variables in a Dockerfile</strong>:
We can set default environment variables. These will be available when
the container runs.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> alpine</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MY_ENV_VAR=value</span></code></pre></div></li>
<li><p><strong>Using a Docker Compose file</strong>: We can define
environment variables in a <code>docker-compose.yml</code> file for our
services.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">my_service</span><span class="kw">:</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my_image</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> MY_ENV_VAR=value</span></span></code></pre></div></li>
<li><p><strong>Accessing environment variables in your
application</strong>: Inside our application, we can access these
variables. We use the right method for our programming language. For
example, in Python:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>my_var <span class="op">=</span> os.getenv(<span class="st">&#39;MY_ENV_VAR&#39;</span>)</span></code></pre></div></li>
<li><p><strong>Using <code>.env</code> files</strong>: Docker Compose
reads a <code>.env</code> file from the same folder. We can define
environment variables in that file.</p>
<pre class="dotenv"><code>MY_ENV_VAR=value</code></pre>
<p>Then we can reference it in our <code>docker-compose.yml</code>:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">my_service</span><span class="kw">:</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my_image</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> MY_ENV_VAR</span></span></code></pre></div></li>
</ol>
<p>By using these methods, we can manage and access environment
variables in our Docker containers. This helps us with our application’s
setup and security. For more tips on using Docker well, check <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">this
article</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="how-can-we-pass-environment-variables-to-docker-containers">1.
How can we pass environment variables to Docker containers?</h3>
<p>We can pass environment variables to Docker containers in a few ways.
First, we can use the <code>-e</code> flag with <code>docker run</code>.
Second, we can define them in our Dockerfile with the <code>ENV</code>
instruction. Lastly, we can put them in our Docker Compose file under
the <code>environment</code> section. Using environment variables helps
us manage settings and sensitive info safely. For more details, check
this article on <a
href="https://bestonlinetutorial.com/docker/how-can-i-pass-environment-variables-to-docker-containers.html">how
to pass environment variables to Docker containers</a>.</p>
<h3 id="what-is-the-purpose-of-an-.env-file-in-docker-compose">2. What
is the purpose of an .env file in Docker Compose?</h3>
<p>An <code>.env</code> file in Docker Compose helps us define
environment variables that we can use in our
<code>docker-compose.yml</code> file. This way, we can keep our
configuration settings in one place. It makes our Docker Compose
projects easier to move and manage. Using an <code>.env</code> file also
helps us keep sensitive info out of our configuration files, which is
better for security and flexibility.</p>
<h3 id="how-do-we-override-environment-variables-in-docker-compose">3.
How do we override environment variables in Docker Compose?</h3>
<p>We can easily override environment variables in Docker Compose. We do
this by putting them directly in the <code>docker-compose.yml</code>
file or by using an external <code>.env</code> file. If we define a
variable in both spots, the one in the <code>docker-compose.yml</code>
file will be used. This gives us the chance to change configurations
easily based on where we are deploying, like in staging or
production.</p>
<h3
id="how-do-we-access-environment-variables-in-our-docker-containers">4.
How do we access environment variables in our Docker containers?</h3>
<p>To access environment variables in our Docker containers, we need to
use the right method for the programming language we are using. For
example, in Node.js, we can use <code>process.env.VARIABLE_NAME</code>
to get variables. In Python, we use
<code>os.environ['VARIABLE_NAME']</code>. We should make sure to define
these environment variables in our Docker Compose file or .env file.
This way they are available inside the container.</p>
<h3
id="what-are-best-practices-for-using-environment-variables-in-docker-compose">5.
What are best practices for using environment variables in Docker
Compose?</h3>
<p>When we use environment variables in Docker Compose, we should follow
some best practices. First, we should store sensitive info in an
<code>.env</code> file. Second, we should avoid hardcoding values in the
<code>docker-compose.yml</code>. Third, we should use clear names for
our variables. Also, it is good to write down the environment variables
we use in our project. Keeping a consistent naming style helps everyone
read and work together better. For more on Docker best practices, check
this article on the <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">benefits
of using Docker in development</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            