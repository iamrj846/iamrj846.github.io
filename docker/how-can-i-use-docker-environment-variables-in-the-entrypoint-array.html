
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "BestOnlineTutorial",
      "url": "https://www.bestonlinetutorial.com/"
    }
    </script>
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How Can I Use Docker Environment Variables in the ENTRYPOINT Array?</title>
            <meta name="description" content="Learn how to effectively use Docker environment variables in the ENTRYPOINT array to optimize your containerized applications.">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Can I Use Docker Environment Variables in the ENTRYPOINT Array?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Using Docker environment variables in the ENTRYPOINT array is very
important for making flexible container apps. We can do this by directly
using environment variables in our ENTRYPOINT command. For example, if
we want to send an environment variable to a script, we can write it
like this: <code>ENTRYPOINT ["sh", "-c", "$MY_ENV_VAR"]</code>. This
way, the container can use the variable when it runs.</p>
<p>In this article, we will look at different ways to use Docker
environment variables in the ENTRYPOINT array. We will talk about how to
pass environment variables, how to access them in shell scripts, how to
format them in JSON, how to manage them with Docker Compose, and how to
change them when we need to. Here is what we will cover:</p>
<ul>
<li>How to Use Docker Environment Variables in the ENTRYPOINT Array</li>
<li>How Can I Pass Environment Variables to the Docker ENTRYPOINT
Array</li>
<li>How Can I Access Docker Environment Variables in a Shell Script in
ENTRYPOINT</li>
<li>How to Use Docker Environment Variables in JSON Format for
ENTRYPOINT</li>
<li>How Can I Use Docker Compose to Manage Environment Variables in
ENTRYPOINT</li>
<li>How to Override Docker Environment Variables in the ENTRYPOINT
Array</li>
<li>Frequently Asked Questions</li>
</ul>
<p>If you want to learn more about Docker, you can read articles like <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a> and <a
href="https://bestonlinetutorial.com/docker/how-does-docker-differ-from-virtual-machines.html">How
Does Docker Differ from Virtual Machines?</a>.</p>
<h2
id="how-can-i-pass-environment-variables-to-the-docker-entrypoint-array">How
Can I Pass Environment Variables to the Docker ENTRYPOINT Array</h2>
<p>To pass environment variables to the Docker ENTRYPOINT array, we can
use the <code>ENV</code> instruction in our Dockerfile. This helps us
define environment variables. Then, we can access these variables in the
ENTRYPOINT script.</p>
<h3 id="example-dockerfile">Example Dockerfile</h3>
<div class="sourceCode" id="cb1"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> alpine:latest</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define environment variables</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MY_ENV_VAR=<span class="st">&quot;Hello, Docker!&quot;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the ENTRYPOINT</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;sh&quot;</span>, <span class="st">&quot;-c&quot;</span>, <span class="st">&quot;echo $MY_ENV_VAR&quot;</span>]</span></code></pre></div>
<p>In this example, when the container runs, it shows “Hello, Docker!”
using the environment variable <code>MY_ENV_VAR</code>.</p>
<h3 id="running-the-container">Running the Container</h3>
<p>To build and run the container, we use these commands:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> my-docker-app .</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run my-docker-app</span></code></pre></div>
<h3 id="passing-environment-variables-at-runtime">Passing Environment
Variables at Runtime</h3>
<p>We can also pass environment variables while running the container.
We do this with the <code>-e</code> option in
<code>docker run</code>:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-e</span> MY_ENV_VAR=<span class="st">&quot;Hello, World!&quot;</span> my-docker-app</span></code></pre></div>
<p>This will change the existing environment variable from the
Dockerfile. It lets us change how the ENTRYPOINT works.</p>
<p>For more complicated setups, we can use Docker Compose. It helps us
manage environment variables better. We can look at <a
href="https://bestonlinetutorial.com/docker/how-can-i-effectively-use-environment-variables-in-docker-compose.html">this
article</a> for more information about using environment variables with
Docker Compose.</p>
<h2
id="how-can-we-access-docker-environment-variables-in-a-shell-script-in-entrypoint">How
Can We Access Docker Environment Variables in a Shell Script in
ENTRYPOINT</h2>
<p>To access Docker environment variables in a shell script in the
<code>ENTRYPOINT</code> of a Docker container, we can follow these
steps:</p>
<ol type="1">
<li><p><strong>Define Environment Variables</strong>: First, we need to
define environment variables in our Dockerfile using the
<code>ENV</code> command.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> alpine</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MY_VAR=<span class="st">&quot;Hello, World!&quot;</span></span></code></pre></div></li>
<li><p><strong>Create a Shell Script</strong>: Next, we create a shell
script to get the environment variable.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/sh</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;The value of MY_VAR is: </span><span class="va">$MY_VAR</span><span class="st">&quot;</span></span></code></pre></div>
<p>We save this script as <code>entrypoint.sh</code>.</p></li>
<li><p><strong>Set Permissions</strong>: After that, we must give the
script permission to run.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> +x entrypoint.sh</span></code></pre></div></li>
<li><p><strong>Configure ENTRYPOINT</strong>: In our Dockerfile, we set
the script as the <code>ENTRYPOINT</code>.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> entrypoint.sh /usr/local/bin/entrypoint.sh</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;/usr/local/bin/entrypoint.sh&quot;</span>]</span></code></pre></div></li>
<li><p><strong>Build and Run the Container</strong>: Now we can build
our Docker image and run the container.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> my-image .</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run my-image</span></code></pre></div></li>
</ol>
<p>When we run the container, the shell script will run. It will show
the value of the <code>MY_VAR</code> environment variable.</p>
<p>This way, we can use Docker environment variables in a shell script
in our container’s entrypoint. It is flexible for different setups. For
more details, we can check how to pass environment variables to Docker
containers in <a
href="https://bestonlinetutorial.com/docker/how-can-i-pass-environment-variables-to-docker-containers.html">this
article</a>.</p>
<h2
id="how-to-use-docker-environment-variables-in-json-format-for-entrypoint">How
to Use Docker Environment Variables in JSON Format for ENTRYPOINT</h2>
<p>We can use Docker to pass environment variables to containers. These
variables can be used in the <code>ENTRYPOINT</code> instruction. When
we write the <code>ENTRYPOINT</code> in JSON format, we can access the
environment variables in the command that the container runs.</p>
<p>To set an <code>ENTRYPOINT</code> with JSON format and use
environment variables, we can use this syntax in our Dockerfile:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> your-base-image</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define environment variables</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MY_VAR=value</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> ANOTHER_VAR=another_value</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the ENTRYPOINT</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;sh&quot;</span>, <span class="st">&quot;-c&quot;</span>, <span class="st">&quot;echo $MY_VAR &amp;&amp; echo $ANOTHER_VAR&quot;</span>]</span></code></pre></div>
<p>In this example: - We define the <code>ENTRYPOINT</code> with JSON
syntax. This way, the command runs and allows the environment variables
to be used. - We use the shell (<code>sh -c</code>) to run the command.
This helps us access the environment variables we defined before.</p>
<p>When we build and run this Docker container, it will show the values
of <code>MY_VAR</code> and `ANOTHER_VAR.</p>
<p>If we want to pass environment variables while running the container,
we can use the <code>-e</code> flag with <code>docker run</code>:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-e</span> MY_VAR=Hello <span class="at">-e</span> ANOTHER_VAR=World your-image</span></code></pre></div>
<p>This command will change the earlier set environment variables. It
lets us change the behavior of our container when it runs.</p>
<p>For more details on how to manage environment variables in Docker, we
can check <a
href="https://bestonlinetutorial.com/docker/how-can-i-pass-environment-variables-to-docker-containers.html">how
to pass environment variables to Docker containers</a>.</p>
<h2
id="how-can-we-use-docker-compose-to-manage-environment-variables-in-entrypoint">How
Can We Use Docker Compose to Manage Environment Variables in
ENTRYPOINT</h2>
<p>Docker Compose makes it easy to manage applications with many
containers. It lets us define and manage environment variables for our
containers. We can set these variables right in the
<code>docker-compose.yml</code> file or use an external
<code>.env</code> file. We can then use these variables in the
<code>ENTRYPOINT</code> of our containers.</p>
<h3 id="defining-environment-variables-in-docker-compose.yml">Defining
Environment Variables in <code>docker-compose.yml</code></h3>
<p>We can define environment variables in the
<code>docker-compose.yml</code> file under the <code>environment</code>
section for each service. Here’s an example:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> your-image</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">entrypoint</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&quot;sh&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;-c&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;echo $MY_VAR&quot;</span><span class="kw">]</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> MY_VAR=HelloDocker</span></span></code></pre></div>
<p>In this example, we set the environment variable <code>MY_VAR</code>
to <code>HelloDocker</code>. It will be available in the
<code>ENTRYPOINT</code> command.</p>
<h3 id="using-an-external-.env-file">Using an External <code>.env</code>
File</h3>
<p>We can also manage environment variables in an external
<code>.env</code> file. Docker Compose reads this file and sets the
variables. Here is how to write your <code>.env</code> file:</p>
<pre><code>MY_VAR=HelloDocker</code></pre>
<p>Then in our <code>docker-compose.yml</code>, we can reference the
variable like this:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> your-image</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">entrypoint</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&quot;sh&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;-c&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;echo $MY_VAR&quot;</span><span class="kw">]</span></span></code></pre></div>
<h3 id="accessing-environment-variables-in-a-shell-script">Accessing
Environment Variables in a Shell Script</h3>
<p>If our <code>ENTRYPOINT</code> is a shell script, we can access the
environment variables easily:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/sh</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;The variable is: </span><span class="va">$MY_VAR</span><span class="st">&quot;</span></span></code></pre></div>
<p>We should make sure to set our script as the entry point in our
<code>docker-compose.yml</code>:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">context</span><span class="kw">:</span><span class="at"> .</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">entrypoint</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&quot;./your-script.sh&quot;</span><span class="kw">]</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> MY_VAR=HelloDocker</span></span></code></pre></div>
<h3 id="notes">Notes</h3>
<ul>
<li>We need to make sure the shell script has execute permissions.</li>
<li>We can also mix environment variables with command-line arguments in
our <code>ENTRYPOINT</code> to make it more flexible.</li>
<li>For more details on Docker Compose and what it can do, check <a
href="https://bestonlinetutorial.com/docker/what-is-docker-compose-and-how-does-it-simplify-multi-container-applications.html">this
article</a>.</li>
</ul>
<h2
id="how-to-override-docker-environment-variables-in-the-entrypoint-array">How
to Override Docker Environment Variables in the ENTRYPOINT Array</h2>
<p>We can override Docker environment variables in the ENTRYPOINT array
by using shell syntax or passing variables when we run the container.
This helps us change how the container behaves by modifying environment
variables.</p>
<h3 id="using-shell-syntax">Using Shell Syntax</h3>
<p>When we use a shell form in the ENTRYPOINT array, we can access and
change environment variables like this:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> alpine:latest</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MY_VAR=default_value</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;/bin/sh&quot;</span>, <span class="st">&quot;-c&quot;</span>, <span class="st">&quot;echo ${MY_VAR}&quot;</span>]</span></code></pre></div>
<p>In this example, <code>${MY_VAR}</code> will show the value of
<code>MY_VAR</code>. We can change this value when we run the
container.</p>
<h3 id="passing-environment-variables-at-runtime-1">Passing Environment
Variables at Runtime</h3>
<p>We can also change environment variables when we run a container by
using the <code>-e</code> flag. For example:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-e</span> MY_VAR=new_value my_image</span></code></pre></div>
<p>This command will set <code>MY_VAR</code> to <code>new_value</code>.
This new value will be used by the ENTRYPOINT script.</p>
<h3 id="using-docker-compose">Using Docker Compose</h3>
<p>In a Docker Compose file, we can define environment variables in the
service section:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my_image</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MY_VAR</span><span class="kw">:</span><span class="at"> overridden_value</span></span></code></pre></div>
<p>This way, we can handle environment variables more easily when we
work with many containers.</p>
<h3 id="combining-with-arg">Combining with ARG</h3>
<p>We can also use <code>ARG</code> to set default values. These values
can be changed during the build time:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> alpine:latest</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ARG</span> MY_VAR=default_value</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MY_VAR=${MY_VAR}</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;/bin/sh&quot;</span>, <span class="st">&quot;-c&quot;</span>, <span class="st">&quot;echo ${MY_VAR}&quot;</span>]</span></code></pre></div>
<p>Then, we can build the image with a custom value like this:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">--build-arg</span> MY_VAR=new_value <span class="at">-t</span> my_image .</span></code></pre></div>
<p>This gives us flexibility. We can control environment variables well.
This makes our Docker containers fit different situations without
changing the image itself.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3
id="what-are-docker-environment-variables-and-why-should-i-use-them">1.
What are Docker environment variables and why should I use them?</h3>
<p>Docker environment variables are pairs of keys and values. They help
us set up our applications when they run. We can change settings without
putting them directly into our Docker images. Using these variables
makes our applications more flexible and safe. We can easily adjust
settings depending on the environment like development, testing, or
production. For more details, read <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">what
are the benefits of using Docker in development</a>.</p>
<h3 id="how-can-i-pass-environment-variables-to-a-docker-container">2.
How can I pass environment variables to a Docker container?</h3>
<p>We can pass environment variables to a Docker container by using the
<code>-e</code> flag in the <code>docker run</code> command. We can also
define them in our Dockerfile with the <code>ENV</code> instruction.
Another way is to use a <code>.env</code> file with Docker Compose. This
helps us manage many environment variables more easily. To learn more,
check out <a
href="https://bestonlinetutorial.com/docker/how-can-i-pass-environment-variables-to-docker-containers.html">how
can I pass environment variables to Docker containers</a>.</p>
<h3 id="can-i-use-docker-environment-variables-in-entrypoint-scripts">3.
Can I use Docker environment variables in ENTRYPOINT scripts?</h3>
<p>Yes, we can use Docker environment variables in our ENTRYPOINT
scripts. To do this, we need to refer to the variables directly in our
script. For example, in a shell script, we can access a variable like
this <code>$VARIABLE_NAME</code>. This lets us set up dynamic
configurations when the application runs. For practical examples, see <a
href="https://bestonlinetutorial.com/docker/how-can-i-use-docker-environment-variables-in-the-entrypoint-array.html">how
to use Docker environment variables in the ENTRYPOINT array</a>.</p>
<h3 id="what-is-the-difference-between-entrypoint-and-cmd-in-docker">4.
What is the difference between ENTRYPOINT and CMD in Docker?</h3>
<p>The <code>ENTRYPOINT</code> and <code>CMD</code> instructions in
Docker both tell what to run when a container starts. But they have
different roles. We use <code>ENTRYPOINT</code> to make the container
run as an executable. On the other hand, <code>CMD</code> gives default
arguments. If we use both, the <code>CMD</code> arguments will go to the
<code>ENTRYPOINT</code>. For a deeper understanding, refer to <a
href="https://bestonlinetutorial.com/docker/what-are-the-key-differences-between-cmd-and-entrypoint-in-a-dockerfile.html">what
are the key differences between CMD and ENTRYPOINT in a
Dockerfile</a>.</p>
<h3 id="how-can-i-manage-environment-variables-in-docker-compose">5. How
can I manage environment variables in Docker Compose?</h3>
<p>Docker Compose helps us manage environment variables with the
<code>environment</code> key in our <code>docker-compose.yml</code>
file. We can also load variables from a <code>.env</code> file. This
makes it easier to deal with different configurations for various
environments. This way, we can keep our multi-container applications
clear and easy to maintain. To learn more, visit <a
href="https://bestonlinetutorial.com/docker/how-can-i-effectively-use-environment-variables-in-docker-compose.html">how
can I effectively use environment variables in Docker Compose</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            