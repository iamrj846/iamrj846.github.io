
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TFCQEJR7TD');
</script>
            <title>How to Set Up a LAMP Stack (Linux, Apache, MySQL, PHP) with Docker?</title>
            <meta name="description" content="Learn to easily set up a LAMP stack (Linux, Apache, MySQL, PHP) using Docker. Step-by-step guide for seamless deployment!">

            <div id="head-placeholder"></div>
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How to Set Up a LAMP Stack (Linux, Apache, MySQL, PHP) with Docker?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Setting up a LAMP stack (Linux, Apache, MySQL, PHP) with Docker is a
good way for us to create a strong environment for web projects. This
mix helps us manage and grow our apps easily. It also keeps everything
the same across different setups. By using Docker containers, we can
separate each part of the LAMP stack. This way, our apps run well
without any problems.</p>
<p>In this article, we will show you the steps to set up a LAMP stack
with Docker. We will talk about what we need before we start. We will
also see how to write a Dockerfile for each part of the LAMP stack.
Then, we will look at how to set up Docker Compose for easier
deployment. Finally, we will explain how to build and run our Docker
containers. Plus, we will show how to access the MySQL database in our
Docker LAMP stack. Here are the topics we will cover:</p>
<ul>
<li>How to Create a LAMP Stack Using Docker for Linux Apache MySQL
PHP</li>
<li>What Are the Prerequisites for Setting Up a LAMP Stack with
Docker</li>
<li>How to Write a Dockerfile for LAMP Stack Components</li>
<li>How to Configure Docker Compose for LAMP Stack Deployment</li>
<li>How to Build and Run Your LAMP Stack Docker Containers</li>
<li>How to Access MySQL Database in Your Dockerized LAMP Stack</li>
<li>Frequently Asked Questions</li>
</ul>
<p>If we want to learn more about Docker, we can check out <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">what
Docker is and why you should use it</a> or see <a
href="https://bestonlinetutorial.com/docker/how-does-docker-differ-from-virtual-machines.html">how
Docker is different from virtual machines</a>. This knowledge will help
us see the benefits of using Docker for our LAMP stack setup.</p>
<h2
id="what-are-the-prerequisites-for-setting-up-a-lamp-stack-with-docker">What
Are the Prerequisites for Setting Up a LAMP Stack with Docker?</h2>
<p>To set up a LAMP (Linux, Apache, MySQL, PHP) stack with Docker, we
need to have some things ready:</p>
<ol type="1">
<li><p><strong>Docker Installed</strong>:<br />
We must install Docker on our machine. We can follow the installation
guide for different operating systems <a
href="https://bestonlinetutorial.com/docker/how-to-install-docker-on-different-operating-systems.html">here</a>.</p></li>
<li><p><strong>Docker Compose</strong>:<br />
We need to install Docker Compose. This tool helps us manage apps that
use multiple containers. We can find the installation guide <a
href="https://bestonlinetutorial.com/docker/how-to-install-docker-compose.html">here</a>.</p></li>
<li><p><strong>Basic Command Line Knowledge</strong>:<br />
It is important to know some terminal commands. This knowledge helps us
navigate our system and run Docker commands.</p></li>
<li><p><strong>Text Editor</strong>:<br />
We should have a text editor like VSCode or Sublime Text. We will use it
to edit Dockerfile and Docker Compose files.</p></li>
<li><p><strong>Linux Environment</strong>:<br />
Docker can work on many operating systems. But we prefer a Linux-based
system for the LAMP stack.</p></li>
<li><p><strong>Internet Connection</strong>:<br />
A good internet connection is needed. We will use it to download Docker
images and other necessary files.</p></li>
<li><p><strong>Understanding of LAMP Stack</strong>:<br />
Knowing the basics of Linux, Apache, MySQL, and PHP is helpful. This
knowledge makes setting up and configuring our environment
easier.</p></li>
<li><p><strong>Memory and Disk Space</strong>:<br />
We need enough RAM (at least 4GB is good) and disk space. This space is
important for running Docker containers smoothly.</p></li>
</ol>
<p>Once we have these things ready, we can start setting up our LAMP
stack with Docker.</p>
<h2 id="how-to-write-a-dockerfile-for-lamp-stack-components">How to
Write a Dockerfile for LAMP Stack Components?</h2>
<p>To make a Dockerfile for a LAMP stack, we need to pick a base image.
Then we install the needed packages and set up the services. Here is a
simple Dockerfile that has Linux, Apache, MySQL, and PHP parts.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use official PHP image with Apache</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> php:8.0-apache</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Install MySQL client and other necessary PHP extensions</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> install <span class="at">-y</span> <span class="dt">\</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    default-mysql-client <span class="dt">\</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    libzip-dev <span class="dt">\</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    unzip <span class="dt">\</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&amp;&amp;</span> <span class="ex">docker-php-ext-install</span> zip <span class="dt">\</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&amp;&amp;</span> <span class="ex">docker-php-ext-install</span> pdo pdo_mysql</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable Apache mod_rewrite</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">a2enmod</span> rewrite</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the document root to the public directory</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> APACHE_DOCUMENT_ROOT /var/www/html/public</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Configure Apache to use the new document root</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> ./apache-vhost.conf /etc/apache2/sites-available/000-default.conf</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy application code to the container</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> ./src /var/www/html</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Expose the default port</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="kw">EXPOSE</span> 80</span></code></pre></div>
<h3 id="explanation-of-key-sections">Explanation of Key Sections:</h3>
<ul>
<li><strong>Base Image</strong>: We start the Dockerfile with the
official PHP image that has Apache
(<code>FROM php:8.0-apache</code>).</li>
<li><strong>Package Installation</strong>: The <code>RUN</code> command
updates the packages. It also installs the MySQL client and some needed
PHP extensions.</li>
<li><strong>Apache Configuration</strong>: The command
<code>a2enmod rewrite</code> turns on the Apache rewrite module. This
helps with URL rewriting.</li>
<li><strong>Document Root</strong>: We use the <code>ENV</code> command
to set the document root for Apache.</li>
<li><strong>Configuration File</strong>: The <code>COPY</code> command
puts a custom Apache configuration file in the container.</li>
<li><strong>Application Code</strong>: We copy the application code into
the web root directory of the container.</li>
<li><strong>Port Exposure</strong>: The <code>EXPOSE</code> command
shows the port where the container will listen for requests.</li>
</ul>
<p>This Dockerfile is a basic setup for a LAMP stack. We can change it
more by adding PHP extensions or changing Apache settings if we want.
For more information on Docker and its parts, we can look at <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">this
article on Docker images</a>.</p>
<h2 id="how-to-configure-docker-compose-for-lamp-stack-deployment">How
to Configure Docker Compose for LAMP Stack Deployment?</h2>
<p>To configure Docker Compose for deploying a LAMP stack (Linux,
Apache, MySQL, PHP), we need to create a <code>docker-compose.yml</code>
file. This file will define all the services we need. Here is an
example:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> php:7.4-apache</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;8080:80&quot;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./html:/var/www/html</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> lamp-network</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db</span><span class="kw">:</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> mysql:5.7</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">restart</span><span class="kw">:</span><span class="at"> always</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_ROOT_PASSWORD</span><span class="kw">:</span><span class="at"> rootpassword</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_DATABASE</span><span class="kw">:</span><span class="at"> mydatabase</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_USER</span><span class="kw">:</span><span class="at"> user</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_PASSWORD</span><span class="kw">:</span><span class="at"> userpassword</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> db_data:/var/lib/mysql</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> lamp-network</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">lamp-network</span><span class="kw">:</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">driver</span><span class="kw">:</span><span class="at"> bridge</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db_data</span><span class="kw">:</span></span></code></pre></div>
<h3 id="explanation-of-the-configuration">Explanation of the
Configuration:</h3>
<ul>
<li><strong>Version</strong>: This tells what version of Docker Compose
file we use.</li>
<li><strong>Services</strong>: This part defines the services in our
app.
<ul>
<li><strong>web</strong>:
<ul>
<li>It uses the official PHP and Apache image.</li>
<li>It maps port 8080 on our computer to port 80 on the container.</li>
<li>It mounts the <code>html</code> folder from our computer to
<code>/var/www/html</code> in the container. This is for serving web
files.</li>
</ul></li>
<li><strong>db</strong>:
<ul>
<li>It uses the MySQL 5.7 image.</li>
<li>It sets up environment variables for MySQL.</li>
<li>It uses a named volume <code>db_data</code> to keep database files
safe.</li>
</ul></li>
</ul></li>
<li><strong>Networks</strong>: We create a custom bridge network called
<code>lamp-network</code>. This helps services talk to each other.</li>
<li><strong>Volumes</strong>: We define a named volume
<code>db_data</code> to keep database data safe when containers
restart.</li>
</ul>
<h3 id="deploying-the-lamp-stack">Deploying the LAMP Stack:</h3>
<p>To deploy the LAMP stack with Docker Compose, we go to the folder
with our <code>docker-compose.yml</code> file. Then we run:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">-d</span></span></code></pre></div>
<p>This command will start the containers in detached mode. We can
access our LAMP stack by opening a browser and going to
<code>http://localhost:8080</code>.</p>
<p>For more information on Docker Compose and its features, we might
find the article on <a
href="https://bestonlinetutorial.com/docker/what-is-docker-compose-and-how-does-it-simplify-multi-container-applications.html">what
is Docker Compose and how does it simplify multi-container
applications</a> useful.</p>
<h2 id="how-to-build-and-run-your-lamp-stack-docker-containers">How to
Build and Run Your LAMP Stack Docker Containers?</h2>
<p>To build and run your LAMP stack with Docker, we can follow these
steps:</p>
<ol type="1">
<li><p><strong>Create Dockerfile</strong>: First, we need to create a
<code>Dockerfile</code> for the PHP application. This file will tell us
how to set up our PHP environment.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the official PHP image</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> php:7.4-apache</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy the local code to the container</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> src/ /var/www/html/</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Install necessary extensions</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">docker-php-ext-install</span> mysqli</span></code></pre></div></li>
<li><p><strong>Create Docker Compose File</strong>: Next, we create a
<code>docker-compose.yml</code> file. This file will help us set up
multiple containers.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.1&#39;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">build</span><span class="kw">:</span><span class="at"> ./app</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./app/src:/var/www/html</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;8080:80&quot;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db</span><span class="kw">:</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> mysql:5.7</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">restart</span><span class="kw">:</span><span class="at"> always</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_ROOT_PASSWORD</span><span class="kw">:</span><span class="at"> rootpassword</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_DATABASE</span><span class="kw">:</span><span class="at"> mydatabase</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_USER</span><span class="kw">:</span><span class="at"> user</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_PASSWORD</span><span class="kw">:</span><span class="at"> userpassword</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> db_data:/var/lib/mysql</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db_data</span><span class="kw">:</span></span></code></pre></div></li>
<li><p><strong>Directory Structure</strong>: We need to make sure our
project has this structure:</p>
<pre><code>/project-directory
├── app
│   ├── Dockerfile
│   └── src
│       └── index.php
└── docker-compose.yml</code></pre></li>
<li><p><strong>Build Containers</strong>: Now, we can go to our project
directory in the terminal. Then we run this command to build the
containers.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> build</span></code></pre></div></li>
<li><p><strong>Run Containers</strong>: After we build the containers,
we can run them with this command:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up</span></code></pre></div>
<p>This command will start our web server and the MySQL
database.</p></li>
<li><p><strong>Access the Application</strong>: We can open our browser
and go to <code>http://localhost:8080</code> to see our PHP application
running on Apache.</p></li>
<li><p><strong>Stop Containers</strong>: When we want to stop the
containers, we can use:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> down</span></code></pre></div></li>
</ol>
<p>By following these steps, we can build and run our LAMP stack Docker
containers. This helps us have a good environment for development and
deployment. If we want to learn more about how Docker works with
multi-container applications, we can check out <a
href="https://bestonlinetutorial.com/docker/what-is-docker-compose-and-how-does-it-simplify-multi-container-applications.html">this
article on Docker Compose</a>.</p>
<h2 id="how-to-access-mysql-database-in-your-dockerized-lamp-stack">How
to Access MySQL Database in Your Dockerized LAMP Stack?</h2>
<p>To access the MySQL database in our Dockerized LAMP stack, we can
follow these steps:</p>
<ol type="1">
<li><p><strong>Ensure Your MySQL Container is Running</strong>: First,
we should check if our MySQL container is running. We can do this by
running:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> ps</span></code></pre></div>
<p>We need to look for the container that is running the MySQL
image.</p></li>
<li><p><strong>Connect from Another Container</strong>: If we want to
connect to MySQL from another Docker container, like a PHP container, we
can use this command. Replace <code>&lt;mysql_container_name&gt;</code>
with the name or ID of our MySQL container:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> <span class="op">&lt;</span>mysql_container_name<span class="op">&gt;</span> mysql <span class="at">-u</span> root <span class="at">-p</span></span></code></pre></div>
<p>After we run this command, it will ask us for the MySQL root
password.</p></li>
<li><p><strong>Connecting from Host Machine</strong>: To access MySQL
from our host machine, we need to have the MySQL client installed. We
can connect using this command. Replace <code>&lt;host_port&gt;</code>
with the port we have mapped, usually it is 3306:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mysql</span> <span class="at">-h</span> 127.0.0.1 <span class="at">-P</span> <span class="op">&lt;</span>host_port<span class="op">&gt;</span> -u root <span class="at">-p</span></span></code></pre></div></li>
<li><p><strong>Using PHP to Connect</strong>: If we are accessing the
database through our PHP application, we can use this PHP code
snippet:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;?php</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="va">$servername</span> <span class="op">=</span> <span class="st">&quot;mysql&quot;</span><span class="ot">;</span> <span class="co">// Use service name defined in docker-compose</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="va">$username</span> <span class="op">=</span> <span class="st">&quot;root&quot;</span><span class="ot">;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="va">$password</span> <span class="op">=</span> <span class="st">&quot;your_password&quot;</span><span class="ot">;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="va">$dbname</span> <span class="op">=</span> <span class="st">&quot;your_database&quot;</span><span class="ot">;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">// Create connection</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="va">$conn</span> <span class="op">=</span> <span class="kw">new</span> <span class="bu">mysqli</span>(<span class="va">$servername</span><span class="ot">,</span> <span class="va">$username</span><span class="ot">,</span> <span class="va">$password</span><span class="ot">,</span> <span class="va">$dbname</span>)<span class="ot">;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Check connection</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="va">$conn</span>-&gt;connect_error) {</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">die</span>(<span class="st">&quot;Connection failed: &quot;</span> <span class="op">.</span> <span class="va">$conn</span>-&gt;connect_error)<span class="ot">;</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="kw">echo</span> <span class="st">&quot;Connected successfully&quot;</span><span class="ot">;</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="kw">?&gt;</span></span></code></pre></div></li>
<li><p><strong>Environment Variables</strong>: We must make sure that
our MySQL credentials are set correctly in our
<code>docker-compose.yml</code> file under the MySQL service:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db</span><span class="kw">:</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> mysql:5.7</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_ROOT_PASSWORD</span><span class="kw">:</span><span class="at"> your_password</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_DATABASE</span><span class="kw">:</span><span class="at"> your_database</span></span></code></pre></div></li>
</ol>
<p>By following these steps, we can access and manage our MySQL database
in our Dockerized LAMP stack. For more insights into Docker and its
setups, we can check out <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">what
are the benefits of using Docker in development</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-is-a-lamp-stack-and-why-should-we-use-docker-for-it">1.
What is a LAMP Stack and why should we use Docker for it?</h3>
<p>A LAMP stack is made up of Linux, Apache, MySQL, and PHP. This stack
is a strong choice for web development. We can use Docker for our LAMP
stack to make deployment and management easier. Docker lets us package
everything into separate containers. This keeps everything the same
across different environments and helps us scale our applications
better. You can learn more about the benefits of using Docker in
development <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">here</a>.</p>
<h3 id="how-do-we-install-docker-on-our-operating-system">2. How do we
install Docker on our operating system?</h3>
<p>Installing Docker changes a bit depending on the operating system.
But usually, we need to download the installer from Docker’s official
website and follow the setup steps. For more details on how to install
Docker on different operating systems, check this <a
href="https://bestonlinetutorial.com/docker/how-to-install-docker-on-different-operating-systems.html">installation
guide</a>. After we install it, we can easily set up our LAMP stack with
Docker containers.</p>
<h3 id="how-do-we-create-a-dockerfile-for-our-lamp-stack-components">3.
How do we create a Dockerfile for our LAMP stack components?</h3>
<p>To create a Dockerfile for our LAMP stack, we need to pick a base
image, install needed packages, and set up the web server and database.
A common Dockerfile for a LAMP stack starts with
<code>FROM php:apache</code>, then we use the <code>RUN</code> command
to install MySQL and other tools. For more instructions, see this
article on <a
href="https://bestonlinetutorial.com/docker/what-is-the-dockerfile-and-how-do-you-create-one.html">what
is a Dockerfile and how to create one</a>.</p>
<h3
id="can-we-connect-our-dockerized-lamp-stack-to-an-external-mysql-database">4.
Can we connect our Dockerized LAMP stack to an external MySQL
database?</h3>
<p>Yes, we can connect our Dockerized LAMP stack to an outside MySQL
database. We need to define the database connection settings in our PHP
app. Also, we must make sure the network settings let the LAMP container
talk to the outside database. For more tips on connecting Docker Compose
services to outside databases, visit this link: <a
href="https://bestonlinetutorial.com/docker/how-to-connect-docker-compose-services-to-external-databases.html">How
to connect Docker Compose services to external databases</a>.</p>
<h3
id="what-is-docker-compose-and-how-does-it-simplify-lamp-stack-deployment">5.
What is Docker Compose and how does it simplify LAMP stack
deployment?</h3>
<p>Docker Compose is a tool that helps us define and manage
multi-container Docker apps with one YAML file. It makes deploying our
LAMP stack easier because we can specify all services (Linux, Apache,
MySQL, and PHP) in one spot. This way, we can use simple commands to
build and run our whole app. To learn more about Docker Compose, you can
read about it <a
href="https://bestonlinetutorial.com/docker/what-is-docker-compose-and-how-does-it-simplify-multi-container-applications.html">here</a>.</p>
<p>By answering these common questions, we can better understand how to
set up a LAMP stack (Linux, Apache, MySQL, PHP) with Docker. This can
help improve our web development process.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            