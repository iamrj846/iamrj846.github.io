
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-TFCQEJR7TD');
</script>
            <title>How to Set Up DNS for Docker Containers?</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Common CSS & Icons -->
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
<link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
<link rel="stylesheet" href="/assets/css/post.css">
            <meta name="description" content="Learn how to set up DNS for Docker containers easily. Enhance your container networking with our step-by-step guide!">

            
            <script src="/assets/js/blog.js" defer></script>
            <link rel="stylesheet" href="/assets/css/post.css">
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How to Set Up DNS for Docker Containers?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Setting up DNS for Docker containers means we need to set the Domain
Name System. This helps containers change domain names to IP addresses.
Good DNS setup is very important. It helps containers talk to each
other. It also helps find services. Plus, it makes sure applications
inside containers can reach outside resources quickly.</p>
<p>In this article, we will learn how to set up DNS for Docker
containers. We will talk about why Docker DNS is important. We will see
how to use Docker’s built-in DNS service. We will go through steps to
set custom DNS for our containers. We will also look at some common DNS
problems and how to fix them. Finally, we will check how to verify DNS
resolution in our containers. By the end, we will know how to manage DNS
settings in Docker for better container networking.</p>
<ul>
<li>How to Configure DNS for Docker Containers?</li>
<li>What is Docker DNS and Why is it Important?</li>
<li>How to Use Docker’s Built-in DNS Service?</li>
<li>How to Set Custom DNS for Docker Containers?</li>
<li>How to Troubleshoot DNS Issues in Docker?</li>
<li>How to Verify DNS Resolution in Docker Containers?</li>
<li>Frequently Asked Questions</li>
</ul>
<p>For more insights into Docker, we can check related articles on <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">what
is Docker and why you should use it</a> and <a
href="https://bestonlinetutorial.com/docker/how-does-docker-differ-from-virtual-machines.html">how
Docker differs from virtual machines</a>.</p>
<h2 id="what-is-docker-dns-and-why-is-it-important">What is Docker DNS
and Why is it Important?</h2>
<p>Docker DNS is the system that helps containers talk to each other.
Each Docker container can change names to IP addresses. This helps them
find and connect with other containers easily using DNS.</p>
<h3 id="importance-of-docker-dns">Importance of Docker DNS:</h3>
<ul>
<li><p><strong>Service Discovery</strong>: Docker DNS helps containers
find services quickly. When a container starts, it tells the system its
name and IP address. Other containers can then use this
information.</p></li>
<li><p><strong>Networking Simplicity</strong>: It makes networking
easier. Containers can use names to talk instead of IP addresses. IP
addresses can change a lot.</p></li>
<li><p><strong>Load Balancing</strong>: It helps balance the load. Many
containers of the same service can be reached through one DNS
name.</p></li>
<li><p><strong>Isolation</strong>: Each Docker network has its own DNS
server. This keeps name resolution separate and makes things safer and
more organized.</p></li>
</ul>
<h3 id="how-docker-dns-works">How Docker DNS Works:</h3>
<ul>
<li>Docker has a DNS server that listens to requests from containers in
networks we create.</li>
<li>When a container wants to find a hostname, Docker’s DNS server gives
back the right IP address.</li>
<li>Containers can use service names that we set in Docker Compose or
Docker Swarm.</li>
</ul>
<h3 id="example-of-docker-dns-in-action">Example of Docker DNS in
Action:</h3>
<p>When we create a Docker service called <code>web</code>, other
services can find it using the name <code>web</code>:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> service create <span class="at">--name</span> web nginx</span></code></pre></div>
<p>A container in the same network can find the hostname like this:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ping</span> web</span></code></pre></div>
<p>This command will change to the IP address of the <code>web</code>
service. This way, containers can talk without knowing each other’s IP
addresses.</p>
<p>We need to understand and use Docker DNS well for good organization
and communication in container applications. For more details about
Docker networking, check out <a
href="https://bestonlinetutorial.com/docker/what-are-docker-networks-and-why-are-they-necessary.html">What
are Docker Networks and Why are They Necessary?</a>.</p>
<h2 id="how-to-use-dockers-built-in-dns-service">How to Use Docker’s
Built-in DNS Service?</h2>
<p>Docker has a built-in DNS service. It helps containers talk to each
other using their names. This makes networking easier for Docker
containers. It also helps in finding services in Docker networks.</p>
<h3 id="usage-of-dockers-built-in-dns">Usage of Docker’s Built-in
DNS</h3>
<ol type="1">
<li><p><strong>Default DNS Service</strong>: When we create a network in
Docker, it gives us a DNS service by default. All containers in the same
network can find each other’s names.</p></li>
<li><p><strong>Container Naming</strong>: We can access each container
by its name. Docker automatically adds this name to its internal DNS
server. For example, if we have a container named <code>web</code>,
other containers can reach it just by using the name
<code>web</code>.</p></li>
</ol>
<h3 id="example">Example</h3>
<p>To show how we can use Docker’s built-in DNS service, let’s follow
these steps:</p>
<ol type="1">
<li><p><strong>Create a Docker network</strong>:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> network create my-network</span></code></pre></div></li>
<li><p><strong>Run two containers in the network</strong>:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="at">--name</span> web <span class="at">--network</span> my-network nginx</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="at">--name</span> app <span class="at">--network</span> my-network busybox sleep 3600</span></code></pre></div></li>
<li><p><strong>Access the <code>web</code> container from the
<code>app</code> container</strong>:</p>
<ul>
<li><p>First, we open a shell in the <code>app</code> container:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> app sh</span></code></pre></div></li>
<li><p>Then we use <code>ping</code> or <code>wget</code> to reach the
<code>web</code> container:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ping</span> web</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> http://web</span></code></pre></div></li>
</ul></li>
</ol>
<h3 id="custom-dns-configuration">Custom DNS Configuration</h3>
<p>We can also set custom DNS settings for our containers if we want.
But Docker’s built-in DNS service works well for name resolution by
default.</p>
<h3 id="important-considerations">Important Considerations</h3>
<ul>
<li><strong>Service Discovery</strong>: Using container names for
service discovery works well in microservices. It helps components talk
to each other easily.</li>
<li><strong>Network Isolation</strong>: Containers in different networks
cannot find each other’s names. This keeps them safe from each
other.</li>
<li><strong>No External DNS</strong>: The built-in DNS service does not
resolve names from the outside unless we say so.</li>
</ul>
<p>For more information on how Docker manages networking and DNS, we can
read about <a
href="https://bestonlinetutorial.com/docker/how-do-docker-containers-communicate-with-each-other.html">how
do Docker containers communicate with each other</a>.</p>
<h2 id="how-to-set-custom-dns-for-docker-containers">How to Set Custom
DNS for Docker Containers?</h2>
<p>We can set custom DNS for Docker containers using the
<code>--dns</code> flag when we create or run a container. This lets us
choose the DNS servers for the container to use for name resolution.</p>
<h3 id="using-the---dns-flag">Using the <code>--dns</code> Flag</h3>
<p>When we run a Docker container, we need to use the <code>--dns</code>
option with the IP address of the DNS server. Here is an example:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--dns</span><span class="op">=</span>8.8.8.8 <span class="at">--dns</span><span class="op">=</span>8.8.4.4 <span class="at">-d</span> your_image_name</span></code></pre></div>
<p>This command sets Google Public DNS servers (8.8.8.8 and 8.8.4.4) for
the container.</p>
<h3 id="setting-dns-in-docker-compose">Setting DNS in Docker
Compose</h3>
<p>If we use Docker Compose, we can set custom DNS in the
<code>docker-compose.yml</code> file. Here is how we can do it:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">your_service</span><span class="kw">:</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> your_image_name</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">dns</span><span class="kw">:</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fl">8.8.8.8</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fl">8.8.4.4</span></span></code></pre></div>
<h3 id="configuring-dns-in-docker-daemon">Configuring DNS in Docker
Daemon</h3>
<p>For a global setting, we can configure DNS servers in the Docker
daemon configuration file (<code>/etc/docker/daemon.json</code>):</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;dns&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;8.8.8.8&quot;</span><span class="ot">,</span> <span class="st">&quot;8.8.4.4&quot;</span><span class="ot">]</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>After we edit this file, we need to restart the Docker service:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart docker</span></code></pre></div>
<h3 id="verifying-dns-configuration">Verifying DNS Configuration</h3>
<p>To check if the custom DNS settings work, we can run a command inside
our running container:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> your_container_name cat /etc/resolv.conf</span></code></pre></div>
<p>This shows the DNS servers now set for the container.</p>
<p>Setting custom DNS is important. It helps our Docker containers
resolve domain names for network communication. This is especially true
in places with special DNS needs.</p>
<p>For more info on Docker networking and container communication, check
out <a
href="https://bestonlinetutorial.com/docker/what-are-docker-networks-and-why-are-they-necessary.html">what
are Docker networks and why are they necessary</a>.</p>
<h2 id="how-to-troubleshoot-dns-issues-in-docker">How to Troubleshoot
DNS Issues in Docker?</h2>
<p>When we have DNS issues in Docker containers, we can follow these
steps to find and fix the problems:</p>
<ol type="1">
<li><p><strong>Check Container Network Configuration</strong>:<br />
We need to make sure the container is connected to the right network. We
can look at the network settings using:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> network inspect <span class="op">&lt;</span>network_name<span class="op">&gt;</span></span></code></pre></div></li>
<li><p><strong>Verify DNS Settings</strong>:<br />
We should confirm that the container is using the correct DNS settings.
To see the DNS setup inside a running container, we can run:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="op">&lt;</span>container_id<span class="op">&gt;</span> cat /etc/resolv.conf</span></code></pre></div></li>
<li><p><strong>Test DNS Resolution</strong>:<br />
We can do a DNS resolution test from inside the container:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="op">&lt;</span>container_id<span class="op">&gt;</span> ping google.com</span></code></pre></div>
<p>If this command does not work, it means there is a DNS resolution
problem.</p></li>
<li><p><strong>Check Docker Daemon Configuration</strong>:<br />
If DNS issues still happen, we need to check the Docker daemon’s DNS
settings in the <code>daemon.json</code> file. This file is usually in
<code>/etc/docker/daemon.json</code>. Here is an example of the
configuration:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;dns&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;8.8.8.8&quot;</span><span class="ot">,</span> <span class="st">&quot;8.8.4.4&quot;</span><span class="ot">]</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>After we make changes, we should restart the Docker service:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart docker</span></code></pre></div></li>
<li><p><strong>Inspect Host’s DNS Settings</strong>:<br />
We must check that the host’s DNS settings are correct. The Docker
daemon uses the host’s DNS settings unless we say otherwise.</p></li>
<li><p><strong>Check Firewall and Security Groups</strong>:<br />
We need to check that firewall rules and security groups allow DNS
traffic to go out. This includes UDP and TCP on port 53.</p></li>
<li><p><strong>Utilize Docker’s Built-in DNS</strong>:<br />
Docker has a built-in DNS server. We should make sure that service
discovery and container-to-container communication are working well. We
can test this with:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--rm</span> <span class="at">--net</span> <span class="op">&lt;</span>network_name<span class="op">&gt;</span> busybox nslookup <span class="op">&lt;</span>service_name<span class="op">&gt;</span></span></code></pre></div></li>
<li><p><strong>Log DNS Queries</strong>:<br />
For more details, we can enable logging of DNS queries in our DNS
resolver. We can also look at the logs of the container to find clues
about DNS failures.</p></li>
</ol>
<p>By following these steps, we can diagnose and fix DNS issues in
Docker containers. For more details about Docker networking, we can
check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-networks-and-why-are-they-necessary.html">this
article</a>.</p>
<h2 id="how-to-verify-dns-resolution-in-docker-containers">How to Verify
DNS Resolution in Docker Containers?</h2>
<p>We can verify DNS resolution in Docker containers using some simple
methods. This helps to make sure the DNS settings are working well. Here
are the steps:</p>
<ol type="1">
<li><p><strong>Check DNS Configuration</strong>:<br />
First, we need to look at the DNS settings in the Docker container. We
can do this by opening a shell in the running container and checking the
<code>/etc/resolv.conf</code> file.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> <span class="op">&lt;</span>container_name_or_id<span class="op">&gt;</span> cat /etc/resolv.conf</span></code></pre></div>
<p>This file should show the DNS servers that the container
uses.</p></li>
<li><p><strong>Use <code>nslookup</code></strong>:<br />
If <code>nslookup</code> is installed in your container, we can use it
to check DNS resolution for a domain.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> <span class="op">&lt;</span>container_name_or_id<span class="op">&gt;</span> nslookup <span class="op">&lt;</span>domain_name<span class="op">&gt;</span></span></code></pre></div>
<p>For example:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> my_container nslookup example.com</span></code></pre></div></li>
<li><p><strong>Use <code>dig</code></strong>:<br />
If we have <code>dig</code> in the container, we can do a DNS lookup
with it:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> <span class="op">&lt;</span>container_name_or_id<span class="op">&gt;</span> dig <span class="op">&lt;</span>domain_name<span class="op">&gt;</span></span></code></pre></div>
<p>For example:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> my_container dig example.com</span></code></pre></div></li>
<li><p><strong>Ping a Domain</strong>:<br />
We can also check DNS resolution by pinging a domain. If it works, it
should show IP addresses.</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> <span class="op">&lt;</span>container_name_or_id<span class="op">&gt;</span> ping <span class="at">-c</span> 4 <span class="op">&lt;</span>domain_name<span class="op">&gt;</span></span></code></pre></div>
<p>For example:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> my_container ping <span class="at">-c</span> 4 example.com</span></code></pre></div></li>
<li><p><strong>Check for Errors</strong>:<br />
If we have problems, we should look for common DNS errors like:</p>
<ul>
<li>DNS server is not reachable</li>
<li>Wrong DNS settings in Docker</li>
<li>Network connection problems</li>
</ul></li>
<li><p><strong>Inspect Docker Network</strong>:<br />
If DNS resolution does not work, we can check the Docker network
settings. Use this command to see the network settings:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> network inspect <span class="op">&lt;</span>network_name<span class="op">&gt;</span></span></code></pre></div></li>
<li><p><strong>Test Custom DNS</strong>:<br />
If we set custom DNS servers for our containers, we should check if they
are reachable. We can use the same <code>nslookup</code> or
<code>dig</code> commands for this.</p></li>
</ol>
<p>By following these steps, we can check DNS resolution in our Docker
containers and fix any problems that come up. For more details on Docker
networking, we can read <a
href="https://bestonlinetutorial.com/docker/what-are-docker-networks-and-why-are-they-necessary.html">What
are Docker Networks and Why are They Necessary?</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="how-does-docker-dns-work-for-container-communication">1. How
does Docker DNS work for container communication?</h3>
<p>Docker DNS helps containers talk to each other by turning hostnames
into IP addresses. It is built into Docker and works easily in a Docker
network. With Docker DNS, we can use container names instead of IP
addresses. This makes it easier to manage and grow our services. When we
know how to set up DNS for Docker containers, we can find and connect
our microservices better.</p>
<h3 id="can-i-use-external-dns-servers-with-docker">2. Can I use
external DNS servers with Docker?</h3>
<p>Yes we can use external DNS servers with Docker. We just need to set
the DNS in the Docker settings. This is good when we want our containers
to use a specific DNS service outside of Docker’s own DNS. To do this,
we can use the <code>--dns</code> option when we create a container. We
can also change the Docker daemon config file for a global setting.</p>
<h3 id="what-are-common-dns-issues-in-docker-containers">3. What are
common DNS issues in Docker containers?</h3>
<p>Some common DNS problems in Docker containers are not being able to
resolve hostnames, slow responses, and unexpected timeouts. These issues
can happen because of wrong DNS settings, network problems, or conflicts
with other services. To fix DNS issues in Docker, we should check the
DNS settings, look at the network setup, and see the container logs for
errors.</p>
<h3 id="how-can-i-verify-dns-resolution-in-docker">4. How can I verify
DNS resolution in Docker?</h3>
<p>To check DNS resolution in Docker, we can use tools like
<code>nslookup</code> or <code>dig</code> inside our running container.
This helps us see if the container can resolve domain names correctly.
We can enter the container’s shell with this command:</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> <span class="op">&lt;</span>container_name<span class="op">&gt;</span> /bin/bash</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="ex">nslookup</span> example.com</span></code></pre></div>
<p>This way we can make sure our Docker containers can reach the needed
services over the network.</p>
<h3 id="is-it-possible-to-set-dns-for-docker-compose-services">5. Is it
possible to set DNS for Docker Compose services?</h3>
<p>Yes it is possible to set DNS for services in a Docker Compose file.
We can add custom DNS servers in the <code>dns</code> section of the
Compose file. This helps us control how services resolve hostnames and
keeps the DNS behavior the same in our multi-container applications.
Here is an example:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">dns</span><span class="kw">:</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fl">8.8.8.8</span></span></code></pre></div>
<p>With this setup, the <code>web</code> service will use Google’s DNS
server for name resolution.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            