
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "BestOnlineTutorial",
      "url": "https://www.bestonlinetutorial.com/"
    }
    </script>
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>Where Are Docker Images Stored on the Host Machine?</title>
            <meta name="description" content="Discover where Docker images are stored on your host machine. Uncover storage locations and tips for managing Docker images effectively.">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">Where Are Docker Images Stored on the Host Machine?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p><strong>Where Docker Images Are Stored</strong></p>
<p>Docker images are kept on the host machine. The place where they are
stored can be different. It depends on the operating system and the
storage driver we are using. Usually, on Linux systems, we can find
Docker images in the <code>/var/lib/docker</code> folder. For Windows
and macOS users who use Docker Desktop, the images are in a virtual
machine or a special folder in the app settings.</p>
<p>In this article, we will look at different parts of Docker image
storage on the host machine. We will talk about the default storage
locations. We will also see how to find our Docker images. We will
explain how the Docker storage driver affects image storage. We will
include commands we can use to find image paths too. Lastly, we will
show how to change the Docker image storage location to fit our needs.
We will also answer some common questions about Docker image
storage.</p>
<ul>
<li>Where Docker images are stored on the host machine</li>
<li>Understanding Docker image storage locations</li>
<li>How to locate Docker images on your host machine</li>
<li>Exploring the Docker storage driver and its impact on image
storage</li>
<li>Using Docker commands to find image storage paths</li>
<li>How to change Docker image storage location on the host machine</li>
<li>Frequently asked questions about Docker image storage</li>
</ul>
<h2
id="understanding-docker-image-storage-locations-on-the-host-machine">Understanding
Docker Image Storage Locations on the Host Machine</h2>
<p>Docker images are kept on the host machine in certain spots. Where
they are stored depends on the storage driver that Docker uses. The
default location can change based on the operating system and setup. We
often find Docker images in these folders:</p>
<ul>
<li><p><strong>Linux</strong>:<br />
By default, Docker images go into <code>/var/lib/docker</code>. Inside
this folder, images can be sorted more based on the storage driver we
use, like <code>overlay2</code>, <code>aufs</code>, or
<code>btrfs</code>.</p></li>
<li><p><strong>Windows</strong>:<br />
Docker images usually sit in
<code>C:\ProgramData\Docker\windowsfilter</code>. The exact path may
change if Docker is installed somewhere else or if we use a different
storage system.</p></li>
<li><p><strong>macOS</strong>:<br />
On Mac, Docker Desktop uses a virtual machine (VM) to handle containers
and images. The images are inside the VM. We cannot easily access them
directly from the host. But the VM is often found in
<code>~/Library/Containers/com.docker.docker/Data/vms/0/</code>.</p></li>
</ul>
<h3 id="storage-driver-impact">Storage Driver Impact</h3>
<p>The storage driver changes how images are kept:</p>
<ul>
<li><strong>overlay2</strong>: This is the main default for most Linux
systems now. It uses a layered system to manage image layers well.</li>
<li><strong>aufs</strong>: This is an older driver that can support many
layers but is not used much anymore.</li>
<li><strong>btrfs</strong>: This is a more advanced system. It offers
features like snapshots and subvolumes.</li>
</ul>
<p>To see which storage driver is in use, we can run this command:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> Storage</span></code></pre></div>
<p>This command will show the current storage driver and other useful
storage details.</p>
<h3 id="finding-storage-locations">Finding Storage Locations</h3>
<p>To find out where images are stored on your host, we can use these
commands:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List all Docker images</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> images</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect a specific image to find its layers and storage details</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> inspect <span class="op">&lt;</span>image_id<span class="op">&gt;</span></span></code></pre></div>
<p>These commands will give us detailed info on where the layers of a
specific image are stored.</p>
<p>Understanding where Docker images are stored on the host machine is
important. It helps us manage and debug images and containers better.
For more details on Docker images and how they work, we can check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">this
article on Docker images</a>.</p>
<h2 id="how-to-locate-docker-images-on-your-host-machine">How to Locate
Docker Images on Your Host Machine</h2>
<p>To find Docker images on your host machine, we can use some Docker
commands. We can also look at the folders where Docker keeps the images.
Docker images usually stay in a special place and are managed by the
Docker daemon.</p>
<h3 id="using-docker-commands">Using Docker Commands</h3>
<ol type="1">
<li><p><strong>List Docker Images</strong>: We can list all Docker
images on our host by using this command:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> images</span></code></pre></div>
<p>This command shows a table with images, repositories, tags, image
IDs, and sizes.</p></li>
<li><p><strong>Inspect an Image</strong>: If we want to see more details
about a specific image, we can use:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> inspect <span class="op">&lt;</span>image_name_or_id<span class="op">&gt;</span></span></code></pre></div>
<p>Just replace <code>&lt;image_name_or_id&gt;</code> with the real name
or ID of the image.</p></li>
</ol>
<h3 id="default-storage-locations">Default Storage Locations</h3>
<p>Docker images are saved in a standard place on the host machine. This
place changes based on the operating system:</p>
<ul>
<li><strong>Linux</strong>: <code>/var/lib/docker</code></li>
<li><strong>Windows</strong>: <code>C:\ProgramData\Docker</code></li>
<li><strong>macOS</strong>:
<code>~/Library/Containers/com.docker.docker/Data/vms/0/</code></li>
</ul>
<p>Inside the <code>/var/lib/docker</code> folder, images are organized
by the storage driver we are using, like <code>overlay2</code>,
<code>aufs</code>, <code>btrfs</code>, and others.</p>
<h3 id="exploring-docker-storage-driver">Exploring Docker Storage
Driver</h3>
<p>To see which storage driver we are using, we can run:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Storage Driver&quot;</span></span></code></pre></div>
<p>This command tells us the current storage driver and its settings.
This helps us to understand how the images are stored.</p>
<p>By using these commands and knowing the default storage locations, we
can easily find Docker images on our host machine. For more details
about Docker images and how they work, we can check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">What
are Docker Images and How Do They Work?</a>.</p>
<h2
id="exploring-the-docker-storage-driver-and-its-impact-on-image-storage">Exploring
the Docker Storage Driver and Its Impact on Image Storage</h2>
<p>Docker uses storage drivers to handle and save images, containers,
and layers on the host machine. These drivers decide how image layers
are saved and how they work with the file system. The choice of storage
driver can really change performance, how we use storage, and how Docker
behaves overall.</p>
<h3 id="common-docker-storage-drivers">Common Docker Storage
Drivers</h3>
<ol type="1">
<li><strong>Overlay2</strong>:
<ul>
<li><p>We recommend it for most Linux systems.</p></li>
<li><p>It uses a copy-on-write method. This means it uses less disk
space.</p></li>
<li><p>It handles many layers well.</p></li>
<li><p>Configuration:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;storage-driver&quot;</span><span class="fu">:</span> <span class="st">&quot;overlay2&quot;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div></li>
</ul></li>
<li><strong>aufs</strong>:
<ul>
<li>This is an older driver. It was mainly used in early Docker
versions.</li>
<li>We do not recommend it for production systems because it is complex
and has performance problems.</li>
</ul></li>
<li><strong>btrfs</strong>:
<ul>
<li>It has advanced features like snapshots and subvolumes.</li>
<li>It is best for places that need dynamic storage management.</li>
</ul></li>
<li><strong>devicemapper</strong>:
<ul>
<li>This is a block-level storage driver.</li>
<li>We can set it up in two ways: loopback (not good for production) and
direct-lvm (good for production).</li>
</ul></li>
<li><strong>zfs</strong>:
<ul>
<li>It is like btrfs and has features like snapshots and clones.</li>
<li>It needs ZFS to be installed on the host.</li>
</ul></li>
</ol>
<h3 id="checking-the-current-storage-driver">Checking the Current
Storage Driver</h3>
<p>We can check which storage driver our Docker installation is using
with this command:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Storage Driver&quot;</span></span></code></pre></div>
<h3 id="impact-of-storage-drivers-on-image-storage">Impact of Storage
Drivers on Image Storage</h3>
<ul>
<li><strong>Performance</strong>: Different drivers have different
performance levels. Overlay2 is usually faster for most tasks.</li>
<li><strong>Space Efficiency</strong>: Some drivers like Overlay2 use a
better layering system. This helps save disk space.</li>
<li><strong>Compatibility</strong>: Some storage drivers only work with
certain Linux distributions or kernel versions. This may limit our
choices based on our OS.</li>
<li><strong>Features</strong>: Advanced features like snapshots and
volume management are in drivers like btrfs and zfs. But these can make
the setup more complex.</li>
</ul>
<h3 id="configuring-the-storage-driver">Configuring the Storage
Driver</h3>
<p>To change the storage driver, we need to change the Docker daemon
configuration file. This file is usually found at
<code>/etc/docker/daemon.json</code>. Here is an example to set the
storage driver to Overlay2:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;storage-driver&quot;</span><span class="fu">:</span> <span class="st">&quot;overlay2&quot;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>After we change the configuration, we need to restart the Docker
service:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart docker</span></code></pre></div>
<p>Choosing the right Docker storage driver is very important for
improving image storage and overall container performance. For more
details about Docker images and how they work, check out <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">what
are Docker images and how do they work?</a>.</p>
<h2 id="using-docker-commands-to-find-image-storage-paths">Using Docker
Commands to Find Image Storage Paths</h2>
<p>We can find Docker images on our host machine by using different
Docker commands. These commands help us see where images are stored and
how to access them.</p>
<ol type="1">
<li><p><strong>List Docker Images</strong>:<br />
We can use the command below to list all Docker images on our system.
This includes their repository tags and IDs.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> images</span></code></pre></div></li>
<li><p><strong>Inspecting Image Details</strong>:<br />
If we want to find specific details about a Docker image, we use the
<code>inspect</code> command. Just replace <code>IMAGE_NAME</code> with
the name of our image.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> inspect IMAGE_NAME</span></code></pre></div>
<p>This command gives us a JSON output with many details. We should look
at the <code>GraphDriver</code> section to find hints about the storage
path.</p></li>
<li><p><strong>Finding the Storage Path</strong>:<br />
The image files may be in different folders based on the storage driver
we use. For example, if we use the <code>overlay2</code> driver, images
usually go to:</p>
<pre><code>/var/lib/docker/overlay2/</code></pre></li>
<li><p><strong>Using Docker Info</strong>:<br />
The <code>docker info</code> command gives us a full view of our Docker
setup. It includes the storage driver we are using.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info</span></code></pre></div>
<p>We need to find the <code>Docker Root Dir</code> in the output. This
is the main folder where Docker stores its images and
containers.</p></li>
<li><p><strong>Using the <code>df</code> Command</strong>:<br />
We can use this command to check disk usage for Docker images and
containers. It helps us see how much space they take.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> system df</span></code></pre></div></li>
</ol>
<p>These commands are important for managing Docker image storage paths
on our host machine. Knowing how to use them can make our Docker work
easier and help fix storage problems. For more information on Docker
images, we can read <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">what
are Docker images and how do they work</a>.</p>
<h2
id="how-to-change-docker-image-storage-location-on-the-host-machine">How
to Change Docker Image Storage Location on the Host Machine</h2>
<p>We can change the Docker image storage location on the host machine
by modifying the Docker daemon configuration. This includes updating the
<code>daemon.json</code> file or using the <code>--data-root</code>
option when we start the Docker daemon.</p>
<h3 id="steps-to-change-docker-image-storage-location">Steps to Change
Docker Image Storage Location:</h3>
<ol type="1">
<li><p><strong>Stop Docker Daemon:</strong> First, we need to stop the
Docker service. We can do that by running:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl stop docker</span></code></pre></div></li>
<li><p><strong>Create New Directory:</strong> Next, we create a new
directory where we want to store Docker images. For example:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mkdir <span class="at">-p</span> /new/docker/path</span></code></pre></div></li>
<li><p><strong>Modify <code>daemon.json</code>:</strong> Now, we edit
the Docker daemon configuration file. It is usually at
<code>/etc/docker/daemon.json</code>. If the file does not exist, we can
create it. We should add or change the <code>data-root</code> property
like this:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;data-root&quot;</span><span class="fu">:</span> <span class="st">&quot;/new/docker/path&quot;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div></li>
<li><p><strong>Start Docker Daemon:</strong> After that, we start the
Docker service again to apply the changes. We can run:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start docker</span></code></pre></div></li>
<li><p><strong>Verify Change:</strong> To check if the new storage
location is used, we can run:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Docker Root Dir&quot;</span></span></code></pre></div></li>
</ol>
<h3 id="important-notes">Important Notes:</h3>
<ul>
<li>Make sure we have permission to write to the new directory.</li>
<li>If we have existing images, we may need to move them from the old
location to the new one. The default location for Docker images is
usually <code>/var/lib/docker</code>.</li>
<li>We can stop Docker and copy the existing images with:
<code>bash  sudo rsync -aP /var/lib/docker/ /new/docker/path</code></li>
</ul>
<p>Changing the Docker image storage location helps us manage and
organize Docker resources better on our host machine. For more details
on Docker image management, we can check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">this
guide on Docker images</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="where-is-docker-images-stored-on-the-host-machine">1. Where is
Docker images stored on the host machine?</h3>
<p>We usually find Docker images in a special folder on the host
machine. This folder can change based on the operating system and the
storage driver we use. For Linux, we can look in
<code>/var/lib/docker/&lt;storage-driver&gt;/</code>. For Windows, the
common place is <code>C:\ProgramData\Docker\windowsfilter</code>.
Knowing where Docker images are stored helps us manage disk space and
fix problems.</p>
<h3 id="how-can-i-change-the-docker-image-storage-location">2. How can I
change the Docker image storage location?</h3>
<p>To change where Docker saves images, we can edit the Docker daemon
configuration file. On Linux, this file is often at
<code>/etc/docker/daemon.json</code>. We can set a new folder for the
Docker data root by adding
<code>"data-root": "/path/to/new/location"</code>. After we make this
change, we need to restart the Docker service. We can do this by running
<code>sudo systemctl restart docker</code> to apply the new
settings.</p>
<h3
id="what-is-a-docker-storage-driver-and-how-does-it-affect-image-storage">3.
What is a Docker storage driver, and how does it affect image
storage?</h3>
<p>A Docker storage driver tells how images and containers are saved on
the filesystem. Some common storage drivers are Overlay2, aufs, and
btrfs. The storage driver we choose can change performance,
compatibility, and features like image layering. For example, Overlay2
is faster and is the best choice for most Linux systems. We should
understand the storage driver to make Docker image storage better.</p>
<h3
id="how-can-i-find-docker-images-on-my-host-machine-using-commands">4.
How can I find Docker images on my host machine using commands?</h3>
<p>We can find Docker images on our host machine with commands like
<code>docker images</code> or
<code>docker inspect &lt;image-name&gt;</code>. The
<code>docker images</code> command shows all available images with their
tags and sizes. If we use <code>docker inspect</code>, we can see
detailed info about a specific image, including where it is stored. This
helps us manage and fix Docker images better.</p>
<h3
id="can-i-see-the-layers-of-a-docker-image-and-their-storage-paths">5.
Can I see the layers of a Docker image and their storage paths?</h3>
<p>Yes, we can see the layers of a Docker image and where they are
stored using the <code>docker history &lt;image-name&gt;</code> command.
This command gives us a clear view of each layer, including its size and
when it was made. Also, using
<code>docker inspect &lt;image-name&gt;</code> shows us the details and
storage info of the image layers. This helps us understand how the image
is built and stored on our host machine.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            