
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "BestOnlineTutorial",
      "url": "https://www.bestonlinetutorial.com/"
    }
    </script>
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How to Initialize a MySQL Database with Schema in a Docker Container?</title>
            <meta name="description" content="Learn how to initialize a MySQL database with schema in a Docker container easily. Step-by-step guide for developers.">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How to Initialize a MySQL Database with Schema in a Docker Container?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>To start a MySQL database with schema in a Docker container, we can
use Docker to set up a MySQL service. We also need a place for our
schema files. This means we will create a <code>Dockerfile</code> or a
<code>docker-compose.yml</code> file. This file will include the MySQL
service details and volume mappings to our schema scripts. With these
tools, we can quickly create a MySQL database with our schema in a way
that is the same every time.</p>
<p>In this article, we will look at different ways to start a MySQL
database with schema in a Docker container. We will share best
practices. This includes using Docker volumes for schema setup, making a
custom MySQL Docker image, using Docker Compose for setup, and loading
SQL files into the MySQL database. Here is what we will talk about:</p>
<ul>
<li>How to Initialize a MySQL Database with Schema in a Docker
Container</li>
<li>What is the Best Way to Initialize a MySQL Database with Schema in a
Docker Container?</li>
<li>How to Use Docker Volumes for MySQL Schema Initialization?</li>
<li>How to Create a Custom MySQL Docker Image with Schema?</li>
<li>How to Use Docker Compose for MySQL Database Initialization?</li>
<li>How to Load SQL Files into MySQL Database in a Docker
Container?</li>
<li>Frequently Asked Questions</li>
</ul>
<p>If you want to learn the basics of Docker, you may want to read our
article on <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a>. It can help you start.</p>
<h2
id="what-is-the-best-way-to-initialize-a-mysql-database-with-schema-in-a-docker-container">What
is the Best Way to Initialize a MySQL Database with Schema in a Docker
Container?</h2>
<p>The best way to set up a MySQL database with schema in a Docker
container is to use Docker’s tools. This lets us create the database
when we make the container. We can do this by using SQL scripts that we
mount as volumes or by making a custom Docker image.</p>
<h3 id="using-sql-scripts">Using SQL Scripts</h3>
<ol type="1">
<li><p><strong>Create SQL Initialization Script</strong>: We write our
SQL schema in a <code>.sql</code> file. For example, we can name it
<code>init-db.sql</code>.</p>
<p>Here is an example of <code>init-db.sql</code>:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> mydb;</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">USE</span> mydb;</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> users (</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> <span class="dt">INT</span> AUTO_INCREMENT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    name <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    email <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">UNIQUE</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div></li>
<li><p><strong>Docker Command</strong>: We use the official MySQL Docker
image and mount our script.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> mysql-container <span class="at">-e</span> MYSQL_ROOT_PASSWORD=root <span class="at">-e</span> MYSQL_DATABASE=mydb <span class="at">-v</span> /path/to/init-db.sql:/docker-entrypoint-initdb.d/init-db.sql <span class="at">-d</span> mysql:latest</span></code></pre></div></li>
</ol>
<h3 id="using-dockerfile-for-custom-image">Using Dockerfile for Custom
Image</h3>
<ol type="1">
<li><p><strong>Create a Dockerfile</strong>:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> mysql:latest</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MYSQL_ROOT_PASSWORD=root</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MYSQL_DATABASE=mydb</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> init-db.sql /docker-entrypoint-initdb.d/</span></code></pre></div></li>
<li><p><strong>Build the Docker Image</strong>:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> my-custom-mysql .</span></code></pre></div></li>
<li><p><strong>Run the Custom Image</strong>:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> mysql-custom <span class="at">-d</span> my-custom-mysql</span></code></pre></div></li>
</ol>
<h3 id="using-docker-compose">Using Docker Compose</h3>
<ol type="1">
<li><p><strong>Create <code>docker-compose.yml</code></strong>:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">mysql</span><span class="kw">:</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> mysql:latest</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_ROOT_PASSWORD</span><span class="kw">:</span><span class="at"> root</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_DATABASE</span><span class="kw">:</span><span class="at"> mydb</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./init-db.sql:/docker-entrypoint-initdb.d/init-db.sql</span></span></code></pre></div></li>
<li><p><strong>Start the Service</strong>:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up</span></code></pre></div></li>
</ol>
<h3 id="advantages-of-using-sql-scripts">Advantages of Using SQL
Scripts</h3>
<ul>
<li><strong>Automation</strong>: It automatically sets up the database
schema when the container starts.</li>
<li><strong>Reusability</strong>: We can easily change and reuse the SQL
files in different places.</li>
<li><strong>Version Control</strong>: We can version the SQL files with
our code.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>Using SQL scripts and Docker’s setup options helps us easily create a
MySQL database with schema in a Docker container. For more information
on Docker and what it can do, we can check <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">What
are the benefits of using Docker in development?</a>.</p>
<h2 id="how-to-use-docker-volumes-for-mysql-schema-initialization">How
to Use Docker Volumes for MySQL Schema Initialization?</h2>
<p>We can use Docker volumes for MySQL schema initialization. This means
we create a volume that keeps our MySQL data safe. We can also load our
schema from SQL files when the container starts. Here is how we do
it:</p>
<ol type="1">
<li><p><strong>Create a Docker Volume:</strong></p>
<p>We can create a named volume to keep the MySQL data:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> volume create mysql_data</span></code></pre></div></li>
<li><p><strong>Prepare Your SQL Schema File:</strong></p>
<p>We need to create a file called <code>init.sql</code> in our project
folder. This file will have the schema we want to set up:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> my_database;</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">USE</span> my_database;</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> users (</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> <span class="dt">INT</span> AUTO_INCREMENT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    name <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div></li>
<li><p><strong>Start MySQL Container with Volume:</strong></p>
<p>When we start our MySQL container, we can mount the volume and tell
it which scripts to use. We run this command:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> mysql-container <span class="at">-e</span> MYSQL_ROOT_PASSWORD=root <span class="at">-e</span> MYSQL_DATABASE=my_database <span class="at">-v</span> mysql_data:/var/lib/mysql <span class="at">-v</span> <span class="va">$(</span><span class="bu">pwd</span><span class="va">)</span>/init.sql:/docker-entrypoint-initdb.d/init.sql <span class="at">-d</span> mysql:latest</span></code></pre></div>
<p>In this command:</p>
<ul>
<li><code>-e MYSQL_ROOT_PASSWORD=root</code> sets the password for root
user.</li>
<li><code>-e MYSQL_DATABASE=my_database</code> makes a predefined
database.</li>
<li><code>-v mysql_data:/var/lib/mysql</code> mounts the volume for data
that stays even if the container restarts.</li>
<li><code>-v $(pwd)/init.sql:/docker-entrypoint-initdb.d/init.sql</code>
mounts the SQL file to run when we initialize.</li>
</ul></li>
<li><p><strong>Verify Initialization:</strong></p>
<p>After we run the container, we should check if the database and table
are created right:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> mysql-container mysql <span class="at">-uroot</span> <span class="at">-proot</span> <span class="at">-e</span> <span class="st">&quot;SHOW DATABASES;&quot;</span></span></code></pre></div>
<p>This should show <code>my_database</code> as one of the
databases.</p></li>
</ol>
<p>Using Docker volumes for MySQL schema initialization helps us keep
our data safe when the container restarts. It also helps us manage our
schema easily using SQL files. For more info about Docker volumes, check
out <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">this
guide</a>.</p>
<h2 id="how-to-create-a-custom-mysql-docker-image-with-schema">How to
Create a Custom MySQL Docker Image with Schema?</h2>
<p>To start a MySQL database with a schema in a Docker container, we can
make a custom Docker image that has our database schema. This means we
need to create a <code>Dockerfile</code> and a SQL script that has the
schema definitions. Here is how we can do it step-by-step.</p>
<h3 id="step-1-create-the-sql-schema-file">Step 1: Create the SQL Schema
File</h3>
<p>First, we need to create a file called <code>schema.sql</code>. This
file will have our database schema. For example:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> mydatabase;</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">USE</span> mydatabase;</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> users (</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> <span class="dt">INT</span> AUTO_INCREMENT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    username <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    email <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">UNIQUE</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<h3 id="step-2-create-the-dockerfile">Step 2: Create the Dockerfile</h3>
<p>Next, we create a <code>Dockerfile</code>. This should be in the same
folder as <code>schema.sql</code>. Here is what we can put in the
<code>Dockerfile</code>:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> mysql:latest</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MYSQL_ROOT_PASSWORD=rootpassword</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MYSQL_DATABASE=mydatabase</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> schema.sql /docker-entrypoint-initdb.d/</span></code></pre></div>
<h3 id="step-3-build-the-custom-docker-image">Step 3: Build the Custom
Docker Image</h3>
<p>Now, we open our terminal. We go to the folder where our
<code>Dockerfile</code> and <code>schema.sql</code> are. Then we run
this command to build our Docker image:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> custom-mysql-image .</span></code></pre></div>
<h3 id="step-4-run-the-custom-docker-image">Step 4: Run the Custom
Docker Image</h3>
<p>After building the image, we can run a container from our custom
MySQL image:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> custom-mysql-container <span class="at">-d</span> <span class="at">-p</span> 3306:3306 custom-mysql-image</span></code></pre></div>
<h3 id="step-5-accessing-the-database">Step 5: Accessing the
Database</h3>
<p>We can access our MySQL database using a MySQL client or the command
line. For example, if we use the MySQL command line:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mysql</span> <span class="at">-h</span> 127.0.0.1 <span class="at">-P</span> 3306 <span class="at">-u</span> root <span class="at">-p</span></span></code></pre></div>
<p>When it asks, we enter the root password <code>rootpassword</code>.
Now we can access <code>mydatabase</code> and its tables.</p>
<p>This method helps us create a custom MySQL Docker image that starts
with our schema. This makes it easy and quick to set up our MySQL
environment. For more details about Docker and MySQL, we can check out
<a
href="https://bestonlinetutorial.com/docker/how-to-use-docker-for-database-migrations.html">how
to use Docker for database migrations</a>.</p>
<h2 id="how-to-use-docker-compose-for-mysql-database-initialization">How
to Use Docker Compose for MySQL Database Initialization?</h2>
<p>Docker Compose makes it easy to manage multi-container Docker apps.
This includes initializing a MySQL database. To set up a MySQL database
with a specific schema using Docker Compose, we can follow these
steps:</p>
<ol type="1">
<li><strong>Create a Docker Compose File</strong>: First, we create a
file called <code>docker-compose.yml</code>. This file will set up our
MySQL service and its settings.</li>
</ol>
<div class="sourceCode" id="cb17"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db</span><span class="kw">:</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> mysql:latest</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_ROOT_PASSWORD</span><span class="kw">:</span><span class="at"> examplepassword</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_DATABASE</span><span class="kw">:</span><span class="at"> exampledb</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_USER</span><span class="kw">:</span><span class="at"> exampleuser</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_PASSWORD</span><span class="kw">:</span><span class="at"> exampleuserpassword</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> db_data:/var/lib/mysql</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./mysql-init:/docker-entrypoint-initdb.d</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db_data</span><span class="kw">:</span></span></code></pre></div>
<ol start="2" type="1">
<li><strong>Directory Structure</strong>: Next, we need to make sure we
have a folder called <code>mysql-init</code> in the same place as our
<code>docker-compose.yml</code>. We should put our SQL files (like
<code>init.sql</code>) in this <code>mysql-init</code> folder. The SQL
files run in order when we start the container.</li>
</ol>
<p>Here is an example of <code>init.sql</code>:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> users (</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> <span class="dt">INT</span> AUTO_INCREMENT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    username <span class="dt">VARCHAR</span>(<span class="dv">255</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">password</span> <span class="dt">VARCHAR</span>(<span class="dv">255</span>) <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<ol start="3" type="1">
<li><strong>Run Docker Compose</strong>: Now, we can start the MySQL
service and set up the database. We run this command in our
terminal:</li>
</ol>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up</span></code></pre></div>
<p>This command pulls the MySQL image, creates a container, and runs the
SQL scripts in the <code>mysql-init</code> folder.</p>
<ol start="4" type="1">
<li><strong>Accessing the MySQL Database</strong>: After the setup
finishes, we can access the MySQL database using a MySQL client. For
example, we can connect using the command line:</li>
</ol>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> <span class="op">&lt;</span>container_name<span class="op">&gt;</span> mysql <span class="at">-u</span> exampleuser <span class="at">-p</span></span></code></pre></div>
<p>We must replace <code>&lt;container_name&gt;</code> with the name of
our MySQL container.</p>
<p>This setup helps us easily initialize a MySQL database with a schema
in a Docker container using Docker Compose. For more information on
Docker Compose, we can check <a
href="https://bestonlinetutorial.com/docker/what-is-docker-compose-and-how-does-it-simplify-multi-container-applications.html">this
guide</a>.</p>
<h2
id="how-to-load-sql-files-into-mysql-database-in-a-docker-container">How
to Load SQL Files into MySQL Database in a Docker Container?</h2>
<p>To load SQL files into a MySQL database in a Docker container, we can
use the Docker <code>COPY</code> command, volume mounts, or run commands
inside the container. Here are the methods.</p>
<h3 id="method-1-using-docker-copy">Method 1: Using Docker
<code>COPY</code></h3>
<ol type="1">
<li>First, we create a Dockerfile to copy SQL files into the container
when we build it:</li>
</ol>
<div class="sourceCode" id="cb21"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> mysql:latest</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy SQL file(s) to the correct directory</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> ./init.sql /docker-entrypoint-initdb.d/</span></code></pre></div>
<ol start="2" type="1">
<li>Next, we build the Docker image:</li>
</ol>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> my-mysql-image .</span></code></pre></div>
<ol start="3" type="1">
<li>Now, we run the container:</li>
</ol>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> my-mysql-container <span class="at">-e</span> MYSQL_ROOT_PASSWORD=root <span class="at">-d</span> my-mysql-image</span></code></pre></div>
<p>Our SQL file will run automatically when the MySQL container starts
for the first time.</p>
<h3 id="method-2-using-docker-volumes">Method 2: Using Docker
Volumes</h3>
<ol type="1">
<li><p>We need to put our SQL file in a host directory, for example,
<code>./sql/init.sql</code>.</p></li>
<li><p>Then we run the MySQL container with a volume mount:</p></li>
</ol>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> my-mysql-container <span class="at">-e</span> MYSQL_ROOT_PASSWORD=root <span class="at">-v</span> <span class="va">$(</span><span class="bu">pwd</span><span class="va">)</span>/sql:/docker-entrypoint-initdb.d <span class="at">-d</span> mysql:latest</span></code></pre></div>
<p>The SQL file in the mounted volume will run during the setup.</p>
<h3 id="method-3-executing-commands-inside-the-container">Method 3:
Executing Commands Inside the Container</h3>
<p>We can also load SQL files into a running MySQL container using
<code>docker exec</code> command:</p>
<ol type="1">
<li>First, we start our MySQL container:</li>
</ol>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> my-mysql-container <span class="at">-e</span> MYSQL_ROOT_PASSWORD=root <span class="at">-d</span> mysql:latest</span></code></pre></div>
<ol start="2" type="1">
<li>Then we run the SQL file:</li>
</ol>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-i</span> my-mysql-container mysql <span class="at">-uroot</span> <span class="at">-proot</span> <span class="op">&lt;</span> ./init.sql</span></code></pre></div>
<p>This command helps us load the SQL file directly into the running
MySQL.</p>
<h3 id="method-4-using-docker-compose">Method 4: Using Docker
Compose</h3>
<p>With Docker Compose, we can specify the SQL files in the
<code>docker-compose.yml</code> file:</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.1&#39;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">db</span><span class="kw">:</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> mysql:latest</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MYSQL_ROOT_PASSWORD</span><span class="kw">:</span><span class="at"> root</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./sql:/docker-entrypoint-initdb.d</span></span></code></pre></div>
<p>We run Docker Compose to start the services:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up</span></code></pre></div>
<p>The SQL files in the given volume will run when we set up.</p>
<p>These methods give us different ways to load SQL files into a MySQL
database in a Docker container. This helps to set up our database schema
and data correctly. For more information about Docker and how to use it,
we can look at this <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">guide
on Docker usage</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="how-can-we-initialize-a-mysql-database-in-a-docker-container">1.
How can we initialize a MySQL database in a Docker container?</h3>
<p>To start a MySQL database in a Docker container, we can use the
<code>docker run</code> command with a special script. First, we put our
SQL scripts in a folder. Then we mount this folder to our MySQL
container using the <code>-v</code> option. When the container starts,
MySQL will run any scripts in the
<code>/docker-entrypoint-initdb.d/</code> folder.</p>
<h3
id="what-are-docker-volumes-and-how-do-they-help-with-mysql-schema-initialization">2.
What are Docker volumes and how do they help with MySQL schema
initialization?</h3>
<p>Docker volumes help us keep data that comes from and goes to Docker
containers. When we start a MySQL database in Docker, using volumes lets
us store our database data outside the container. This way, our data
stays safe even if we delete the container. This is important to keep
our MySQL schema and data when we restart the container. For more
information about Docker volumes, check out <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">what
are Docker volumes</a>.</p>
<h3 id="can-we-use-docker-compose-for-mysql-database-initialization">3.
Can we use Docker Compose for MySQL database initialization?</h3>
<p>Yes, we can use Docker Compose to start a MySQL database with a
schema. By writing the MySQL service in a
<code>docker-compose.yml</code> file, we can set environment variables,
mount volumes, and add initialization scripts. This makes it easy to set
up our MySQL database automatically. Learn more about Docker Compose in
the article <a
href="https://bestonlinetutorial.com/docker/what-is-docker-compose-and-how-does-it-simplify-multi-container-applications.html">what
is Docker Compose and how does it simplify multi-container
applications</a>.</p>
<h3
id="how-do-we-create-a-custom-mysql-docker-image-with-a-predefined-schema">4.
How do we create a custom MySQL Docker image with a predefined
schema?</h3>
<p>To create a custom MySQL Docker image with a schema, we can make a
<code>Dockerfile</code>. This file will copy our SQL scripts to the
<code>/docker-entrypoint-initdb.d/</code> folder of the MySQL image.
Then we build this image using the <code>docker build</code> command.
After that, we can run it to set up our MySQL database with the schema
we want.</p>
<h3
id="what-is-the-best-practice-for-loading-sql-files-into-a-mysql-database-in-docker">5.
What is the best practice for loading SQL files into a MySQL database in
Docker?</h3>
<p>The best way to load SQL files into a MySQL database in Docker is to
put our SQL scripts in a special folder. When we start the container, we
mount that folder as a volume. MySQL will run all <code>.sql</code>
files in the <code>/docker-entrypoint-initdb.d/</code> folder when it
starts. This method makes sure our schema loads correctly every time we
start the database container.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            