
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "BestOnlineTutorial",
      "url": "https://www.bestonlinetutorial.com/"
    }
    </script>
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How Can You Fill User Input for the Interactive "RUN" Command in Docker?</title>
            <meta name="description" content="Discover how to effectively fill user input for the interactive "RUN" command in Docker. Enhance your container management skills!">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Can You Fill User Input for the Interactive "RUN" Command in Docker?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p><strong>How to Fill User Input for the Interactive “RUN” Command in
Docker</strong></p>
<p>To fill user input for the interactive “RUN” command in Docker, we
can use some easy methods. These include environment variables, ARG
directives in the Dockerfile, and shell scripts. By using these methods,
we can make it easier to pass values while we build the container. This
helps us make our Docker images more flexible and reusable. When we use
these techniques, we can manage user input better. This lets us create
more interactive and customizable Docker environments.</p>
<p>In this article, we will look at different ways to fill user input
for the interactive “RUN” command in Docker. We will talk about using
environment variables, using Dockerfile ARGs, using Docker Compose, and
using shell scripts for user input. We will also share best practices
for filling user input in Docker RUN commands. Plus, we will answer some
common questions. Here is a simple overview of what we will talk
about:</p>
<ul>
<li>Using Environment Variables to Fill User Input in Docker RUN
Command</li>
<li>Using Dockerfile ARG to Handle User Input in RUN Command</li>
<li>Using Docker Compose for Interactive RUN Command User Input</li>
<li>Handling User Input with Shell Scripts in Docker RUN Command</li>
<li>Best Practices for Filling User Input in Docker RUN Command</li>
<li>Frequently Asked Questions</li>
</ul>
<h2
id="using-environment-variables-to-fill-user-input-in-docker-run-command">Using
Environment Variables to Fill User Input in Docker RUN Command</h2>
<p>We can use environment variables to pass user input into the Docker
<code>RUN</code> command. By defining these variables, we can customize
the build process without putting fixed values in our Dockerfile.</p>
<h3 id="setting-environment-variables">Setting Environment
Variables</h3>
<p>We can set environment variables in our Dockerfile using the
<code>ENV</code> instruction. Then we can use them in our
<code>RUN</code> commands.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting environment variables</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MY_VAR=my_value</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the environment variable in a RUN command</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="bu">echo</span> <span class="st">&quot;The value of MY_VAR is </span><span class="va">$MY_VAR</span><span class="st">&quot;</span></span></code></pre></div>
<h3 id="passing-environment-variables-at-build-time">Passing Environment
Variables at Build Time</h3>
<p>When we build the Docker image, we can pass environment variables
using the <code>--build-arg</code> flag with <code>docker build</code>.
This lets us set dynamic values.</p>
<ol type="1">
<li>First, we define an <code>ARG</code> in our Dockerfile:</li>
</ol>
<div class="sourceCode" id="cb2"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ARG</span> MY_VAR</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="bu">echo</span> <span class="st">&quot;The value of MY_VAR is </span><span class="va">$MY_VAR</span><span class="st">&quot;</span></span></code></pre></div>
<ol start="2" type="1">
<li>Next, we build the Docker image with the <code>--build-arg</code>
option:</li>
</ol>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">--build-arg</span> MY_VAR=my_dynamic_value <span class="at">-t</span> my_image .</span></code></pre></div>
<h3 id="accessing-environment-variables-in-run-commands">Accessing
Environment Variables in RUN Commands</h3>
<p>We can access environment variables directly in <code>RUN</code>
commands. Here’s how we can do it:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> node:14</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting an environment variable</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> NODE_ENV production</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the environment variable in installation commands</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="cf">if</span> <span class="bu">[</span> <span class="st">&quot;</span><span class="va">$NODE_ENV</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;production&quot;</span> <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span> <span class="ex">npm</span> install <span class="at">--only</span><span class="op">=</span>production<span class="kw">;</span> <span class="cf">fi</span></span></code></pre></div>
<h3 id="using-default-values">Using Default Values</h3>
<p>We can also set default values for environment variables in our
Dockerfile. This gives us fallback values if none are provided:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> python:3.8</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> APP_PORT=5000</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the environment variable, with a default value</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="bu">echo</span> <span class="st">&quot;Starting app on port </span><span class="va">${APP_PORT</span><span class="op">:-</span>8080<span class="va">}</span><span class="st">&quot;</span></span></code></pre></div>
<p>This way, our Docker build process stays flexible and can adapt to
different environments. For more details on using environment variables
in Docker, we can check out <a
href="https://bestonlinetutorial.com/docker/how-can-i-effectively-use-environment-variables-in-docker-compose.html">how
to effectively use environment variables in Docker Compose</a>.</p>
<h2
id="employing-dockerfile-arg-to-handle-user-input-in-run-command">Employing
Dockerfile ARG to Handle User Input in RUN Command</h2>
<p>In Docker, we can use the <code>ARG</code> instruction to create
variables. Users can give these variables at build-time to the
Dockerfile. This is very helpful when we need to include user input in
the <code>RUN</code> command.</p>
<p>To use <code>ARG</code> in a Dockerfile, we can follow these
steps:</p>
<ol type="1">
<li><strong>Define the ARG in the Dockerfile</strong>:</li>
</ol>
<div class="sourceCode" id="cb6"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:20.04</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define ARG variables</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ARG</span> APP_VERSION</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ARG</span> APP_ENV</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Use ARG values in RUN commands</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="bu">echo</span> <span class="st">&quot;Building version </span><span class="va">${APP_VERSION}</span><span class="st"> for environment </span><span class="va">${APP_ENV}</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> install <span class="at">-y</span> curl</span></code></pre></div>
<ol start="2" type="1">
<li><strong>Build the Docker Image</strong>: We can pass the
<code>ARG</code> values when we build the Docker image. We do this with
the <code>--build-arg</code> flag.</li>
</ol>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">--build-arg</span> APP_VERSION=1.0 <span class="at">--build-arg</span> APP_ENV=production <span class="at">-t</span> my-app .</span></code></pre></div>
<ol start="3" type="1">
<li><p><strong>Access the ARG values</strong>: The values of
<code>ARG</code> variables are available only during the build process.
We cannot access them inside the running container.</p></li>
<li><p><strong>Best Practices</strong>:</p>
<ul>
<li>We can use default values by providing them in the <code>ARG</code>
definition:</li>
</ul>
<div class="sourceCode" id="cb8"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ARG</span> APP_VERSION=latest</span></code></pre></div>
<ul>
<li>It is good to write down <code>ARG</code> variables in the
Dockerfile. This helps with clarity.</li>
</ul></li>
</ol>
<p>Using <code>ARG</code> in our Dockerfile gives us a flexible way to
handle user input during the image build process. It helps us customize
our Docker setups better. For more information on Dockerfile best
practices, we can check <a
href="https://bestonlinetutorial.com/docker/what-is-the-dockerfile-and-how-do-you-create-one.html">this
article</a>.</p>
<h2
id="using-docker-compose-for-interactive-run-command-user-input">Using
Docker Compose for Interactive RUN Command User Input</h2>
<p>Docker Compose helps us manage user input when we use the
<code>RUN</code> command in Docker. By creating a service in a
<code>docker-compose.yml</code> file, we can use environment variables
and scripts to make it easy for users to provide input during the
build.</p>
<h3 id="simple-example-of-docker-compose.yml">Simple Example of
<code>docker-compose.yml</code></h3>
<div class="sourceCode" id="cb9"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">my_service</span><span class="kw">:</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">context</span><span class="kw">:</span><span class="at"> .</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">dockerfile</span><span class="kw">:</span><span class="at"> Dockerfile</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> MY_VARIABLE=${MY_VARIABLE}</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">stdin_open</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">tty</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
<h3 id="about-environment-variables">About Environment Variables</h3>
<p>In this example, we can set environment variables that we fill during
runtime. To give a value to <code>MY_VARIABLE</code>, we run:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="va">MY_VARIABLE</span><span class="op">=</span>value <span class="ex">docker-compose</span> up <span class="at">--build</span></span></code></pre></div>
<h3 id="interactive-shell-for-user-input">Interactive Shell for User
Input</h3>
<p>When we need to get user input interactively, we can use a shell
script in our Dockerfile. Here is how we can do it:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dockerfile</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> input_script.sh /usr/local/bin/input_script.sh</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="fu">chmod</span> +x /usr/local/bin/input_script.sh</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;/usr/local/bin/input_script.sh&quot;</span>]</span></code></pre></div>
<h3 id="example-of-shell-script-input_script.sh">Example of Shell Script
(<code>input_script.sh</code>)</h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Please enter your input:&quot;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="bu">read</span> <span class="va">user_input</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;You entered: </span><span class="va">$user_input</span><span class="st">&quot;</span></span></code></pre></div>
<h3 id="running-the-docker-compose">Running the Docker Compose</h3>
<p>To run the Docker Compose and work with the script, we just type:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up</span></code></pre></div>
<p>This way, we can get user input while the container runs. It helps us
configure applications that need parameters at runtime.</p>
<p>For more information on using Docker, check out <a
href="https://bestonlinetutorial.com/docker/what-is-docker-compose-and-how-does-it-simplify-multi-container-applications.html">this
guide on Docker Compose</a>.</p>
<h2
id="handling-user-input-with-shell-scripts-in-docker-run-command">Handling
User Input with Shell Scripts in Docker RUN Command</h2>
<p>We can handle user input in Docker’s <code>RUN</code> command by
using shell scripts. These scripts ask for input during the build
process. This method is helpful when we need to collect information
while building.</p>
<p>To do this, we first create a shell script to get user input. Then,
we include this script in our Dockerfile. Here is a simple example:</p>
<ol type="1">
<li><p><strong>Create a Shell Script</strong>: Save this script as
<code>input.sh</code> in your project folder.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Enter your name:&quot;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="bu">read</span> <span class="va">USER_NAME</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Hello, </span><span class="va">$USER_NAME</span><span class="st">! This is your Docker build.&quot;</span></span></code></pre></div></li>
<li><p><strong>Dockerfile Setup</strong>: Link the shell script in your
Dockerfile.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy the script into the container</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> input.sh /usr/local/bin/input.sh</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="fu">chmod</span> +x /usr/local/bin/input.sh</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the script</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">/usr/local/bin/input.sh</span></span></code></pre></div></li>
<li><p><strong>Build the Docker Image</strong>: When we build the image,
the <code>RUN</code> command will run the script.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> my_image .</span></code></pre></div></li>
</ol>
<p>Remember, the input will be taken during the build phase. But Docker
builds are not meant for interactive use. So for real user inputs, we
should use <code>CMD</code> or <code>ENTRYPOINT</code> with
<code>docker run</code> to get inputs while the container runs.</p>
<p>For more complex situations, we can use <code>docker-compose</code>
with environment variables or bind mounts to give inputs to our
containers. You can read more about this in other articles like <a
href="https://bestonlinetutorial.com/docker/how-can-i-pass-environment-variables-to-docker-containers.html">Using
Environment Variables to Fill User Input in Docker RUN Command</a>.</p>
<h2
id="best-practices-for-filling-user-input-in-docker-run-command">Best
Practices for Filling User Input in Docker RUN Command</h2>
<p>When we fill user input for the interactive <code>RUN</code> command
in Docker, let’s think about some best practices. These can help us work
better and keep our code easy to manage.</p>
<ol type="1">
<li><p><strong>Use Environment Variables</strong>: We should define
environment variables to pass options to the Docker image while
building. This gives us more flexibility.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ARG</span> APP_ENV</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> NODE_ENV=${APP_ENV}</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="bu">echo</span> <span class="st">&quot;Running in </span><span class="va">${NODE_ENV}</span><span class="st"> environment&quot;</span></span></code></pre></div></li>
<li><p><strong>Leverage ARG for Build-time Variables</strong>: We can
use <code>ARG</code> in the Dockerfile to take user input at build time.
This is good for settings that can change based on the build.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ARG</span> VERSION=latest</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="bu">echo</span> <span class="st">&quot;Building version </span><span class="va">${VERSION}</span><span class="st">&quot;</span></span></code></pre></div></li>
<li><p><strong>Utilize Docker Compose</strong>: When we have many
containers, we can use Docker Compose. It helps us define environment
variables and arguments in a <code>docker-compose.yml</code> file. This
keeps things consistent across services.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">context</span><span class="kw">:</span><span class="at"> .</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">args</span><span class="kw">:</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">APP_ENV</span><span class="kw">:</span><span class="at"> production</span></span></code></pre></div></li>
<li><p><strong>Implement Shell Scripts for Complex Input</strong>: If we
have more complicated cases, we can use shell scripts for user input. We
can add scripts in our Dockerfile to ask for input.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> setup.sh /usr/local/bin/</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="fu">chmod</span> +x /usr/local/bin/setup.sh</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">/usr/local/bin/setup.sh</span></span></code></pre></div></li>
<li><p><strong>Keep Dockerfile Clean</strong>: We need to keep our
Dockerfile clean. It is better to limit using inline <code>RUN</code>
commands that ask for user input. We can use scripts for complex tasks.
This makes it easier to read.</p></li>
<li><p><strong>Document Environment Variables and ARGs</strong>: We
should write down what our environment variables and build arguments do
in the Dockerfile. This helps other developers know how to build it
well.</p></li>
<li><p><strong>Use Default Values for ARGs</strong>: We can set good
default values for ARGs. This way, we can build the Docker image without
needing user input.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ARG</span> APP_PORT=80</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="bu">echo</span> <span class="st">&quot;App will run on port </span><span class="va">${APP_PORT}</span><span class="st">&quot;</span></span></code></pre></div></li>
<li><p><strong>Consider Security Implications</strong>: We must be
careful with sensitive information. It is better to use Docker secrets
for this kind of data instead of environment variables or ARGs. This
stops us from showing them in image layers.</p></li>
</ol>
<p>By following these best practices for user input in Docker’s
<code>RUN</code> command, we can make better, safer, and
easier-to-manage Docker images. For more details on Docker commands, we
can check out <a
href="https://bestonlinetutorial.com/docker/how-to-run-a-docker-container-in-interactive-mode.html">this
article</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3
id="how-can-i-pass-environment-variables-to-the-docker-run-command">1.
How can I pass environment variables to the Docker RUN command?</h3>
<p>We can pass environment variables to the Docker RUN command using the
<code>-e</code> flag. This helps us set environment variables for the
build process. For example, we can use this command when building our
Docker image:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">--build-arg</span> MY_VAR=value .</span></code></pre></div>
<p>This lets us fill user input as we build the image. It makes things
more flexible and customizable.</p>
<h3 id="what-is-the-difference-between-arg-and-env-in-a-dockerfile">2.
What is the difference between <code>ARG</code> and <code>ENV</code> in
a Dockerfile?</h3>
<p>In a Dockerfile, <code>ARG</code> is for variables we can use at
build-time. On the other hand, <code>ENV</code> sets environment
variables that stay in the built image. These are available at
build-time and run-time. We use <code>ARG</code> for temporary variables
during building. We use <code>ENV</code> for variables that the running
container needs. This helps us manage user input better.</p>
<h3 id="how-can-i-handle-user-input-in-a-docker-compose-file">3. How can
I handle user input in a Docker Compose file?</h3>
<p>To handle user input in a Docker Compose file, we can use environment
variables. We can define these in a <code>.env</code> file or right in
the Compose file. This lets us customize settings for services. For
example, we can write it like this:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">app</span><span class="kw">:</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> MY_VAR=${MY_VAR}</span></span></code></pre></div>
<p>This way, we can fill user input easily in Docker Compose.</p>
<h3 id="can-i-use-shell-scripts-to-manage-user-input-in-docker">4. Can I
use shell scripts to manage user input in Docker?</h3>
<p>Yes, we can use shell scripts to manage user input in the Docker RUN
command. By making a script that collects user input or processes
arguments, we can pass this info into our Docker container during build
or run time. For example:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Enter your input:&quot;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="bu">read</span> <span class="va">user_input</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run mycontainer <span class="at">--input</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$user_input</span><span class="st">&quot;</span></span></code></pre></div>
<p>This method makes it easier and more flexible to handle user input in
Docker.</p>
<h3
id="what-are-the-best-practices-for-filling-user-input-in-docker-run-commands">5.
What are the best practices for filling user input in Docker RUN
commands?</h3>
<p>To fill user input in Docker RUN commands well, we should use
environment variables for dynamic settings. We can use <code>ARG</code>
for build-time variables and shell scripts for interactive prompts. It
is also good to write clear documentation for our Dockerfile and use
Docker Compose for complex setups. These best practices help us make our
Docker workflows smoother and improve user experience. More info on <a
href="https://bestonlinetutorial.com/docker/what-are-docker-security-best-practices.html">Docker
best practices</a> can help us too.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            