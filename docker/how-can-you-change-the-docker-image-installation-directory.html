
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How Can You Change the Docker Image Installation Directory?</title>
            <meta name="description" content="Learn how to change the Docker image installation directory with our step-by-step guide. Optimize your Docker setup today!">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Can You Change the Docker Image Installation Directory?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>To change where Docker installs images, we need to set up the Docker
daemon settings. This means we will specify a new path for storing
images. We can do this by changing the Docker daemon configuration file
or by using command-line options. Following these steps helps us manage
the Docker image installation directory and use our system’s storage
better.</p>
<p>In this article, we will look at different ways to change the Docker
image installation directory on various operating systems. We will talk
about the default installation directory. We will also see how to set up
the Docker daemon and use Docker configuration files. Plus, we will give
clear steps for changing the Docker image installation directory on
Linux and Windows systems. Here’s what we will cover:</p>
<ul>
<li>Understanding the Default Docker Image Installation Directory</li>
<li>Configuring Docker Daemon to Change Image Installation
Directory</li>
<li>Using Docker Configuration Files to Set Image Installation Path</li>
<li>Changing the Docker Image Installation Directory on Linux
Systems</li>
<li>Changing the Docker Image Installation Directory on Windows
Systems</li>
<li>Frequently Asked Questions</li>
</ul>
<p>For more information about Docker, you can look at other articles
like <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It</a> and <a
href="https://bestonlinetutorial.com/docker/how-to-install-docker-on-different-operating-systems.html">How
to Install Docker on Different Operating Systems</a>.</p>
<h2
id="understanding-the-default-docker-image-installation-directory">Understanding
the Default Docker Image Installation Directory</h2>
<p>By default, Docker saves images, containers, and other data in the
<code>/var/lib/docker</code> folder on Linux systems. This folder has
different subfolders for images, containers, volumes, and networks. The
structure looks like this:</p>
<pre><code>/var/lib/docker
├── containers
├── image
├── volumes
└── networks</code></pre>
<p>On Windows, Docker uses a different path. It is usually found at
<code>C:\ProgramData\Docker</code>. This folder also has similar
subfolders to manage Docker’s resources.</p>
<p>Knowing this default path is important when we want to change where
Docker stores its images. It helps us see where Docker keeps its files.
It also shows us how to set up a new installation folder correctly.</p>
<p>If we want to move the Docker installation folder, we need to stop
Docker first. Then, we should copy existing data from the default folder
to the new one. It is important to keep the same folder structure to
avoid problems with Docker working right.</p>
<h2
id="configuring-docker-daemon-to-change-image-installation-directory">Configuring
Docker Daemon to Change Image Installation Directory</h2>
<p>We can change the Docker image installation directory by configuring
the Docker daemon. This means we need to edit the Docker configuration
file. This file is usually found at <code>/etc/docker/daemon.json</code>
on Linux. For Windows, it is at
<code>%programdata%\docker\config\daemon.json</code>.</p>
<h3 id="steps-for-linux">Steps for Linux</h3>
<ol type="1">
<li><p><strong>Open the Docker daemon configuration file</strong>:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nano /etc/docker/daemon.json</span></code></pre></div></li>
<li><p><strong>Add or change the <code>data-root</code>
property</strong> to set the new installation directory. For
example:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;data-root&quot;</span><span class="fu">:</span> <span class="st">&quot;/mnt/docker-data&quot;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div></li>
<li><p><strong>Save and exit</strong> the editor. If you use nano, press
<code>CTRL+X</code>, then <code>Y</code>, and then
<code>Enter</code>.</p></li>
<li><p><strong>Restart the Docker service</strong> so the changes take
effect:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart docker</span></code></pre></div></li>
</ol>
<h3 id="steps-for-windows">Steps for Windows</h3>
<ol type="1">
<li><p><strong>Open the Docker daemon configuration file</strong>:</p>
<ul>
<li>Go to <code>%programdata%\docker\config\daemon.json</code>.</li>
<li>If the file is not there, make a new one.</li>
</ul></li>
<li><p><strong>Add or change the <code>data-root</code>
property</strong>:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;data-root&quot;</span><span class="fu">:</span> <span class="st">&quot;D:</span><span class="ch">\\</span><span class="st">DockerData&quot;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div></li>
<li><p><strong>Save the file</strong> and restart Docker Desktop. You
can do this by right-clicking the system tray icon and selecting “Quit
Docker Desktop”. Then, open it again.</p></li>
</ol>
<h3 id="verification">Verification</h3>
<p>To check if the changes worked:</p>
<ul>
<li><p>Run this command to see the current Docker configuration:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Docker Root Dir&quot;</span></span></code></pre></div></li>
</ul>
<p>This command will show the current Docker root directory. It helps us
to know if the changes we made were successful. Changing the Docker
daemon settings can help us manage disk space and improve performance by
moving images and containers to a better storage place.</p>
<h2
id="using-docker-configuration-files-to-set-image-installation-path">Using
Docker Configuration Files to Set Image Installation Path</h2>
<p>To change the Docker image installation path, we need to modify the
Docker daemon’s settings. We can do this by editing the
<code>daemon.json</code> file. Here are the steps to set the image
installation path:</p>
<ol type="1">
<li><p><strong>Find the <code>daemon.json</code> file</strong>:</p>
<ul>
<li>On Linux, we usually find this file at
<code>/etc/docker/daemon.json</code>.</li>
<li>On Windows, it is often located at
<code>C:\ProgramData\docker\config\daemon.json</code>.</li>
</ul></li>
<li><p><strong>Edit the <code>daemon.json</code> file</strong>: We
should open the file in a text editor. Then we add or change the
following JSON settings:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;data-root&quot;</span><span class="fu">:</span> <span class="st">&quot;/new/path/to/docker&quot;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>We need to replace <code>/new/path/to/docker</code> with the
directory where we want to store Docker images.</p></li>
<li><p><strong>Restart the Docker service</strong>: After we save the
changes in the <code>daemon.json</code> file, we must restart the Docker
service to apply the changes.</p>
<ul>
<li><p>On Linux, we can use this command:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart docker</span></code></pre></div></li>
<li><p>On Windows, we can restart Docker from the Docker Desktop app or
use:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Restart-Service</span> docker</span></code></pre></div></li>
</ul></li>
<li><p><strong>Check the configuration</strong>: After we restart
Docker, we can check if it is using the new installation path by
running:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Docker Root Dir&quot;</span></span></code></pre></div></li>
</ol>
<p>This way, we change the Docker image installation path by updating
the config file. Now, all new Docker images will be stored in the new
path. For more information on Docker config, you can look at <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">what
is Docker and why should you use it</a>.</p>
<h2
id="changing-the-docker-image-installation-directory-on-linux-systems">Changing
the Docker Image Installation Directory on Linux Systems</h2>
<p>To change the Docker image installation directory on Linux systems,
we need to set up the Docker daemon. By default, Docker saves images in
the <code>/var/lib/docker</code> directory. Let’s see how we can change
this directory.</p>
<ol type="1">
<li><p><strong>Stop the Docker Service</strong>:<br />
First, we should stop the Docker service. This makes sure that no
processes are using the Docker directory.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl stop docker</span></code></pre></div></li>
<li><p><strong>Create a New Directory</strong>:<br />
Now, we can create a new directory where we want Docker to keep its
images, containers, and volumes.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mkdir /path/to/new/docker</span></code></pre></div></li>
<li><p><strong>Copy Existing Data</strong> (Optional):<br />
If we want to keep our current Docker data, we can copy it to the new
directory.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> rsync <span class="at">-aP</span> /var/lib/docker/ /path/to/new/docker/</span></code></pre></div></li>
<li><p><strong>Configure the Docker Daemon</strong>:<br />
Next, we need to edit the Docker service configuration file to tell
Docker to use the new directory. Open or create the
<code>daemon.json</code> file.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nano /etc/docker/daemon.json</span></code></pre></div>
<p>We should add or change the following content:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;data-root&quot;</span><span class="fu">:</span> <span class="st">&quot;/path/to/new/docker&quot;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div></li>
<li><p><strong>Restart Docker Service</strong>:<br />
After we save the changes, we can restart the Docker service to apply
the new settings.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start docker</span></code></pre></div></li>
<li><p><strong>Verify the Changes</strong>:<br />
We can check if Docker is using the new directory by running:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Docker Root Dir&quot;</span></span></code></pre></div></li>
</ol>
<p>By following these steps, we can change the Docker image installation
directory on Linux systems. For more details on Docker setup, we can
check the article on <a
href="https://bestonlinetutorial.com/docker/how-to-install-docker-on-different-operating-systems.html">How
to Install Docker on Different Operating Systems</a>.</p>
<h2
id="changing-the-docker-image-installation-directory-on-windows-systems">Changing
the Docker Image Installation Directory on Windows Systems</h2>
<p>We can change the Docker image installation directory on Windows
systems by modifying the Docker daemon configuration. Here is how we can
do it:</p>
<ol type="1">
<li><p><strong>Stop Docker Desktop</strong>: First, we need to make sure
that Docker Desktop is not running before we change anything.</p></li>
<li><p><strong>Edit Configuration File</strong>: Next, we open the
Docker configuration file located at
<code>C:\ProgramData\Docker\config\daemon.json</code>. If we do not find
this file, we can create it.</p></li>
<li><p><strong>Add or Modify Storage Path</strong>: Now, we add or
change the <code>data-root</code> property to set the new image
installation directory. For example, if we want to set the directory to
<code>D:\DockerImages</code>, our configuration will look like this:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;data-root&quot;</span><span class="fu">:</span> <span class="st">&quot;D:</span><span class="ch">\\</span><span class="st">DockerImages&quot;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div></li>
<li><p><strong>Restart Docker Desktop</strong>: After we save our
changes to the <code>daemon.json</code> file, we should restart Docker
Desktop so the changes can take effect.</p></li>
<li><p><strong>Verify Configuration</strong>: We can check if the new
installation directory is working by running this command in the command
prompt:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info <span class="kw">|</span> <span class="fu">find</span> <span class="st">&quot;Docker Root Dir&quot;</span></span></code></pre></div></li>
</ol>
<p>This command will show the current Docker image installation
directory. This way, we can confirm that our changes were
successful.</p>
<p>By following these steps, we can easily change the Docker image
installation directory on our Windows system. This helps us keep our
Docker resources organized and managed well. For more information on
Docker, we can read <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3
id="how-can-we-change-the-docker-image-installation-directory-on-linux">1.
How can we change the Docker image installation directory on Linux?</h3>
<p>To change the Docker image installation directory on Linux, we need
to set up the Docker daemon. First, we edit the Docker configuration
file. This file is usually found at
<code>/etc/docker/daemon.json</code>. We can set a new directory by
adding the <code>"data-root"</code> option. After we make these changes,
we restart the Docker service with
<code>sudo systemctl restart docker</code> so the changes work.</p>
<h3
id="is-it-possible-to-change-the-docker-image-installation-directory-on-windows">2.
Is it possible to change the Docker image installation directory on
Windows?</h3>
<p>Yes, we can change the Docker image installation directory on
Windows. We need to change the Docker Desktop settings. First, we open
Docker Desktop. Then we go to the “Settings” menu and click on the
“Resources” tab. Under “File Sharing,” we can set a new place for our
Docker images. After that, we restart Docker Desktop so the changes
work.</p>
<h3
id="what-happens-to-existing-docker-images-when-we-change-the-installation-directory">3.
What happens to existing Docker images when we change the installation
directory?</h3>
<p>When we change the Docker image installation directory, the old
images stay in the old directory unless we move them ourselves. It is
good to back up our images before we make changes. We can use commands
like <code>docker save</code> to export our images. Then we can use
<code>docker load</code> to import them to the new directory after we
change the Docker image installation path.</p>
<h3 id="can-we-have-multiple-docker-image-directories">4. Can we have
multiple Docker image directories?</h3>
<p>Yes, we can set up Docker to use more than one directory for images,
but it is not easy. Docker does not allow multiple data roots by itself.
But we can use symbolic links or bind mounts to link other directories
to the main Docker image installation directory. This way, we can manage
images across different storage places easily.</p>
<h3 id="where-are-docker-images-stored-after-installation">5. Where are
Docker images stored after installation?</h3>
<p>By default, Docker images are in the <code>/var/lib/docker</code>
directory on Linux systems. On Windows, images are usually in the Docker
Desktop application data directory. If we change the Docker image
installation directory using the settings we talked about, the new path
will be where all images and containers are stored. For more info about
Docker image storage, we can check out <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">this
article about Docker images and how they work</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            