
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "BestOnlineTutorial",
      "url": "https://www.bestonlinetutorial.com/"
    }
    </script>
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How Can You Persist Data in a Dockerized PostgreSQL Database Using Volumes?</title>
            <meta name="description" content="Learn how to persist data in a Dockerized PostgreSQL database using volumes for reliable storage and easy management.">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Can You Persist Data in a Dockerized PostgreSQL Database Using Volumes?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>To keep data safe in a Dockerized PostgreSQL database, we need to use
Docker volumes. Docker volumes are a good way to make sure our
PostgreSQL data stays safe even when we stop or remove the container.
When we set up our PostgreSQL container to use volumes, we can easily
handle our database’s data without losing important stuff.</p>
<p>In this article, we will look at how to keep data in a Dockerized
PostgreSQL database with volumes. We will talk about many things. We
will explain what Docker volumes are and why they matter for PostgreSQL
data. We will show how to create a Docker volume. We will also discuss
bind mounts, setting up PostgreSQL in Docker, and checking if our data
is safe. Plus, we will answer some common questions to help you
understand better. Here is what we will cover:</p>
<ul>
<li>How to Keep Data in a Dockerized PostgreSQL Database Using
Volumes</li>
<li>What Are Docker Volumes and Why They Matter for PostgreSQL Data</li>
<li>How to Make a Docker Volume for PostgreSQL Data Safety</li>
<li>How to Use Bind Mounts to Keep Data in Dockerized PostgreSQL</li>
<li>How to Set Up PostgreSQL in Docker to Use Volumes for Data
Safety</li>
<li>How to Check if Data is Safe in a Dockerized PostgreSQL
Database</li>
<li>Common Questions</li>
</ul>
<h2
id="what-are-docker-volumes-and-their-role-in-postgresql-data-persistence">What
Are Docker Volumes and Their Role in PostgreSQL Data Persistence</h2>
<p>Docker volumes are very important for keeping data safe in container
apps like PostgreSQL databases running in Docker. They let us store data
outside of the container’s filesystem. This means our data stays safe
even when we stop or remove the container. This is very important for
databases where we need to keep data safe and strong.</p>
<h3 id="key-features-of-docker-volumes">Key Features of Docker
Volumes:</h3>
<ul>
<li><p><strong>Data Persistence</strong>: Volumes help us keep data safe
even after a container is gone. When we create a PostgreSQL container,
using volumes helps us not to lose our database data if we delete or
recreate the container.</p></li>
<li><p><strong>Performance</strong>: Volumes usually work better than
bind mounts. They are managed by Docker and made better for container
storage.</p></li>
<li><p><strong>Isolation</strong>: Data in volumes stays separate from
the host filesystem. This reduces the chance of accidentally deleting or
changing data by programs running on the host.</p></li>
<li><p><strong>Sharing Data</strong>: We can share volumes between many
containers. This makes it easier for us to set up database clustering or
replication.</p></li>
</ul>
<h3 id="example-of-using-docker-volumes-with-postgresql">Example of
Using Docker Volumes with PostgreSQL</h3>
<p>To create a Docker volume and use it with a PostgreSQL container, we
can run these commands:</p>
<ol type="1">
<li><p><strong>Create a Docker Volume</strong>:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> volume create pgdata</span></code></pre></div></li>
<li><p><strong>Run PostgreSQL with the Volume</strong>:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="dt">\</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--name</span> postgres-container <span class="dt">\</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-e</span> POSTGRES_PASSWORD=mysecretpassword <span class="dt">\</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">-v</span> pgdata:/var/lib/postgresql/data <span class="dt">\</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">-p</span> 5432:5432 <span class="dt">\</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  postgres</span></code></pre></div></li>
</ol>
<p>In this example, we mount the <code>pgdata</code> volume to
<code>/var/lib/postgresql/data</code> in the container. This is where
PostgreSQL keeps its data files by default. This setup makes sure all
data will stay in the <code>pgdata</code> volume even if we stop or
remove the <code>postgres-container</code>.</p>
<p>Using Docker volumes is very important for keeping data safe in a
Dockerized PostgreSQL database. It helps us manage database states and
backups easily. For more information on Docker volumes, visit <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">What
Are Docker Volumes and How Do They Work</a>.</p>
<h2
id="how-to-create-a-docker-volume-for-postgresql-data-persistence">How
to Create a Docker Volume for PostgreSQL Data Persistence</h2>
<p>To keep our data safe in a Docker PostgreSQL database, we can create
a Docker volume. A Docker volume helps us store data outside the
container. This way, our data does not get lost when we stop or remove a
container.</p>
<h3 id="creating-a-docker-volume">Creating a Docker Volume</h3>
<p>We can create a Docker volume using the Docker CLI. We just need to
run this command to make a new Docker volume called
<code>pgdata</code>:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> volume create pgdata</span></code></pre></div>
<h3 id="using-the-volume-with-postgresql">Using the Volume with
PostgreSQL</h3>
<p>After we create the volume, we can use it to save data by mounting it
to the PostgreSQL container. Here is an example of how to run a
PostgreSQL container with the volume we created:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="dt">\</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--name</span> postgres-container <span class="dt">\</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-e</span> POSTGRES_PASSWORD=mysecretpassword <span class="dt">\</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">-v</span> pgdata:/var/lib/postgresql/data <span class="dt">\</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">-p</span> 5432:5432 <span class="dt">\</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  postgres</span></code></pre></div>
<h3 id="verifying-volume-creation">Verifying Volume Creation</h3>
<p>To check if the volume was created correctly, we can list all Docker
volumes with this command:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> volume ls</span></code></pre></div>
<p>We should see <code>pgdata</code> in the list of available
volumes.</p>
<h3 id="accessing-volume-data">Accessing Volume Data</h3>
<p>To look at the volume and see what is inside, we can use this
command:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--rm</span> <span class="at">-it</span> <span class="at">-v</span> pgdata:/data alpine sh</span></code></pre></div>
<p>This will start an Alpine container, mount the <code>pgdata</code>
volume, and give us a shell to work with the volume data.</p>
<p>By following these steps, we can create a Docker volume for
PostgreSQL data persistence. This helps keep our data safe across
container lifecycles. If we want to learn more about Docker volumes, we
can check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">this
article</a>.</p>
<h2
id="how-to-use-bind-mounts-for-persisting-data-in-dockerized-postgresql">How
to Use Bind Mounts for Persisting Data in Dockerized PostgreSQL</h2>
<p>Bind mounts help us link a specific folder on our host system to a
folder in our Docker container. This is very useful for keeping data in
a Dockerized PostgreSQL environment. It gives us a direct connection to
our host’s filesystem.</p>
<p>To use bind mounts for keeping data in a Dockerized PostgreSQL
database, we can follow these steps:</p>
<ol type="1">
<li><p><strong>Prepare a Host Directory</strong>: First, we need to make
a folder on our host machine to store PostgreSQL data.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> /path/to/your/host/directory</span></code></pre></div></li>
<li><p><strong>Run PostgreSQL Container with Bind Mount</strong>: Next,
we use the <code>docker run</code> command to start a PostgreSQL
container. We will specify the host folder as a bind mount.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="dt">\</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--name</span> postgres-container <span class="dt">\</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-e</span> POSTGRES_USER=myuser <span class="dt">\</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">-e</span> POSTGRES_PASSWORD=mypassword <span class="dt">\</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">-v</span> /path/to/your/host/directory:/var/lib/postgresql/data <span class="dt">\</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">-p</span> 5432:5432 <span class="dt">\</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  postgres</span></code></pre></div>
<p>In this command:</p>
<ul>
<li><code>-v /path/to/your/host/directory:/var/lib/postgresql/data</code>
connects the specified host folder to the PostgreSQL data folder in the
container.</li>
</ul></li>
<li><p><strong>Access PostgreSQL Data</strong>: Any data we write to the
PostgreSQL database will now save in the specified host folder. This
way, data stays safe even if we stop or remove the container.</p></li>
<li><p><strong>Verify Data Persistence</strong>: To check if our data is
safe, we can create a database or table in PostgreSQL. Then we stop the
container and check the host folder for data files.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> postgres-container psql <span class="at">-U</span> myuser <span class="at">-c</span> <span class="st">&quot;CREATE DATABASE testdb;&quot;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> stop postgres-container</span></code></pre></div></li>
<li><p><strong>Restart the Container</strong>: When we restart the
container, the data in the host folder will still be there.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> start postgres-container</span></code></pre></div></li>
</ol>
<p>Using bind mounts gives us a simple way to manage PostgreSQL data
persistence in Docker. It allows us to easily access database files from
our host system. For more information about Docker volumes and how they
work, we can read <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">this
article</a>.</p>
<h2
id="how-to-configure-postgresql-in-docker-to-use-volumes-for-data-persistence">How
to Configure PostgreSQL in Docker to Use Volumes for Data
Persistence</h2>
<p>To set up PostgreSQL in Docker so it can save data using volumes, we
can follow these steps.</p>
<ol type="1">
<li><p><strong>Create a Docker Volume</strong>: First, we need to create
a named volume for PostgreSQL. We can use this command:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> volume create postgres_data</span></code></pre></div></li>
<li><p><strong>Run PostgreSQL Container</strong>: Next, we start a
PostgreSQL container. We will mount the created volume to the right
directory. Use this command:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="dt">\</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--name</span> postgres_container <span class="dt">\</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-e</span> POSTGRES_DB=mydatabase <span class="dt">\</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">-e</span> POSTGRES_USER=myuser <span class="dt">\</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">-e</span> POSTGRES_PASSWORD=mypassword <span class="dt">\</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">-v</span> postgres_data:/var/lib/postgresql/data <span class="dt">\</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">-p</span> 5432:5432 <span class="dt">\</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  postgres</span></code></pre></div>
<p>Here is what the options mean:</p>
<ul>
<li><code>-d</code>: This runs the container in the background.</li>
<li><code>--name</code>: This gives a name to the container.</li>
<li><code>-e</code>: This sets the environment variables for the
database name, user, and password.</li>
<li><code>-v</code>: This mounts the volume to
<code>/var/lib/postgresql/data</code>. This is where PostgreSQL keeps
its data.</li>
</ul></li>
<li><p><strong>Verify Configuration</strong>: To check if PostgreSQL is
using the volume for data saving, we will do the following:</p>
<ul>
<li><p>First, connect to the PostgreSQL container:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> postgres_container psql <span class="at">-U</span> myuser <span class="at">-d</span> mydatabase</span></code></pre></div></li>
<li><p>Then, create a test table and add some data:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> test_table (<span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>, name <span class="dt">VARCHAR</span>(<span class="dv">50</span>));</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> test_table (name) <span class="kw">VALUES</span> (<span class="st">&#39;Sample Data&#39;</span>);</span></code></pre></div></li>
</ul></li>
<li><p><strong>Check Data Persistence</strong>: Now we need to stop and
remove the PostgreSQL container:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> stop postgres_container</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> rm postgres_container</span></code></pre></div>
<p>After this, we can start the container again using the same
volume:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="dt">\</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--name</span> postgres_container <span class="dt">\</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-e</span> POSTGRES_DB=mydatabase <span class="dt">\</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">-e</span> POSTGRES_USER=myuser <span class="dt">\</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">-e</span> POSTGRES_PASSWORD=mypassword <span class="dt">\</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">-v</span> postgres_data:/var/lib/postgresql/data <span class="dt">\</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">-p</span> 5432:5432 <span class="dt">\</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  postgres</span></code></pre></div>
<ul>
<li><p>Next, we connect again and check if our data is still there:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> postgres_container psql <span class="at">-U</span> myuser <span class="at">-d</span> mydatabase</span></code></pre></div>
<div class="sourceCode" id="cb18"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> test_table;</span></code></pre></div></li>
</ul></li>
</ol>
<p>By following these steps, we make sure that our PostgreSQL data is
safely saved using Docker volumes. This helps us manage data better in a
container setup. For more details about Docker volumes, check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">this
article</a>.</p>
<h2
id="how-to-verify-data-persistence-in-a-dockerized-postgresql-database">How
to Verify Data Persistence in a Dockerized PostgreSQL Database</h2>
<p>We can verify data persistence in a Dockerized PostgreSQL database by
following simple steps.</p>
<ol type="1">
<li><p><strong>Start a Dockerized PostgreSQL Container</strong>: First,
we need to run a PostgreSQL container. We use a command to create a
named volume for data.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> postgres_db <span class="at">-e</span> POSTGRES_PASSWORD=mysecretpassword <span class="at">-v</span> pgdata:/var/lib/postgresql/data <span class="at">-d</span> postgres</span></code></pre></div></li>
<li><p><strong>Connect to the PostgreSQL Database</strong>: Next, we
connect to the running PostgreSQL container. We can use the
<code>psql</code> command-line tool or any PostgreSQL client.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> postgres_db psql <span class="at">-U</span> postgres</span></code></pre></div></li>
<li><p><strong>Create a Test Table</strong>: When we are connected, we
create a sample table. We also insert some data into it.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> test_table (<span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>, name <span class="dt">VARCHAR</span>(<span class="dv">100</span>));</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> test_table (name) <span class="kw">VALUES</span> (<span class="st">&#39;Test Data&#39;</span>);</span></code></pre></div></li>
<li><p><strong>Verify Data Insertion</strong>: Now, we check the table
to see if the data was added correctly.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> test_table;</span></code></pre></div></li>
<li><p><strong>Stop and Remove the Container</strong>: After that, we
exit the PostgreSQL prompt. Then, we stop the container.</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="bu">exit</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> stop postgres_db</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> rm postgres_db</span></code></pre></div></li>
<li><p><strong>Restart the Container</strong>: We start a new container
using the same volume. This way, we can check if the data still
exists.</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> postgres_db <span class="at">-e</span> POSTGRES_PASSWORD=mysecretpassword <span class="at">-v</span> pgdata:/var/lib/postgresql/data <span class="at">-d</span> postgres</span></code></pre></div></li>
<li><p><strong>Reconnect to the Database</strong>: Again, we connect to
the PostgreSQL database.</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> postgres_db psql <span class="at">-U</span> postgres</span></code></pre></div></li>
<li><p><strong>Check for Data</strong>: Finally, we query the test table
again. We do this to see if the data is still there.</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> test_table;</span></code></pre></div></li>
</ol>
<p>If we see the data as we expect, it means that data persistence in
our Dockerized PostgreSQL database is working.</p>
<p>For more information about Docker volumes and data persistence, we
can check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">what
are Docker volumes and how do they work</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="how-do-docker-volumes-work-for-postgresql-data-persistence">1.
How do Docker volumes work for PostgreSQL data persistence?</h3>
<p>Docker volumes are very important for keeping data in a Docker
PostgreSQL database. They let us store data outside the container’s
filesystem. This means we can keep our data even if we stop or remove
the containers. It helps our database stay the same and keep its data
safe when we restart or update it. For more details on <a
href="https://bestonlinetutorial.com/docker/what-are-docker-volumes-and-how-do-they-work.html">Docker
volumes and how they work</a>, please check our guide.</p>
<h3
id="what-is-the-difference-between-docker-volumes-and-bind-mounts-for-postgresql">2.
What is the difference between Docker volumes and bind mounts for
PostgreSQL?</h3>
<p>Docker volumes and bind mounts both help us keep our data. But they
are different in how they work. Docker volumes are managed by Docker and
stored in a part of the host filesystem that we can’t access directly.
On the other hand, bind mounts take a directory from the host filesystem
and put it directly into the container. For PostgreSQL, we usually
prefer volumes because they give better isolation and management. To
learn more about <a
href="https://bestonlinetutorial.com/docker/what-are-docker-bind-mounts-and-how-do-they-differ-from-volumes.html">the
differences here</a>.</p>
<h3
id="how-can-i-verify-that-my-postgresql-data-is-persistent-in-docker">3.
How can I verify that my PostgreSQL data is persistent in Docker?</h3>
<p>To check if our data is persistent in Docker PostgreSQL, we can make
a test database or table. Then we insert some data and stop and remove
the container. After that, we create a new container with the same
volume and see if the data is still there. This method helps us make
sure our data stays safe across container lifecycles. For more tips on
testing your setup, look at our article on <a
href="https://bestonlinetutorial.com/docker/how-to-backup-and-restore-docker-volumes.html">how
to back up and restore Docker volumes</a>.</p>
<h3
id="can-i-use-docker-compose-to-manage-postgresql-data-persistence">4.
Can I use Docker Compose to manage PostgreSQL data persistence?</h3>
<p>Yes, Docker Compose makes it easier to manage applications with many
containers, including PostgreSQL. We can define volumes in our
<code>docker-compose.yml</code> file to keep our data safe for the
PostgreSQL service. This setup helps us deploy and scale our database
easily. To learn how to make a Docker Compose file for PostgreSQL, check
out our guide on <a
href="https://bestonlinetutorial.com/docker/how-to-use-docker-compose-for-development-and-testing.html">using
Docker Compose for development</a>.</p>
<h3
id="what-best-practices-should-i-follow-for-managing-docker-volumes-in-postgresql">5.
What best practices should I follow for managing Docker volumes in
PostgreSQL?</h3>
<p>To manage Docker volumes for our PostgreSQL database well, we should
always use named volumes for better organization. Also, we need to back
up our data regularly and keep an eye on our volume usage to avoid
storage problems. We can use Docker commands to check and manage our
volumes easily. For a better understanding of managing volumes, visit
our article on <a
href="https://bestonlinetutorial.com/docker/how-to-list-and-inspect-docker-volumes.html">how
to list and inspect Docker volumes</a>.</p>
<p>By answering these common questions, we hope to help you understand
how to keep data in a Docker PostgreSQL database using volumes. For more
information, check our other resources on Docker and PostgreSQL.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            