
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "BestOnlineTutorial",
      "url": "https://www.bestonlinetutorial.com/"
    }
    </script>
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How Can You Create a MongoDB Database for a Docker Container on Startup?</title>
            <meta name="description" content="Learn how to create a MongoDB database for a Docker container on startup with our step-by-step guide and best practices.">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Can You Create a MongoDB Database for a Docker Container on Startup?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Creating a MongoDB database for a Docker container when it starts is
a simple task. It can really improve how our application works. With
Docker, we can set up a MongoDB instance that automatically starts with
our chosen database each time the container launches. This way, we keep
our development and production environments the same. It makes managing
the database easier.</p>
<p>In this article, we will look at the steps to create a MongoDB
database in a Docker container when it starts. We will talk about the
Docker Compose settings we need. We will learn how to start MongoDB with
a custom database. Also, we will see how to use environment variables to
set up MongoDB well. Lastly, we will explain what a Dockerfile does in
this process. We will also answer some common questions about MongoDB
and Docker working together.</p>
<ul>
<li>How to Create a MongoDB Database for a Docker Container on
Startup</li>
<li>What are the Steps to Create a MongoDB Database in Docker</li>
<li>How Can You Initialize MongoDB with a Custom Database on
Startup</li>
<li>What Docker Compose Configuration is Needed for MongoDB Database
Creation</li>
<li>How Can You Use Environment Variables to Set Up MongoDB on
Startup</li>
<li>What is the Role of Dockerfile in Creating a MongoDB Database</li>
<li>Frequently Asked Questions</li>
</ul>
<h2 id="what-are-the-steps-to-create-a-mongodb-database-in-docker">What
are the Steps to Create a MongoDB Database in Docker</h2>
<p>To create a MongoDB database in a Docker container, we can follow
these steps:</p>
<ol type="1">
<li><p><strong>Install Docker</strong>: First, we need to make sure
Docker is installed on our machine. We can check <a
href="https://bestonlinetutorial.com/docker/how-to-install-docker-on-different-operating-systems.html">How
to Install Docker on Different Operating Systems</a> for help.</p></li>
<li><p><strong>Pull MongoDB Image</strong>: Next, we use the Docker CLI
to pull the official MongoDB image from Docker Hub.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> pull mongo</span></code></pre></div></li>
<li><p><strong>Run a MongoDB Container</strong>: Now, we can start a new
MongoDB container. We can set environment variables to choose the
database name and user info.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> mongodb <span class="at">-d</span> <span class="dt">\</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>-e MONGO_INITDB_ROOT_USERNAME=admin <span class="dt">\</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>-e MONGO_INITDB_ROOT_PASSWORD=password <span class="dt">\</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>-e MONGO_INITDB_DATABASE=mydatabase <span class="dt">\</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>-p 27017:27017 <span class="dt">\</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>mongo</span></code></pre></div></li>
<li><p><strong>Verify the Container</strong>: We should check if the
MongoDB container is running.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> ps</span></code></pre></div></li>
<li><p><strong>Connect to MongoDB</strong>: We can connect to our
MongoDB database using the MongoDB Shell or a GUI tool. Here is how to
connect using the MongoDB shell:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mongo</span> <span class="at">--host</span> localhost <span class="at">--port</span> 27017 <span class="at">-u</span> admin <span class="at">-p</span> password <span class="at">--authenticationDatabase</span> admin</span></code></pre></div></li>
<li><p><strong>Create Additional Databases/Collections</strong>: After
we connect, we can create more databases or collections if we want.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>use newDatabase<span class="op">;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">createCollection</span>(<span class="st">&quot;newCollection&quot;</span>)<span class="op">;</span></span></code></pre></div></li>
</ol>
<p>By following these steps, we can create a MongoDB database in a
Docker container. If we want to do more advanced setups, we can use
Docker Compose to manage our containers. This can make the configuration
easier.</p>
<h2
id="how-can-we-initialize-mongodb-with-a-custom-database-on-startup">How
Can We Initialize MongoDB with a Custom Database on Startup</h2>
<p>To start a MongoDB instance with a custom database in a Docker
container, we can use some environment variables and a custom script.
The MongoDB Docker image lets us run scripts in the
<code>/docker-entrypoint-initdb.d/</code> folder. These scripts will run
when the container starts.</p>
<ol type="1">
<li><p><strong>Create a Custom Initialization Script</strong></p>
<p>First, we create a script called <code>init-mongo.js</code>. This
script has the MongoDB commands we need to make our database and
collections. For example:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>db <span class="op">=</span> db<span class="op">.</span><span class="fu">getSiblingDB</span>(<span class="st">&#39;myCustomDatabase&#39;</span>)<span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">createCollection</span>(<span class="st">&#39;myCollection&#39;</span>)<span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="at">myCollection</span><span class="op">.</span><span class="fu">insert</span>({ <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Sample Document&#39;</span> })<span class="op">;</span></span></code></pre></div></li>
<li><p><strong>Dockerfile Configuration</strong></p>
<p>If we are using a Dockerfile to make our MongoDB image, we should
copy the initialization script to the right folder:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> mongo:latest</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> init-mongo.js /docker-entrypoint-initdb.d/</span></code></pre></div></li>
<li><p><strong>Using Docker Compose</strong></p>
<p>If we use Docker Compose, we can set up our service with the
initialization script right in our <code>docker-compose.yml</code>
file:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">mongodb</span><span class="kw">:</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> mongo:latest</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./init-mongo.js:/docker-entrypoint-initdb.d/init-mongo.js</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MONGO_INITDB_ROOT_USERNAME</span><span class="kw">:</span><span class="at"> root</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MONGO_INITDB_ROOT_PASSWORD</span><span class="kw">:</span><span class="at"> example</span></span></code></pre></div></li>
<li><p><strong>Run the Container</strong></p>
<p>After we set up our Dockerfile or <code>docker-compose.yml</code>, we
build and run our container:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">-d</span></span></code></pre></div></li>
</ol>
<p>This setup makes sure that every time our MongoDB container starts,
it initializes with the custom database and collections we defined in
our script. For more details on setting up MongoDB with Docker, we can
check how to <a
href="https://bestonlinetutorial.com/docker/how-to-create-a-dockerized-mongodb-service.html">create
a Dockerized MongoDB service</a>.</p>
<h2
id="what-docker-compose-configuration-is-needed-for-mongodb-database-creation">What
Docker Compose Configuration is Needed for MongoDB Database
Creation</h2>
<p>To make a MongoDB database in a Docker container using Docker
Compose, we need to create a <code>docker-compose.yml</code> file. This
file tells Docker about the MongoDB service and how to set it up. Here
is a simple example of a configuration for a MongoDB container.</p>
<h3 id="sample-docker-compose.yml-configuration">Sample
<code>docker-compose.yml</code> Configuration</h3>
<div class="sourceCode" id="cb10"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">mongodb</span><span class="kw">:</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> mongo:latest</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">container_name</span><span class="kw">:</span><span class="at"> mongodb_container</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;27017:27017&quot;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MONGO_INITDB_ROOT_USERNAME</span><span class="kw">:</span><span class="at"> root</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MONGO_INITDB_ROOT_PASSWORD</span><span class="kw">:</span><span class="at"> example</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MONGO_INITDB_DATABASE</span><span class="kw">:</span><span class="at"> mydatabase</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> mongodb_data:/data/db</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">mongodb_data</span><span class="kw">:</span></span></code></pre></div>
<h3 id="explanation-of-configuration">Explanation of Configuration</h3>
<ul>
<li><strong>version</strong>: This shows the version of the Docker
Compose file format.</li>
<li><strong>services</strong>: This part lists the services that Docker
Compose will handle.
<ul>
<li><strong>mongodb</strong>: This is the name of our service.
<ul>
<li><strong>image</strong>: This tells which Docker image to use for
MongoDB.</li>
<li><strong>container_name</strong>: This gives a name to the MongoDB
container.</li>
<li><strong>ports</strong>: This connects the container port
<code>27017</code> to the host’s port <code>27017</code>.</li>
<li><strong>environment</strong>: This sets some variables for MongoDB:
<ul>
<li><code>MONGO_INITDB_ROOT_USERNAME</code>: This is the root user for
MongoDB.</li>
<li><code>MONGO_INITDB_ROOT_PASSWORD</code>: This is the password for
the root user.</li>
<li><code>MONGO_INITDB_DATABASE</code>: This is the name of the first
database we want to create.</li>
</ul></li>
<li><strong>volumes</strong>: This connects a named volume
<code>mongodb_data</code> to the MongoDB data folder
<code>/data/db</code> to keep the data safe.</li>
</ul></li>
</ul></li>
</ul>
<h3 id="running-the-configuration">Running the Configuration</h3>
<p>To start the MongoDB container with this configuration, we go to the
folder where our <code>docker-compose.yml</code> file is. Then we
run:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">-d</span></span></code></pre></div>
<p>This command will create and start the MongoDB container as we set in
the Docker Compose file. The database will start with the username,
password, and database name we defined.</p>
<p>For more information on Docker Compose and what it can do, you can
check out <a
href="https://bestonlinetutorial.com/docker/what-is-docker-compose-and-how-does-it-simplify-multi-container-applications.html">what
is Docker Compose and how does it simplify multi-container
applications</a>.</p>
<h2
id="how-can-we-use-environment-variables-to-set-up-mongodb-on-startup">How
Can We Use Environment Variables to Set Up MongoDB on Startup</h2>
<p>Environment variables are very important for setting up MongoDB in
Docker containers. They help us to set things like database names, user
names, and passwords when we start our container. Below are some key
environment variables we can use to set up MongoDB:</p>
<ol type="1">
<li><strong>MONGO_INITDB_ROOT_USERNAME</strong>: This sets the username
for the root user.</li>
<li><strong>MONGO_INITDB_ROOT_PASSWORD</strong>: This sets the password
for the root user.</li>
<li><strong>MONGO_INITDB_DATABASE</strong>: This tells which database to
create when MongoDB starts.</li>
</ol>
<h3 id="example-docker-command">Example Docker Command</h3>
<p>We can set these variables using the <code>docker run</code> command
like this:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="dt">\</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--name</span> mongodb <span class="dt">\</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-e</span> MONGO_INITDB_ROOT_USERNAME=admin <span class="dt">\</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">-e</span> MONGO_INITDB_ROOT_PASSWORD=password <span class="dt">\</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">-e</span> MONGO_INITDB_DATABASE=mydatabase <span class="dt">\</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">-p</span> 27017:27017 <span class="dt">\</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  mongo</span></code></pre></div>
<h3 id="using-docker-compose">Using Docker Compose</h3>
<p>If we use Docker Compose, we can write these environment variables in
our <code>docker-compose.yml</code> file:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.1&#39;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">mongodb</span><span class="kw">:</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> mongo</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">restart</span><span class="kw">:</span><span class="at"> always</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MONGO_INITDB_ROOT_USERNAME</span><span class="kw">:</span><span class="at"> admin</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MONGO_INITDB_ROOT_PASSWORD</span><span class="kw">:</span><span class="at"> password</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MONGO_INITDB_DATABASE</span><span class="kw">:</span><span class="at"> mydatabase</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;27017:27017&quot;</span></span></code></pre></div>
<h3 id="accessing-environment-variables-in-mongodb">Accessing
Environment Variables in MongoDB</h3>
<p>After the container starts, we can access the MongoDB instance with
the credentials we set:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mongo</span> <span class="at">-u</span> admin <span class="at">-p</span> password <span class="at">--authenticationDatabase</span> admin mydatabase</span></code></pre></div>
<p>This setup makes sure that MongoDB starts with the right settings
every time we start the container. This is a good solution for both
development and production. For more details on setting up MongoDB with
Docker, check this <a
href="https://bestonlinetutorial.com/docker/how-to-create-a-dockerized-mongodb-service.html">MongoDB
Docker setup guide</a>.</p>
<h2
id="what-is-the-role-of-dockerfile-in-creating-a-mongodb-database">What
is the Role of Dockerfile in Creating a MongoDB Database</h2>
<p>A Dockerfile is very important for making a MongoDB database inside a
Docker container. It tells how to set up the environment and what
settings to use to create a Docker image for MongoDB. Here is how it
works:</p>
<ol type="1">
<li><p><strong>Base Image Specification</strong>: The Dockerfile starts
with a base image. We often use the official MongoDB image from Docker
Hub. This gives our container the tools it needs to run MongoDB.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> mongo:latest</span></code></pre></div></li>
<li><p><strong>Environment Configuration</strong>: We can set up
environment variables in the Dockerfile. This helps to configure MongoDB
settings like the default user, password, and database name. This step
is important for setting up our MongoDB properly.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MONGO_INITDB_ROOT_USERNAME=root</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MONGO_INITDB_ROOT_PASSWORD=example</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ENV</span> MONGO_INITDB_DATABASE=mydatabase</span></code></pre></div></li>
<li><p><strong>Copying Initialization Scripts</strong>: If we want to
add data or set up the database when it starts, we can copy scripts into
the <code>/docker-entrypoint-initdb.d</code> folder. MongoDB will run
these scripts when the container starts.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> init-mongo.js /docker-entrypoint-initdb.d/</span></code></pre></div></li>
<li><p><strong>Exposing Ports</strong>: The Dockerfile can tell which
ports to open for outside access to the MongoDB service. MongoDB usually
uses port <code>27017</code>.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">EXPOSE</span> 27017</span></code></pre></div></li>
<li><p><strong>Running Commands</strong>: We can also add commands that
run when the container starts. For MongoDB, the default command will
take care of this.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;mongod&quot;</span>]</span></code></pre></div></li>
</ol>
<p>When we set up our Dockerfile the right way, we make sure the MongoDB
container builds correctly. It will be ready to handle requests as soon
as it starts. This is very important for smooth deployments and keeping
environments the same, especially in development and production. For
more details about Dockerfiles, you can check <a
href="https://bestonlinetutorial.com/docker/what-is-the-dockerfile-and-how-do-you-create-one.html">this
resource</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="how-do-we-create-a-mongodb-database-in-a-docker-container">1.
How do we create a MongoDB database in a Docker container?</h3>
<p>To create a MongoDB database in a Docker container, we can use the
official MongoDB image from Docker Hub. We use the
<code>docker run</code> command to create and start a container. We need
to specify the MongoDB version and any needed environment variables like
<code>MONGO_INITDB_DATABASE</code> to set the database name. For
example:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">--name</span> mongodb <span class="at">-e</span> MONGO_INITDB_DATABASE=mydatabase <span class="at">-d</span> mongo</span></code></pre></div>
<p>This command makes a MongoDB database called
<code>mydatabase</code>.</p>
<h3
id="can-we-initialize-mongodb-with-custom-data-on-startup-in-docker">2.
Can we initialize MongoDB with custom data on startup in Docker?</h3>
<p>Yes, we can initialize MongoDB with custom data on startup in a
Docker container. We need to create a JavaScript file with our
initialization scripts. Then we mount it to the
<code>/docker-entrypoint-initdb.d/</code> directory in our MongoDB
container. MongoDB will run any <code>.js</code> or <code>.sh</code>
files in this directory when the container starts. This way, we can set
up our database structure, collections, and initial data.</p>
<h3
id="what-is-docker-compose-and-how-does-it-simplify-mongodb-setup">3.
What is Docker Compose and how does it simplify MongoDB setup?</h3>
<p>Docker Compose is a tool that helps us define and run multi-container
Docker apps. It lets us define services, networks, and volumes in one
<code>docker-compose.yml</code> file. To set up a MongoDB database, we
can specify the MongoDB service, environment variables, and volumes in
this file. This makes it easier to start our MongoDB container with
other services. For example:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3&#39;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">mongodb</span><span class="kw">:</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> mongo</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">MONGO_INITDB_DATABASE</span><span class="kw">:</span><span class="at"> mydatabase</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> mongo-data:/data/db</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">mongo-data</span><span class="kw">:</span></span></code></pre></div>
<h3
id="how-can-we-use-environment-variables-to-configure-mongodb-on-startup">4.
How can we use environment variables to configure MongoDB on
startup?</h3>
<p>We can use environment variables to configure MongoDB on startup. We
can pass them during the <code>docker run</code> command or in a Docker
Compose file. For example, we can set
<code>MONGO_INITDB_ROOT_USERNAME</code> and
<code>MONGO_INITDB_ROOT_PASSWORD</code> to create an admin user. Using
environment variables helps us manage configurations without putting
sensitive data directly into our images.</p>
<h3
id="what-role-does-the-dockerfile-play-in-creating-a-mongodb-database">5.
What role does the Dockerfile play in creating a MongoDB database?</h3>
<p>The Dockerfile is important for making custom Docker images,
including ones for MongoDB. While we can use the official MongoDB image
directly, we can create a custom Dockerfile to install more software,
configure settings, or add initialization scripts. This way, we can
create a MongoDB environment that fits our application needs. We can
start with:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> mongo</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> init.js /docker-entrypoint-initdb.d/</span></code></pre></div>
<p>This setup copies our initialization script into the container.</p>
<p>For more help on using Docker and MongoDB, we can check these
resources: <a
href="https://bestonlinetutorial.com/docker/how-to-create-a-dockerized-mongodb-service.html">How
to Create a Dockerized MongoDB Service</a> and <a
href="https://bestonlinetutorial.com/docker/what-is-docker-compose-and-how-does-it-simplify-multi-container-applications.html">What
is Docker Compose and How Does it Simplify Multi-Container
Applications</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            