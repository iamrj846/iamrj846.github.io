
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>What is the Difference Between RUN and CMD in a Dockerfile?</title>
            <meta name="description" content="Discover the key differences between RUN and CMD in a Dockerfile. Learn how to optimize your Docker images effectively!">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">What is the Difference Between RUN and CMD in a Dockerfile?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>Understanding the difference between RUN and CMD in a Dockerfile is
very important for making good Docker images. RUN helps us run commands
while we build the image. We can use it to install packages or set up
the environment. CMD, on the other hand, tells us what command to run
when we start a container from the image. Learning these two commands
can really improve our Docker work and help us with containerized
apps.</p>
<p>In this article, we will look at the small details of RUN and CMD in
Dockerfiles. We will explain what they do and how we can use them. We
will see how to use RUN to install what we need. We will also learn how
to use CMD to set default commands. Plus, we will talk about when to
pick one over the other. Also, we will answer some common questions to
help clear up confusion for Docker users.</p>
<ul>
<li>What is the Difference Between RUN and CMD in a Dockerfile</li>
<li>Understanding RUN in a Dockerfile</li>
<li>Understanding CMD in a Dockerfile</li>
<li>How to Use RUN to Install Dependencies</li>
<li>How to Use CMD to Specify Default Commands</li>
<li>When to Use RUN and When to Use CMD</li>
<li>Frequently Asked Questions</li>
</ul>
<h2 id="what-is-the-difference-between-run-and-cmd-in-a-dockerfile">What
is the Difference Between RUN and CMD in a Dockerfile</h2>
<p>In a Dockerfile, <code>RUN</code> and <code>CMD</code> have different
jobs. We use <code>RUN</code> to run commands while we build the image.
<code>CMD</code> tells us the default command that runs when we start a
container from the image.</p>
<h2 id="understanding-run-in-a-dockerfile">Understanding RUN in a
Dockerfile</h2>
<p>We mainly use the <code>RUN</code> instruction to install software,
set up the environment, or do other tasks when we create the image. Each
<code>RUN</code> command makes a new layer in the Docker image. If we
are not careful, this can make the image bigger.</p>
<h3 id="example-of-run">Example of RUN</h3>
<div class="sourceCode" id="cb1"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:20.04</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Install the curl package</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> install <span class="at">-y</span> curl</span></code></pre></div>
<p>In this example, <code>RUN</code> updates the package list and
installs the <code>curl</code> package. This creates a new image layer
that has <code>curl</code>.</p>
<h2 id="understanding-cmd-in-a-dockerfile">Understanding CMD in a
Dockerfile</h2>
<p>The <code>CMD</code> instruction sets the default command that runs
when we start a container from the image. We can only have one
<code>CMD</code> instruction in a Dockerfile. If we write more, only the
last one will work.</p>
<h3 id="example-of-cmd">Example of CMD</h3>
<div class="sourceCode" id="cb2"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:20.04</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the default command to execute when the container starts</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;echo&quot;</span>, <span class="st">&quot;Hello, Docker!&quot;</span>]</span></code></pre></div>
<p>In this example, when we run a container from the image, it will run
the command <code>echo Hello, Docker!</code>.</p>
<h2 id="how-to-use-run-to-install-dependencies">How to Use RUN to
Install Dependencies</h2>
<p>We can use <code>RUN</code> to install dependencies in one layer.
This helps to keep the image size smaller. It is common to use one
<code>RUN</code> instruction for installing many packages.</p>
<h3 id="example-of-installing-multiple-packages">Example of Installing
Multiple Packages</h3>
<div class="sourceCode" id="cb3"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> node:14</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Install dependencies</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">apt-get</span> install <span class="at">-y</span> git <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="ex">npm</span> install express</span></code></pre></div>
<p>This example updates the package list. It installs <code>git</code>
and the <code>express</code> package all in one layer.</p>
<h2 id="how-to-use-cmd-to-specify-default-commands">How to Use CMD to
Specify Default Commands</h2>
<p>We can use <code>CMD</code> in two ways: exec form or shell form. We
recommend using exec form. It avoids the shell and helps handle signals
better.</p>
<h3 id="example-of-cmd-in-exec-form">Example of CMD in Exec Form</h3>
<div class="sourceCode" id="cb4"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> python:3.9</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the default command to run a Python script</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;python&quot;</span>, <span class="st">&quot;app.py&quot;</span>]</span></code></pre></div>
<p>In this example, <code>CMD</code> runs the <code>app.py</code> script
when the container starts.</p>
<h2 id="when-to-use-run-and-when-to-use-cmd">When to Use RUN and When to
Use CMD</h2>
<ul>
<li><strong>Use RUN</strong> when we need to install software or set up
the environment during the build process.</li>
<li><strong>Use CMD</strong> to tell what command should run when we
start a container from the built image.</li>
</ul>
<p>This helps us to keep building the image separate from running the
container.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<p><strong>Q: Can I use both RUN and CMD in the same
Dockerfile?</strong><br />
A: Yes, we can use both. <code>RUN</code> is for building the image.
<code>CMD</code> is for running the container.</p>
<p><strong>Q: What happens if I specify multiple CMD
instructions?</strong><br />
A: Only the last <code>CMD</code> instruction will work. The earlier
ones are ignored.</p>
<p>For more insights on Docker and its parts, you can check <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">what
is Docker and why should you use it</a>.</p>
<h2 id="understanding-cmd-in-a-dockerfile-1">Understanding CMD in a
Dockerfile</h2>
<p>In a Dockerfile, the <code>CMD</code> command tells what should run
by default when we start a container from the image. This is different
from <code>RUN</code>, which runs commands when we build the image.
<code>CMD</code> shows how the container acts when it is running.</p>
<h3 id="syntax">Syntax</h3>
<p>There are three ways to write the <code>CMD</code> command:</p>
<ol type="1">
<li><p><strong>Exec form</strong> (this is the best way):</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;executable&quot;</span>,<span class="st">&quot;param1&quot;</span>,<span class="st">&quot;param2&quot;</span>]</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;nginx&quot;</span>, <span class="st">&quot;-g&quot;</span>, <span class="st">&quot;daemon off;&quot;</span>]</span></code></pre></div></li>
<li><p><strong>Shell form</strong>:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> <span class="bu">command</span> param1 param2</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> <span class="ex">nginx</span> <span class="at">-g</span> <span class="st">&#39;daemon off;&#39;</span></span></code></pre></div></li>
<li><p><strong>Default parameters for
<code>ENTRYPOINT</code></strong>:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;param1&quot;</span>, <span class="st">&quot;param2&quot;</span>]</span></code></pre></div>
<p>We use this way with the <code>ENTRYPOINT</code> command.</p></li>
</ol>
<h3 id="behavior">Behavior</h3>
<ul>
<li><p>We can change the <code>CMD</code> command by giving a different
command when we run the container. For example:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run myimage mycommand</span></code></pre></div></li>
<li><p>We can only have one <code>CMD</code> command in a Dockerfile. If
we write more than one, only the last one will work.</p></li>
<li><p>We often use <code>CMD</code> to set the main thing that the
container runs like starting a web server or running a script.</p></li>
</ul>
<h3 id="best-practices">Best Practices</h3>
<ul>
<li>It is better to use the exec form to avoid problems with
signals.</li>
<li>We should place the <code>CMD</code> command at the end of the
Dockerfile after all <code>RUN</code> commands and settings.</li>
<li>Use <code>CMD</code> for default commands. Use
<code>ENTRYPOINT</code> for running commands when we need it.</li>
</ul>
<p>For more information on Docker commands and best practices, you can
check <a
href="https://bestonlinetutorial.com/docker/what-is-a-docker-image-and-how-is-it-different-from-a-container.html">what
is a Docker image and how is it different from a container</a>.</p>
<h2 id="how-to-use-run-to-install-dependencies-1">How to Use RUN to
Install Dependencies</h2>
<p>In a Dockerfile, we use the <code>RUN</code> instruction to run
commands when we build the image. This is often used to install
dependencies and set up the environment. Each <code>RUN</code>
instruction makes a new layer in the image.</p>
<p>To install dependencies using the <code>RUN</code> command, we
usually use a package manager. Here are some examples for different
package managers:</p>
<h3 id="example-for-ubuntu-using-apt-get">Example for Ubuntu (using
<code>apt-get</code>)</h3>
<div class="sourceCode" id="cb11"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:20.04</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="ex">apt-get</span> install <span class="at">-y</span> <span class="dt">\</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    curl <span class="dt">\</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    git <span class="dt">\</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    build-essential</span></code></pre></div>
<h3 id="example-for-alpine-using-apk">Example for Alpine (using
<code>apk</code>)</h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> alpine:latest</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">apk</span> add <span class="at">--no-cache</span> <span class="dt">\</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    curl <span class="dt">\</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    git <span class="dt">\</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    build-base</span></code></pre></div>
<h3 id="example-for-node.js-using-npm">Example for Node.js (using
<code>npm</code>)</h3>
<div class="sourceCode" id="cb13"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> node:14</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WORKDIR</span> /app</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> package.json package-lock.json ./</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">npm</span> install</span></code></pre></div>
<h3 id="example-for-python-using-pip">Example for Python (using
<code>pip</code>)</h3>
<div class="sourceCode" id="cb14"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> python:3.9</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WORKDIR</span> /app</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> requirements.txt ./</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">pip</span> install <span class="at">--no-cache-dir</span> <span class="at">-r</span> requirements.txt</span></code></pre></div>
<h3 id="multiple-commands-in-a-single-run">Multiple Commands in a Single
<code>RUN</code></h3>
<p>We can combine many commands in one <code>RUN</code> instruction to
reduce the number of layers:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">apt-get</span> install <span class="at">-y</span> <span class="dt">\</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    curl <span class="dt">\</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    git <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">apt-get</span> clean</span></code></pre></div>
<p>Using <code>RUN</code> to install dependencies makes sure that our
Docker image has everything it needs to run our application when the
container starts. This way is very important for making environments
that we can repeat. We should use it well in our Dockerfile to make the
build work better.</p>
<h2 id="how-to-use-cmd-to-specify-default-commands-1">How to Use CMD to
Specify Default Commands</h2>
<p>In a Dockerfile, we use the <code>CMD</code> instruction to set the
default command that runs when we start a container from the image. This
is different from <code>RUN</code>. <code>RUN</code> executes commands
when we build the image. But <code>CMD</code> sets the command that runs
when we launch the container.</p>
<h3 id="syntax-1">Syntax</h3>
<p>There are three ways to write the <code>CMD</code> instruction:</p>
<ol type="1">
<li><p><strong>Exec form</strong> (we recommend this):</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;executable&quot;</span>, <span class="st">&quot;param1&quot;</span>, <span class="st">&quot;param2&quot;</span>]</span></code></pre></div></li>
<li><p><strong>Shell form</strong>:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> <span class="bu">command</span> param1 param2</span></code></pre></div></li>
<li><p><strong>Default parameters for ENTRYPOINT</strong>:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;param1&quot;</span>, <span class="st">&quot;param2&quot;</span>]</span></code></pre></div></li>
</ol>
<h3 id="examples">Examples</h3>
<p><strong>Example 1: Using Exec Form</strong></p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;echo&quot;</span>, <span class="st">&quot;Hello, World!&quot;</span>]</span></code></pre></div>
<p>This command will show “Hello, World!” when the container starts.</p>
<p><strong>Example 2: Using Shell Form</strong></p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> <span class="bu">echo</span> <span class="st">&quot;Hello, World!&quot;</span></span></code></pre></div>
<p>This also shows “Hello, World!” but it runs in a shell.</p>
<p><strong>Example 3: Setting Default Parameters for
ENTRYPOINT</strong></p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ENTRYPOINT</span> [<span class="st">&quot;top&quot;</span>, <span class="st">&quot;-b&quot;</span>]</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;-c&quot;</span>]</span></code></pre></div>
<p>Here, <code>CMD</code> gives default options to the
<code>ENTRYPOINT</code>. The container will run
<code>top -b -c</code>.</p>
<h3 id="important-notes">Important Notes</h3>
<ul>
<li>We can only have one <code>CMD</code> instruction in a Dockerfile.
If we put more than one, only the last one will work.</li>
<li>If we run the container with a command, that command will replace
the <code>CMD</code> in the Dockerfile.</li>
<li>Use <code>CMD</code> when we want to set defaults that we can change
easily when the container runs.</li>
</ul>
<p>For more details on Dockerfile instructions, check this article on <a
href="https://bestonlinetutorial.com/docker/what-is-the-dockerfile-and-how-do-you-create-one.html">what
is a Dockerfile and how do you create one</a>.</p>
<h2 id="when-to-use-run-and-when-to-use-cmd-1">When to Use RUN and When
to Use CMD</h2>
<p>In a Dockerfile, it is very important to know when to use
<code>RUN</code> and when to use <code>CMD</code>. This helps us to
build good images and set how containers behave.</p>
<h3 id="run">RUN</h3>
<ul>
<li>We use <code>RUN</code> to run commands while we build the image.
This is good for installing software or changing the filesystem.</li>
<li>Each command we run creates a new layer in the Docker image.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:20.04</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> install <span class="at">-y</span> <span class="dt">\</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    python3 <span class="dt">\</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    python3-pip</span></code></pre></div>
<h3 id="cmd">CMD</h3>
<ul>
<li>We use <code>CMD</code> to set the default command that runs when we
start a container from the image.</li>
<li>We can change this by adding arguments to <code>docker run</code>.
If we have many <code>CMD</code> instructions, only the last one will
work.</li>
</ul>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;python3&quot;</span>, <span class="st">&quot;app.py&quot;</span>]</span></code></pre></div>
<h3 id="choosing-between-run-and-cmd">Choosing Between RUN and CMD</h3>
<ul>
<li>Use <code>RUN</code> when we need to do tasks that build the image,
like installing dependencies.</li>
<li>Use <code>CMD</code> to set the default behavior when we run the
container, like starting an application.</li>
</ul>
<p>By knowing these differences, we can organize our Dockerfile well.
This helps to make image build times faster and the container work
better. For more tips on Docker best practices, check out <a
href="https://bestonlinetutorial.com/docker/what-are-the-benefits-of-using-docker-in-development.html">this
article</a>.</p>
<h2 id="frequently-asked-questions-1">Frequently Asked Questions</h2>
<h3
id="what-is-the-primary-purpose-of-the-run-command-in-a-dockerfile">1.
What is the primary purpose of the RUN command in a Dockerfile?</h3>
<p>We use the <code>RUN</code> command in a Dockerfile to run commands
while we build the image. It helps us install packages, set up the
environment, or make files that will be in the final Docker image.
Knowing how to use the <code>RUN</code> command well is very important
to make Docker image builds better.</p>
<h3 id="how-does-cmd-differ-from-run-in-a-dockerfile">2. How does CMD
differ from RUN in a Dockerfile?</h3>
<p>The <code>CMD</code> command in a Dockerfile tells us the default
command that will run when a container starts from the image we built.
Unlike <code>RUN</code>, which runs commands when we build,
<code>CMD</code> is for when the container runs. We can change
<code>CMD</code> with command-line arguments. This difference is
important for using Docker to containerize applications.</p>
<h3 id="can-i-use-both-run-and-cmd-in-the-same-dockerfile">3. Can I use
both RUN and CMD in the same Dockerfile?</h3>
<p>Yes, we can use both <code>RUN</code> and <code>CMD</code> in the
same Dockerfile. We use <code>RUN</code> to install dependencies or set
up the environment while we build the image. Then, <code>CMD</code>
tells us what command to run when the container starts. This way, we can
have a flexible Dockerfile that builds and runs applications
correctly.</p>
<h3 id="when-should-i-use-run-instead-of-cmd-in-my-dockerfile">4. When
should I use RUN instead of CMD in my Dockerfile?</h3>
<p>We should use <code>RUN</code> when we need to install packages or do
setup tasks during the image build. On the other hand, we use
<code>CMD</code> to say what command should run when the container is
up. This difference helps us keep our Dockerfile organized for both
making images and running containers.</p>
<h3
id="what-happens-if-i-use-cmd-and-entrypoint-together-in-a-dockerfile">5.
What happens if I use CMD and ENTRYPOINT together in a Dockerfile?</h3>
<p>When we use <code>CMD</code> and <code>ENTRYPOINT</code> together in
a Dockerfile, <code>CMD</code> gives default arguments to the
<code>ENTRYPOINT</code>. This way, we can set a main command with
<code>ENTRYPOINT</code> and use <code>CMD</code> to give arguments that
we can change when we run it. This mix gives us more choices on how our
Docker container works. For more details on Docker commands, check out
<a
href="https://bestonlinetutorial.com/docker/what-are-the-key-differences-between-cmd-and-entrypoint-in-a-dockerfile.html">this
article on the key differences between CMD and ENTRYPOINT</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            