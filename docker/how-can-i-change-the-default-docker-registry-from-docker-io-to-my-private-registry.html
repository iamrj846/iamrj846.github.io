
    
            <!DOCTYPE html>
        <html lang="en">

        <head>
            <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFCQEJR7TD"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-TFCQEJR7TD');
            </script>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- Common CSS & Icons -->
            <link rel="icon" href="/favicon.ico" type="image/x-icon">
            <link rel="stylesheet" href="/assets/plugins/highlight/styles/monokai-sublime.css">
            <link id="theme-style" rel="stylesheet" href="/assets/css/theme-8.css">
            <link rel="stylesheet" href="/assets/css/post.css">
            <title>How Can I Change the Default Docker Registry from Docker.io to My Private Registry?</title>
            <meta name="description" content="Learn how to change the default Docker registry from Docker.io to your private registry with this easy step-by-step guide.">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	        <script src="/assets/js/blog.js"></script>
        </head>

        <body>

            <div id="header-placeholder"></div>

            <div class="main-wrapper">

                <article class="blog-post px-3 py-5 p-md-5">
                    <div class="container single-col-max-width">
                        <header class="blog-post-header">
                            <h1 class="title mb-2">How Can I Change the Default Docker Registry from Docker.io to My Private Registry?</h1>
                        </header>

                        <div class="blog-post-body">
                            <p>To change the default Docker registry from Docker.io to your private
registry, we need to edit the Docker daemon config file. We can do this
by updating the <code>daemon.json</code> file. You can usually find this
file at <code>/etc/docker/daemon.json</code>. Here, we will put your
private registry URL. This change makes sure that all Docker commands
will use your private registry instead of Docker.io. This will help us
manage and deploy images better.</p>
<p>In this article, we will look at the steps to set up Docker to use
our private registry. We will talk about how to change the default
registry settings. We will also see how to authenticate Docker with our
private registry. We will explain how to push and pull images too.
Lastly, we will check how to verify our Docker registry settings and
answer some common questions about Docker registry management.</p>
<ul>
<li>How to Change the Default Docker Registry from Docker.io to My
Private Registry<br />
</li>
<li>How to Configure Docker to Use My Private Registry<br />
</li>
<li>How to Authenticate Docker with My Private Registry<br />
</li>
<li>How to Push Images to My Private Registry<br />
</li>
<li>How to Pull Images from My Private Registry<br />
</li>
<li>How to Verify Docker Registry Configuration<br />
</li>
<li>Frequently Asked Questions</li>
</ul>
<h2 id="how-to-configure-docker-to-use-my-private-registry">How to
Configure Docker to Use My Private Registry</h2>
<p>To set up Docker to use our private registry instead of the default
Docker Hub (docker.io), we need to change the Docker daemon
configuration file. This means we will set the registry URL in the
<code>daemon.json</code> file. Let’s go through the steps together:</p>
<ol type="1">
<li><strong>Edit the Docker daemon configuration file</strong>:
<ul>
<li>We should open or create the <code>/etc/docker/daemon.json</code>
file with a text editor.</li>
</ul>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nano /etc/docker/daemon.json</span></code></pre></div></li>
<li><strong>Add the private registry URL</strong>:
<ul>
<li>Now, we need to add this JSON config. Replace
<code>myregistry.example.com</code> with the URL of our private
registry:</li>
</ul>
<div class="sourceCode" id="cb2"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;registry-mirrors&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;https://myregistry.example.com&quot;</span><span class="ot">]</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div></li>
<li><strong>Restart Docker</strong>:
<ul>
<li>After saving the changes, we must restart the Docker service so it
can use the new config.</li>
</ul>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart docker</span></code></pre></div></li>
<li><strong>Verify the configuration</strong>:
<ul>
<li>We can check if Docker is using our private registry by
running:</li>
</ul>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info</span></code></pre></div>
We need to look for the “Registry” section in the output. This will help
us confirm that our private registry is listed.</li>
</ol>
<p>By following these steps, we have set up Docker to use our private
registry. Let’s also make sure our private registry is reachable from
the Docker host.</p>
<h2 id="how-to-authenticate-docker-with-my-private-registry">How to
Authenticate Docker with My Private Registry</h2>
<p>To authenticate Docker with our private registry, we can use the
<code>docker login</code> command. This command helps us enter our
username and password for the private registry. It makes sure Docker can
pull and push images safely.</p>
<h3 id="steps-to-authenticate-docker">Steps to Authenticate Docker</h3>
<ol type="1">
<li><p><strong>Run the login command</strong>: We use this command to
log in to our private registry.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> login <span class="op">&lt;</span>your-private-registry<span class="op">&gt;</span></span></code></pre></div>
<p>Here, we replace <code>&lt;your-private-registry&gt;</code> with the
URL of our private registry, like
<code>myregistry.local:5000</code>.</p></li>
<li><p><strong>Enter Credentials</strong>: Docker will ask us to enter
our username and password for the private registry.</p></li>
<li><p><strong>Success Message</strong>: If our credentials are correct,
we will see this message saying that login was successful:</p>
<pre><code>Login Succeeded</code></pre></li>
<li><p><strong>Configuration Verification</strong>: After we log in,
Docker saves our credentials in a file. This file is in
<code>~/.docker/config.json</code>. We can check this file to see if our
login info is saved.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;auths&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;&lt;your-private-registry&gt;&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;auth&quot;</span><span class="fu">:</span> <span class="st">&quot;&lt;base64-encoded-credentials&gt;&quot;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div></li>
<li><p><strong>Log Out</strong>: If we want to log out from the private
registry, we can use this command:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> logout <span class="op">&lt;</span>your-private-registry<span class="op">&gt;</span></span></code></pre></div></li>
</ol>
<p>This will remove our credentials from the Docker configuration. So no
more pulls or pushes can happen until we log in again.</p>
<p>For more information on Docker registries, we can check the article
on <a
href="https://bestonlinetutorial.com/docker/what-are-docker-image-registries-and-how-do-they-work.html">Docker
Image Registries</a>.</p>
<h2 id="how-to-push-images-to-my-private-registry">How to Push Images to
My Private Registry</h2>
<p>To push images to our private Docker registry, we need to follow some
simple steps.</p>
<ol type="1">
<li><p><strong>Tag the Image</strong>: First, we should make sure the
image we want to push is tagged with our private registry’s URL. The tag
format looks like this:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> tag <span class="op">&lt;</span>image_name<span class="op">&gt;</span>:<span class="op">&lt;</span>tag<span class="op">&gt;</span> <span class="op">&lt;</span>your_registry_url<span class="op">&gt;</span>/<span class="op">&lt;</span>image_name<span class="op">&gt;</span>:<span class="op">&lt;</span>tag<span class="op">&gt;</span></span></code></pre></div>
<p>For example:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> tag myapp:latest myprivateregistry.com/myapp:latest</span></code></pre></div></li>
<li><p><strong>Log in to Your Private Registry</strong>: Next, we need
to log in to our private registry. We do this using the
<code>docker login</code> command:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> login <span class="op">&lt;</span>your_registry_url<span class="op">&gt;</span></span></code></pre></div>
<p>It will ask us for our username and password.</p></li>
<li><p><strong>Push the Image</strong>: Now we can send the tagged image
to our private registry. We use the <code>docker push</code> command for
this:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> push <span class="op">&lt;</span>your_registry_url<span class="op">&gt;</span>/<span class="op">&lt;</span>image_name<span class="op">&gt;</span>:<span class="op">&lt;</span>tag<span class="op">&gt;</span></span></code></pre></div>
<p>For example:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> push myprivateregistry.com/myapp:latest</span></code></pre></div></li>
<li><p><strong>Verify the Push</strong>: Finally, we should check if the
image has been pushed successfully. We can do this by listing the images
in our private registry. If we have a web interface for the registry, we
can use that too.</p></li>
</ol>
<p>We must make sure the Docker daemon is running. Also, we need to have
network access to our private registry. For more details on managing
Docker images, we can check out <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">what
are Docker images and how do they work</a>.</p>
<h2 id="how-to-pull-images-from-my-private-registry">How to Pull Images
from My Private Registry</h2>
<p>We can pull images from our private Docker registry by using the
<code>docker pull</code> command. We need to type the URL of our private
registry and the name of the image. First, we should make sure our
Docker client is set up and logged in to access the private
registry.</p>
<h3 id="basic-pull-command">Basic Pull Command</h3>
<p>The simple way to pull an image is:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> pull <span class="op">&lt;</span>your-private-registry-url<span class="op">&gt;</span>/<span class="op">&lt;</span>image-name<span class="op">&gt;</span>:<span class="op">&lt;</span>tag<span class="op">&gt;</span></span></code></pre></div>
<h3 id="example">Example</h3>
<p>Let’s say our private registry is at <code>myregistry.com</code>. If
we want to pull the image called <code>myapp</code> with the tag
<code>latest</code>, we would use this command:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> pull myregistry.com/myapp:latest</span></code></pre></div>
<h3 id="docker-authentication">Docker Authentication</h3>
<p>Before we pull images, we should be logged in. If our private
registry needs a login, we can use:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> login <span class="op">&lt;</span>your-private-registry-url<span class="op">&gt;</span></span></code></pre></div>
<p>This command will ask for our username and password. After we log in
successfully, we can pull images from our private registry.</p>
<h3 id="verify-image-pull">Verify Image Pull</h3>
<p>After pulling the image, we can check if it is on our machine by
using:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> images</span></code></pre></div>
<p>This command will show all the images we have, including those from
our private registry.</p>
<p>For more information about Docker images and how they work, we can
check <a
href="https://bestonlinetutorial.com/docker/what-are-docker-images-and-how-do-they-work.html">What
are Docker Images and How Do They Work?</a>.</p>
<h2 id="how-to-verify-docker-registry-configuration">How to Verify
Docker Registry Configuration</h2>
<p>We need to check if our Docker setup is ready to use our private
registry instead of the default Docker Hub (docker.io). Here are the
steps we can follow:</p>
<ol type="1">
<li><p><strong>Check Docker Configuration</strong>: Let’s look at the
Docker daemon configuration file. It is usually found at
<code>/etc/docker/daemon.json</code>. We want to make sure our private
registry is listed there.</p>
<p>Example configuration:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;insecure-registries&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;myprivateregistry.com:5000&quot;</span><span class="ot">]</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div></li>
<li><p><strong>Test Docker Login</strong>: We can use the Docker login
command to log in to our private registry. Just replace
<code>myprivateregistry.com:5000</code> with our real registry URL.</p>
<p>Command:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> login myprivateregistry.com:5000</span></code></pre></div>
<p>We should see a message that says we logged in successfully. This
means our credentials are good.</p></li>
<li><p><strong>List Docker Registries</strong>: We can check the current
registry settings. We do this by using the Docker info command.</p>
<p>Command:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> info</span></code></pre></div>
<p>In the output, we look for the <code>Registry</code> section. We want
to see our private registry listed there.</p></li>
<li><p><strong>Push and Pull Test</strong>: Let’s push a test image to
our private registry. This will help us check if everything is working
right.</p>
<p>First, we create a test image:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> pull hello-world</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> tag hello-world myprivateregistry.com:5000/hello-world</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> push myprivateregistry.com:5000/hello-world</span></code></pre></div>
<p>After we push, we can try to pull the image back:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> pull myprivateregistry.com:5000/hello-world</span></code></pre></div></li>
<li><p><strong>Check Logs</strong>: If we have problems, we can check
the Docker daemon logs for any error messages about the registry. We use
the command:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">journalctl</span> <span class="at">-u</span> docker.service</span></code></pre></div></li>
</ol>
<p>By following these steps, we can make sure our Docker setup is ready
to use our private registry properly. If we want to learn more about
Docker and how it works, we can read <a
href="https://bestonlinetutorial.com/docker/what-are-docker-image-registries-and-how-do-they-work.html">What
are Docker Image Registries and How Do They Work?</a>.</p>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="how-do-we-change-the-default-docker-registry-settings">How do we
change the default Docker registry settings?</h3>
<p>To change the default Docker registry from Docker.io to our private
registry, we need to edit the Docker daemon configuration. We open the
<code>/etc/docker/daemon.json</code> file. If the file does not exist,
we create it. We add
<code>"registry-mirrors": ["http://your-private-registry:5000"]</code>
to the file. After saving the changes, we restart the Docker service
with <code>sudo systemctl restart docker</code>. This will make the new
settings work.</p>
<h3 id="how-can-we-authenticate-docker-with-our-private-registry">How
can we authenticate Docker with our private registry?</h3>
<p>To authenticate Docker with our private registry, we use the
<code>docker login</code> command. We run
<code>docker login your-private-registry</code>. Then, we will see a
prompt to enter our username and password. After we authenticate, Docker
will save our credentials. This allows us to push and pull images
without typing our credentials again.</p>
<h3
id="what-steps-do-we-take-to-push-images-to-our-private-docker-registry">What
steps do we take to push images to our private Docker registry?</h3>
<p>To push images to our private Docker registry, we first tag the
image. We use the command
<code>docker tag your-image:tag your-private-registry:5000/your-image:tag</code>.
After that, we run
<code>docker push your-private-registry:5000/your-image:tag</code>. It
is important to be logged in to our private registry before we push
images. If we are not logged in, the push will not work.</p>
<h3 id="how-do-we-verify-the-configuration-of-our-docker-registry">How
do we verify the configuration of our Docker registry?</h3>
<p>To verify our Docker registry configuration, we can run
<code>docker info</code>. We check the “Registry” section. It should
show the URL of our private registry instead of Docker.io. Also, we can
test pulling an image from our private registry. We run
<code>docker pull your-private-registry:5000/your-image</code>. This
helps us to make sure everything is working correctly.</p>
<h3 id="can-we-set-up-docker-to-use-multiple-registries">Can we set up
Docker to use multiple registries?</h3>
<p>Yes, we can set up Docker to use multiple registries. We can add
multiple registry mirrors in the <code>/etc/docker/daemon.json</code>
file. We do this by adding them under the “registry-mirrors” key like
this:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;registry-mirrors&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;http://registry1:5000&quot;</span><span class="ot">,</span> <span class="st">&quot;http://registry2:5000&quot;</span><span class="ot">]</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>After we make the changes, we restart the Docker service to apply the
settings. This lets Docker try to get images from the listed registries
in order.</p>
<p>For more knowledge about Docker, we can read articles like <a
href="https://bestonlinetutorial.com/docker/what-is-docker-and-why-should-you-use-it.html">What
is Docker and Why Should You Use It?</a> and <a
href="https://bestonlinetutorial.com/docker/how-do-you-push-and-pull-docker-images-from-docker-hub.html">How
to Push and Pull Docker Images from Docker Hub</a>.</p>

                        </div>

                    </div>
                    <!--//container-->
                </article>

            </div>
            <!--//main-wrapper-->

            <div id="footer-placeholder"></div>

            <!-- Javascript -->
            <script src="/assets/plugins/popper.min.js" defer></script>
            <script src="/assets/plugins/bootstrap/js/bootstrap.min.js" defer></script>
            <script src="/assets/fontawesome/js/all.min.js" defer></script>
        </body>

        </html>
            
            